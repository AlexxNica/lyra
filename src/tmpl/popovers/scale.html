<div id="binding-inspector" ng-init="types=['linear', 'ordinal', 'log', 'pow', 'sqrt', 'quantile', 'quantize', 'threshold', 'utc', 'time', 'ref']; fromTypes = ['field', 'values']; rangeTypes = ['spatial', 'colors', 'shapes', 'sizes', 'other']; axisTypes=['x', 'y'];" >
	<div class="bubble">
		<a class="close" vde-clear-bubbles>Close</a>
		<div class="bubble-inner">

		<h5>Scale Definition</h5>

	  <vde-property label="Name" type="text" item="activeScale" property="name" ng-model="activeScale.displayName" nodrop="1"></vde-property>

	  <fieldset id="type">
	  	<legend>Type</legend>

	  	<vde-property label="Type" type="select" options="types" item="activeScale" property="type" ng-model="activeScale.properties.type" nodrop="1"></vde-property>

	  	<div ng-show="activeScale.properties.type == 'ordinal'">
	  		<vde-property label="Uniform" type="checkbox" item="activeScale" property="points" ng-model="activeScale.properties.points"></vde-property>

	  		<vde-property label="Padding" type="range" min="0" max="1" step="0.05" item="activeScale" property="padding" ng-model="activeScale.properties.padding"></vde-property>
	  	</div>

	  	<div ng-show="activeScale.properties.type == 'time'" ng-init="nice = ['', 'second', 'minute', 'hour', 'day', 'week', 'month', 'year']">
	  		<vde-property label="Clamp" type="checkbox" item="activeScale" property="clamp" ng-model="activeScale.properties.clamp"></vde-property>

	  		<vde-property label="Nice" type="select" options="nice" item="activeScale" property="nice" ng-model="activeScale.properties.nice"></vde-property>
	  	</div>

			<div ng-show="['ordinal', 'time', 'utc', 'ref'].indexOf(activeScale.properties.type) == -1">
				<div ng-show="activeScale.properties.type == 'pow'"><vde-property label="Exponent" type="number" item="activeScale" property="exponent" ng-model="activeScale.properties.exponent"></vde-property></div>

				<vde-property transclude="1">
		  		<p><label><input type="checkbox" ng-model="activeScale.properties.clamp" onchange="window.setTimeout(function() { vde.Vis.parse()}, 1)" /> Clamp</label>

		  		<label><input type="checkbox" ng-model="activeScale.properties.nice" onchange="window.setTimeout(function() { vde.Vis.parse()}, 1)" /> Nice</label>

		  		<label><input type="checkbox" ng-model="activeScale.properties.zero" onchange="window.setTimeout(function() { vde.Vis.parse()}, 1)" /> Zero</label></p>
		  	</vde-property>
	  	</div>

	  </fieldset>

	  <fieldset id="domain">
	  	<legend>Domain</legend>

		  <vde-property label="From" type="radio" options="fromTypes" property="domainTypes.from" ng-model="activeScale.domainTypes.from" nodrop="1"></vde-property>

	  	<div ng-show="activeScale.domainTypes.from == 'field'"><vde-property label="Field" type="field" item="activeScale" property="field" field="activeScale.properties.field"></vde-property></div>

	  	<div ng-show="activeScale.domainTypes.from == 'values'">
	  		<vde-property label="Values" transclude="1">
	  			<vde-scale-values type="number" scale="activeScale" property="domainValues" ng-model="activeScale.domainValues"></vde-scale-values>
	  		</vde-property>
	  	</div>
	  </fieldset>

	  <fieldset id="range">
	  	<legend>Range</legend>

	  	<vde-property label="Type" type="select" options="rangeTypes" item="activeScale" property="rangeTypes.type" ng-model="activeScale.rangeTypes.type" nodrop="1" transclude="1">
	  		<p ng-show="activeScale.rangeTypes.type == 'spatial'">
	  			<vde-property label="" type="radio" options="axisTypes" item="activeScale" property="axisType" ng-model="activeScale.axisType" nodrop="1"></vde-property>
	  		</p>
	  	</vde-property>

	  	<vde-property label="From" type="radio" options="fromTypes" item="activeScale" property="rangeTypes.from" ng-model="activeScale.rangeTypes.from" nodrop="1"></vde-property>

	  	<div ng-show="activeScale.rangeTypes.from == 'field'">
	  		<vde-property label="Field" type="field" item="activeScale" property="range" field="activeScale.properties.range"></vde-property>

	  		<div class="hint" ng-show="['sizes', 'other'].indexOf(activeScale.rangeTypes.type) == -1">
			  	<p>These preset ranges are available; to use one, drag it to <code>field</code> above.</p>

			  	<div ng-show="activeScale.rangeTypes.type == 'spatial' && activeScale.axisType == 'x'"><vde-binding field="'width'" draggable="1"></vde-binding></div>
			  	<div ng-show="activeScale.rangeTypes.type == 'spatial' && activeScale.axisType == 'y'"><vde-binding field="'height'" draggable="1"></vde-binding></div>
			  	<div ng-show="activeScale.rangeTypes.type == 'shapes'"><vde-binding field="'shapes'" draggable="1"></vde-binding></div>
			  	<div ng-show="activeScale.rangeTypes.type == 'colors'"><vde-binding field="'category10'" draggable="1"></vde-binding></div>
			  	<div ng-show="activeScale.rangeTypes.type == 'colors'"><vde-binding field="'category20'" draggable="1"></vde-binding></div>

			  	<br clear="all" />
			  </div>
	  	</div>

	  	<div ng-show="activeScale.rangeTypes.from == 'values'" ng-init="shapes=['&#9724;', '&#9650;', '&#9660;', '&#11044;', '&#9830;', '&#43;'];" ng-switch on="activeScale.rangeTypes.type">
	  		<div ng-switch-when="colors">
	  			<vde-property label="Values" transclude="1">
	  				<vde-scale-values type="color" scale="activeScale" property="rangeValues" ng-model="activeScale.rangeValues"></vde-scale-values>
	  			</vde-property>
	  		</div>

	  		<div ng-switch-when="shapes">
	  			<vde-property label="Values" transclude="1">
	  				<vde-scale-values type="select" options="shapes" scale="activeScale" property="rangeValues" ng-model="activeScale.rangeValues"></vde-scale-values>
	  			</vde-property>
	  		</div>

	  		<div ng-switch-when="other">
	  			<vde-property label="Values" transclude="1">
	  				<vde-scale-values type="text" scale="activeScale" property="rangeValues" ng-model="activeScale.rangeValues"></vde-scale-values>
	  			</vde-property>
	  		</div>

	  		<div ng-switch-default>
	  			<vde-property label="Values" transclude="1">
	  				<vde-scale-values type="number" scale="activeScale" property="rangeValues" ng-model="activeScale.rangeValues"></vde-scale-values>
	  			</vde-property>
	  		</div>
	  	</div>

	  	<vde-property label="Reverse" type="checkbox" item="activeScale" property="reverse" ng-model="activeScale.properties.reverse"></vde-property>
	  </fieldset>
	</div></div>
</div>
