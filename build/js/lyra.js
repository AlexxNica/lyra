!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/build/",t(0)}([function(e,t,n){(function(e){"use strict";n(518),n(441),n(439),n(503);var t=n(54),r=n(18),i=n(225),o=n(501);t.subscribe(o.createStoreListener(t,r));var a=n(443),s=n(442),u=n(449);t.dispatch(a({width:600,height:600})),t.dispatch(s("cars")),t.dispatch(s("jobs")),t.dispatch(s("gapminder"));var l=new i("cars"),c=new i("jobs"),f=new i("gapminder"),p=r.pipeline("cars"),d=r.pipeline("jobs"),h=r.pipeline("gapminder");Promise.all([l.init({url:"/data/cars.json"}),c.init({url:"/data/jobs.json"}),f.init({url:"/data/gapminder.json"}),p._source.init({url:"/data/cars.json"}),d._source.init({url:"/data/jobs.json"}),h._source.init({url:"/data/gapminder.json"})]).then(function(){t.dispatch(u(1,l._id)),t.dispatch(u(2,c._id)),t.dispatch(u(3,f._id));n(417)}),e.model=r,e.store=t}).call(t,function(){return this}())},function(e,t,n){var r=n(10),i={version:"__VERSION__",load:n(98),read:n(145),type:n(55),Aggregator:n(143),groupby:n(239),bins:n(95),$bin:n(144).$bin,histogram:n(144).histogram,format:n(96),template:n(146),time:n(99)};r.extend(i,r),r.extend(i,n(237)),r.extend(i,n(66)),r.extend(i,n(56)),r.extend(i,n(246)),r.extend(i.format,n(241)),i.print={table:i.format.table,summary:i.format.summary},e.exports=i},function(e,t){function n(e){console.log("[Vega Log]",e)}function r(e){console.error("[Vega Err]",e)}function i(e,t){if(i.enable){var n=Function.prototype.bind.call(console.log,console),r={prevTime:Date.now()-o,stamp:e.stamp};e.add&&(r.add=e.add.length,r.mod=e.mod.length,r.rem=e.rem.length,r.reflow=!!e.reflow),n.apply(console,(t.push(JSON.stringify(r)),t)),o=Date.now()}}var o=Date.now();e.exports={log:n,error:r,debug:(i.enable=!1,i)}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r},function(e,t,n){e.exports={ChangeSet:n(62),Collector:n(119),DataSource:n(181),Dependencies:n(76),Graph:n(323),Node:n(77),Signal:n(182),Tuple:n(48),debug:n(2).debug}},function(e,t,n){"use strict";function r(e){return k.isString(e)||k.isNumber(e)||k.isBoolean(e)?String(e):b(e)}function i(e,t){return e.indexOf(t)>-1}function o(e,t){return e.filter(function(e){return!i(t,e)})}function a(e,t){return e.concat(o(t,e))}function s(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function u(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n}function l(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function c(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function f(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function p(e){return[].concat.apply([],e)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=h(e,t[r]);return e}function h(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=d(t[n].constructor===Array?[]:{},t[n]):d(e[n],t[n]));return e}function m(e,t){return M({min:e.min,max:e.max,maxbins:t})}function g(e,t){var n,r,i,o=[],a={};for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],n in a||(a[n]=1,o.push(e[r]));return o}function v(e){console.warn("[VL Warning]",e)}function y(e){console.error("[VL Error]",e)}function _(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}var b=n(261),x=n(10);t.keys=x.keys,t.extend=x.extend,t.duplicate=x.duplicate,t.isArray=x.isArray,t.vals=x.vals,t.truncate=x.truncate,t.toMap=x.toMap,t.isObject=x.isObject,t.isString=x.isString,t.isNumber=x.isNumber,t.isBoolean=x.isBoolean;var E=n(66);t.range=E.range;var w=n(28);t.has=w.has;var S=n(8);t.Channel=S.Channel;var k=n(10);t.hash=r,t.contains=i,t.without=o,t.union=a,t.forEach=s,t.reduce=u,t.map=l,t.any=c,t.all=f,t.flatten=p,t.mergeDeep=d;var M=n(95);t.getbins=m,t.unique=g,t.warning=v,t.error=y,t.differ=_},function(e,t,n){"use strict";var r=n(26),i=r;e.exports=i},function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var a=Object(o);for(var s in a)r.call(a,s)&&(n[s]=a[s])}}return n}e.exports=n},function(e,t,n){"use strict";function r(e,t){return!!i(e)[t]}function i(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.DETAIL:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0};case t.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case t.SHAPE:return{point:!0};case t.TEXT:return{text:!0};case t.PATH:return{line:!0}}return{}}function o(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.OPACITY:case t.LABEL:return{measure:!0,dimension:!0};case t.ROW:case t.COLUMN:case t.SHAPE:case t.DETAIL:return{measure:!1,dimension:!0};case t.SIZE:case t.TEXT:return{measure:!0,dimension:!1};case t.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function a(e){return!s.contains([t.DETAIL,t.PATH,t.TEXT,t.LABEL,t.ORDER],e)}var s=n(5);!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(t.Channel||(t.Channel={}));var u=t.Channel;t.X=u.X,t.Y=u.Y,t.ROW=u.ROW,t.COLUMN=u.COLUMN,t.SHAPE=u.SHAPE,t.SIZE=u.SIZE,t.COLOR=u.COLOR,t.TEXT=u.TEXT,t.DETAIL=u.DETAIL,t.LABEL=u.LABEL,t.PATH=u.PATH,t.ORDER=u.ORDER,t.OPACITY=u.OPACITY,t.CHANNELS=[t.X,t.Y,t.ROW,t.COLUMN,t.SIZE,t.SHAPE,t.COLOR,t.PATH,t.ORDER,t.OPACITY,t.TEXT,t.DETAIL,t.LABEL],t.UNIT_CHANNELS=s.without(t.CHANNELS,[t.ROW,t.COLUMN]),t.UNIT_SCALE_CHANNELS=s.without(t.UNIT_CHANNELS,[t.PATH,t.ORDER,t.DETAIL,t.TEXT,t.LABEL]),t.NONSPATIAL_CHANNELS=s.without(t.UNIT_CHANNELS,[t.X,t.Y]),t.NONSPATIAL_SCALE_CHANNELS=s.without(t.UNIT_SCALE_CHANNELS,[t.X,t.Y]),t.supportMark=r,t.getSupportedMark=i,t.getSupportedRole=o,t.hasScale=a},function(e,t,n){function r(e){e&&o.init.call(this,e)}var i=n(4),o=i.Node.prototype,a=i.Dependencies,s=n(134);r.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new s(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r["default"])}};var u=r.prototype=Object.create(o);u.constructor=r,u.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},u.transform=function(e){return e},u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(a.SIGNALS).reduce(function(t,n){return t+=e.signals[n]?1:0},0);return this.transform(e,t)},u.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},e.exports=r},function(e,t,n){(function(t){function n(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(u);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var i=e.exports,o="__name__";i.namedfunc=function(e,t){return t[o]=e,t},i.name=function(e){return null==e?null:e[o]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var a=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===a.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===a.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===a.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===a.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==a.call(e)},i.isDate=function(e){return"[object Date]"===a.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof t&&t.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var i,o,a,s,u;for(i=0,o=e.length;o>i;++i){if(a=e[i],s=a(n),u=a(r),u>s)return-1*t[i];if(s>u)return t[i]}return 0}},i.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:NaN},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var o=t(e),a=t(i);return a>o?-1:o>a?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var o=t-e.length;if(0>=o)return e;switch(r){case"left":return n(o,i)+e;case"middle":case"center":return n(Math.floor(o/2),i)+e+n(Math.ceil(o/2),i);default:return e+n(o,i)}},i.truncate=function(e,t,n,i,o){var a=e.length;if(t>=a)return e;o=void 0!==o?String(o):"…";var s=Math.max(0,t-o.length);switch(n){case"left":return o+(i?r(e,s,1):e.slice(a-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(i?r(e,u):e.slice(0,u))+o+(i?r(e,l,1):e.slice(a-l));default:return(i?r(e,s):e.slice(0,s))+o}};var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(t,n(142).Buffer)},function(e,t,n){"use strict";e.exports=n(278)},function(e,t,n){var r,i;!function(){function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function a(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function s(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function u(e){return null===e?NaN:+e}function l(e){return!isNaN(e)}function c(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function f(e){return e.length}function p(e){for(var t=1;e*t%1;)t*=10;return t}function d(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function h(){this._=Object.create(null)}function m(e){return(e+="")===Ma||e[0]===Ta?Ta+e:e}function g(e){return(e+="")[0]===Ta?e.slice(1):e}function v(e){return m(e)in this._}function y(e){return(e=m(e))in this._&&delete this._[e]}function _(){var e=[];for(var t in this._)e.push(g(t));return e}function b(){var e=0;for(var t in this._)++e;return e}function x(){for(var e in this._)return!1;return!0}function E(){this._=Object.create(null)}function w(e){return e}function S(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function k(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Aa.length;r>n;++n){var i=Aa[n]+t;if(i in e)return i}}function M(){}function T(){}function A(e){function t(){for(var t,r=n,i=-1,o=r.length;++i<o;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new h;return t.on=function(t,i){var o,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function C(){da.event.preventDefault()}function O(){for(var e,t=da.event;e=t.sourceEvent;)t=e;return t}function N(e){for(var t=new T,n=0,r=arguments.length;++n<r;)t[arguments[n]]=A(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=da.event;i.target=e,da.event=i,t[i.type].apply(n,r)}finally{da.event=o}}},t}function I(e){return Oa(e,Da),e}function L(e){return"function"==typeof e?e:function(){return Na(e,this)}}function D(e){return"function"==typeof e?e:function(){return Ia(e,this)}}function P(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=da.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?o:i}function R(e){return e.trim().replace(/\s+/g," ")}function U(e){return new RegExp("(?:^|\\s+)"+da.requote(e)+"(?:\\s+|$)","g")}function j(e){return(e+"").trim().split(/^|\s+/)}function z(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=j(e).map(q);var i=e.length;return"function"==typeof t?r:n}function q(e){var t=U(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",R(i+" "+e))):n.setAttribute("class",R(i.replace(t," ")))}}function F(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function o(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?o:i}function B(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function Y(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pa&&t.documentElement.namespaceURI===Pa?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=da.ns.qualify(e)).local?n:t}function H(){var e=this.parentNode;e&&e.removeChild(this)}function V(e){return{__data__:e}}function W(e){return function(){return La(this,e)}}function $(e){return arguments.length||(e=s),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function G(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,o=e[n],a=0,s=o.length;s>a;a++)(i=o[a])&&t(i,a,n);return e}function X(e){return Oa(e,Ua),e}function K(e){var t,n;return function(r,i,o){var a,s=e[o].update,u=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<u;);return a}}function J(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function i(){var i=u(t,ma(arguments));r.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}function o(){var t,n=new RegExp("^__on([^.]+)"+da.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),u=Z;s>0&&(e=e.slice(0,s));var l=ja.get(e);return l&&(e=l,u=Q),s?t?i:r:t?M:o}function Z(e,t){return function(n){var r=da.event;da.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{da.event=r}}}function Q(e,t){var n=Z(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function ee(e){var t=".dragsuppress-"+ ++qa,n="click"+t,r=da.select(a(e)).on("touchmove"+t,C).on("dragstart"+t,C).on("selectstart"+t,C);if(null==za&&(za="onselectstart"in e?!1:k(e.style,"userSelect")),za){var i=o(e).style,s=i[za];i[za]="none"}return function(e){if(r.on(t,null),za&&(i[za]=s),e){var o=function(){r.on(n,null)};r.on(n,function(){C(),o()},!0),setTimeout(o,0)}}}function te(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Fa){var i=a(e);if(i.scrollX||i.scrollY){n=da.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();Fa=!(o.f||o.e),n.remove()}}return Fa?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function ne(){return da.event.changedTouches[0].identifier}function re(e){return e>0?1:0>e?-1:0}function ie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function oe(e){return e>1?0:-1>e?Ha:Math.acos(e)}function ae(e){return e>1?$a:-1>e?-$a:Math.asin(e)}function se(e){return((e=Math.exp(e))-1/e)/2}function ue(e){return((e=Math.exp(e))+1/e)/2}function le(e){return((e=Math.exp(2*e))-1)/(e+1)}function ce(e){return(e=Math.sin(e/2))*e}function fe(){}function pe(e,t,n){return this instanceof pe?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof pe?new pe(e.h,e.s,e.l):Me(""+e,Te,pe):new pe(e,t,n)}function de(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(a-o)*e/60:180>e?a:240>e?o+(a-o)*(240-e)/60:o}function i(e){return Math.round(255*r(e))}var o,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,o=2*n-a,new Ee(i(e+120),i(e),i(e-120))}function he(e,t,n){return this instanceof he?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof he?new he(e.h,e.c,e.l):e instanceof ge?ye(e.l,e.a,e.b):ye((e=Ae((e=da.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new he(e,t,n)}function me(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ge(n,Math.cos(e*=Ga)*t,Math.sin(e)*t)}function ge(e,t,n){return this instanceof ge?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof ge?new ge(e.l,e.a,e.b):e instanceof he?me(e.h,e.c,e.l):Ae((e=Ee(e)).r,e.g,e.b):new ge(e,t,n)}function ve(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return i=_e(i)*os,r=_e(r)*as,o=_e(o)*ss,new Ee(xe(3.2404542*i-1.5371385*r-.4985314*o),xe(-.969266*i+1.8760108*r+.041556*o),xe(.0556434*i-.2040259*r+1.0572252*o))}function ye(e,t,n){return e>0?new he(Math.atan2(n,t)*Xa,Math.sqrt(t*t+n*n),e):new he(NaN,NaN,e)}function _e(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function be(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function xe(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Ee(e,t,n){return this instanceof Ee?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof Ee?new Ee(e.r,e.g,e.b):Me(""+e,Ee,de):new Ee(e,t,n)}function we(e){return new Ee(e>>16,e>>8&255,255&e)}function Se(e){return we(e)+""}function ke(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Me(e,t,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Oe(i[0]),Oe(i[1]),Oe(i[2]))}return(o=cs.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),t(a,s,u))}function Te(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new pe(r,i,u)}function Ae(e,t,n){e=Ce(e),t=Ce(t),n=Ce(n);var r=be((.4124564*e+.3575761*t+.1804375*n)/os),i=be((.2126729*e+.7151522*t+.072175*n)/as),o=be((.0193339*e+.119192*t+.9503041*n)/ss);return ge(116*i-16,500*(r-i),200*(i-o))}function Ce(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Oe(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ne(e){return"function"==typeof e?e:function(){return e}}function Ie(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Le(t,n,e,r)}}function Le(e,t,n,r){function i(){var e,t=u.status;if(!t&&Pe(u)||t>=200&&300>t||304===t){try{e=n.call(o,u)}catch(r){return void a.error.call(o,r)}a.load.call(o,e)}else a.error.call(o,u)}var o={},a=da.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(e){var t=da.event;da.event=e;try{a.progress.call(o,u)}finally{da.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(ma(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=t&&u.overrideMimeType&&u.overrideMimeType(t),null!=l&&(u.responseType=l),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},da.rebind(o,a,"on"),null==r?o:o.get(De(r))}function De(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Pe(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Re(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,o={c:e,t:i,n:null};return ps?ps.n=o:fs=o,ps=o,ds||(hs=clearTimeout(hs),ds=1,ms(Ue)),o}function Ue(){var e=je(),t=ze()-e;t>24?(isFinite(t)&&(clearTimeout(hs),hs=setTimeout(Ue,t)),ds=0):(ds=1,ms(Ue))}function je(){for(var e=Date.now(),t=fs;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function ze(){for(var e,t=fs,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:fs=t.n;return ps=e,n}function qe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Fe(e,t){var n=Math.pow(10,3*ka(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Be(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:w;return function(e){var n=vs.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],f=n[7],p=n[8],d=n[9],h=1,m="",g="",v=!1,y=!0;switch(p&&(p=+p.substring(1)),(l||"0"===r&&"="===a)&&(l=r="0",a="="),d){case"n":f=!0,d="g";break;case"%":h=100,g="%",d="f";break;case"p":h=100,g="%",d="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+d.toLowerCase());case"c":y=!1;case"d":v=!0,p=0;break;case"s":h=-1,d="r"}"$"===u&&(m=i[0],g=i[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=ys.get(d)||Ye;var _=l&&f;return function(e){var n=g;if(v&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>h){var u=da.formatPrefix(e,p);e=u.scale(e),n=u.symbol+g}else e*=h;e=d(e,p);var b,x,E=e.lastIndexOf(".");if(0>E){var w=y?e.lastIndexOf("e"):-1;0>w?(b=e,x=""):(b=e.substring(0,w),x=e.substring(w))}else b=e.substring(0,E),x=t+e.substring(E+1);!l&&f&&(b=o(b,1/0));var S=m.length+b.length+x.length+(_?0:i.length),k=c>S?new Array(S=c-S+1).join(r):"";return _&&(b=o(k+b,k.length?c-x.length:1/0)),i+=m,e=b+x,("<"===a?i+e+k:">"===a?k+i+e:"^"===a?k.substring(0,S>>=1)+i+e+k.substring(S):i+(_?e:k+e))+n}}}function Ye(e){return e+""}function He(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ve(e,t,n){function r(t){var n=e(t),r=o(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new bs(n-1)),1),n}function o(e,n){return t(e=new bs(+e),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;r>a;)s.push(new Date(+a)),t(a,1);return s}function s(e,t,n){try{bs=He;var r=new He;return r._=e,a(r,t,n)}finally{bs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var u=e.utc=We(e);return u.floor=u,u.round=We(r),u.ceil=We(i),u.offset=We(o),u.range=s,e}function We(e){return function(t,n){try{bs=He;var r=new He;return r._=t,e(r,n)._}finally{bs=Date}}}function $e(e){function t(e){function t(t){for(var n,i,o,a=[],s=-1,u=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Es[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=A[n])&&(n=o(t,null==i?"e"===n?" ":"0":i)),a.push(n),u=s+1);return a.push(e.slice(u,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&bs!==He,a=new(o?He:bs);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,o,a,s=0,u=t.length,l=n.length;u>s;){if(r>=l)return-1;if(i=t.charCodeAt(s++),37===i){if(a=t.charAt(s++),o=C[a in Es?t.charAt(s++):a],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){E.lastIndex=0;var r=E.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){M.lastIndex=0;var r=M.exec(t.slice(n));return r?(e.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,A.c.toString(),t,r)}function u(e,t,r){return n(e,A.x.toString(),t,r)}function l(e,t,r){return n(e,A.X.toString(),t,r)}function c(e,t,n){var r=_.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,p=e.date,d=e.time,h=e.periods,m=e.days,g=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{bs=He;var t=new bs;return t._=e,r(t)}finally{bs=Date}}var r=t(e);return n.parse=function(e){try{bs=He;var t=r.parse(e);return t&&t._}finally{bs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=dt;var _=da.map(),b=Xe(m),x=Ke(m),E=Xe(g),w=Ke(g),S=Xe(v),k=Ke(v),M=Xe(y),T=Ke(y);h.forEach(function(e,t){_.set(e.toLowerCase(),t)});var A={a:function(e){return g[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(f),d:function(e,t){return Ge(e.getDate(),t,2)},e:function(e,t){return Ge(e.getDate(),t,2)},H:function(e,t){return Ge(e.getHours(),t,2)},I:function(e,t){return Ge(e.getHours()%12||12,t,2)},j:function(e,t){return Ge(1+_s.dayOfYear(e),t,3)},L:function(e,t){return Ge(e.getMilliseconds(),t,3)},m:function(e,t){return Ge(e.getMonth()+1,t,2)},M:function(e,t){return Ge(e.getMinutes(),t,2)},p:function(e){return h[+(e.getHours()>=12)]},S:function(e,t){return Ge(e.getSeconds(),t,2)},U:function(e,t){return Ge(_s.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ge(_s.mondayOfYear(e),t,2)},x:t(p),X:t(d),y:function(e,t){return Ge(e.getFullYear()%100,t,2)},Y:function(e,t){return Ge(e.getFullYear()%1e4,t,4)},Z:ft,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:s,d:ot,e:ot,H:st,I:st,j:at,L:ct,m:it,M:ut,p:c,S:lt,U:Ze,w:Je,W:Qe,x:u,X:l,y:tt,Y:et,Z:nt,"%":pt};return t}function Ge(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(t)+i:i)}function Xe(e){return new RegExp("^(?:"+e.map(da.requote).join("|")+")","i")}function Ke(e){for(var t=new h,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Je(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ze(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Qe(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function et(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tt(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.y=rt(+r[0]),n+r[0].length):-1}function nt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function rt(e){return e+(e>68?1900:2e3)}function it(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ot(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function at(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function st(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ut(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function lt(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ct(e,t,n){ws.lastIndex=0;var r=ws.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ft(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=ka(t)/60|0,i=ka(t)%60;return n+Ge(r,"0",2)+Ge(i,"0",2)}function pt(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function dt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ht(){}function mt(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function gt(e,t){e&&As.hasOwnProperty(e.type)&&As[e.type](e,t)}function vt(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],
t.point(r[0],r[1],r[2]);t.lineEnd()}function yt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vt(e[n],t,1);t.polygonEnd()}function _t(){function e(e,t){e*=Ga,t=t*Ga/2+Ha/4;var n=e-r,a=n>=0?1:-1,s=a*n,u=Math.cos(t),l=Math.sin(t),c=o*l,f=i*u+c*Math.cos(s),p=c*a*Math.sin(s);Os.add(Math.atan2(p,f)),r=e,i=u,o=l}var t,n,r,i,o;Ns.point=function(a,s){Ns.point=e,r=(t=a)*Ga,i=Math.cos(s=(n=s)*Ga/2+Ha/4),o=Math.sin(s)},Ns.lineEnd=function(){e(t,n)}}function bt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function xt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Et(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function St(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Mt(e){return[Math.atan2(e[1],e[0]),ae(e[2])]}function Tt(e,t){return ka(e[0]-t[0])<Ba&&ka(e[1]-t[1])<Ba}function At(e,t){e*=Ga;var n=Math.cos(t*=Ga);Ct(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Ct(e,t,n){++Is,Ds+=(e-Ds)/Is,Ps+=(t-Ps)/Is,Rs+=(n-Rs)/Is}function Ot(){function e(e,i){e*=Ga;var o=Math.cos(i*=Ga),a=o*Math.cos(e),s=o*Math.sin(e),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*a-t*u)*l+(l=t*s-n*a)*l),t*a+n*s+r*u);Ls+=l,Us+=l*(t+(t=a)),js+=l*(n+(n=s)),zs+=l*(r+(r=u)),Ct(t,n,r)}var t,n,r;Ys.point=function(i,o){i*=Ga;var a=Math.cos(o*=Ga);t=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Ys.point=e,Ct(t,n,r)}}function Nt(){Ys.point=At}function It(){function e(e,t){e*=Ga;var n=Math.cos(t*=Ga),a=n*Math.cos(e),s=n*Math.sin(e),u=Math.sin(t),l=i*u-o*s,c=o*a-r*u,f=r*s-i*a,p=Math.sqrt(l*l+c*c+f*f),d=r*a+i*s+o*u,h=p&&-oe(d)/p,m=Math.atan2(p,d);qs+=h*l,Fs+=h*c,Bs+=h*f,Ls+=m,Us+=m*(r+(r=a)),js+=m*(i+(i=s)),zs+=m*(o+(o=u)),Ct(r,i,o)}var t,n,r,i,o;Ys.point=function(a,s){t=a,n=s,Ys.point=e,a*=Ga;var u=Math.cos(s*=Ga);r=u*Math.cos(a),i=u*Math.sin(a),o=Math.sin(s),Ct(r,i,o)},Ys.lineEnd=function(){e(t,n),Ys.lineEnd=Nt,Ys.point=At}}function Lt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Dt(){return!0}function Pt(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Tt(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var u=new Ut(n,e,null,!0),l=new Ut(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new Ut(r,e,null,!1),l=new Ut(r,null,u,!0),u.o=l,o.push(u),a.push(l)}}),a.sort(t),Rt(o),Rt(a),o.length){for(var s=0,u=n,l=a.length;l>s;++s)a[s].e=u=!u;for(var c,f,p=o[0];;){for(var d=p,h=!0;d.v;)if((d=d.n)===p)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(var s=0,l=c.length;l>s;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h){c=d.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Rt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Ut(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function jt(e,t,n,r){return function(i,o){function a(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);g.point(n[0],n[1])}function u(){y.point=s,g.lineStart()}function l(){y.point=a,g.lineEnd()}function c(e,t){m.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function f(){b.lineStart(),m=[]}function p(){c(m[0][0],m[0][1]),b.lineEnd();var e,t=b.clean(),n=_.buffer(),r=n.length;if(m.pop(),h.push(m),m=null,r)if(1&t){e=n[0];var i,r=e.length-1,a=-1;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),d.push(n.filter(zt))}var d,h,m,g=t(o),v=i.invert(r[0],r[1]),y={point:a,lineStart:u,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=p,d=[],h=[]},polygonEnd:function(){y.point=a,y.lineStart=u,y.lineEnd=l,d=da.merge(d);var e=Vt(v,h);d.length?(x||(o.polygonStart(),x=!0),Pt(d,Ft,e,n,o)):e&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=h=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_=qt(),b=t(_),x=!1;return y}}function zt(e){return e.length>1}function qt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:M,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ft(e,t){return((e=e.x)[0]<0?e[1]-$a-Ba:$a-e[1])-((t=t.x)[0]<0?t[1]-$a-Ba:$a-t[1])}function Bt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Ha:-Ha,u=ka(o-n);ka(u-Ha)<Ba?(e.point(n,r=(r+a)/2>0?$a:-$a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Ha&&(ka(n-i)<Ba&&(n-=i*Ba),ka(o-s)<Ba&&(o-=s*Ba),r=Yt(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Yt(e,t,n,r){var i,o,a=Math.sin(e-n);return ka(a)>Ba?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}function Ht(e,t,n,r){var i;if(null==e)i=n*$a,r.point(-Ha,i),r.point(0,i),r.point(Ha,i),r.point(Ha,0),r.point(Ha,-i),r.point(0,-i),r.point(-Ha,-i),r.point(-Ha,0),r.point(-Ha,i);else if(ka(e[0]-t[0])>Ba){var o=e[0]<t[0]?Ha:-Ha;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Vt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Os.reset();for(var s=0,u=t.length;u>s;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],p=f[0],d=f[1]/2+Ha/4,h=Math.sin(d),m=Math.cos(d),g=1;;){g===c&&(g=0),e=l[g];var v=e[0],y=e[1]/2+Ha/4,_=Math.sin(y),b=Math.cos(y),x=v-p,E=x>=0?1:-1,w=E*x,S=w>Ha,k=h*_;if(Os.add(Math.atan2(k*E*Math.sin(w),m*b+k*Math.cos(w))),o+=S?x+E*Va:x,S^p>=n^v>=n){var M=Et(bt(f),bt(e));kt(M);var T=Et(i,M);kt(T);var A=(S^x>=0?-1:1)*ae(T[2]);(r>A||r===A&&(M[0]||M[1]))&&(a+=S^x>=0?1:-1)}if(!g++)break;p=v,h=_,m=b,f=e}}return(-Ba>o||Ba>o&&-Ba>Os)^1&a}function Wt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,p){var d,h=[f,p],m=t(f,p),g=a?m?0:i(f,p):m?i(f+(0>f?Ha:-Ha),p):0;if(!n&&(l=u=m)&&e.lineStart(),m!==u&&(d=r(n,h),(Tt(n,d)||Tt(h,d))&&(h[0]+=Ba,h[1]+=Ba,m=t(h[0],h[1]))),m!==u)c=0,m?(e.lineStart(),d=r(h,n),e.point(d[0],d[1])):(d=r(n,h),e.point(d[0],d[1]),e.lineEnd()),n=d;else if(s&&n&&a^m){var v;g&o||!(v=r(h,n,!0))||(c=0,a?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||n&&Tt(n,h)||e.point(h[0],h[1]),n=h,u=m,o=g},lineEnd:function(){u&&e.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(e,t,n){var r=bt(e),i=bt(t),a=[1,0,0],s=Et(r,i),u=xt(s,s),l=s[0],c=u-l*l;if(!c)return!n&&e;var f=o*u/c,p=-o*l/c,d=Et(a,s),h=St(a,f),m=St(s,p);wt(h,m);var g=d,v=xt(h,g),y=xt(g,g),_=v*v-y*(xt(h,h)-1);if(!(0>_)){var b=Math.sqrt(_),x=St(g,(-v-b)/y);if(wt(x,h),x=Mt(x),!n)return x;var E,w=e[0],S=t[0],k=e[1],M=t[1];w>S&&(E=w,w=S,S=E);var T=S-w,A=ka(T-Ha)<Ba,C=A||Ba>T;if(!A&&k>M&&(E=k,k=M,M=E),C?A?k+M>0^x[1]<(ka(x[0]-w)<Ba?k:M):k<=x[1]&&x[1]<=M:T>Ha^(w<=x[0]&&x[0]<=S)){var O=St(g,(-v+b)/y);return wt(O,h),[x,Mt(O)]}}}function i(t,n){var r=a?e:Ha-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(e),a=o>0,s=ka(o)>Ba,u=bn(e,6*Ga);return jt(t,n,u,a?[0,-e]:[-Ha,e-Ha])}function $t(e,t,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,l=a.y,c=s.x,f=s.y,p=0,d=1,h=c-u,m=f-l;if(o=e-u,h||!(o>0)){if(o/=h,0>h){if(p>o)return;d>o&&(d=o)}else if(h>0){if(o>d)return;o>p&&(p=o)}if(o=n-u,h||!(0>o)){if(o/=h,0>h){if(o>d)return;o>p&&(p=o)}else if(h>0){if(p>o)return;d>o&&(d=o)}if(o=t-l,m||!(o>0)){if(o/=m,0>m){if(p>o)return;d>o&&(d=o)}else if(m>0){if(o>d)return;o>p&&(p=o)}if(o=r-l,m||!(0>o)){if(o/=m,0>m){if(o>d)return;o>p&&(p=o)}else if(m>0){if(p>o)return;d>o&&(d=o)}return p>0&&(i.a={x:u+p*h,y:l+p*m}),1>d&&(i.b={x:u+d*h,y:l+d*m}),i}}}}}}function Gt(e,t,n,r){function i(r,i){return ka(r[0]-e)<Ba?i>0?0:3:ka(r[0]-n)<Ba?i>0?2:1:ka(r[1]-t)<Ba?i>0?1:0:i>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function u(e){for(var t=0,n=g.length,r=e[1],i=0;n>i;++i)for(var o,a=1,s=g[i],u=s.length,l=s[0];u>a;++a)o=s[a],l[1]<=r?o[1]>r&&ie(l,o,e)>0&&++t:o[1]<=r&&ie(l,o,e)<0&&--t,l=o;return 0!==t}function l(o,s,u,l){var c=0,f=0;if(null==o||(c=i(o,u))!==(f=i(s,u))||a(o,s)<0^u>0){do l.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+u+4)%4)!==f)}else l.point(s[0],s[1])}function c(i,o){return i>=e&&n>=i&&o>=t&&r>=o}function f(e,t){c(e,t)&&s.point(e,t)}function p(){C.point=h,g&&g.push(v=[]),S=!0,w=!1,x=E=NaN}function d(){m&&(h(y,_),b&&w&&T.rejoin(),m.push(T.buffer())),C.point=f,w&&s.lineEnd()}function h(e,t){e=Math.max(-Vs,Math.min(Vs,e)),t=Math.max(-Vs,Math.min(Vs,t));var n=c(e,t);if(g&&v.push([e,t]),S)y=e,_=t,b=n,S=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&w)s.point(e,t);else{var r={a:{x:x,y:E},b:{x:e,y:t}};A(r)?(w||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(e,t),k=!1)}x=e,E=t,w=n}var m,g,v,y,_,b,x,E,w,S,k,M=s,T=qt(),A=$t(e,t,n,r),C={point:f,lineStart:p,lineEnd:d,polygonStart:function(){s=T,m=[],g=[],k=!0},polygonEnd:function(){s=M,m=da.merge(m);var t=u([e,r]),n=k&&t,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Pt(m,o,t,l,s),s.polygonEnd()),m=g=v=null}};return C}}function Xt(e){var t=0,n=Ha/3,r=pn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ha/180,n=e[1]*Ha/180):[t/Ha*180,n/Ha*180]},i}function Kt(e,t){function n(e,t){var n=Math.sqrt(o-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,ae((o-(e*e+n*n)*i*i)/(2*i))]},n}function Jt(){function e(e,t){$s+=i*e-r*t,r=e,i=t}var t,n,r,i;Zs.point=function(o,a){Zs.point=e,t=r=o,n=i=a},Zs.lineEnd=function(){e(t,n)}}function Zt(e,t){Gs>e&&(Gs=e),e>Ks&&(Ks=e),Xs>t&&(Xs=t),t>Js&&(Js=t)}function Qt(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function i(){a.push("Z")}var o=en(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return o=en(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function en(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tn(e,t){Ds+=e,Ps+=t,++Rs}function nn(){function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);Us+=a*(t+e)/2,js+=a*(n+r)/2,zs+=a,tn(t=e,n=r)}var t,n;eu.point=function(r,i){eu.point=e,tn(t=r,n=i)}}function rn(){eu.point=tn}function on(){function e(e,t){var n=e-r,o=t-i,a=Math.sqrt(n*n+o*o);Us+=a*(r+e)/2,js+=a*(i+t)/2,zs+=a,a=i*e-r*t,qs+=a*(r+e),Fs+=a*(i+t),Bs+=3*a,tn(r=e,i=t)}var t,n,r,i;eu.point=function(o,a){eu.point=e,tn(t=r=o,n=i=a)},eu.lineEnd=function(){e(t,n)}}function an(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,Va)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return a=e,s},result:M};return s}function sn(e){function t(e){return(s?r:n)(e)}function n(t){return cn(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){_=NaN,S.point=o,t.lineStart()}function o(n,r){var o=bt([n,r]),a=e(n,r);i(_,b,y,x,E,w,_=a[0],b=a[1],y=n,x=o[0],E=o[1],w=o[2],s,t),t.point(_,b)}function a(){S.point=n,t.lineEnd()}function u(){r(),S.point=l,S.lineEnd=c}function l(e,t){o(f=e,p=t),d=_,h=b,m=x,g=E,v=w,S.point=o}function c(){i(_,b,y,x,E,w,d,h,f,m,g,v,s,t),S.lineEnd=a,a()}var f,p,d,h,m,g,v,y,_,b,x,E,w,S={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=u},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,n,r,s,u,l,c,f,p,d,h,m,g,v){var y=c-t,_=f-n,b=y*y+_*_;if(b>4*o&&g--){var x=s+d,E=u+h,w=l+m,S=Math.sqrt(x*x+E*E+w*w),k=Math.asin(w/=S),M=ka(ka(w)-1)<Ba||ka(r-p)<Ba?(r+p)/2:Math.atan2(E,x),T=e(M,k),A=T[0],C=T[1],O=A-t,N=C-n,I=_*O-y*N;(I*I/b>o||ka((y*O+_*N)/b-.5)>.3||a>s*d+u*h+l*m)&&(i(t,n,r,s,u,l,A,C,M,x/=S,E/=S,w,g,v),v.point(A,C),i(A,C,M,x,E,w,c,f,p,d,h,m,g,v))}}var o=.5,a=Math.cos(30*Ga),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function un(e){var t=sn(function(t,n){return e([t*Xa,n*Xa])});return function(e){return dn(t(e))}}function ln(e){this.stream=e}function cn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function fn(e){return pn(function(){return e})()}function pn(e){function t(e){return e=s(e[0]*Ga,e[1]*Ga),[e[0]*p+u,l-e[1]*p]}function n(e){return e=s.invert((e[0]-u)/p,(l-e[1])/p),e&&[e[0]*Xa,e[1]*Xa]}function r(){s=Lt(a=gn(v,y,_),o);var e=o(m,g);return u=d-e[0]*p,l=h+e[1]*p,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,s,u,l,c,f=sn(function(e,t){return e=o(e,t),[e[0]*p+u,l-e[1]*p]}),p=150,d=480,h=250,m=0,g=0,v=0,y=0,_=0,b=Hs,x=w,E=null,S=null;return t.stream=function(e){return c&&(c.valid=!1),c=dn(b(a,f(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(b=null==e?(E=e,Hs):Wt((E=+e)*Ga),i()):E},t.clipExtent=function(e){return arguments.length?(S=e,x=e?Gt(e[0][0],e[0][1],e[1][0],e[1][1]):w,i()):S},t.scale=function(e){return arguments.length?(p=+e,r()):p},t.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],r()):[d,h]},t.center=function(e){return arguments.length?(m=e[0]%360*Ga,g=e[1]%360*Ga,r()):[m*Xa,g*Xa]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Ga,y=e[1]%360*Ga,_=e.length>2?e[2]%360*Ga:0,r()):[v*Xa,y*Xa,_*Xa]},da.rebind(t,f,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function dn(e){return cn(e,function(t,n){e.point(t*Ga,n*Ga)})}function hn(e,t){return[e,t]}function mn(e,t){return[e>Ha?e-Va:-Ha>e?e+Va:e,t]}function gn(e,t,n){return e?t||n?Lt(yn(e),_n(t,n)):yn(e):t||n?_n(t,n):mn}function vn(e){return function(t,n){return t+=e,[t>Ha?t-Va:-Ha>t?t+Va:t,n]}}function yn(e){var t=vn(e);return t.invert=vn(-e),t}function _n(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*r+s*i;return[Math.atan2(u*o-c*a,s*r-l*i),ae(c*o+u*a)]}var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*o-u*a;return[Math.atan2(u*o+l*a,s*r+c*i),ae(c*r-s*i)]},n}function bn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var u=a*t;null!=i?(i=xn(n,i),o=xn(n,o),(a>0?o>i:i>o)&&(i+=a*Va)):(i=e+a*Va,o=e-.5*u);for(var l,c=i;a>0?c>o:o>c;c-=u)s.point((l=Mt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function xn(e,t){var n=bt(t);n[0]-=e,kt(n);var r=oe(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ba)%(2*Math.PI)}function En(e,t,n){var r=da.range(e,t-Ba,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function wn(e,t,n){var r=da.range(e,t-Ba,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Sn(e){return e.source}function kn(e){return e.target}function Mn(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=a*Math.cos(n),f=a*Math.sin(n),p=2*Math.asin(Math.sqrt(ce(r-t)+i*a*ce(n-e))),d=1/Math.sin(p),h=p?function(e){var t=Math.sin(e*=p)*d,n=Math.sin(p-e)*d,r=n*u+t*c,i=n*l+t*f,a=n*o+t*s;return[Math.atan2(i,r)*Xa,Math.atan2(a,Math.sqrt(r*r+i*i))*Xa]}:function(){return[e*Xa,t*Xa]};return h.distance=p,h}function Tn(){function e(e,i){var o=Math.sin(i*=Ga),a=Math.cos(i),s=ka((e*=Ga)-t),u=Math.cos(s);tu+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*u)*s),n*o+r*a*u),t=e,n=o,r=a}var t,n,r;nu.point=function(i,o){t=i*Ga,n=Math.sin(o*=Ga),r=Math.cos(o),nu.point=e},nu.lineEnd=function(){nu.point=nu.lineEnd=M}}function An(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}function Cn(e,t){function n(e,t){a>0?-$a+Ba>t&&(t=-$a+Ba):t>$a-Ba&&(t=$a-Ba);var n=a/Math.pow(i(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Ha/4+e/2)},o=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),a=r*Math.pow(i(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,r=re(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/r,1/o))-$a]},n):Nn}function On(e,t){function n(e,t){var n=o-t;return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),o=r/i+e;return ka(i)<Ba?hn:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,o-re(i)*Math.sqrt(e*e+n*n)]},n)}function Nn(e,t){return[e,Math.log(Math.tan(Ha/4+t/2))]}function In(e){var t,n=fn(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Ha*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function Ln(e,t){return[Math.log(Math.tan(Ha/4+t/2)),-e]}function Dn(e){return e[0]}function Pn(e){return e[1]}function Rn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&ie(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Un(e,t){return e[0]-t[0]||e[1]-t[1]}function jn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function zn(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,p=(s*(u-l)-f*(i-o))/(f*a-s*c);return[i+p*a,u+p*c]}function qn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Fn(){ur(this),this.edge=this.site=this.circle=null}function Bn(e){var t=hu.pop()||new Fn;return t.site=e,t}function Yn(e){Qn(e),fu.remove(e),hu.push(e),ur(e)}function Hn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Yn(e);for(var u=o;u.circle&&ka(n-u.circle.x)<Ba&&ka(r-u.circle.cy)<Ba;)o=u.P,s.unshift(u),Yn(u),u=o;s.unshift(u),Qn(u);for(var l=a;l.circle&&ka(n-l.circle.x)<Ba&&ka(r-l.circle.cy)<Ba;)a=l.N,s.push(l),Yn(l),l=a;s.push(l),Qn(l);var c,f=s.length;for(c=1;f>c;++c)l=s[c],u=s[c-1],or(l.edge,u.site,l.site,i);u=s[0],l=s[f-1],l.edge=rr(u.site,l.site,null,i),Zn(u),Zn(l)}function Vn(e){for(var t,n,r,i,o=e.x,a=e.y,s=fu._;s;)if(r=Wn(s,a)-o,r>Ba)s=s.L;else{if(i=o-$n(s,a),!(i>Ba)){r>-Ba?(t=s.P,n=s):i>-Ba?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Bn(e);if(fu.insert(t,u),t||n){if(t===n)return Qn(t),n=Bn(t.site),fu.insert(u,n),u.edge=n.edge=rr(t.site,u.site),Zn(t),void Zn(n);if(!n)return void(u.edge=rr(t.site,u.site));Qn(t),Qn(n);var l=t.site,c=l.x,f=l.y,p=e.x-c,d=e.y-f,h=n.site,m=h.x-c,g=h.y-f,v=2*(p*g-d*m),y=p*p+d*d,_=m*m+g*g,b={x:(g*y-d*_)/v+c,y:(p*_-m*y)/v+f};or(n.edge,l,h,b),u.edge=rr(l,e,null,b),n.edge=rr(e,h,null,b),Zn(t),Zn(n)}}function Wn(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/o-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+r:(r+s)/2}function $n(e,t){var n=e.N;if(n)return Wn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Gn(e){this.site=e,this.edges=[]}function Xn(e){for(var t,n,r,i,o,a,s,u,l,c,f=e[0][0],p=e[1][0],d=e[0][1],h=e[1][1],m=cu,g=m.length;g--;)if(o=m[g],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)c=s[a].end(),r=c.x,i=c.y,l=s[++a%u].start(),t=l.x,n=l.y,(ka(r-t)>Ba||ka(i-n)>Ba)&&(s.splice(a,0,new ar(ir(o.site,c,ka(r-f)<Ba&&h-i>Ba?{x:f,y:ka(t-f)<Ba?n:h}:ka(i-h)<Ba&&p-r>Ba?{x:ka(n-h)<Ba?t:p,y:h}:ka(r-p)<Ba&&i-d>Ba?{x:p,y:ka(t-p)<Ba?n:d}:ka(i-d)<Ba&&r-f>Ba?{x:ka(n-d)<Ba?t:f,y:d}:null),o.site,null)),++u)}function Kn(e,t){return t.angle-e.angle}function Jn(){ur(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,f=o.y-s,p=2*(u*f-l*c);if(!(p>=-Ya)){var d=u*u+l*l,h=c*c+f*f,m=(f*d-l*h)/p,g=(u*h-c*d)/p,f=g+s,v=mu.pop()||new Jn;v.arc=e,v.site=i,v.x=m+a,v.y=f+Math.sqrt(m*m+g*g),v.cy=f,e.circle=v;for(var y=null,_=du._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}du.insert(y,v),y||(pu=v)}}}}function Qn(e){var t=e.circle;t&&(t.P||(pu=t.N),du.remove(t),mu.push(t),ur(t),e.circle=null)}function er(e){for(var t,n=lu,r=$t(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!tr(t,e)||!r(t)||ka(t.a.x-t.b.x)<Ba&&ka(t.a.y-t.b.y)<Ba)&&(t.a=t.b=null,n.splice(i,1))}function tr(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,p=c.x,d=c.y,h=f.x,m=f.y,g=(p+h)/2,v=(d+m)/2;if(m===d){if(a>g||g>=s)return;if(p>h){if(o){if(o.y>=l)return}else o={x:g,y:u};n={x:g,y:l}}else{if(o){if(o.y<u)return}else o={x:g,y:l};n={x:g,y:u}}}else if(r=(p-h)/(m-d),i=v-r*g,-1>r||r>1)if(p>h){if(o){if(o.y>=l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(m>d){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function nr(e,t){this.l=e,this.r=t,this.a=this.b=null}function rr(e,t,n,r){var i=new nr(e,t);return lu.push(i),n&&or(i,e,t,n),r&&or(i,t,e,r),cu[e.i].edges.push(new ar(i,e,t)),cu[t.i].edges.push(new ar(i,t,e)),i}function ir(e,t,n){var r=new nr(e,null);return r.a=t,r.b=n,lu.push(r),r}function or(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ar(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sr(){this._=null}function ur(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function lr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function cr(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fr(e){for(;e.L;)e=e.L;return e}function pr(e,t){var n,r,i,o=e.sort(dr).pop();for(lu=[],cu=new Array(e.length),fu=new sr,du=new sr;;)if(i=pu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(cu[o.i]=new Gn(o),Vn(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;Hn(i.arc)}t&&(er(t),Xn(t));var a={cells:cu,edges:lu};return fu=du=lu=cu=null,a}function dr(e,t){return t.y-e.y||t.x-e.x}function hr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function mr(e){return e.x}function gr(e){return e.y}function vr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yr(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=t.nodes;u[0]&&yr(e,u[0],n,r,a,s),u[1]&&yr(e,u[1],a,r,i,s),u[2]&&yr(e,u[2],n,s,a,o),u[3]&&yr(e,u[3],a,s,i,o)}}function _r(e,t,n,r,i,o,a){var s,u=1/0;return function l(e,c,f,p,d){if(!(c>o||f>a||r>p||i>d)){if(h=e.point){var h,m=t-e.x,g=n-e.y,v=m*m+g*g;if(u>v){var y=Math.sqrt(u=v);r=t-y,i=n-y,o=t+y,a=n+y,s=h}}for(var _=e.nodes,b=.5*(c+p),x=.5*(f+d),E=t>=b,w=n>=x,S=w<<1|E,k=S+4;k>S;++S)if(e=_[3&S])switch(3&S){case 0:l(e,c,f,b,x);break;case 1:l(e,b,f,p,x);break;case 2:l(e,c,x,b,d);break;case 3:l(e,b,x,p,d)}}}(e,r,i,o,a),s}function br(e,t){e=da.rgb(e),t=da.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+ke(Math.round(n+o*e))+ke(Math.round(r+a*e))+ke(Math.round(i+s*e))}}function xr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Sr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Er(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wr(e,t){var n,r,i,o=vu.lastIndex=yu.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=vu.exec(e))&&(r=yu.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Er(n,r)})),o=yu.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;t>r;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function Sr(e,t){for(var n,r=da.interpolators.length;--r>=0&&!(n=da.interpolators[r](e,t)););return n}function kr(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(Sr(e[n],t[n]));for(;o>n;++n)i[n]=e[n];for(;a>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function Mr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Tr(e){return function(t){return 1-e(1-t)}}function Ar(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Cr(e){return e*e}function Or(e){return e*e*e}function Nr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ir(e){return function(t){return Math.pow(t,e)}}function Lr(e){return 1-Math.cos(e*$a)}function Dr(e){return Math.pow(2,10*(e-1))}function Pr(e){return 1-Math.sqrt(1-e*e)}function Rr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Va*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Va/t)}}function Ur(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function jr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function zr(e,t){e=da.hcl(e),t=da.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return me(n+o*e,r+a*e,i+s*e)+""}}function qr(e,t){e=da.hsl(e),t=da.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return de(n+o*e,r+a*e,i+s*e)+""}}function Fr(e,t){e=da.lab(e),t=da.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return ve(n+o*e,r+a*e,i+s*e)+""}}function Br(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Yr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Vr(t),i=Hr(t,n),o=Vr(Wr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Xa,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Xa:0}function Hr(e,t){return e[0]*t[0]+e[1]*t[1]}function Vr(e){var t=Math.sqrt(Hr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Wr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function $r(e){return e.length?e.pop()+",":""}function Gr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Er(e[0],t[0])},{i:i-2,x:Er(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Xr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push($r(n)+"rotate(",null,")")-2,x:Er(e,t)})):t&&n.push($r(n)+"rotate("+t+")")}function Kr(e,t,n,r){e!==t?r.push({i:n.push($r(n)+"skewX(",null,")")-2,x:Er(e,t)}):t&&n.push($r(n)+"skewX("+t+")")}function Jr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push($r(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Er(e[0],t[0])},{i:i-2,x:Er(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push($r(n)+"scale("+t+")")}function Zr(e,t){var n=[],r=[];return e=da.transform(e),t=da.transform(t),Gr(e.translate,t.translate,n,r),Xr(e.rotate,t.rotate,n,r),Kr(e.skew,t.skew,n,r),Jr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Qr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function ei(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function ti(e){for(var t=e.source,n=e.target,r=ri(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function ni(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ri(e,t){if(e===t)return e;for(var n=ni(e),r=ni(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function ii(e){e.fixed|=2}function oi(e){e.fixed&=-7}function ai(e){e.fixed|=4,e.px=e.x,e.py=e.y}function si(e){e.fixed&=-5}function ui(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(ui(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function li(e,t){return da.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=mi,e}function ci(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function fi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function pi(e){return e.children}function di(e){return e.value}function hi(e,t){return t.value-e.value}function mi(e){return da.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function gi(e){return e.x}function vi(e){return e.y}function yi(e,t,n){e.y0=t,e.y=n}function _i(e){return da.range(e.length)}function bi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function xi(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Ei(e){return e.reduce(wi,0)}function wi(e,t){return e+t[1]}function Si(e,t){return ki(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ki(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function Mi(e){return[da.min(e),da.max(e)]}function Ti(e,t){return e.value-t.value}function Ai(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ci(e,t){e._pack_next=t,t._pack_prev=e}function Oi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Ni(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),p=Math.min(e.y-e.r,p),d=Math.max(e.y+e.r,d)}if((n=e.children)&&(l=n.length)){var n,r,i,o,a,s,u,l,c=1/0,f=-(1/0),p=1/0,d=-(1/0);if(n.forEach(Ii),r=n[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=n[1],i.x=i.r,i.y=0,t(i),l>2))for(o=n[2],Pi(r,i,o),t(o),Ai(r,o),r._pack_prev=o,Ai(o,i),i=r._pack_next,a=3;l>a;a++){Pi(r,i,o=n[a]);var h=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(Oi(s,o)){h=1;break}if(1==h)for(u=r._pack_prev;u!==s._pack_prev&&!Oi(u,o);u=u._pack_prev,g++);h?(g>m||m==g&&i.r<r.r?Ci(r,i=s):Ci(r=u,i),a--):(Ai(r,o),i=o,t(o))}var v=(c+f)/2,y=(p+d)/2,_=0;for(a=0;l>a;a++)o=n[a],o.x-=v,o.y-=y,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=_,n.forEach(Li)}}function Ii(e){e._pack_next=e._pack_prev=e}function Li(e){delete e._pack_next,delete e._pack_prev}function Di(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Di(i[o],t,n,r)}function Pi(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o;a*=a,r*=r;var u=.5+(r-a)/(2*s),l=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+u*i+l*o,n.y=e.y+u*o-l*i}else n.x=e.x+r,n.y=e.y}function Ri(e,t){return e.parent==t.parent?1:2}function Ui(e){var t=e.children;return t.length?t[0]:e.t;
}function ji(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function zi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function qi(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Fi(e,t,n){return e.a.parent===t.parent?e.a:n}function Bi(e){return 1+da.max(e,function(e){return e.y})}function Yi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Hi(e){var t=e.children;return t&&t.length?Hi(t[0]):e}function Vi(e){var t,n=e.children;return n&&(t=n.length)?Vi(n[t-1]):e}function Wi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function $i(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Gi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Xi(e){return e.rangeExtent?e.rangeExtent():Gi(e.range())}function Ki(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Ji(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Zi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Cu}function Qi(e,t,n,r){var i=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=da.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function eo(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Qi:Ki,u=r?ei:Qr;return a=i(e,t,u,n),s=i(t,e,u,Sr),o}function o(e){return a(e)}var a,s;return o.invert=function(e){return s(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Br)},o.clamp=function(e){return arguments.length?(r=e,i()):r},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return io(e,t)},o.tickFormat=function(t,n){return oo(e,t,n)},o.nice=function(t){return no(e,t),i()},o.copy=function(){return eo(e,t,n,r)},i()}function to(e,t){return da.rebind(e,t,"range","rangeRound","interpolate","clamp")}function no(e,t){return Ji(e,Zi(ro(e,t)[2])),Ji(e,Zi(ro(e,t)[2])),e}function ro(e,t){null==t&&(t=10);var n=Gi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function io(e,t){return da.range.apply(da,ro(e,t))}function oo(e,t,n){var r=ro(e,t);if(n){var i=vs.exec(n);if(i.shift(),"s"===i[8]){var o=da.formatPrefix(Math.max(ka(r[0]),ka(r[1])));return i[7]||(i[7]="."+ao(o.scale(r[2]))),i[8]="f",n=da.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+so(i[8],r)),n=i.join("")}else n=",."+ao(r[2])+"f";return da.format(n)}function ao(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function so(e,t){var n=ao(t[2]);return e in Ou?Math.abs(n-ao(Math.max(ka(t[0]),ka(t[1]))))+ +("e"!==e):n-2*("%"===e)}function uo(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Ji(r.map(i),n?Math:Iu);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=Gi(r),a=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var p=1;f>p;p++)a.push(o(l)*p);a.push(o(l))}else for(a.push(o(l));l++<c;)for(var p=f-1;p>0;p--)a.push(o(l)*p);for(l=0;a[l]<s;l++);for(c=a.length;a[c-1]>u;c--);a=a.slice(l,c)}return a},a.tickFormat=function(e,n){if(!arguments.length)return Nu;arguments.length<2?n=Nu:"function"!=typeof n&&(n=da.format(n));var r=Math.max(1,t*e/a.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return t-.5>a*t&&(a*=t),r>=a?n(e):""}},a.copy=function(){return uo(e.copy(),t,n,r)},to(a,e)}function lo(e,t,n){function r(t){return e(i(t))}var i=co(t),o=co(1/t);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return io(n,e)},r.tickFormat=function(e,t){return oo(n,e,t)},r.nice=function(e){return r.domain(no(n,e))},r.exponent=function(a){return arguments.length?(i=co(t=a),o=co(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return lo(e.copy(),t,n)},to(r,e)}function co(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function fo(e,t){function n(n){return o[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%o.length]}function r(t,n){return da.range(e.length).map(function(e){return t+n*e})}var i,o,a;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new h;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,a=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+s);return o=r(u+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+s)|0;return o=r(u+Math.round(c*s/2+(l-u-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],p=(f-c)/(e.length-s+2*u);return o=r(c+p*u,p),l&&o.reverse(),a=p*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],p=Math.floor((f-c)/(e.length-s+2*u));return o=r(c+Math.round((f-c-(e.length-s)*p)/2),p),l&&o.reverse(),a=Math.round(p*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Gi(t.a[0])},n.copy=function(){return fo(e,t)},n.domain(e)}function po(e,t){function n(){var n=0,o=t.length;for(i=[];++n<o;)i[n-1]=da.quantile(e,n/o);return r}function r(e){return isNaN(e=+e)?void 0:t[da.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.map(u).filter(l).sort(s),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return po(e,t)},n()}function ho(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/o+e,[t,t+1/o]},r.copy=function(){return ho(e,t,n)},i()}function mo(e,t){function n(n){return n>=n?t[da.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return mo(e,t)},n}function go(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return io(e,t)},t.tickFormat=function(t,n){return oo(e,t,n)},t.copy=function(){return go(e)},t}function vo(){return 0}function yo(e){return e.innerRadius}function _o(e){return e.outerRadius}function bo(e){return e.startAngle}function xo(e){return e.endAngle}function Eo(e){return e&&e.padAngle}function wo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function So(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=e[0]+u,f=e[1]+l,p=t[0]+u,d=t[1]+l,h=(c+p)/2,m=(f+d)/2,g=p-c,v=d-f,y=g*g+v*v,_=n-r,b=c*d-p*f,x=(0>v?-1:1)*Math.sqrt(Math.max(0,_*_*y-b*b)),E=(b*v-g*x)/y,w=(-b*g-v*x)/y,S=(b*v+g*x)/y,k=(-b*g+v*x)/y,M=E-h,T=w-m,A=S-h,C=k-m;return M*M+T*T>A*A+C*C&&(E=S,w=k),[[E-u,w-l],[E*n/_,w*n/_]]}function ko(e){function t(t){function a(){l.push("M",o(e(c),s))}for(var u,l=[],c=[],f=-1,p=t.length,d=Ne(n),h=Ne(r);++f<p;)i.call(this,u=t[f],f)?c.push([+d.call(this,u,f),+h.call(this,u,f)]):c.length&&(a(),c=[]);return c.length&&a(),l.length?l.join(""):null}var n=Dn,r=Pn,i=Dt,o=Mo,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=ju.get(e)||Mo).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function Mo(e){return e.length>1?e.join("L"):e+"Z"}function To(e){return e.join("L")+"Z"}function Ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Oo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function No(e,t){return e.length<4?Mo(e):e[1]+Do(e.slice(1,-1),Po(e,t))}function Io(e,t){return e.length<3?To(e):e[0]+Do((e.push(e[0]),e),Po([e[e.length-2]].concat(e,[e[1]]),t))}function Lo(e,t){return e.length<3?Mo(e):e[0]+Do(e,Po(e,t))}function Do(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Mo(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],u=2),t.length>1){s=t[1],o=e[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<t.length;l++,u++)o=e[u],s=t[l],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Po(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,u=e.length;++s<u;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Ro(e){if(e.length<3)return Mo(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",qo(Fu,a),",",qo(Fu,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Fo(u,a,s);return e.pop(),u.push("L",r),u.join("")}function Uo(e){if(e.length<4)return Mo(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(qo(Fu,o)+","+qo(Fu,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Fo(n,o,a);return n.join("")}function jo(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[qo(Fu,a),",",qo(Fu,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Fo(t,a,s);return t.join("")}function zo(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,u=e[n][1]-a,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*u);return Ro(e)}function qo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Fo(e,t,n){e.push("C",qo(zu,t),",",qo(zu,n),",",qo(qu,t),",",qo(qu,n),",",qo(Fu,t),",",qo(Fu,n))}function Bo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Yo(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Bo(i,o);++t<n;)r[t]=(a+(a=Bo(i=o,o=e[t+1])))/2;return r[t]=a,r}function Ho(e){for(var t,n,r,i,o=[],a=Yo(e),s=-1,u=e.length-1;++s<u;)t=Bo(e[s],e[s+1]),ka(t)<Ba?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Vo(e){return e.length<3?Mo(e):e[0]+Do(e,Ho(e))}function Wo(e){for(var t,n,r,i=-1,o=e.length;++i<o;)t=e[i],n=t[0],r=t[1]-$a,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function $o(e){function t(t){function u(){m.push("M",s(e(v),f),c,l(e(g.reverse()),f),"Z")}for(var p,d,h,m=[],g=[],v=[],y=-1,_=t.length,b=Ne(n),x=Ne(i),E=n===r?function(){return d}:Ne(r),w=i===o?function(){return h}:Ne(o);++y<_;)a.call(this,p=t[y],y)?(g.push([d=+b.call(this,p,y),h=+x.call(this,p,y)]),v.push([+E.call(this,p,y),+w.call(this,p,y)])):g.length&&(u(),g=[],v=[]);return g.length&&u(),m.length?m.join(""):null}var n=Dn,r=Dn,i=0,o=Pn,a=Dt,s=Mo,u=s.key,l=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=o=e,t):o},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(u="function"==typeof e?s=e:(s=ju.get(e)||Mo).key,l=s.reverse||s,c=s.closed?"M":"L",t):u},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Go(e){return e.radius}function Xo(e){return[e.x,e.y]}function Ko(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-$a;return[n*Math.cos(r),n*Math.sin(r)]}}function Jo(){return 64}function Zo(){return"circle"}function Qo(e){var t=Math.sqrt(e/Ha);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function ea(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ta(e,t,n){return Oa(e,Gu),e.namespace=t,e.id=n,e}function na(e,t,n,r){var i=e.id,o=e.namespace;return G(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function ra(e){return null==e&&(e=""),function(){this.textContent=e}}function ia(e){return null==e?"__transition__":"__transition_"+e+"__"}function oa(e,t,n,r,i){function o(e){var t=m.delay;return l.t=t+u,e>=t?a(e-t):void(l.c=a)}function a(n){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(e,e.__data__,o.index));for(var a in d)if(r>+a){var h=d[a];h.timer.c=null,h.timer.t=NaN,--d.count,delete d[a]}l.c=s,Re(function(){return l.c&&s(n||1)&&(l.c=null,l.t=NaN),1},0,u),d.active=r,m.event&&m.event.start.call(e,e.__data__,t),p=[],m.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&p.push(r)}),f=m.ease,c=m.duration}function s(i){for(var o=i/c,a=f(o),s=p.length;s>0;)p[--s].call(e,a);return o>=1?(m.event&&m.event.end.call(e,e.__data__,t),--d.count?delete d[r]:delete e[n],1):void 0}var u,l,c,f,p,d=e[n]||(e[n]={active:0,count:0}),m=d[r];m||(u=i.time,l=Re(o,0,u),m=d[r]={tween:new h,time:u,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++d.count)}function aa(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function sa(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function ua(e){return e.toISOString()}function la(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,o=da.bisect(rl,i);return o==rl.length?[t.year,ro(e.map(function(e){return e/31536e6}),n)[2]]:o?t[i/rl[o-1]<rl[o]/i?o-1:o]:[al,ro(e,n)[2]]}return r.invert=function(t){return ca(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(ca)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,ca(+n+1),t).length}var o=r.domain(),a=Gi(o),s=null==e?i(a,10):"number"==typeof e&&i(a,e);return s&&(e=s[0],t=s[1]),r.domain(Ji(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=ca(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=ca(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Gi(r.domain()),o=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],ca(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return la(e.copy(),t,n)},to(r,e)}function ca(e){return new Date(e)}function fa(e){return JSON.parse(e.responseText)}function pa(e){var t=ga.createRange();return t.selectNode(ga.body),t.createContextualFragment(e.responseText)}var da={version:"3.5.17"},ha=[].slice,ma=function(e){return ha.call(e)},ga=this.document;if(ga)try{ma(ga.documentElement.childNodes)[0].nodeType}catch(va){ma=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),ga)try{ga.createElement("DIV").style.setProperty("opacity",0,"")}catch(ya){var _a=this.Element.prototype,ba=_a.setAttribute,xa=_a.setAttributeNS,Ea=this.CSSStyleDeclaration.prototype,wa=Ea.setProperty;_a.setAttribute=function(e,t){ba.call(this,e,t+"")},_a.setAttributeNS=function(e,t,n){xa.call(this,e,t,n+"")},Ea.setProperty=function(e,t,n){wa.call(this,e,t+"",n)}}da.ascending=s,da.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},da.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},da.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},da.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},da.sum=function(e,t){var n,r=0,i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)l(n=+e[o])&&(r+=n);else for(;++o<i;)l(n=+t.call(e,e[o],o))&&(r+=n);return r},da.mean=function(e,t){var n,r=0,i=e.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)l(n=u(e[o]))?r+=n:--a;else for(;++o<i;)l(n=u(t.call(e,e[o],o)))?r+=n:--a;return a?r/a:void 0},da.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},da.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)l(n=u(e[o]))&&r.push(n);else for(;++o<i;)l(n=u(t.call(e,e[o],o)))&&r.push(n);return r.length?da.quantile(r.sort(s),.5):void 0},da.variance=function(e,t){var n,r,i=e.length,o=0,a=0,s=-1,c=0;if(1===arguments.length)for(;++s<i;)l(n=u(e[s]))&&(r=n-o,o+=r/++c,a+=r*(n-o));else for(;++s<i;)l(n=u(t.call(e,e[s],s)))&&(r=n-o,o+=r/++c,a+=r*(n-o));return c>1?a/(c-1):void 0},da.deviation=function(){var e=da.variance.apply(this,arguments);return e?Math.sqrt(e):e};var Sa=c(s);da.bisectLeft=Sa.left,da.bisect=da.bisectRight=Sa.right,da.bisector=function(e){return c(1===e.length?function(t,n){return s(e(t),n)}:e)},da.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,2>o&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},da.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},da.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],o=new Array(0>r?0:r);r>n;)o[n]=[t=i,i=e[++n]];return o},da.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=da.min(e,f),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r},da.zip=function(){return da.transpose(arguments)},da.keys=function(e){var t=[];for(var n in e)t.push(n);return t},da.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},da.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},da.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--a]=r[t];return n};var ka=Math.abs;da.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],o=p(ka(n)),a=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},da.map=function(e,t){var n=new h;if(e instanceof h)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var Ma="__proto__",Ta="\x00";d(h,{has:v,get:function(e){return this._[m(e)]},set:function(e,t){return this._[m(e)]=t},remove:y,keys:_,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:g(t),value:this._[t]});return e},size:b,empty:x,forEach:function(e){for(var t in this._)e.call(this,g(t),this._[t])}}),da.nest=function(){function e(t,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var u,l,c,f,p=-1,d=a.length,m=o[s++],g=new h;++p<d;)(f=g.get(u=m(l=a[p])))?f.push(l):g.set(u,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,s))}):(l={},c=function(n,r){l[n]=e(t,r,s)}),g.forEach(c),l}function t(e,n){if(n>=o.length)return e;var r=[],i=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(da.map,n,0),0)},i.key=function(e){return o.push(e),i},i.sortKeys=function(e){return a[o.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},da.set=function(e){var t=new E;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},d(E,{has:v,add:function(e){return this._[m(e+="")]=!0,e},remove:y,values:_,size:b,empty:x,forEach:function(e){for(var t in this._)e.call(this,g(t))}}),da.behavior={},da.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=S(e,t,t[n]);return e};var Aa=["webkit","ms","moz","Moz","o","O"];da.dispatch=function(){for(var e=new T,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=A(e);return e},T.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},da.event=null,da.requote=function(e){return e.replace(Ca,"\\$&")};var Ca=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Oa={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Na=function(e,t){return t.querySelector(e)},Ia=function(e,t){return t.querySelectorAll(e)},La=function(e,t){var n=e.matches||e[k(e,"matchesSelector")];return(La=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Na=function(e,t){return Sizzle(e,t)[0]||null},Ia=Sizzle,La=Sizzle.matchesSelector),da.selection=function(){return da.select(ga.documentElement)};var Da=da.selection.prototype=[];Da.select=function(e){var t,n,r,i,o=[];e=L(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return I(o)},Da.selectAll=function(e){var t,n,r=[];e=D(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(n=a[s])&&(r.push(t=ma(e.call(n,n.__data__,s,i))),t.parentNode=n);return I(r)};var Pa="http://www.w3.org/1999/xhtml",Ra={svg:"http://www.w3.org/2000/svg",xhtml:Pa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};da.ns={prefix:Ra,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ra.hasOwnProperty(n)?{space:Ra[n],local:e}:e}},Da.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=da.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},Da.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=j(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!U(e[i]).test(t))return!1;return!0}for(t in e)this.each(z(t,e[t]));return this}return this.each(z(e,t))},Da.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(F(n,e[n],t));return this}if(2>r){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(F(e,t,n))},Da.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(B(t,e[t]));return this}return this.each(B(e,t))},Da.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Da.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Da.append=function(e){return e=Y(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Da.insert=function(e,t){return e=Y(e),t=L(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Da.remove=function(){return this.each(H)},Da.data=function(e,t){function n(e,n){var r,i,o,a=e.length,c=n.length,f=Math.min(a,c),p=new Array(c),d=new Array(c),m=new Array(a);if(t){var g,v=new h,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(v.has(g=t.call(i,i.__data__,r))?m[r]=i:v.set(g,i),y[r]=g);for(r=-1;++r<c;)(i=v.get(g=t.call(n,o=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=o):d[r]=V(o),v.set(g,!0);for(r=-1;++r<a;)r in y&&v.get(y[r])!==!0&&(m[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],o=n[r],i?(i.__data__=o,p[r]=i):d[r]=V(o);for(;c>r;++r)d[r]=V(n[r]);for(;a>r;++r)m[r]=e[r]}d.update=p,d.parentNode=p.parentNode=m.parentNode=e.parentNode,s.push(d),u.push(p),l.push(m)}var r,i,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(e[o]=i.__data__);return e}var s=X([]),u=I([]),l=I([]);if("function"==typeof e)for(;++o<a;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],e);return u.enter=function(){return s},u.exit=function(){return l},u},Da.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Da.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=W(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return I(i)},Da.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Da.sort=function(e){e=$.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Da.each=function(e){return G(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Da.call=function(e){var t=ma(arguments);return e.apply(t[0]=this,t),this},Da.empty=function(){return!this.node()},Da.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Da.size=function(){var e=0;return G(this,function(){++e}),e};var Ua=[];da.selection.enter=X,da.selection.enter.prototype=Ua,Ua.append=Da.append,Ua.empty=Da.empty,Ua.node=Da.node,Ua.call=Da.call,Ua.size=Da.size,Ua.select=function(e){for(var t,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(t.push(r[l]=n=e.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):t.push(null)}return I(a)},Ua.insert=function(e,t){return arguments.length<2&&(t=K(this)),Da.insert.call(this,e,t)},da.select=function(e){var t;return"string"==typeof e?(t=[Na(e,ga)],t.parentNode=ga.documentElement):(t=[e],t.parentNode=o(e)),I([t])},da.selectAll=function(e){var t;return"string"==typeof e?(t=ma(Ia(e,ga)),t.parentNode=ga.documentElement):(t=ma(e),t.parentNode=null),I([t])},Da.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(J(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(J(e,t,n))};var ja=da.map({mouseenter:"mouseover",mouseleave:"mouseout"});ga&&ja.forEach(function(e){"on"+e in ga&&ja.remove(e)});var za,qa=0;da.mouse=function(e){return te(e,O())};var Fa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;da.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=O().changedTouches),t)for(var r,i=0,o=t.length;o>i;++i)if((r=t[i]).identifier===n)return te(e,r)},da.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function t(e,t,i,o,a){return function(){function s(){var e,n,r=t(p,m);r&&(e=r[0]-_[0],n=r[1]-_[1],h|=e|n,_=r,d({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:n}))}function u(){t(p,m)&&(v.on(o+g,null).on(a+g,null),y(h),d({type:"dragend"}))}var l,c=this,f=da.event.target.correspondingElement||da.event.target,p=c.parentNode,d=n.of(c,arguments),h=0,m=e(),g=".drag"+(null==m?"":"-"+m),v=da.select(i(f)).on(o+g,s).on(a+g,u),y=ee(f),_=t(p,m);r?(l=r.apply(c,arguments),l=[l.x-_[0],l.y-_[1]]):l=[0,0],d({type:"dragstart"})}}var n=N(e,"drag","dragstart","dragend"),r=null,i=t(M,da.mouse,a,"mousemove","mouseup"),o=t(ne,da.touch,w,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},da.rebind(e,n,"on")},da.touches=function(e,t){return arguments.length<2&&(t=O().touches),t?ma(t).map(function(t){var n=te(e,t);return n.identifier=t.identifier,n}):[]};var Ba=1e-6,Ya=Ba*Ba,Ha=Math.PI,Va=2*Ha,Wa=Va-Ba,$a=Ha/2,Ga=Ha/180,Xa=180/Ha,Ka=Math.SQRT2,Ja=2,Za=4;da.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],u=t[1],l=t[2],c=s-i,f=u-o,p=c*c+f*f;if(Ya>p)r=Math.log(l/a)/Ka,n=function(e){return[i+e*c,o+e*f,a*Math.exp(Ka*e*r)]};else{var d=Math.sqrt(p),h=(l*l-a*a+Za*p)/(2*a*Ja*d),m=(l*l-a*a-Za*p)/(2*l*Ja*d),g=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Ka,n=function(e){var t=e*r,n=ue(g),s=a/(Ja*d)*(n*le(Ka*t+g)-se(g));return[i+s*c,o+s*f,a*n/ue(Ka*t+g)]}}return n.duration=1e3*r,n},da.behavior.zoom=function(){function e(e){e.on(O,f).on(es+".zoom",d).on("dblclick.zoom",h).on(D,p)}function t(e){return[(e[0]-S.x)/S.k,(e[1]-S.y)/S.k]}function n(e){return[e[0]*S.k+S.x,e[1]*S.k+S.y]}function r(e){S.k=Math.max(M[0],Math.min(M[1],e))}function i(e,t){t=n(t),S.x+=e[0]-t[0],S.y+=e[1]-t[1]}function o(t,n,o,a){t.__chart__={x:S.x,y:S.y,k:S.k},r(Math.pow(2,a)),i(g=n,o),t=da.select(t),T>0&&(t=t.transition().duration(T)),t.call(e.event)}function s(){x&&x.domain(b.range().map(function(e){return(e-S.x)/S.k}).map(b.invert)),w&&w.domain(E.range().map(function(e){return(e-S.y)/S.k}).map(E.invert))}function u(e){A++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(e){--A||(e({type:"zoomend"}),g=null)}function f(){function e(){s=1,i(da.mouse(r),p),l(o)}function n(){f.on(I,null).on(L,null),d(s),c(o)}var r=this,o=P.of(r,arguments),s=0,f=da.select(a(r)).on(I,e).on(L,n),p=t(da.mouse(r)),d=ee(r);$u.call(r),u(o)}function p(){function e(){var e=da.touches(h);return d=S.k,e.forEach(function(e){e.identifier in g&&(g[e.identifier]=t(e))}),e}function n(){var t=da.event.target;da.select(t).on(b,a).on(x,s),E.push(t);for(var n=da.event.changedTouches,r=0,i=n.length;i>r;++r)g[n[r].identifier]=null;var u=e(),l=Date.now();if(1===u.length){if(500>l-_){var c=u[0];o(h,c,g[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),C()}_=l}else if(u.length>1){var c=u[0],f=u[1],p=c[0]-f[0],d=c[1]-f[1];
v=p*p+d*d}}function a(){var e,t,n,o,a=da.touches(h);$u.call(h);for(var s=0,u=a.length;u>s;++s,o=null)if(n=a[s],o=g[n.identifier]){if(t)break;e=n,t=o}if(o){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+o[0])/2,(t[1]+o[1])/2],r(f*d)}_=null,i(e,t),l(m)}function s(){if(da.event.touches.length){for(var t=da.event.changedTouches,n=0,r=t.length;r>n;++n)delete g[t[n].identifier];for(var i in g)return void e()}da.selectAll(E).on(y,null),w.on(O,f).on(D,p),k(),c(m)}var d,h=this,m=P.of(h,arguments),g={},v=0,y=".zoom-"+da.event.changedTouches[0].identifier,b="touchmove"+y,x="touchend"+y,E=[],w=da.select(h),k=ee(h);n(),u(m),w.on(O,null).on(D,n)}function d(){var e=P.of(this,arguments);y?clearTimeout(y):($u.call(this),m=t(g=v||da.mouse(this)),u(e)),y=setTimeout(function(){y=null,c(e)},50),C(),r(Math.pow(2,.002*Qa())*S.k),i(g,m),l(e)}function h(){var e=da.mouse(this),n=Math.log(S.k)/Math.LN2;o(this,e,t(e),da.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var m,g,v,y,_,b,x,E,w,S={x:0,y:0,k:1},k=[960,500],M=ts,T=250,A=0,O="mousedown.zoom",I="mousemove.zoom",L="mouseup.zoom",D="touchstart.zoom",P=N(e,"zoomstart","zoom","zoomend");return es||(es="onwheel"in ga?(Qa=function(){return-da.event.deltaY*(da.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ga?(Qa=function(){return da.event.wheelDelta},"mousewheel"):(Qa=function(){return-da.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=S;Vu?da.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},u(e)}).tween("zoom:zoom",function(){var n=k[0],r=k[1],i=g?g[0]:n/2,o=g?g[1]:r/2,a=da.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:o-r[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=S,u(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},s(),e):[S.x,S.y]},e.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:null},r(+t),s(),e):S.k},e.scaleExtent=function(t){return arguments.length?(M=null==t?ts:[+t[0],+t[1]],e):M},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],e):k},e.duration=function(t){return arguments.length?(T=+t,e):T},e.x=function(t){return arguments.length?(x=t,b=t.copy(),S={x:0,y:0,k:1},e):x},e.y=function(t){return arguments.length?(w=t,E=t.copy(),S={x:0,y:0,k:1},e):w},da.rebind(e,P,"on")};var Qa,es,ts=[0,1/0];da.color=fe,fe.prototype.toString=function(){return this.rgb()+""},da.hsl=pe;var ns=pe.prototype=new fe;ns.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new pe(this.h,this.s,this.l/e)},ns.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new pe(this.h,this.s,e*this.l)},ns.rgb=function(){return de(this.h,this.s,this.l)},da.hcl=he;var rs=he.prototype=new fe;rs.brighter=function(e){return new he(this.h,this.c,Math.min(100,this.l+is*(arguments.length?e:1)))},rs.darker=function(e){return new he(this.h,this.c,Math.max(0,this.l-is*(arguments.length?e:1)))},rs.rgb=function(){return me(this.h,this.c,this.l).rgb()},da.lab=ge;var is=18,os=.95047,as=1,ss=1.08883,us=ge.prototype=new fe;us.brighter=function(e){return new ge(Math.min(100,this.l+is*(arguments.length?e:1)),this.a,this.b)},us.darker=function(e){return new ge(Math.max(0,this.l-is*(arguments.length?e:1)),this.a,this.b)},us.rgb=function(){return ve(this.l,this.a,this.b)},da.rgb=Ee;var ls=Ee.prototype=new fe;ls.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new Ee(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new Ee(i,i,i)},ls.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ee(e*this.r,e*this.g,e*this.b)},ls.hsl=function(){return Te(this.r,this.g,this.b)},ls.toString=function(){return"#"+ke(this.r)+ke(this.g)+ke(this.b)};var cs=da.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cs.forEach(function(e,t){cs.set(e,we(t))}),da.functor=Ne,da.xhr=Ie(w),da.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Le(e,t,null==n?r:i(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:i(e)):n},a}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=l)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,o={},a={},s=[],l=e.length,c=0,f=0;(r=n())!==a;){for(var p=[];r!==o&&r!==a;)p.push(r),r=n();t&&null==(p=t(p,f++))||s.push(p)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new E,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},da.csv=da.dsv(",","text/csv"),da.tsv=da.dsv("	","text/tab-separated-values");var fs,ps,ds,hs,ms=this[k(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};da.timer=function(){Re.apply(this,arguments)},da.timer.flush=function(){je(),ze()},da.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var gs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Fe);da.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=da.round(e,qe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),gs[8+n/3]};var vs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ys=da.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=da.round(e,qe(e,t))).toFixed(Math.max(0,Math.min(20,qe(e*(1+1e-15),t))))}}),_s=da.time={},bs=Date;He.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){xs.setUTCDate.apply(this._,arguments)},setDay:function(){xs.setUTCDay.apply(this._,arguments)},setFullYear:function(){xs.setUTCFullYear.apply(this._,arguments)},setHours:function(){xs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){xs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){xs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){xs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){xs.setUTCSeconds.apply(this._,arguments)},setTime:function(){xs.setTime.apply(this._,arguments)}};var xs=Date.prototype;_s.year=Ve(function(e){return e=_s.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),_s.years=_s.year.range,_s.years.utc=_s.year.utc.range,_s.day=Ve(function(e){var t=new bs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),_s.days=_s.day.range,_s.days.utc=_s.day.utc.range,_s.dayOfYear=function(e){var t=_s.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=_s[e]=Ve(function(e){return(e=_s.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=_s.year(e).getDay();return Math.floor((_s.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});_s[e+"s"]=n.range,_s[e+"s"].utc=n.utc.range,_s[e+"OfYear"]=function(e){var n=_s.year(e).getDay();return Math.floor((_s.dayOfYear(e)+(n+t)%7)/7)}}),_s.week=_s.sunday,_s.weeks=_s.sunday.range,_s.weeks.utc=_s.sunday.utc.range,_s.weekOfYear=_s.sundayOfYear;var Es={"-":"",_:" ",0:"0"},ws=/^\s*\d+/,Ss=/^%/;da.locale=function(e){return{numberFormat:Be(e),timeFormat:$e(e)}};var ks=da.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});da.format=ks.numberFormat,da.geo={},ht.prototype={s:0,t:0,add:function(e){mt(e,this.t,Ms),mt(Ms.s,this.s,this),this.s?this.t+=Ms.t:this.s=Ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ms=new ht;da.geo.stream=function(e,t){e&&Ts.hasOwnProperty(e.type)?Ts[e.type](e,t):gt(e,t)};var Ts={Feature:function(e,t){gt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)gt(n[r].geometry,t)}},As={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vt(n[r],t,0)},Polygon:function(e,t){yt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)yt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)gt(n[r],t)}};da.geo.area=function(e){return Cs=0,da.geo.stream(e,Ns),Cs};var Cs,Os=new ht,Ns={sphere:function(){Cs+=4*Ha},point:M,lineStart:M,lineEnd:M,polygonStart:function(){Os.reset(),Ns.lineStart=_t},polygonEnd:function(){var e=2*Os;Cs+=0>e?4*Ha+e:e,Ns.lineStart=Ns.lineEnd=Ns.point=M}};da.geo.bounds=function(){function e(e,t){_.push(b=[c=e,p=e]),f>t&&(f=t),t>d&&(d=t)}function t(t,n){var r=bt([t*Ga,n*Ga]);if(v){var i=Et(v,r),o=[i[1],-i[0],0],a=Et(o,i);kt(a),a=Mt(a);var u=t-h,l=u>0?1:-1,m=a[0]*Xa*l,g=ka(u)>180;if(g^(m>l*h&&l*t>m)){var y=a[1]*Xa;y>d&&(d=y)}else if(m=(m+360)%360-180,g^(m>l*h&&l*t>m)){var y=-a[1]*Xa;f>y&&(f=y)}else f>n&&(f=n),n>d&&(d=n);g?h>t?s(c,t)>s(c,p)&&(p=t):s(t,p)>s(c,p)&&(c=t):p>=c?(c>t&&(c=t),t>p&&(p=t)):t>h?s(c,t)>s(c,p)&&(p=t):s(t,p)>s(c,p)&&(c=t)}else e(t,n);v=r,h=t}function n(){x.point=t}function r(){b[0]=c,b[1]=p,x.point=e,v=null}function i(e,n){if(v){var r=e-h;y+=ka(r)>180?r+(r>0?360:-360):r}else m=e,g=n;Ns.point(e,n),t(e,n)}function o(){Ns.lineStart()}function a(){i(m,g),Ns.lineEnd(),ka(y)>Ba&&(c=-(p=180)),b[0]=c,b[1]=p,v=null}function s(e,t){return(t-=e)<0?t+360:t}function u(e,t){return e[0]-t[0]}function l(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,p,d,h,m,g,v,y,_,b,x={point:e,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=a,y=0,Ns.polygonStart()},polygonEnd:function(){Ns.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=r,0>Os?(c=-(p=180),f=-(d=90)):y>Ba?d=90:-Ba>y&&(f=-90),b[0]=c,b[1]=p}};return function(e){d=p=-(c=f=1/0),_=[],da.geo.stream(e,x);var t=_.length;if(t){_.sort(u);for(var n,r=1,i=_[0],o=[i];t>r;++r)n=_[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,h=-(1/0),t=o.length-1,r=0,i=o[t];t>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>h&&(h=a,c=n[0],p=i[1])}return _=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[p,d]]}}(),da.geo.centroid=function(e){Is=Ls=Ds=Ps=Rs=Us=js=zs=qs=Fs=Bs=0,da.geo.stream(e,Ys);var t=qs,n=Fs,r=Bs,i=t*t+n*n+r*r;return Ya>i&&(t=Us,n=js,r=zs,Ba>Ls&&(t=Ds,n=Ps,r=Rs),i=t*t+n*n+r*r,Ya>i)?[NaN,NaN]:[Math.atan2(n,t)*Xa,ae(r/Math.sqrt(i))*Xa]};var Is,Ls,Ds,Ps,Rs,Us,js,zs,qs,Fs,Bs,Ys={sphere:M,point:At,lineStart:Ot,lineEnd:Nt,polygonStart:function(){Ys.lineStart=It},polygonEnd:function(){Ys.lineStart=Ot}},Hs=jt(Dt,Bt,Ht,[-Ha,-Ha/2]),Vs=1e9;da.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),i=o(e),i.valid=!0,i},extent:function(s){return arguments.length?(o=Gt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(da.geo.conicEqualArea=function(){return Xt(Kt)}).raw=Kt,da.geo.albers=function(){return da.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},da.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}var t,n,r,i,o=da.geo.albers(),a=da.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=da.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var l=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(u).point,r=a.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Ba,f+.12*l+Ba],[c-.214*l-Ba,f+.234*l-Ba]]).stream(u).point,i=s.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Ba,f+.166*l+Ba],[c-.115*l-Ba,f+.234*l-Ba]]).stream(u).point,e},e.scale(1070)};var Ws,$s,Gs,Xs,Ks,Js,Zs={point:M,lineStart:M,lineEnd:M,polygonStart:function(){$s=0,Zs.lineStart=Jt},polygonEnd:function(){Zs.lineStart=Zs.lineEnd=Zs.point=M,Ws+=ka($s/2)}},Qs={point:Zt,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},eu={point:tn,lineStart:nn,lineEnd:rn,polygonStart:function(){eu.lineStart=on},polygonEnd:function(){eu.point=tn,eu.lineStart=nn,eu.lineEnd=rn}};da.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),da.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,r,i,o,a,s=4.5;return e.area=function(e){return Ws=0,da.geo.stream(e,i(Zs)),Ws},e.centroid=function(e){return Ds=Ps=Rs=Us=js=zs=qs=Fs=Bs=0,da.geo.stream(e,i(eu)),Bs?[qs/Bs,Fs/Bs]:zs?[Us/zs,js/zs]:Rs?[Ds/Rs,Ps/Rs]:[NaN,NaN]},e.bounds=function(e){return Ks=Js=-(Gs=Xs=1/0),da.geo.stream(e,i(Qs)),[[Gs,Xs],[Ks,Js]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||un(e):w,t()):n},e.context=function(e){return arguments.length?(o=null==(r=e)?new Qt:new an(e),"function"!=typeof s&&o.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(da.geo.albersUsa()).context(null)},da.geo.transform=function(e){return{stream:function(t){var n=new ln(t);for(var r in e)n[r]=e[r];return n}}},ln.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},da.geo.projection=fn,da.geo.projectionMutator=pn,(da.geo.equirectangular=function(){return fn(hn)}).raw=hn.invert=hn,da.geo.rotation=function(e){function t(t){return t=e(t[0]*Ga,t[1]*Ga),t[0]*=Xa,t[1]*=Xa,t}return e=gn(e[0]%360*Ga,e[1]*Ga,e.length>2?e[2]*Ga:0),t.invert=function(t){return t=e.invert(t[0]*Ga,t[1]*Ga),t[0]*=Xa,t[1]*=Xa,t},t},mn.invert=hn,da.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=gn(-e[0]*Ga,-e[1]*Ga,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Xa,e[1]*=Xa}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=bn((t=+r)*Ga,i*Ga),e):t},e.precision=function(r){return arguments.length?(n=bn(t*Ga,(i=+r)*Ga),e):i},e.angle(90)},da.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ga,i=e[1]*Ga,o=t[1]*Ga,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},da.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return da.range(Math.ceil(o/g)*g,i,g).map(p).concat(da.range(Math.ceil(l/v)*v,u,v).map(d)).concat(da.range(Math.ceil(r/h)*h,n,h).filter(function(e){return ka(e%g)>Ba}).map(c)).concat(da.range(Math.ceil(s/m)*m,a,m).filter(function(e){return ka(e%v)>Ba}).map(f))}var n,r,i,o,a,s,u,l,c,f,p,d,h=10,m=h,g=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(d(u).slice(1),p(i).reverse().slice(1),d(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],l=+t[0][1],u=+t[1][1],o>i&&(t=o,o=i,i=t),l>u&&(t=l,l=u,u=t),e.precision(y)):[[o,l],[i,u]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(h=+t[0],m=+t[1],e):[h,m]},e.precision=function(t){return arguments.length?(y=+t,c=En(s,a,90),f=wn(r,n,y),p=En(l,u,90),d=wn(o,i,y),e):y},e.majorExtent([[-180,-90+Ba],[180,90-Ba]]).minorExtent([[-180,-80-Ba],[180,80+Ba]])},da.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Sn,i=kn;return e.distance=function(){return da.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},da.geo.interpolate=function(e,t){return Mn(e[0]*Ga,e[1]*Ga,t[0]*Ga,t[1]*Ga)},da.geo.length=function(e){return tu=0,da.geo.stream(e,nu),tu};var tu,nu={sphere:M,point:M,lineStart:Tn,lineEnd:M,polygonStart:M,polygonEnd:M},ru=An(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(da.geo.azimuthalEqualArea=function(){return fn(ru)}).raw=ru;var iu=An(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},w);(da.geo.azimuthalEquidistant=function(){return fn(iu)}).raw=iu,(da.geo.conicConformal=function(){return Xt(Cn)}).raw=Cn,(da.geo.conicEquidistant=function(){return Xt(On)}).raw=On;var ou=An(function(e){return 1/e},Math.atan);(da.geo.gnomonic=function(){return fn(ou)}).raw=ou,Nn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-$a]},(da.geo.mercator=function(){return In(Nn)}).raw=Nn;var au=An(function(){return 1},Math.asin);(da.geo.orthographic=function(){return fn(au)}).raw=au;var su=An(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(da.geo.stereographic=function(){return fn(su)}).raw=su,Ln.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-$a]},(da.geo.transverseMercator=function(){var e=In(Ln),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Ln,da.geom={},da.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ne(n),o=Ne(r),a=e.length,s=[],u=[];for(t=0;a>t;t++)s.push([+i.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(Un),t=0;a>t;t++)u.push([s[t][0],-s[t][1]]);var l=Rn(s),c=Rn(u),f=c[0]===l[0],p=c[c.length-1]===l[l.length-1],d=[];for(t=l.length-1;t>=0;--t)d.push(e[s[l[t]][2]]);for(t=+f;t<c.length-p;++t)d.push(e[s[c[t]][2]]);return d}var n=Dn,r=Pn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},da.geom.polygon=function(e){return Oa(e,uu),e};var uu=da.geom.polygon.prototype=[];uu.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},uu.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},uu.clip=function(e){for(var t,n,r,i,o,a,s=qn(e),u=-1,l=this.length-qn(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],o=t[(r=t.length-s)-1],n=-1;++n<r;)a=t[n],jn(a,c,i)?(jn(o,c,i)||e.push(zn(o,a,c,i)),e.push(a)):jn(o,c,i)&&e.push(zn(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var lu,cu,fu,pu,du,hu=[],mu=[];Gn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Kn),t.length},ar.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=fr(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(lr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,cr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(cr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,lr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?fr(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,lr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,cr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,lr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,cr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,lr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,cr(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},da.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return pr(n(e),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=r&&l.x<=o&&l.y>=i&&l.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Ba)*Ba,y:Math.round(a(e,t)/Ba)*Ba,i:t}})}var r=Dn,i=Pn,o=r,a=i,s=gu;return e?t(e):(t.links=function(e){return pr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return pr(n(e)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Kn),u=-1,l=s.length,c=s[l-1].edge,f=c.l===a?c.r:c.l;++u<l;)i=c,o=f,c=s[u].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&hr(a,o,f)<0&&t.push([e[r],e[o.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(o=Ne(r=e),t):r},t.y=function(e){return arguments.length?(a=Ne(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?gu:e,t):s===gu?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===gu?null:s&&s[1]},t)};var gu=[[-1e6,-1e6],[1e6,1e6]];da.geom.delaunay=function(e){return da.geom.voronoi().triangles(e)},da.geom.quadtree=function(e,t,n,r,i){function o(e){function o(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,c=e.y;if(null!=u)if(ka(u-n)+ka(c-r)<.01)l(e,t,n,r,i,o,a,s);else{var f=e.point;e.x=e.y=e.point=null,l(e,f,u,c,i,o,a,s),l(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else l(e,t,n,r,i,o,a,s)}function l(e,t,n,r,i,a,s,u){var l=.5*(i+s),c=.5*(a+u),f=n>=l,p=r>=c,d=p<<1|f;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]=vr()),f?i=l:s=l,p?a=c:u=c,o(e,t,n,r,i,a,s,u)}var c,f,p,d,h,m,g,v,y,_=Ne(s),b=Ne(u);if(null!=t)m=t,g=n,v=r,y=i;else if(v=y=-(m=g=1/0),f=[],p=[],h=e.length,a)for(d=0;h>d;++d)c=e[d],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),p.push(c.y);else for(d=0;h>d;++d){var x=+_(c=e[d],d),E=+b(c,d);m>x&&(m=x),g>E&&(g=E),x>v&&(v=x),E>y&&(y=E),f.push(x),p.push(E)}var w=v-m,S=y-g;w>S?y=g+w:v=m+S;var k=vr();if(k.add=function(e){o(k,e,+_(e,++d),+b(e,d),m,g,v,y)},k.visit=function(e){yr(e,k,m,g,v,y)},k.find=function(e){return _r(k,e[0],e[1],m,g,v,y)},d=-1,null==t){for(;++d<h;)o(k,e[d],f[d],p[d],m,g,v,y);--d}else e.forEach(k.add);return f=p=e=c=null,k}var a,s=Dn,u=Pn;return(a=arguments.length)?(s=mr,u=gr,3===a&&(i=n,r=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(u=e,o):u},o.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),o):null==t?null:[[t,n],[r,i]]},o.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),o):null==t?null:[r-t,i-n]},o)},da.interpolateRgb=br,da.interpolateObject=xr,da.interpolateNumber=Er,da.interpolateString=wr;var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yu=new RegExp(vu.source,"g");da.interpolate=Sr,da.interpolators=[function(e,t){var n=typeof t;return("string"===n?cs.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?br:wr:t instanceof fe?br:Array.isArray(t)?kr:"object"===n&&isNaN(t)?xr:Er)(e,t)}],da.interpolateArray=kr;var _u=function(){return w},bu=da.map({linear:_u,poly:Ir,quad:function(){return Cr},cubic:function(){return Or},sin:function(){return Lr},exp:function(){return Dr},circle:function(){return Pr},elastic:Rr,back:Ur,bounce:function(){return jr}}),xu=da.map({"in":w,out:Tr,"in-out":Ar,"out-in":function(e){return Ar(Tr(e))}});da.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=bu.get(n)||_u,r=xu.get(r)||w,Mr(r(n.apply(null,ha.call(arguments,1))))},da.interpolateHcl=zr,da.interpolateHsl=qr,da.interpolateLab=Fr,da.interpolateRound=Br,da.transform=function(e){var t=ga.createElementNS(da.ns.prefix.svg,"g");return(da.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Yr(n?n.matrix:Eu)})(e)},Yr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Eu={a:1,b:0,c:0,d:1,e:0,f:0};da.interpolateTransform=Zr,da.layout={},da.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(ti(e[n]));return t}},da.layout.chord=function(){function e(){var e,l,f,p,d,h={},m=[],g=da.range(o),v=[];for(n=[],r=[],e=0,p=-1;++p<o;){for(l=0,d=-1;++d<o;)l+=i[p][d];m.push(l),v.push(da.range(o)),e+=l}for(a&&g.sort(function(e,t){return a(m[e],m[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Va-c*o)/e,l=0,p=-1;++p<o;){for(f=l,d=-1;++d<o;){var y=g[p],_=v[y][d],b=i[y][_],x=l,E=l+=b*e;h[y+"-"+_]={index:y,subindex:_,startAngle:x,endAngle:E,value:b}}r[y]={index:y,startAngle:f,endAngle:l,value:m[y]},l+=c}for(p=-1;++p<o;)for(d=p-1;++d<o;){var w=h[p+"-"+d],S=h[d+"-"+p];(w.value||S.value)&&n.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}u&&t()}function t(){n.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2);
})}var n,r,i,o,a,s,u,l={},c=0;return l.matrix=function(e){return arguments.length?(o=(i=e)&&i.length,n=r=null,l):i},l.padding=function(e){return arguments.length?(c=e,n=r=null,l):c},l.sortGroups=function(e){return arguments.length?(a=e,n=r=null,l):a},l.sortSubgroups=function(e){return arguments.length?(s=e,n=null,l):s},l.sortChords=function(e){return arguments.length?(u=e,n&&t(),l):u},l.chords=function(){return n||e(),n},l.groups=function(){return r||e(),r},l},da.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,u=o*o+a*a;if(u>s*s/v){if(m>u){var l=t.charge/u;e.px-=o*l,e.py-=a*l}return!0}if(t.point&&u&&m>u){var l=t.pointCharge/u;e.px-=o*l,e.py-=a*l}}return!t.charge}}function t(e){e.px=da.event.x,e.py=da.event.y,u.resume()}var n,r,i,o,a,s,u={},l=da.dispatch("start","tick","end"),c=[1,1],f=.9,p=wu,d=Su,h=-30,m=ku,g=.1,v=.64,y=[],_=[];return u.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var t,r,u,p,d,m,v,b,x,E=y.length,w=_.length;for(r=0;w>r;++r)u=_[r],p=u.source,d=u.target,b=d.x-p.x,x=d.y-p.y,(m=b*b+x*x)&&(m=i*a[r]*((m=Math.sqrt(m))-o[r])/m,b*=m,x*=m,d.x-=b*(v=p.weight+d.weight?p.weight/(p.weight+d.weight):.5),d.y-=x*v,p.x+=b*(v=1-v),p.y+=x*v);if((v=i*g)&&(b=c[0]/2,x=c[1]/2,r=-1,v))for(;++r<E;)u=y[r],u.x+=(b-u.x)*v,u.y+=(x-u.y)*v;if(h)for(ui(t=da.geom.quadtree(y),i,s),r=-1;++r<E;)(u=y[r]).fixed||t.visit(e(u));for(r=-1;++r<E;)u=y[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);l.tick({type:"tick",alpha:i})},u.nodes=function(e){return arguments.length?(y=e,u):y},u.links=function(e){return arguments.length?(_=e,u):_},u.size=function(e){return arguments.length?(c=e,u):c},u.linkDistance=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,u):d},u.friction=function(e){return arguments.length?(f=+e,u):f},u.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.chargeDistance=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.gravity=function(e){return arguments.length?(g=+e,u):g},u.theta=function(e){return arguments.length?(v=e*e,u):Math.sqrt(v)},u.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):e>0&&(l.start({type:"start",alpha:i=e}),n=Re(u.tick)),u):i},u.start=function(){function e(e,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;l>u;++u){var o=_[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[t],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][e]))return a;return Math.random()*r}var t,n,r,i=y.length,l=_.length,f=c[0],m=c[1];for(t=0;i>t;++t)(r=y[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=_[t],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=y[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof p)for(t=0;l>t;++t)o[t]=+p.call(this,_[t],t);else for(t=0;l>t;++t)o[t]=p;if(a=[],"function"==typeof d)for(t=0;l>t;++t)a[t]=+d.call(this,_[t],t);else for(t=0;l>t;++t)a[t]=d;if(s=[],"function"==typeof h)for(t=0;i>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;i>t;++t)s[t]=h;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=da.behavior.drag().origin(w).on("dragstart.force",ii).on("drag.force",t).on("dragend.force",oi)),arguments.length?void this.on("mouseover.force",ai).on("mouseout.force",si).call(r):r},da.rebind(u,l,"on")};var wu=20,Su=1,ku=1/0;da.layout.hierarchy=function(){function e(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(l=n.call(e,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(e,o,o.depth)||0),delete o.children;return fi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=hi,n=pi,r=di;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ci(t,function(e){e.children&&(e.value=0)}),fi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},da.layout.partition=function(){function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,u,l=-1;for(r=t.value?r/t.value:0;++l<a;)e(s=o[l],n,u=s.value*r,i),n+=u}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return e(a[0],0,i[0],i[1]/t(a[0])),a}var r=da.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},li(n,r)},da.layout.pie=function(){function e(a){var s,u=a.length,l=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,p=Math.min(Math.abs(f)/u,+("function"==typeof o?o.apply(this,arguments):o)),d=p*(0>f?-1:1),h=da.sum(l),m=h?(f-u*d)/h:0,g=da.range(u),v=[];return null!=n&&g.sort(n===Mu?function(e,t){return l[t]-l[e]}:function(e,t){return n(a[e],a[t])}),g.forEach(function(e){v[e]={data:a[e],value:s=l[e],startAngle:c,endAngle:c+=s*m+d,padAngle:p}}),v}var t=Number,n=Mu,r=0,i=Va,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var Mu={};da.layout.stack=function(){function e(s,u){if(!(p=s.length))return s;var l=s.map(function(n,r){return t.call(e,n,r)}),c=l.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),f=n.call(e,c,u);l=da.permute(l,f),c=da.permute(c,f);var p,d,h,m,g=r.call(e,c,u),v=l[0].length;for(h=0;v>h;++h)for(i.call(e,l[0][h],m=g[h],c[0][h][1]),d=1;p>d;++d)i.call(e,l[d][h],m+=c[d-1][h][1],c[d][h][1]);return s}var t=w,n=_i,r=bi,i=yi,o=gi,a=vi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Tu.get(t)||_i,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Au.get(t)||bi,e):r},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(i=t,e):i},e};var Tu=da.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(xi),o=e.map(Ei),a=da.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,l=[],c=[];for(t=0;r>t;++t)n=a[t],u>s?(s+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(e){return da.range(e.length).reverse()},"default":_i}),Au=da.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,u=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)u[n]=(s-a[n])/2;return u},wiggle:function(e){var t,n,r,i,o,a,s,u,l,c=e.length,f=e[0],p=f.length,d=[];for(d[0]=u=l=0,n=1;p>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,o=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}d[n]=u-=i?o/i*s:0,l>u&&(l=u)}for(n=0;p>n;++n)d[n]-=l;return d},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:bi});da.layout.histogram=function(){function e(e,o){for(var a,s,u=[],l=e.map(n,this),c=r.call(this,l,o),f=i.call(this,c,l,o),o=-1,p=l.length,d=f.length-1,h=t?1:1/p;++o<d;)a=u[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(d>0)for(o=-1;++o<p;)s=l[o],s>=c[0]&&s<=c[1]&&(a=u[da.bisect(f,s,1,d)-1],a.y+=h,a.push(e[o]));return u}var t=!0,n=Number,r=Mi,i=Si;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ne(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ki(e,t)}:Ne(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},da.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],u=i[0],l=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,fi(s,function(e){e.r=+c(e.value)}),fi(s,Ni),r){var f=r*(t?1:Math.max(2*s.r/u,2*s.r/l))/2;fi(s,function(e){e.r+=f}),fi(s,Ni),fi(s,function(e){e.r-=f})}return Di(s,u/2,l/2,t?1:1/Math.max(2*s.r/u,2*s.r/l)),a}var t,n=da.layout.hierarchy().sort(Ti),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},li(e,n)},da.layout.tree=function(){function e(e,i){var c=a.call(this,e,i),f=c[0],p=t(f);if(fi(p,n),p.parent.m=-p.z,ci(p,r),l)ci(f,o);else{var d=f,h=f,m=f;ci(f,function(e){e.x<d.x&&(d=e),e.x>h.x&&(h=e),e.depth>m.depth&&(m=e)});var g=s(d,h)/2-d.x,v=u[0]/(h.x+s(h,d)/2+g),y=u[1]/(m.depth||1);ci(f,function(e){e.x=(e.x+g)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){qi(e);var o=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,o=e,a=t,u=i.parent.children[0],l=i.m,c=o.m,f=a.m,p=u.m;a=ji(a),i=Ui(i),a&&i;)u=Ui(u),o=ji(o),o.a=e,r=a.z+f-i.z-l+s(a._,i._),r>0&&(zi(Fi(a,e,n),e,r),l+=r,c+=r),f+=a.m,l+=i.m,p+=u.m,c+=o.m;a&&!ji(o)&&(o.t=a,o.m+=f-c),i&&!Ui(u)&&(u.t=i,u.m+=l-p,n=e)}return n}function o(e){e.x*=u[0],e.y=e.depth*u[1]}var a=da.layout.hierarchy().sort(null).value(null),s=Ri,u=[1,1],l=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=null==(u=t)?o:null,e):l?null:u},e.nodeSize=function(t){return arguments.length?(l=null==(u=t)?null:o,e):l?u:null},li(e,a)},da.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),u=s[0],l=0;fi(u,function(e){var t=e.children;t&&t.length?(e.x=Yi(t),e.y=Bi(t)):(e.x=a?l+=n(e,a):0,e.y=0,a=e)});var c=Hi(u),f=Vi(u),p=c.x-n(c,f)/2,d=f.x+n(f,c)/2;return fi(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-p)/(d-p)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),s}var t=da.layout.hierarchy().sort(null).value(null),n=Ri,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},li(e,t)},da.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var o=n.children;if(o&&o.length){var a,s,u,l=f(n),c=[],p=o.slice(),h=1/0,m="slice"===d?l.dx:"dice"===d?l.dy:"slice-dice"===d?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(e(p,l.dx*l.dy/n.value),c.area=0;(u=p.length)>0;)c.push(a=p[u-1]),c.area+=a.area,"squarify"!==d||(s=r(c,m))<=h?(p.pop(),h=s):(c.area-=c.pop().area,i(c,m,l,!1),m=Math.min(l.dx,l.dy),c.length=c.area=0,h=1/0);c.length&&(i(c,m,l,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var o,a=f(t),s=r.slice(),u=[];for(e(s,a.dx*a.dy/t.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*h/r,r/(t*o*h)):1/0}function i(e,t,n,r){var i,o=-1,a=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=e[o],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=e[o],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=l[0],o.dy=l[1]):o.dx=o.dy=0,a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),p&&(a=i),i}var a,s=da.layout.hierarchy(),u=Math.round,l=[1,1],c=null,f=Wi,p=!1,d="squarify",h=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(l=e,o):l},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?Wi(t):$i(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return $i(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?Wi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(u=e?Math.round:Number,o):u!=Number},o.sticky=function(e){return arguments.length?(p=e,a=null,o):p},o.ratio=function(e){return arguments.length?(h=e,o):h},o.mode=function(e){return arguments.length?(d=e+"",o):d},li(o,s)},da.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=da.random.normal.apply(da,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=da.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},da.scale={};var Cu={floor:w,ceil:w};da.scale.linear=function(){return eo([0,1],[0,1],Sr,!1)};var Ou={s:1,g:1,p:1,r:1,e:1};da.scale.log=function(){return uo(da.scale.linear().domain([0,1]),10,!0,[1,10])};var Nu=da.format(".0e"),Iu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};da.scale.pow=function(){return lo(da.scale.linear(),1,[0,1])},da.scale.sqrt=function(){return da.scale.pow().exponent(.5)},da.scale.ordinal=function(){return fo([],{t:"range",a:[[]]})},da.scale.category10=function(){return da.scale.ordinal().range(Lu)},da.scale.category20=function(){return da.scale.ordinal().range(Du)},da.scale.category20b=function(){return da.scale.ordinal().range(Pu)},da.scale.category20c=function(){return da.scale.ordinal().range(Ru)};var Lu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Se),Du=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Se),Pu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Se),Ru=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Se);da.scale.quantile=function(){return po([],[])},da.scale.quantize=function(){return ho(0,1,[0,1])},da.scale.threshold=function(){return mo([.5],[0,1])},da.scale.identity=function(){return go([0,1])},da.svg={},da.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-$a,f=s.apply(this,arguments)-$a,p=Math.abs(f-c),d=c>f?0:1;if(e>l&&(h=l,l=e,e=h),p>=Wa)return t(l,d)+(e?t(e,1-d):"")+"Z";var h,m,g,v,y,_,b,x,E,w,S,k,M=0,T=0,A=[];if((v=(+u.apply(this,arguments)||0)/2)&&(g=o===Uu?Math.sqrt(e*e+l*l):+o.apply(this,arguments),d||(T*=-1),l&&(T=ae(g/l*Math.sin(v))),e&&(M=ae(g/e*Math.sin(v)))),l){y=l*Math.cos(c+T),_=l*Math.sin(c+T),b=l*Math.cos(f-T),x=l*Math.sin(f-T);var C=Math.abs(f-c-2*T)<=Ha?0:1;if(T&&wo(y,_,b,x)===d^C){var O=(c+f)/2;y=l*Math.cos(O),_=l*Math.sin(O),b=x=null}}else y=_=0;if(e){E=e*Math.cos(f-M),w=e*Math.sin(f-M),S=e*Math.cos(c+M),k=e*Math.sin(c+M);var N=Math.abs(c-f+2*M)<=Ha?0:1;if(M&&wo(E,w,S,k)===1-d^N){var I=(c+f)/2;E=e*Math.cos(I),w=e*Math.sin(I),S=k=null}}else E=w=0;if(p>Ba&&(h=Math.min(Math.abs(l-e)/2,+i.apply(this,arguments)))>.001){m=l>e^d?0:1;var L=h,D=h;if(Ha>p){var P=null==S?[E,w]:null==b?[y,_]:zn([y,_],[S,k],[b,x],[E,w]),R=y-P[0],U=_-P[1],j=b-P[0],z=x-P[1],q=1/Math.sin(Math.acos((R*j+U*z)/(Math.sqrt(R*R+U*U)*Math.sqrt(j*j+z*z)))/2),F=Math.sqrt(P[0]*P[0]+P[1]*P[1]);D=Math.min(h,(e-F)/(q-1)),L=Math.min(h,(l-F)/(q+1))}if(null!=b){var B=So(null==S?[E,w]:[S,k],[y,_],l,L,d),Y=So([b,x],[E,w],l,L,d);h===L?A.push("M",B[0],"A",L,",",L," 0 0,",m," ",B[1],"A",l,",",l," 0 ",1-d^wo(B[1][0],B[1][1],Y[1][0],Y[1][1]),",",d," ",Y[1],"A",L,",",L," 0 0,",m," ",Y[0]):A.push("M",B[0],"A",L,",",L," 0 1,",m," ",Y[0])}else A.push("M",y,",",_);if(null!=S){var H=So([y,_],[S,k],e,-D,d),V=So([E,w],null==b?[y,_]:[b,x],e,-D,d);h===D?A.push("L",V[0],"A",D,",",D," 0 0,",m," ",V[1],"A",e,",",e," 0 ",d^wo(V[1][0],V[1][1],H[1][0],H[1][1]),",",1-d," ",H[1],"A",D,",",D," 0 0,",m," ",H[0]):A.push("L",V[0],"A",D,",",D," 0 0,",m," ",H[0])}else A.push("L",E,",",w)}else A.push("M",y,",",_),null!=b&&A.push("A",l,",",l," 0 ",C,",",d," ",b,",",x),A.push("L",E,",",w),null!=S&&A.push("A",e,",",e," 0 ",N,",",1-d," ",S,",",k);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=yo,r=_o,i=vo,o=Uu,a=bo,s=xo,u=Eo;return e.innerRadius=function(t){return arguments.length?(n=Ne(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ne(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ne(t),e):i},e.padRadius=function(t){return arguments.length?(o=t==Uu?Uu:Ne(t),e):o},e.startAngle=function(t){return arguments.length?(a=Ne(t),e):a},e.endAngle=function(t){return arguments.length?(s=Ne(t),e):s},e.padAngle=function(t){return arguments.length?(u=Ne(t),e):u},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-$a;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Uu="auto";da.svg.line=function(){return ko(w)};var ju=da.map({linear:Mo,"linear-closed":To,step:Ao,"step-before":Co,"step-after":Oo,basis:Ro,"basis-open":Uo,"basis-closed":jo,bundle:zo,cardinal:Lo,"cardinal-open":No,"cardinal-closed":Io,monotone:Vo});ju.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var zu=[0,2/3,1/3,0],qu=[0,1/3,2/3,0],Fu=[0,1/6,2/3,1/6];da.svg.line.radial=function(){var e=ko(Wo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Co.reverse=Oo,Oo.reverse=Co,da.svg.area=function(){return $o(w)},da.svg.area.radial=function(){var e=$o(Wo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},da.svg.chord=function(){function e(e,s){var u=t(this,o,e,s),l=t(this,a,e,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),o=s.call(e,i,r),a=u.call(e,i,r)-$a,c=l.call(e,i,r)-$a;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ha)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var o=Sn,a=kn,s=Go,u=bo,l=xo;return e.radius=function(t){return arguments.length?(s=Ne(t),e):s},e.source=function(t){return arguments.length?(o=Ne(t),e):o},e.target=function(t){return arguments.length?(a=Ne(t),e):a},e.startAngle=function(t){return arguments.length?(u=Ne(t),e):u},e.endAngle=function(t){return arguments.length?(l=Ne(t),e):l},e},da.svg.diagonal=function(){function e(e,i){var o=t.call(this,e,i),a=n.call(this,e,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var t=Sn,n=kn,r=Xo;return e.source=function(n){return arguments.length?(t=Ne(n),e):t},e.target=function(t){return arguments.length?(n=Ne(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},da.svg.diagonal.radial=function(){var e=da.svg.diagonal(),t=Xo,n=e.projection;return e.projection=function(e){return arguments.length?n(Ko(t=e)):t},e},da.svg.symbol=function(){function e(e,r){return(Bu.get(t.call(this,e,r))||Qo)(n.call(this,e,r))}var t=Zo,n=Jo;return e.type=function(n){return arguments.length?(t=Ne(n),e):t},e.size=function(t){return arguments.length?(n=Ne(t),e):n},e};var Bu=da.map({circle:Qo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Hu)),n=t*Hu;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Yu),n=t*Yu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Yu),n=t*Yu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});da.svg.symbolTypes=Bu.keys();var Yu=Math.sqrt(3),Hu=Math.tan(30*Ga);Da.transition=function(e){for(var t,n,r=Vu||++Xu,i=ia(e),o=[],a=Wu||{time:Date.now(),ease:Nr,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&oa(n,c,i,r,a),t.push(n)}return ta(o,i,r)},Da.interrupt=function(e){return this.each(null==e?$u:ea(ia(e)))};var Vu,Wu,$u=ea(ia()),Gu=[],Xu=0;Gu.call=Da.call,Gu.empty=Da.empty,Gu.node=Da.node,Gu.size=Da.size,da.transition=function(e,t){return e&&e.transition?Vu?e.transition(t):e:da.selection().transition(e)},da.transition.prototype=Gu,Gu.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=L(e);for(var s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),oa(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return ta(a,o,i)},Gu.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,u=[];e=D(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],p=-1,d=f.length;++p<d;)if(r=f[p]){o=r[s][a],n=e.call(r,r.__data__,p,l),u.push(t=[]);for(var h=-1,m=n.length;++h<m;)(i=n[h])&&oa(i,h,s,a,o),t.push(i)}return ta(u,s,a)},Gu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=W(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return ta(i,this.namespace,this.id)},Gu.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):G(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Gu.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function o(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Zr:Sr,s=da.ns.qualify(e);return na(this,"attr."+e,t,s.local?o:i)},Gu.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=da.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Gu.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=a(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Sr(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return na(this,"style."+e,t,i)},Gu.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Gu.text=function(e){return na(this,"text",e,ra)},Gu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Gu.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=da.ease.apply(da,arguments)),G(this,function(r){r[n][t].ease=e}))},Gu.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:G(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},Gu.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:G(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Gu.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Wu,o=Vu;try{Vu=n,G(this,function(t,i,o){Wu=t[r][n],e.call(t,t.__data__,i,o)})}finally{Wu=i,Vu=o}}else G(this,function(i){var o=i[r][n];(o.event||(o.event=da.dispatch("start","end","interrupt"))).on(e,t)});return this},Gu.transition=function(){for(var e,t,n,r,i=this.id,o=++Xu,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(e=[]);for(var t=this[u],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[a][i],oa(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return ta(s,a,o)},da.svg.axis=function(){function e(e){e.each(function(){var e,l=da.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),p=null==u?f.ticks?f.ticks.apply(f,s):f.domain():u,d=null==t?f.tickFormat?f.tickFormat.apply(f,s):w:t,h=l.selectAll(".tick").data(p,f),m=h.enter().insert("g",".domain").attr("class","tick").style("opacity",Ba),g=da.transition(h.exit()).style("opacity",Ba).remove(),v=da.transition(h.order()).style("opacity",1),y=Math.max(i,0)+a,_=Xi(f),b=l.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),da.transition(b));m.append("line"),m.append("text");var E,S,k,M,T=m.select("line"),A=v.select("line"),C=h.select("text").text(d),O=m.select("text"),N=v.select("text"),I="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=aa,E="x",k="y",S="x2",M="y2",C.attr("dy",0>I?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+_[0]+","+I*o+"V0H"+_[1]+"V"+I*o)):(e=sa,E="y",k="x",S="y2",M="x2",C.attr("dy",".32em").style("text-anchor",0>I?"end":"start"),x.attr("d","M"+I*o+","+_[0]+"H0V"+_[1]+"H"+I*o)),T.attr(M,I*i),O.attr(k,I*y),A.attr(S,0).attr(M,I*i),N.attr(E,0).attr(k,I*y),f.rangeBand){var L=f,D=L.rangeBand()/2;c=f=function(e){return L(e)+D}}else c.rangeBand?c=f:g.call(e,f,c);m.call(e,c,f),v.call(e,f,f)})}var t,n=da.scale.linear(),r=Ku,i=6,o=6,a=3,s=[10],u=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Ju?t+"":Ku,e):r},e.ticks=function(){return arguments.length?(s=ma(arguments),e):s},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,o=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Ku="bottom",Ju={top:1,right:1,bottom:1,left:1};da.svg.brush=function(){function e(o){o.each(function(){var o=da.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(m,w);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Zu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,f=da.transition(o),p=da.transition(a);l&&(u=Xi(l),p.attr("x",u[0]).attr("width",u[1]-u[0]),n(f)),c&&(u=Xi(c),p.attr("y",u[0]).attr("height",u[1]-u[0]),r(f)),t(f)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+p[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(e){e.select(".extent").attr("y",p[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function i(){function i(){32==da.event.keyCode&&(A||(_=null,N[0]-=f[1],N[1]-=p[1],A=2),C())}function m(){32==da.event.keyCode&&2==A&&(N[0]+=f[1],N[1]+=p[1],A=0,C())}function g(){var e=da.mouse(x),i=!1;b&&(e[0]+=b[0],e[1]+=b[1]),A||(da.event.altKey?(_||(_=[(f[0]+f[1])/2,(p[0]+p[1])/2]),N[0]=f[+(e[0]<_[0])],N[1]=p[+(e[1]<_[1])]):_=null),M&&v(e,l,0)&&(n(S),i=!0),T&&v(e,c,1)&&(r(S),i=!0),i&&(t(S),w({type:"brush",mode:A?"move":"resize"}))}function v(e,t,n){var r,i,a=Xi(t),u=a[0],l=a[1],c=N[n],m=n?p:f,g=m[1]-m[0];return A&&(u-=c,l-=g+c),r=(n?h:d)?Math.max(u,Math.min(l,e[n])):e[n],A?i=(r+=c)+g:(_&&(c=Math.max(u,Math.min(l,2*_[n]-r))),r>c?(i=r,r=c):i=c),m[0]!=r||m[1]!=i?(n?s=null:o=null,m[0]=r,m[1]=i,!0):void 0}function y(){g(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),da.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),w({type:"brushend"})}var _,b,x=this,E=da.select(da.event.target),w=u.of(x,arguments),S=da.select(x),k=E.datum(),M=!/^(n|s)$/.test(k)&&l,T=!/^(e|w)$/.test(k)&&c,A=E.classed("extent"),O=ee(x),N=da.mouse(x),I=da.select(a(x)).on("keydown.brush",i).on("keyup.brush",m);if(da.event.changedTouches?I.on("touchmove.brush",g).on("touchend.brush",y):I.on("mousemove.brush",g).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),A)N[0]=f[0]-N[0],N[1]=p[0]-N[1];else if(k){var L=+/w$/.test(k),D=+/^n/.test(k);b=[f[1-L]-N[0],p[1-D]-N[1]],N[0]=f[L],N[1]=p[D]}else da.event.altKey&&(_=N.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),da.select("body").style("cursor",E.style("cursor")),w({type:"brushstart"}),g()}var o,s,u=N(e,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],p=[0,0],d=!0,h=!0,m=Qu[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:f,y:p,i:o,j:s},n=this.__chart__||t;this.__chart__=t,Vu?da.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,f=n.x,p=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=kr(f,t.x),r=kr(p,t.y);return o=s=null,function(i){f=t.x=n(i),p=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,m=Qu[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,
m=Qu[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(d=!!t[0],h=!!t[1]):l?d=!!t:c&&(h=!!t),e):l&&c?[d,h]:l?d:c?h:null},e.extent=function(t){var n,r,i,a,u;return arguments.length?(l&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),n==f[0]&&r==f[1]||(f=[n,r])),c&&(i=t[0],a=t[1],l&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(u=i,i=a,a=u),i==p[0]&&a==p[1]||(p=[i,a])),e):(l&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],a=s[1]):(i=p[0],a=p[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(u=i,i=a,a=u))),l&&c?[[n,i],[r,a]]:l?[n,r]:c&&[i,a])},e.clear=function(){return e.empty()||(f=[0,0],p=[0,0],o=s=null),e},e.empty=function(){return!!l&&f[0]==f[1]||!!c&&p[0]==p[1]},da.rebind(e,u,"on")};var Zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],el=_s.format=ks.timeFormat,tl=el.utc,nl=tl("%Y-%m-%dT%H:%M:%S.%LZ");el.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ua:nl,ua.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ua.toString=nl.toString,_s.second=Ve(function(e){return new bs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),_s.seconds=_s.second.range,_s.seconds.utc=_s.second.utc.range,_s.minute=Ve(function(e){return new bs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),_s.minutes=_s.minute.range,_s.minutes.utc=_s.minute.utc.range,_s.hour=Ve(function(e){var t=e.getTimezoneOffset()/60;return new bs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),_s.hours=_s.hour.range,_s.hours.utc=_s.hour.utc.range,_s.month=Ve(function(e){return e=_s.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),_s.months=_s.month.range,_s.months.utc=_s.month.utc.range;var rl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],il=[[_s.second,1],[_s.second,5],[_s.second,15],[_s.second,30],[_s.minute,1],[_s.minute,5],[_s.minute,15],[_s.minute,30],[_s.hour,1],[_s.hour,3],[_s.hour,6],[_s.hour,12],[_s.day,1],[_s.day,2],[_s.week,1],[_s.month,1],[_s.month,3],[_s.year,1]],ol=el.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Dt]]),al={range:function(e,t,n){return da.range(Math.ceil(e/n)*n,+t,n).map(ca)},floor:w,ceil:w};il.year=_s.year,_s.scale=function(){return la(da.scale.linear(),il,ol)};var sl=il.map(function(e){return[e[0].utc,e[1]]}),ul=tl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Dt]]);sl.year=_s.year.utc,_s.scale.utc=function(){return la(da.scale.linear(),sl,ul)},da.text=Ie(function(e){return e.responseText}),da.json=function(e,t){return Le(e,"application/json",fa,t)},da.html=function(e,t){return Le(e,"text/html",pa,t)},da.xml=Ie(function(e){return e.responseXML}),this.d3=da,r=da,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}()},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});var n=(t.datum?"datum.":"")+(t.prefn||""),r=t.suffix||"",i=e.field;return u(e)?n+"count"+r:t.fn?n+t.fn+"_"+i+r:!t.nofn&&e.bin?n+"bin_"+i+(t.binSuffix||r||"_start"):t.nofn||t.noAggregate||!e.aggregate?!t.nofn&&e.timeUnit?n+e.timeUnit+"_"+i+r:n+i:n+e.aggregate+"_"+i+r}function i(e){return h.contains([d.NOMINAL,d.ORDINAL],e.type)||!!e.bin||e.type===d.TEMPORAL&&!!e.timeUnit}function o(e){return e&&e.field&&i(e)}function a(e){return e&&e.field&&!i(e)}function s(){return{field:"*",aggregate:f.AggregateOp.COUNT,type:d.QUANTITATIVE,title:t.COUNT_TITLE}}function u(e){return e.aggregate===f.AggregateOp.COUNT}function l(e,t,n){void 0===n&&(n={});var r=t[e.field],i=e.type;if(e.bin){var o=e.bin,a="boolean"==typeof o?void 0:o.maxbins;void 0===a&&(a=10);var s=h.getbins(r,a);return(s.stop-s.start)/s.step}if(i===d.TEMPORAL){var u=e.timeUnit;switch(u){case p.TimeUnit.SECONDS:return 60;case p.TimeUnit.MINUTES:return 60;case p.TimeUnit.HOURS:return 24;case p.TimeUnit.DAY:return 7;case p.TimeUnit.DATE:return 31;case p.TimeUnit.MONTH:return 12;case p.TimeUnit.YEAR:var l=t["year_"+e.field];return l?l.distinct-(r.missing>0&&n[i]?1:0):null}}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)}function c(e){if(null!=e.title)return e.title;if(u(e))return t.COUNT_TITLE;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toString().toUpperCase()+"("+e.field+")":e.field}var f=n(63),p=n(50),d=n(17),h=n(5);t.aggregate={type:"string","enum":f.AGGREGATE_OPS,supportedEnums:{quantitative:f.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:h.toMap([d.QUANTITATIVE,d.NOMINAL,d.ORDINAL,d.TEMPORAL,""])},t.field=r,t.isDimension=o,t.isMeasure=a,t.COUNT_TITLE="Number of Records",t.count=s,t.isCount=u,t.cardinality=l,t.title=c},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,t,n){"use strict";function r(e,t,n){return b.isFacetSpec(e)?new g.FacetModel(e,t,n):b.isLayerSpec(e)?new v.LayerModel(e,t,n):b.isUnitSpec(e)?new _.UnitModel(e,t,n):(console.error("Invalid spec."),null)}function i(e,n){var r=n.config().mark.filled,i=n.fieldDef(f.COLOR),o=n.fieldDef(f.OPACITY);r?a(e,n,t.FILL_CONFIG):a(e,n,t.STROKE_CONFIG);var s,u;n.has(f.COLOR)?s={scale:n.scaleName(f.COLOR),field:n.field(f.COLOR,i.type===h.ORDINAL?{prefn:"rank_"}:{})}:i&&i.value&&(s={value:i.value}),n.has(f.OPACITY)?u={scale:n.scaleName(f.OPACITY),field:n.field(f.OPACITY,o.type===h.ORDINAL?{prefn:"rank_"}:{})}:o&&o.value&&(u={value:o.value}),void 0!==s?r?e.fill=s:e.stroke=s:e[r?"fill":"stroke"]=e[r?"fill":"stroke"]||{value:n.config().mark.color},void 0!==u&&(e.opacity=u)}function o(e,t,n){return n.forEach(function(n){var r=t[n];void 0!==r&&(e[n]={value:r})}),e}function a(e,t,n){return o(e,t.config().mark,n)}function s(e,t,n){var r=e.fieldDef(t);if(!m.contains([h.QUANTITATIVE,h.TEMPORAL],r.type))return{};var i={};if(r.type===h.TEMPORAL&&(i.formatType="time"),void 0!==n)i.format=n;else switch(r.type){case h.QUANTITATIVE:i.format=e.config().numberFormat;break;case h.TEMPORAL:i.format=c(e,t)||e.config().timeFormat}if(t===f.TEXT){var o=(i.formatType||"number")+(i.format?":'"+i.format+"'":"");return{text:{template:"{{"+e.field(t,{datum:!0})+" | "+o+"}}"}}}return i}function u(e,t,n){switch(t){case f.ROW:case f.COLUMN:case f.X:case f.Y:return e.axis(t).shortTimeLabels;case f.COLOR:case f.OPACITY:case f.SHAPE:case f.SIZE:return e.legend(t).shortTimeLabels;case f.TEXT:return e.config().mark.shortTimeLabels;case f.LABEL:}return!1}function l(e){return(e.sort===d.SortOrder.DESCENDING?"-":"")+p.field(e)}function c(e,t){var n=e.fieldDef(t);return y.format(n.timeUnit,u(e,t,n))}var f=n(8),p=n(13),d=n(351),h=n(17),m=n(5),g=n(337),v=n(338),y=n(50),_=n(348),b=n(125);t.buildModel=r,t.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"],t.FILL_CONFIG=["fill","fillOpacity","opacity"],t.FILL_STROKE_CONFIG=m.union(t.STROKE_CONFIG,t.FILL_CONFIG),t.applyColorAndOpacity=i,t.applyConfig=o,t.applyMarkConfig=a,t.formatMixins=s,t.sortField=l,t.timeFormat=c},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){return e?e.nodeType===B?e.documentElement:e.firstChild:null}function o(e){var t=i(e);return t&&K.getID(t)}function a(e){var t=s(e);if(t)if(q.hasOwnProperty(t)){var n=q[t];n!==e&&(f(n,t)?R(!1):void 0,q[t]=e)}else q[t]=e;return t}function s(e){return e&&e.getAttribute&&e.getAttribute(z)||""}function u(e,t){var n=s(e);n!==t&&delete q[n],e.setAttribute(z,t),q[t]=e}function l(e){return q.hasOwnProperty(e)&&f(q[e],e)||(q[e]=K.findReactNodeByID(e)),q[e]}function c(e){var t=M.get(e)._rootNodeID;return S.isNullComponentID(t)?null:(q.hasOwnProperty(t)&&f(q[t],t)||(q[t]=K.findReactNodeByID(t)),q[t])}function f(e,t){if(e){s(e)!==t?R(!1):void 0;var n=K.findReactContainerForID(t);if(n&&D(n,e))return!0}return!1}function p(e){delete q[e]}function d(e){var t=q[e];return t&&f(t,e)?void(G=t):!1}function h(e){G=null,k.traverseAncestors(e,d);var t=G;return G=null,t}function m(e,t,n,r,i,o){E.useCreateElement&&(o=I({},o),n.nodeType===B?o[H]=n:o[H]=n.ownerDocument);var a=C.mountComponent(e,t,r,o);e._renderedComponent._topLevelWrapper=e,K._mountImageIntoNode(a,n,i,r)}function g(e,t,n,r,i){var o=N.ReactReconcileTransaction.getPooled(r);o.perform(m,null,e,t,n,o,r,i),N.ReactReconcileTransaction.release(o)}function v(e,t){for(C.unmountComponent(e),t.nodeType===B&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function y(e){var t=o(e);return t?t!==k.getReactRootIDFromNodeID(t):!1}function _(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=s(e);if(t){var n,r=k.getReactRootIDFromNodeID(t),i=e;do if(n=s(i),i=i.parentNode,null==i)return null;while(n!==r);if(i===W[r])return e}}return null}var b=n(46),x=n(68),E=(n(32),n(160)),w=n(20),S=n(167),k=n(47),M=n(60),T=n(170),A=n(23),C=n(39),O=n(106),N=n(24),I=n(7),L=n(57),D=n(148),P=n(113),R=n(3),U=n(75),j=n(116),z=(n(118),n(6),b.ID_ATTRIBUTE_NAME),q={},F=1,B=9,Y=11,H="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),V={},W={},$=[],G=null,X=function(){};X.prototype.isReactComponent={},X.prototype.render=function(){return this.props};var K={TopLevelWrapper:X,_instancesByReactRootID:V,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return K.scrollMonitor(n,function(){O.enqueueElementInternal(e,t),r&&O.enqueueCallbackInternal(e,r)}),e},_registerComponent:function(e,t){!t||t.nodeType!==F&&t.nodeType!==B&&t.nodeType!==Y?R(!1):void 0,x.ensureScrollValueMonitoring();var n=K.registerContainer(t);return V[n]=e,n},_renderNewRootComponent:function(e,t,n,r){var i=P(e,null),o=K._registerComponent(i,t);return N.batchedUpdates(g,i,o,t,n,r),i},renderSubtreeIntoContainer:function(e,t,n,r){return null==e||null==e._reactInternalInstance?R(!1):void 0,K._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){w.isValidElement(t)?void 0:R(!1);var a=new w(X,null,null,null,null,null,t),u=V[o(n)];if(u){var l=u._currentElement,c=l.props;if(j(c,t)){var f=u._renderedComponent.getPublicInstance(),p=r&&function(){r.call(f)};return K._updateRootComponent(u,a,n,p),f}K.unmountComponentAtNode(n)}var d=i(n),h=d&&!!s(d),m=y(n),g=h&&!u&&!m,v=K._renderNewRootComponent(a,n,g,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):L)._renderedComponent.getPublicInstance();return r&&r.call(v),v},render:function(e,t,n){return K._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=o(e);return t&&(t=k.getReactRootIDFromNodeID(t)),t||(t=k.createReactRootID()),W[t]=e,t},unmountComponentAtNode:function(e){!e||e.nodeType!==F&&e.nodeType!==B&&e.nodeType!==Y?R(!1):void 0;var t=o(e),n=V[t];if(!n){var r=(y(e),s(e));r&&r===k.getReactRootIDFromNodeID(r);return!1}return N.batchedUpdates(v,n,e),delete V[t],delete W[t],!0},findReactContainerForID:function(e){var t=k.getReactRootIDFromNodeID(e),n=W[t];return n},findReactNodeByID:function(e){var t=K.findReactContainerForID(e);return K.findComponentRoot(t,e)},getFirstReactDOM:function(e){return _(e)},findComponentRoot:function(e,t){var n=$,r=0,i=h(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var o,a=n[r++];a;){var s=K.getID(a);s?t===s?o=a:k.isAncestorIDOf(s,t)&&(n.length=r=0,n.push(a.firstChild)):n.push(a.firstChild),a=a.nextSibling}if(o)return n.length=0,o}n.length=0,R(!1)},_mountImageIntoNode:function(e,t,n,o){if(!t||t.nodeType!==F&&t.nodeType!==B&&t.nodeType!==Y?R(!1):void 0,n){var a=i(t);if(T.canReuseMarkup(e,a))return;var s=a.getAttribute(T.CHECKSUM_ATTR_NAME);a.removeAttribute(T.CHECKSUM_ATTR_NAME);var u=a.outerHTML;a.setAttribute(T.CHECKSUM_ATTR_NAME,s);var l=e,c=r(l,u);" (client) "+l.substring(c-20,c+20)+"\n (server) "+u.substring(c-20,c+20);t.nodeType===B?R(!1):void 0}if(t.nodeType===B?R(!1):void 0,o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else U(t,e)},ownerDocumentContextKey:H,getReactRootID:o,getID:a,setID:u,getNode:l,getNodeFromInstance:c,isValid:f,purgeID:p};A.measureMethods(K,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=K},function(e,t){"use strict";function n(e){var n=e;return t.TYPE_FROM_SHORT_TYPE[n.toUpperCase()]||n.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(t.Type||(t.Type={}));var r=t.Type;t.QUANTITATIVE=r.QUANTITATIVE,t.ORDINAL=r.ORDINAL,t.TEMPORAL=r.TEMPORAL,t.NOMINAL=r.NOMINAL,t.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},t.TYPE_FROM_SHORT_TYPE={Q:t.QUANTITATIVE,T:t.TEMPORAL,O:t.ORDINAL,N:t.NOMINAL},t.getFullName=n},function(e,t,n){"use strict";function r(e,t,n){if(void 0===t)return e.map(function(e){return x(e)});if(o.isNumber(t))return x(t);var r=o.isString(t)?new n(t):t;return e.push(r._id),r}function i(){var e=d3.select(window),t="dragover.altchan";e.on(t)||e.on(t,function(){var e=s.get(s.MODE),t=d3.event.shiftKey,n=Boolean(g._shiftKey);if(n!==t){g._shiftKey=t;var r="altchannels"===e?"channels":e;s.set(s.MODE,"channels"===e?"altchannels":r),g.update()}}),g.view.onSignal(s.SELECTED,function(e,t){var n=t.mark.def,r=n&&n.lyra_id;if(p(f.getState(),"inspector.selected")!==r){var i=c.getParentGroupIds(x(r));r&&(f.dispatch(h(r)),f.dispatch(m(i)))}}),Object.keys(b).forEach(function(e){b[e].forEach(function(t){g.view.onSignal(e,t)})})}var o=n(1),a=n(90),s=n(42),u=n(93),l=n(44),c=n(53),f=n(54),p=n(19).getIn,d=n(509),h=n(214),m=n(220),g=e.exports={view:null,Scene:null},v=[],y=[],_={},b={};window.listeners=b,window.primitives=_,g.primitive=function(e,t){return _[e]=t,g};var x=g.lookup=function(e){return _[e]};Object.defineProperty(g,"Scene",{enumerable:!0,get:function(){var e=f.getState(),t=p(e,"scene.id");return t?x(t):void 0}}),g.syncMark=function(e,t){var r=x(e),i=t&&n(217).getConstructor(t.type);return r&&!t?void r.remove():void(r?r.update(t):i&&g.primitive(e,new i(t)))},g.pipeline=function(e){return r(v,e,n(419))},g.scale=function(e){var t=r(y,e,n(216));return t},g["export"]=function(e,t){t=t||void 0===t;var n=e||g.Scene["export"](t);return n.data=v.reduce(function(e,n){return e.push.apply(e,x(n)["export"](t)),e},[]),n},g.manipulators=function(){var e=g["export"](g.Scene.manipulators(),!1),t=e.data||(e.data=[]),n=e.signals||(e.signals=[]),r=e.predicates||(e.predicates=[]),i=e.marks||(e.marks=[]),a=o.comparator("_idx");return n.push.apply(n,o.vals(s()).sort(a)),r.push({name:s.CELL,type:"==",operands:[{signal:s.CELL+".key"},{arg:"key"}]}),t.push({name:"bubble_cursor",transform:[{type:l("bubble_cursor")}]}),i.push(u.BUBBLE_CURSOR),t.push({name:"dummy_data_line",values:[{foo:100,bar:100},{foo:200,bar:200}]}),t.push({name:"dummy_data_area",values:[{x:100,y:28},{x:200,y:55}]}),e};var E=null;g.parse=function(e){return e=e||"#vis",E&&E.cancel(),E=new d(function(e,t){var n=this;setTimeout(function(){n.cancelled||a.parse.spec(g.manipulators(),function(n,r){return n?t(n):void e(r)})},10)}),E.then(function(t){g.view=t({el:e}),i(),g.update(),E=null})},g.update=function(){g.view&&g.view.update&&"function"==typeof g.view.update&&g.view.update()},g.onSignal=function(e,t){return b[e]=b[e]||[],b[e].push(t),g.view&&g.view.onSignal(e,t),g},g.offSignal=function(e,t){b[e]=b[e]||[];for(var n=b[e],r=n.length;--r>=0;)t&&n[r]!==t||n.splice(r,1);return g.view&&g.view.offSignal(e,t),g},g.removeListeners=function(e){if(!e)return void(b={});var t=new RegExp("^"+l(e.type+"_"+e._id));b=Object.keys(b).reduce(function(e,n){return t.test(n)||(e[n]=b[n]),e},{})}},function(e,t,n){"use strict";function r(e){return""+e}function i(e){return e.split(".")}function o(e,t){return e?e.getIn(i(t)):void 0}function a(e,t,n){return e.setIn(i(t),n)}function s(e,t){return e?e.get(r(t)):void 0}function u(e,t,n){return e.set(r(t),n)}function l(e,t,n){var r=o(e,t);if(!r||!r.toJS)return e;var i=r.toJS();return Array.isArray(i)&&i.indexOf(n)<0?a(e,t,f.fromJS(i.concat([n]))):e}function c(e,t,n){var r=o(e,t);if(!r||!r.toJS)return e;var i=r.toJS();return Array.isArray(i)&&i.indexOf(n)>=0?a(e,t,f.fromJS(i.filter(function(e){return e!==n}))):e}var f=n(45);e.exports={get:s,set:u,getIn:o,setIn:a,ensureValuePresent:l,ensureValueAbsent:c}},function(e,t,n){"use strict";var r=n(32),i=n(7),o=(n(73),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),a={key:!0,ref:!0,__self:!0,__source:!0},s=function(e,t,n,r,i,a,s){var u={$$typeof:o,type:e,key:t,ref:n,props:s,_owner:a};return u};s.createElement=function(e,t,n){var i,o={},u=null,l=null,c=null,f=null;if(null!=t){l=void 0===t.ref?null:t.ref,u=void 0===t.key?null:""+t.key,c=void 0===t.__self?null:t.__self,f=void 0===t.__source?null:t.__source;for(i in t)t.hasOwnProperty(i)&&!a.hasOwnProperty(i)&&(o[i]=t[i])}var p=arguments.length-2;if(1===p)o.children=n;else if(p>1){for(var d=Array(p),h=0;p>h;h++)d[h]=arguments[h+2];o.children=d}if(e&&e.defaultProps){var m=e.defaultProps;for(i in m)"undefined"==typeof o[i]&&(o[i]=m[i])}return s(e,u,l,c,f,r.current,o)},s.createFactory=function(e){var t=s.createElement.bind(null,e);return t.type=e,t},s.cloneAndReplaceKey=function(e,t){var n=s(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},s.cloneAndReplaceProps=function(e,t){var n=s(e.type,e.key,e.ref,e._self,e._source,e._owner,t);return n},s.cloneElement=function(e,t,n){var o,u=i({},e.props),l=e.key,c=e.ref,f=e._self,p=e._source,d=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,d=r.current),void 0!==t.key&&(l=""+t.key);for(o in t)t.hasOwnProperty(o)&&!a.hasOwnProperty(o)&&(u[o]=t[o])}var h=arguments.length-2;if(1===h)u.children=n;else if(h>1){for(var m=Array(h),g=0;h>g;g++)m[g]=arguments[g+2];u.children=m}return s(e.type,l,c,f,p,d,u)},s.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},e.exports=s},function(e,t){"use strict";e.exports={CREATE_SCENE:"CREATE_SCENE",HINTS_CLEAR:"HINTS_CLEAR",HINTS_ON:"HINTS_ON",HINTS_DISPLAY:"HINTS_DISPLAY",MARK_ADD:"MARK_ADD",MARK_DELETE:"MARK_DELETE",MARK_SET_PARENT:"MARK_SET_PARENT",MARK_UPDATE_PROPERTY:"MARK_UPDATE_PROPERTY",VEGA_INVALIDATE:"VEGA_INVALIDATE",VEGA_PARSE:"VEGA_PARSE",SIGNAL_INIT:"SIGNAL_INIT",SIGNAL_SET:"SIGNAL_SET",SIGNAL_SET_STREAMS:"SIGNAL_SET_STREAMS",SIGNAL_UNSET:"SIGNAL_UNSET",RULES_ADD_SCALE_TO_GROUP:"RULES_ADD_SCALE_TO_GROUP",RULES_ADD_LEGEND_TO_GROUP:"RULES_ADD_LEGEND_TO_GROUP",RULES_ADD_AXIS_TO_GROUP:"RULES_ADD_AXIS_TO_GROUP",RULES_SET_PROPERTY:"RULES_SET_PROPERTY",RULES_DISABLE_PROPERTY:"RULES_DISABLE_PROPERTY",RULES_RESET_PROPERTY:"RULES_RESET_PROPERTY",PIPELINE_SELECT:"PIPELINE_SELECT",CREATE_PIPELINE:"CREATE_PIPELINE",UPDATE_PIPELINE_DATASET:"UPDATE_PIPELINE_DATASET",EXPAND_LAYERS:"EXPAND_LAYERS",REMOVE_LAYERS:"REMOVE_LAYERS",SELECT_MARK:"SELECT_MARK",TOGGLE_LAYERS:"TOGGLE_LAYERS",SET_ACTIVE_WALKTHROUGH:"SET_ACTIVE_WALKTHROUGH",SET_ACTIVE_STEP:"SET_ACTIVE_STEP",SET_WALKTHROUGH:"SET_WALKTHROUGH",SET_WALKTHROUGH_ON:"SET_WALKTHROUGH_ON"},Object.freeze(e.exports)},function(e,t,n){function r(){this._collector=null}var i=n(9).prototype,o=r.prototype=Object.create(i);o.constructor=r,o.init=function(e){return i.init.call(this,e),this.batch(!0)},o.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)},o.batchTransform=function(){},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){return n}var i={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){i.storedMeasure=e}}};e.exports=i},function(e,t,n){"use strict";function r(){M.ReactReconcileTransaction&&b?void 0:g(!1)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=M.ReactReconcileTransaction.getPooled(!1)}function o(e,t,n,i,o,a){r(),b.batchedUpdates(e,t,n,i,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==v.length?g(!1):void 0,v.sort(a);for(var n=0;t>n;n++){var r=v[n],i=r._pendingCallbacks;if(r._pendingCallbacks=null,d.performUpdateIfNecessary(r,e.reconcileTransaction),i)for(var o=0;o<i.length;o++)e.callbackQueue.enqueue(i[o],r.getPublicInstance())}}function u(e){return r(),b.isBatchingUpdates?void v.push(e):void b.batchedUpdates(u,e)}function l(e,t){b.isBatchingUpdates?void 0:g(!1),y.enqueue(e,t),_=!0}var c=n(100),f=n(37),p=n(23),d=n(39),h=n(72),m=n(7),g=n(3),v=[],y=c.getPooled(),_=!1,b=null,x={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),S()):v.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[x,E];m(i.prototype,h.Mixin,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,M.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return h.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(i);var S=function(){for(;v.length||_;){if(v.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(_){_=!1;var t=y;y=c.getPooled(),t.notifyAll(),c.release(t)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var k={injectReconcileTransaction:function(e){e?void 0:g(!1),M.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:g(!1),"function"!=typeof e.batchedUpdates?g(!1):void 0,"boolean"!=typeof e.isBatchingUpdates?g(!1):void 0,b=e}},M={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:S,injection:k,asap:l};e.exports=M},function(e,t,n){var r=n(583),i=new r;document.body?i.elem=i.render(document.body):document.addEventListener("DOMContentLoaded",function(){i.elem=i.render(document.body)},!1),e.exports=i},function(e,t){"use strict";function n(e){return function(){return e}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t}function i(e){return h.CHANNELS.filter(function(t){return o(e,t)})}function o(e,t){var n=e&&e[t];return n&&(void 0!==n.field||m.isArray(n)&&n.length>0)}function a(e){return m.any(h.CHANNELS,function(t){return!(!o(e,t)||!e[t].aggregate)})}function s(e){var t=[];return h.CHANNELS.forEach(function(n){o(e,n)&&(m.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t}function u(e,t,n){l(h.CHANNELS,e,t,n)}function l(e,t,n,r){var i=0;e.forEach(function(e){o(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,i++)}):n.call(r,t[e],e,i++))})}function c(e,t,n){return f(h.CHANNELS,e,t,n)}function f(e,t,n,r){var i=[];return e.forEach(function(e){o(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){i.push(n.call(r,t,e))}):i.push(n.call(r,t[e],e)))}),i}function p(e,t,n,r){return d(h.CHANNELS,e,t,n,r)}function d(e,t,n,r,i){var a=r;return h.CHANNELS.forEach(function(e){o(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){a=n.call(i,a,t,e)}):a=n.call(i,a,t[e],e))}),a}var h=n(8),m=n(5);t.countRetinal=r,t.channels=i,t.has=o,t.isAggregate=a,t.fieldDefs=s,t.forEach=u,t.channelMappingForEach=l,t.map=c,t.channelMappingMap=f,t.reduce=p,t.channelMappingReduce=d},function(e,t){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE"}(t.Mark||(t.Mark={}));var n=t.Mark;t.AREA=n.AREA,t.BAR=n.BAR,t.LINE=n.LINE,t.POINT=n.POINT,t.TEXT=n.TEXT,t.TICK=n.TICK,t.RULE=n.RULE,t.CIRCLE=n.CIRCLE,t.SQUARE=n.SQUARE},function(e,t){function n(e,t,n,r){if(!e(t,r)){var i=null==n.opacity?1:n.opacity;0!==i&&(n.fill&&l(t,n,i)&&t.fill(),n.stroke&&c(t,n,i)&&t.stroke())}}function r(e,t,r,i){var o,a,s;for(o=0,a=r.items.length;a>o;++o)s=r.items[o],i&&!i.intersects(s.bounds)||n(e,t,s,s)}function i(e){return function(t,n,i){r(e,t,n,i)}}function o(e){return function(t,r,i){r.items.length&&(i&&!i.intersects(r.bounds)||n(e,t,r.items[0],r.items))}}function a(e){return e||(e=d),function(t,n,r,i,o,a){if(!n.items.length)return null;var s,u,l;for(null!=t.pixelratio&&1!==t.pixelratio&&(r*=t.pixelratio,i*=t.pixelratio),l=n.items.length;--l>=0;)if(s=n.items[l],u=s.bounds,(!u||u.contains(o,a))&&u&&e(t,s,r,i,o,a))return s;return null}}function s(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),e(n,r)?!1:l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function u(e){return a(s(e))}function l(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=f(e,t,t.fill),!0):!1}function c(e,t,n){var r,i=null!=(i=t.strokeWidth)?i:1;return 0>=i?!1:(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=f(e,t,t.stroke),e.lineWidth=i,e.lineCap=null!=(r=t.strokeCap)?r:"butt",e.vgLineDash(t.strokeDash||null),e.vgLineDashOffset(t.strokeDashOffset||0),!0):!1)}function f(e,t,n){return n.id?p(e,n,t.bounds):n}function p(e,t,n){var r,i,o=n.width(),a=n.height(),s=n.x1+t.x1*o,u=n.y1+t.y1*a,l=n.x1+t.x2*o,c=n.y1+t.y2*a,f=e.createLinearGradient(s,u,l,c),p=t.stops;for(r=0,i=p.length;i>r;++r)f.addColorStop(p[r].offset,p[r].color);return f}var d=function(){return!0};e.exports={drawOne:o,drawAll:i,pick:a,pickPath:u,testPath:s,stroke:c,fill:l,color:f,gradient:p}},function(e,t,n){"use strict";var r=n(67),i=r({bubbled:null,captured:null}),o=r({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};e.exports=a},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";var r=n(17);!function(e){e[e.JSON="json"]="JSON",e[e.CSV="csv"]="CSV",e[e.TSV="tsv"]="TSV"}(t.DataFormat||(t.DataFormat={}));t.DataFormat;!function(e){e[e.SOURCE="source"]="SOURCE",e[e.SUMMARY="summary"]="SUMMARY",e[e.STACKED_SCALE="stacked_scale"]="STACKED_SCALE",e[e.LAYOUT="layout"]="LAYOUT"}(t.DataTable||(t.DataTable={}));var i=t.DataTable;t.SUMMARY=i.SUMMARY,t.SOURCE=i.SOURCE,t.STACKED_SCALE=i.STACKED_SCALE,t.LAYOUT=i.LAYOUT,t.types={"boolean":r.Type.NOMINAL,number:r.Type.QUANTITATIVE,integer:r.Type.QUANTITATIVE,date:r.Type.TEMPORAL,string:r.Type.NOMINAL}},function(e,t,n){e.exports={path:n(194),render:n(368),Item:n(375),bound:n(128),Bounds:n(81),canvas:n(129),Gradient:n(374),toJSON:n(198).toJSON,fromJSON:n(198).fromJSON}},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var i=n(545),o=r(i),a=n(546),s=r(a);t.Provider=o["default"],t.connect=s["default"]},function(e,t,n){"use strict";var r=n(3),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},u=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},l=function(e){var t=this;e instanceof t?void 0:r(!1),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,f=i,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||f,n.poolSize||(n.poolSize=c),n.release=l,n},d={addPoolingTo:p,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:u};e.exports=d},function(e,t){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(t.ScaleType||(t.ScaleType={}));t.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(t.NiceTime||(t.NiceTime={}));t.NiceTime;t.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},t.defaultFacetScaleConfig={round:!0,padding:16}},function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(297),o={mountComponent:function(e,t,n,i){var o=e.mountComponent(t,n,i);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e),o},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=i.shouldUpdateRefs(a,t);s&&i.detachRefs(e,a),e.receiveComponent(t,n,o),
s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var i=n(37),o=n(7),a=n(26),s=(n(6),{type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=s,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);o(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),e.exports=r},function(e,t,n){"use strict";var r=n(11),i=r.createClass({displayName:"Icon",render:function(){var e=this.props,t=(e.className?e.className+" ":"")+"icon";return r.createElement("svg",{className:t,onClick:e.onClick,width:e.width||13,height:e.height||13,"data-html":e["data-html"],"data-tip":e["data-tip"],"data-place":e["data-place"]},r.createElement("use",{xlinkHref:e.glyph}))}});e.exports=i},function(e,t,n){"use strict";function r(e){return l(u.getState(),"signals."+s(e))}function i(){return u.getState().get("signals").toJS()}function o(e){return h.names.indexOf(e)>=0}var a=n(1),s=n(44),u=n(54),l=n(19).getIn,c=n(445),f=n(222),p=n(446),d=n(447),h=n(424);a.extend(i,h.signalNames),i.init=function(e,t){u.dispatch(c(e,t))},i.reference=function(e){return{signal:s(e)}},i.isDefault=o,i.get=function(e){var t,i=n(18),o=i.view,a=r(e);return o&&"function"==typeof o.signal&&(t=o.signal(s(e))),t||a.init},i.set=function(e,t,r){var i=n(18),a=i.view;o(e)||r===!1||u.dispatch(f(e,t)),a&&"function"==typeof a.signal&&a.signal(s(e),t)},i["delete"]=function(e){u.dispatch(d(e))},i.streams=function(e,t){u.dispatch(p(e,t))},e.exports=i,window.sg=i},function(e,t,n){e.exports={"group-open":n(568),"group-closed":n(567),rect:n(570),line:n(569),area:n(566),text:n(572),symbol:n(571),trash:n(577),plus:n(574),undo:n(582),redo:n(576),database:n(562),nominal:n(578),ordinal:n(579),quantitative:n(580),temporal:n(581),prev:n(575),next:n(573),close:n(561),hamburger:n(565),erase:n(563),"export":n(564),scaffold:n(539)}},function(e,t,n){"use strict";n(439);var r="lyra_";e.exports=function(e){return e.startsWith(r)?e:r+e}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:C(e)}function n(e){return a(e)?e:O(e)}function r(e){return s(e)?e:N(e)}function i(e){return o(e)&&!u(e)?e:I(e)}function o(e){return!(!e||!e[ln])}function a(e){return!(!e||!e[cn])}function s(e){return!(!e||!e[fn])}function u(e){return a(e)||s(e)}function l(e){return!(!e||!e[pn])}function c(e){return e.value=!1,e}function f(e){e&&(e.value=!0)}function p(){}function d(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;n>i;i++)r[i]=e[i+t];return r}function h(e){return void 0===e.size&&(e.size=e.__iterate(g)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return 0>t?h(e)+t:t}function g(){return!0}function v(e,t,n){return(0===e||void 0!==n&&-n>=e)&&(void 0===t||void 0!==n&&t>=n)}function y(e,t){return b(e,t,0)}function _(e,t){return b(e,t,t)}function b(e,t,n){return void 0===e?n:0>e?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function x(e){this.next=e}function E(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function w(){return{value:void 0,done:!0}}function S(e){return!!T(e)}function k(e){return e&&"function"==typeof e.next}function M(e){var t=T(e);return t&&t.call(e)}function T(e){var t=e&&(wn&&e[wn]||e[Sn]);return"function"==typeof t?t:void 0}function A(e){return e&&"number"==typeof e.length}function C(e){return null===e||void 0===e?j():o(e)?e.toSeq():F(e)}function O(e){return null===e||void 0===e?j().toKeyedSeq():o(e)?a(e)?e.toSeq():e.fromEntrySeq():z(e)}function N(e){return null===e||void 0===e?j():o(e)?a(e)?e.entrySeq():e.toIndexedSeq():q(e)}function I(e){return(null===e||void 0===e?j():o(e)?a(e)?e.entrySeq():e:q(e)).toSetSeq()}function L(e){this._array=e,this.size=e.length}function D(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function P(e){this._iterable=e,this.size=e.length||e.size}function R(e){this._iterator=e,this._iteratorCache=[]}function U(e){return!(!e||!e[Mn])}function j(){return Tn||(Tn=new L([]))}function z(e){var t=Array.isArray(e)?new L(e).fromEntrySeq():k(e)?new R(e).fromEntrySeq():S(e)?new P(e).fromEntrySeq():"object"==typeof e?new D(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function q(e){var t=B(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function F(e){var t=B(e)||"object"==typeof e&&new D(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function B(e){return A(e)?new L(e):k(e)?new R(e):S(e)?new P(e):void 0}function Y(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,a=0;o>=a;a++){var s=i[n?o-a:a];if(t(s[1],r?s[0]:a,e)===!1)return a+1}return a}return e.__iterateUncached(t,n)}function H(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,a=0;return new x(function(){var e=i[n?o-a:a];return a++>o?w():E(t,r?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,n)}function V(e,t){return t?W(t,e,"",{"":e}):$(e)}function W(e,t,n,r){return Array.isArray(t)?e.call(r,n,N(t).map(function(n,r){return W(e,n,r,t)})):G(t)?e.call(r,n,O(t).map(function(n,r){return W(e,n,r,t)})):t}function $(e){return Array.isArray(e)?N(e).map($).toList():G(e)?O(e).map($).toMap():e}function G(e){return e&&(e.constructor===Object||void 0===e.constructor)}function X(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function K(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||a(e)!==a(t)||s(e)!==s(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!u(e);if(l(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&X(i[1],e)&&(n||X(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var c=e;e=t,t=c}var f=!0,p=t.__iterate(function(t,r){return(n?e.has(t):i?X(t,e.get(r,vn)):X(e.get(r,vn),t))?void 0:(f=!1,!1)});return f&&e.size===p}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(An)return An;An=this}}function Z(e,t){if(!e)throw new Error(t)}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);if(Z(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),e>t&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Cn)return Cn;Cn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function ie(e){return e>>>1&1073741824|3221225471&e}function oe(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){if(e!==e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return ie(n)}if("string"===t)return e.length>Un?ae(e):se(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return ue(e);if("function"==typeof e.toString)return se(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ae(e){var t=qn[e];return void 0===t&&(t=se(e),zn===jn&&(zn=0,qn={}),zn++,qn[e]=t),t}function se(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ie(t)}function ue(e){var t;if(Dn&&(t=On.get(e),void 0!==t))return t;if(t=e[Rn],void 0!==t)return t;if(!Ln){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Rn],void 0!==t)return t;if(t=le(e),void 0!==t)return t}if(t=++Pn,1073741824&Pn&&(Pn=0),Dn)On.set(e,t);else{if(void 0!==In&&In(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Ln)Object.defineProperty(e,Rn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Rn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Rn]=t}}return t}function le(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function ce(e){Z(e!==1/0,"Cannot perform this action with an infinite size.")}function fe(e){return null===e||void 0===e?Ee():pe(e)&&!l(e)?e:Ee().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function pe(e){return!(!e||!e[Fn])}function de(e,t){this.ownerID=e,this.entries=t}function he(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ge(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&be(e._root)}function _e(e,t){return E(e,t[0],t[1])}function be(e,t){return{node:e,index:0,__prev:t}}function xe(e,t,n,r){var i=Object.create(Bn);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ee(){return Yn||(Yn=xe(0))}function we(e,t,n){var r,i;if(e._root){var o=c(yn),a=c(_n);if(r=Se(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===vn?-1:1:0)}else{if(n===vn)return e;i=1,r=new de(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?xe(i,r):Ee()}function Se(e,t,n,r,i,o,a,s){return e?e.update(t,n,r,i,o,a,s):o===vn?e:(f(s),f(a),new ve(t,r,[i,o]))}function ke(e){return e.constructor===ve||e.constructor===ge}function Me(e,t,n,r,i){if(e.keyHash===r)return new ge(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&gn,s=(0===n?r:r>>>n)&gn,u=a===s?[Me(e,t,n+hn,r,i)]:(o=new ve(t,r,i),s>a?[e,o]:[o,e]);return new he(t,1<<a|1<<s,u)}function Te(e,t,n,r){e||(e=new p);for(var i=new ve(e,oe(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}function Ae(e,t,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,l=t.length;l>s;s++,u<<=1){var c=t[s];void 0!==c&&s!==r&&(i|=u,a[o++]=c)}return new he(e,i,a)}function Ce(e,t,n,r,i){for(var o=0,a=new Array(mn),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[o++]:void 0;return a[r]=i,new me(e,o+1,a)}function Oe(e,t,r){for(var i=[],a=0;a<r.length;a++){var s=r[a],u=n(s);o(s)||(u=u.map(function(e){return V(e)})),i.push(u)}return Le(e,t,i)}function Ne(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):X(e,t)?e:t}function Ie(e){return function(t,n,r){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return X(t,i)?t:i}}function Le(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,vn,function(e){return e===vn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function De(e,t,n,r){var i=e===vn,o=t.next();if(o.done){var a=i?n:e,s=r(a);return s===a?e:s}Z(i||e&&e.set,"invalid keyPath");var u=o.value,l=i?vn:e.get(u,vn),c=De(l,t,n,r);return c===l?e:c===vn?e.remove(u):(i?Ee():e).set(u,c)}function Pe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function Re(e,t,n,r){var i=r?e:d(e);return i[t]=n,i}function Ue(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,s=0;i>s;s++)s===t?(o[s]=n,a=-1):o[s]=e[s+a];return o}function je(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;r>a;a++)a===t&&(o=1),i[a]=e[a+o];return i}function ze(e){var t=He();if(null===e||void 0===e)return t;if(qe(e))return e;var n=r(e),i=n.size;return 0===i?t:(ce(i),i>0&&mn>i?Ye(0,i,hn,null,new Fe(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function qe(e){return!(!e||!e[$n])}function Fe(e,t){this.array=e,this.ownerID=t}function Be(e,t){function n(e,t,n){return 0===t?r(e,n):i(e,t,n)}function r(e,n){var r=n===s?u&&u.array:e&&e.array,i=n>o?0:o-n,l=a-n;return l>mn&&(l=mn),function(){if(i===l)return Kn;var e=t?--l:i++;return r&&r[e]}}function i(e,r,i){var s,u=e&&e.array,l=i>o?0:o-i>>r,c=(a-i>>r)+1;return c>mn&&(c=mn),function(){for(;;){if(s){var e=s();if(e!==Kn)return e;s=null}if(l===c)return Kn;var o=t?--c:l++;s=n(u&&u[o],r-hn,i+(o<<r))}}}var o=e._origin,a=e._capacity,s=Je(a),u=e._tail;return n(e._root,e._level,0)}function Ye(e,t,n,r,i,o,a){var s=Object.create(Gn);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function He(){return Xn||(Xn=Ye(0,0,hn))}function Ve(e,t,n){if(t=m(e,t),t!==t)return e;if(t>=e.size||0>t)return e.withMutations(function(e){0>t?Xe(e,t).set(0,n):Xe(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,o=c(_n);return t>=Je(e._capacity)?r=We(r,e.__ownerID,0,t,n,o):i=We(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):Ye(e._origin,e._capacity,e._level,i,r):e}function We(e,t,n,r,i,o){var a=r>>>n&gn,s=e&&a<e.array.length;if(!s&&void 0===i)return e;var u;if(n>0){var l=e&&e.array[a],c=We(l,t,n-hn,r,i,o);return c===l?e:(u=$e(e,t),u.array[a]=c,u)}return s&&e.array[a]===i?e:(f(o),u=$e(e,t),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function $e(e,t){return t&&e&&t===e.ownerID?e:new Fe(e?e.array.slice():[],t)}function Ge(e,t){if(t>=Je(e._capacity))return e._tail;if(t<1<<e._level+hn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&gn],r-=hn;return n}}function Xe(e,t,n){void 0!==t&&(t=0|t),void 0!==n&&(n=0|n);var r=e.__ownerID||new p,i=e._origin,o=e._capacity,a=i+t,s=void 0===n?o:0>n?o+n:i+n;if(a===i&&s===o)return e;if(a>=s)return e.clear();for(var u=e._level,l=e._root,c=0;0>a+c;)l=new Fe(l&&l.array.length?[void 0,l]:[],r),u+=hn,c+=1<<u;c&&(a+=c,i+=c,s+=c,o+=c);for(var f=Je(o),d=Je(s);d>=1<<u+hn;)l=new Fe(l&&l.array.length?[l]:[],r),u+=hn;var h=e._tail,m=f>d?Ge(e,s-1):d>f?new Fe([],r):h;if(h&&d>f&&o>a&&h.array.length){l=$e(l,r);for(var g=l,v=u;v>hn;v-=hn){var y=f>>>v&gn;g=g.array[y]=$e(g.array[y],r)}g.array[f>>>hn&gn]=h}if(o>s&&(m=m&&m.removeAfter(r,0,s)),a>=d)a-=d,s-=d,u=hn,l=null,m=m&&m.removeBefore(r,0,a);else if(a>i||f>d){for(c=0;l;){var _=a>>>u&gn;if(_!==d>>>u&gn)break;_&&(c+=(1<<u)*_),u-=hn,l=l.array[_]}l&&a>i&&(l=l.removeBefore(r,u,a-c)),l&&f>d&&(l=l.removeAfter(r,u,d-c)),c&&(a-=c,s-=c)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=u,e._root=l,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Ye(a,s,u,l,m)}function Ke(e,t,n){for(var i=[],a=0,s=0;s<n.length;s++){var u=n[s],l=r(u);l.size>a&&(a=l.size),o(u)||(l=l.map(function(e){return V(e)})),i.push(l)}return a>e.size&&(e=e.setSize(a)),Le(e,t,i)}function Je(e){return mn>e?0:e-1>>>hn<<hn}function Ze(e){return null===e||void 0===e?tt():Qe(e)?e:tt().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function Qe(e){return pe(e)&&l(e)}function et(e,t,n,r){var i=Object.create(Ze.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function tt(){return Jn||(Jn=et(Ee(),He()))}function nt(e,t,n){var r,i,o=e._map,a=e._list,s=o.get(t),u=void 0!==s;if(n===vn){if(!u)return e;a.size>=mn&&a.size>=2*o.size?(i=a.filter(function(e,t){return void 0!==e&&s!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return e;r=o,i=a.set(s,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):et(r,i)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function st(e){var t=At(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Ct,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return t(n,e,r)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===En){var r=e.__iterator(t,n);return new x(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===xn?bn:xn,n)},t}function ut(e,t,n){var r=At(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,vn);return o===vn?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate(function(e,i,a){return r(t.call(n,e,i,a),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(En,i);return new x(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return E(r,s,t.call(n,a[1],s,e),i)})},r}function lt(e,t){var n=At(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=st(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Ct,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function ct(e,t,n,r){var i=At(e);return r&&(i.has=function(r){var i=e.get(r,vn);return i!==vn&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,vn);return o!==vn&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate(function(e,o,u){return t.call(n,e,o,u)?(s++,i(e,r?o:s-1,a)):void 0},o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(En,o),s=0;return new x(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,l=u[0],c=u[1];if(t.call(n,c,l,e))return E(i,r?l:s++,c,o)}})},i}function ft(e,t,n){var r=fe().asMutable();return e.__iterate(function(i,o){r.update(t.call(n,i,o,e),0,function(e){return e+1})}),r.asImmutable()}function pt(e,t,n){var r=a(e),i=(l(e)?Ze():fe()).asMutable();e.__iterate(function(o,a){i.update(t.call(n,o,a,e),function(e){return e=e||[],e.push(r?[a,o]:o),e})});var o=Tt(e);return i.map(function(t){return St(e,o(t))})}function dt(e,t,n,r){var i=e.size;if(void 0!==t&&(t=0|t),void 0!==n&&(n=n===1/0?i:0|n),v(t,n,i))return e;var o=y(t,i),a=_(n,i);if(o!==o||a!==a)return dt(e.toSeq().cacheResult(),t,n,r);var s,u=a-o;u===u&&(s=0>u?0:u);var l=At(e);return l.size=0===s?s:e.size&&s||void 0,!r&&U(e)&&s>=0&&(l.get=function(t,n){return t=m(this,t),t>=0&&s>t?e.get(t+o,n):n}),l.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,u=!0,l=0;return e.__iterate(function(e,n){return u&&(u=a++<o)?void 0:(l++,t(e,r?n:l-1,i)!==!1&&l!==s)}),l},l.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var i=0!==s&&e.__iterator(t,n),a=0,u=0;return new x(function(){for(;a++<o;)i.next();if(++u>s)return w();var e=i.next();return r||t===xn?e:t===bn?E(t,u-1,void 0,e):E(t,u-1,e.value[1],e)})},l}function ht(e,t,n){var r=At(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate(function(e,i,s){return t.call(n,e,i,s)&&++a&&r(e,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(En,i),s=!0;return new x(function(){if(!s)return w();var e=a.next();if(e.done)return e;var i=e.value,u=i[0],l=i[1];return t.call(n,l,u,o)?r===En?e:E(r,u,l,e):(s=!1,w())})},r}function mt(e,t,n,r){var i=At(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return e.__iterate(function(e,o,l){return s&&(s=t.call(n,e,o,l))?void 0:(u++,i(e,r?o:u-1,a))}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(En,o),u=!0,l=0;return new x(function(){var e,o,c;do{if(e=s.next(),e.done)return r||i===xn?e:i===bn?E(i,l++,void 0,e):E(i,l++,e.value[1],e);var f=e.value;o=f[0],c=f[1],u&&(u=t.call(n,c,o,a))}while(u);return i===En?e:E(i,o,c,e)})},i}function gt(e,t){var r=a(e),i=[e].concat(t).map(function(e){return o(e)?r&&(e=n(e)):e=r?z(e):q(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var u=i[0];if(u===e||r&&a(u)||s(e)&&s(u))return u}var l=new L(i);return r?l=l.toKeyedSeq():s(e)||(l=l.toSetSeq()),l=l.flatten(!0),l.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),l}function vt(e,t,n){var r=At(e);return r.__iterateUncached=function(r,i){function a(e,l){var c=this;e.__iterate(function(e,i){return(!t||t>l)&&o(e)?a(e,l+1):r(e,n?i:s++,c)===!1&&(u=!0),!u},i)}var s=0,u=!1;return a(e,0),s},r.__iteratorUncached=function(r,i){var a=e.__iterator(r,i),s=[],u=0;return new x(function(){for(;a;){var e=a.next();if(e.done===!1){var l=e.value;if(r===En&&(l=l[1]),t&&!(s.length<t)||!o(l))return n?e:E(r,u++,l,e);s.push(a),a=l.__iterator(r,i)}else a=s.pop()}return w()})},r}function yt(e,t,n){var r=Tt(e);return e.toSeq().map(function(i,o){return r(t.call(n,i,o,e))}).flatten(!0)}function _t(e,t){var n=At(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate(function(e,r){return(!o||n(t,o++,i)!==!1)&&n(e,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(xn,r),a=0;return new x(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?E(n,a++,t):E(n,a++,i.value,i)})},n}function bt(e,t,n){t||(t=Ot);var r=a(e),i=0,o=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?O(o):s(e)?N(o):I(o)}function xt(e,t,n){if(t||(t=Ot),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Et(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Et(t,e,n)?n:e})}function Et(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function wt(e,n,r){var i=At(e);return i.size=new L(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(xn,t),i=0;!(n=r.next()).done&&e(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=t(e),M(i?e.reverse():e)}),a=0,s=!1;return new x(function(){var t;return s||(t=o.map(function(e){return e.next()}),s=t.some(function(e){return e.done})),s?w():E(e,a++,n.apply(null,t.map(function(e){return e.value})))})},i}function St(e,t){return U(e)?t:e.constructor(t)}function kt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Mt(e){return ce(e.size),h(e)}function Tt(e){return a(e)?n:s(e)?r:i}function At(e){return Object.create((a(e)?O:s(e)?N:I).prototype)}function Ct(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):C.prototype.cacheResult.call(this)}function Ot(e,t){return e>t?1:t>e?-1:0}function Nt(e){var n=M(e);if(!n){if(!A(e))throw new TypeError("Expected iterable or array-like: "+e);n=M(t(e))}return n}function It(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(e);Pt(i,a),i.size=a.length,i._name=t,i._keys=a,i._defaultValues=e}this._map=fe(o)},i=r.prototype=Object.create(Zn);return i.constructor=r,r}function Lt(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Dt(e){return e._name||e.constructor.name||"Record"}function Pt(e,t){try{t.forEach(Rt.bind(void 0,e))}catch(n){}}function Rt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Ut(e){return null===e||void 0===e?Ft():jt(e)&&!l(e)?e:Ft().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function jt(e){return!(!e||!e[Qn])}function zt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function qt(e,t){var n=Object.create(er);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Ft(){return tr||(tr=qt(Ee()))}function Bt(e){return null===e||void 0===e?Vt():Yt(e)?e:Vt().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function Yt(e){return jt(e)&&l(e)}function Ht(e,t){var n=Object.create(nr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Vt(){return rr||(rr=Ht(tt()))}function Wt(e){return null===e||void 0===e?Xt():$t(e)?e:Xt().unshiftAll(e)}function $t(e){return!(!e||!e[ir])}function Gt(e,t,n,r){var i=Object.create(or);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Xt(){return ar||(ar=Gt(0))}function Kt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Jt(e,t){return t}function Zt(e,t){return[t,e]}function Qt(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function nn(){return d(arguments)}function rn(e,t){return t>e?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=l(e),n=a(e),r=t?1:0,i=e.__iterate(n?t?function(e,t){r=31*r+sn(oe(e),oe(t))|0}:function(e,t){r=r+sn(oe(e),oe(t))|0}:t?function(e){r=31*r+oe(e)|0}:function(e){r=r+oe(e)|0});return an(i,r)}function an(e,t){return t=Nn(t,3432918353),t=Nn(t<<15|t>>>-15,461845907),t=Nn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Nn(t^t>>>16,2246822507),t=Nn(t^t>>>13,3266489909),t=ie(t^t>>>16)}function sn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var un=Array.prototype.slice;e(n,t),e(r,t),e(i,t),t.isIterable=o,t.isKeyed=a,t.isIndexed=s,t.isAssociative=u,t.isOrdered=l,t.Keyed=n,t.Indexed=r,t.Set=i;var ln="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",pn="@@__IMMUTABLE_ORDERED__@@",dn="delete",hn=5,mn=1<<hn,gn=mn-1,vn={},yn={value:!1},_n={value:!1},bn=0,xn=1,En=2,wn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",kn=wn||Sn;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=bn,x.VALUES=xn,x.ENTRIES=En,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[kn]=function(){return this},e(C,t),C.of=function(){return C(arguments)},C.prototype.toSeq=function(){return this},C.prototype.toString=function(){return this.__toString("Seq {","}")},C.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},C.prototype.__iterate=function(e,t){return Y(this,e,t,!0)},C.prototype.__iterator=function(e,t){return H(this,e,t,!0)},e(O,C),O.prototype.toKeyedSeq=function(){return this},e(N,C),N.of=function(){return N(arguments)},N.prototype.toIndexedSeq=function(){return this},N.prototype.toString=function(){return this.__toString("Seq [","]")},N.prototype.__iterate=function(e,t){return Y(this,e,t,!1)},N.prototype.__iterator=function(e,t){return H(this,e,t,!1)},e(I,C),I.of=function(){return I(arguments)},I.prototype.toSetSeq=function(){return this},C.isSeq=U,C.Keyed=O,C.Set=I,C.Indexed=N;var Mn="@@__IMMUTABLE_SEQ__@@";C.prototype[Mn]=!0,e(L,N),L.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},L.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;r>=i;i++)if(e(n[t?r-i:i],i,this)===!1)return i+1;return i},L.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new x(function(){return i>r?w():E(e,i,n[t?r-i++:i++])})},e(D,O),D.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},D.prototype.has=function(e){return this._object.hasOwnProperty(e)},D.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;i>=o;o++){var a=r[t?i-o:o];if(e(n[a],a,this)===!1)return o+1}return o},D.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new x(function(){var a=r[t?i-o:o];return o++>i?w():E(e,a,n[a])})},D.prototype[pn]=!0,e(P,N),P.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=M(n),i=0;if(k(r))for(var o;!(o=r.next()).done&&e(o.value,i++,this)!==!1;);return i},P.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=M(n);if(!k(r))return new x(w);var i=0;return new x(function(){var t=r.next();return t.done?t:E(e,i++,t.value)})},e(R,N),R.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(e(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,e(a,i++,this)===!1)break}return i},R.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new x(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return E(e,i,r[i++])})};var Tn;e(J,N),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return X(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:new J(this._value,_(t,n)-y(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return X(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return X(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,r=0;return new x(function(){return r<n.size?E(e,r++,n._value):w()})},J.prototype.equals=function(e){return e instanceof J?X(this._value,e._value):K(e)};var An;e(Q,N),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]";
},Q.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},Q.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Q.prototype.slice=function(e,t){return v(e,t,this.size)?this:(e=y(e,this.size),t=_(t,this.size),e>=t?new Q(0,0):new Q(this.get(e,this._end),this.get(t,this._end),this._step))},Q.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(e){return this.indexOf(e)},Q.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;n>=o;o++){if(e(i,o,this)===!1)return o+1;i+=t?-r:r}return o},Q.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new x(function(){var a=i;return i+=t?-r:r,o>n?w():E(e,o++,a)})},Q.prototype.equals=function(e){return e instanceof Q?this._start===e._start&&this._end===e._end&&this._step===e._step:K(this,e)};var Cn;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var On,Nn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e=0|e,t=0|t;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},In=Object.isExtensible,Ln=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(On=new WeakMap);var Pn=0,Rn="__immutablehash__";"function"==typeof Symbol&&(Rn=Symbol(Rn));var Un=16,jn=255,zn=0,qn={};e(fe,te),fe.of=function(){var e=un.call(arguments,0);return Ee().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},fe.prototype.toString=function(){return this.__toString("Map {","}")},fe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},fe.prototype.set=function(e,t){return we(this,e,t)},fe.prototype.setIn=function(e,t){return this.updateIn(e,vn,function(){return t})},fe.prototype.remove=function(e){return we(this,e,vn)},fe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return vn})},fe.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},fe.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=De(this,Nt(e),t,n);return r===vn?void 0:r},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ee()},fe.prototype.merge=function(){return Oe(this,void 0,arguments)},fe.prototype.mergeWith=function(e){var t=un.call(arguments,1);return Oe(this,e,t)},fe.prototype.mergeIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},fe.prototype.mergeDeep=function(){return Oe(this,Ne,arguments)},fe.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Oe(this,Ie(e),t)},fe.prototype.mergeDeepIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},fe.prototype.sort=function(e){return Ze(bt(this,e))},fe.prototype.sortBy=function(e,t){return Ze(bt(this,t,e))},fe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},fe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new p)},fe.prototype.asImmutable=function(){return this.__ensureOwner()},fe.prototype.wasAltered=function(){return this.__altered},fe.prototype.__iterator=function(e,t){return new ye(this,e,t)},fe.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},fe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},fe.isMap=pe;var Fn="@@__IMMUTABLE_MAP__@@",Bn=fe.prototype;Bn[Fn]=!0,Bn[dn]=Bn.remove,Bn.removeIn=Bn.deleteIn,de.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;a>o;o++)if(X(n,i[o][0]))return i[o][1];return r},de.prototype.update=function(e,t,n,r,i,o,a){for(var s=i===vn,u=this.entries,l=0,c=u.length;c>l&&!X(r,u[l][0]);l++);var p=c>l;if(p?u[l][1]===i:s)return this;if(f(a),(s||!p)&&f(o),!s||1!==u.length){if(!p&&!s&&u.length>=Hn)return Te(e,u,r,i);var h=e&&e===this.ownerID,m=h?u:d(u);return p?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[r,i]:m.push([r,i]),h?(this.entries=m,this):new de(e,m)}},he.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=1<<((0===e?t:t>>>e)&gn),o=this.bitmap;return 0===(o&i)?r:this.nodes[Pe(o&i-1)].get(e+hn,t,n,r)},he.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=(0===t?n:n>>>t)&gn,u=1<<s,l=this.bitmap,c=0!==(l&u);if(!c&&i===vn)return this;var f=Pe(l&u-1),p=this.nodes,d=c?p[f]:void 0,h=Se(d,e,t+hn,n,r,i,o,a);if(h===d)return this;if(!c&&h&&p.length>=Vn)return Ce(e,p,l,s,h);if(c&&!h&&2===p.length&&ke(p[1^f]))return p[1^f];if(c&&h&&1===p.length&&ke(h))return h;var m=e&&e===this.ownerID,g=c?h?l:l^u:l|u,v=c?h?Re(p,f,h,m):je(p,f,m):Ue(p,f,h,m);return m?(this.bitmap=g,this.nodes=v,this):new he(e,g,v)},me.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=(0===e?t:t>>>e)&gn,o=this.nodes[i];return o?o.get(e+hn,t,n,r):r},me.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=(0===t?n:n>>>t)&gn,u=i===vn,l=this.nodes,c=l[s];if(u&&!c)return this;var f=Se(c,e,t+hn,n,r,i,o,a);if(f===c)return this;var p=this.count;if(c){if(!f&&(p--,Wn>p))return Ae(e,l,p,s)}else p++;var d=e&&e===this.ownerID,h=Re(l,s,f,d);return d?(this.count=p,this.nodes=h,this):new me(e,p,h)},ge.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;a>o;o++)if(X(n,i[o][0]))return i[o][1];return r},ge.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=i===vn;if(n!==this.keyHash)return s?this:(f(a),f(o),Me(this,e,t,n,[r,i]));for(var u=this.entries,l=0,c=u.length;c>l&&!X(r,u[l][0]);l++);var p=c>l;if(p?u[l][1]===i:s)return this;if(f(a),(s||!p)&&f(o),s&&2===c)return new ve(e,this.keyHash,u[1^l]);var h=e&&e===this.ownerID,m=h?u:d(u);return p?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[r,i]:m.push([r,i]),h?(this.entries=m,this):new ge(e,this.keyHash,m)},ve.prototype.get=function(e,t,n,r){return X(n,this.entry[0])?this.entry[1]:r},ve.prototype.update=function(e,t,n,r,i,o,a){var s=i===vn,u=X(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(f(a),s?void f(o):u?e&&e===this.ownerID?(this.entry[1]=i,this):new ve(e,this.keyHash,[r,i]):(f(o),Me(this,e,t,oe(r),[r,i])))},de.prototype.iterate=ge.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;i>=r;r++)if(e(n[t?i-r:r])===!1)return!1},he.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;i>=r;r++){var o=n[t?i-r:r];if(o&&o.iterate(e,t)===!1)return!1}},ve.prototype.iterate=function(e,t){return e(this.entry)},e(ye,x),ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return _e(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,n>=i)return _e(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,n>=i){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return _e(e,o.entry);t=this._stack=be(o,t)}continue}t=this._stack=this._stack.__prev}return w()};var Yn,Hn=mn/4,Vn=mn/2,Wn=mn/4;e(ze,ne),ze.of=function(){return this(arguments)},ze.prototype.toString=function(){return this.__toString("List [","]")},ze.prototype.get=function(e,t){if(e=m(this,e),e>=0&&e<this.size){e+=this._origin;var n=Ge(this,e);return n&&n.array[e&gn]}return t},ze.prototype.set=function(e,t){return Ve(this,e,t)},ze.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ze.prototype.insert=function(e,t){return this.splice(e,0,t)},ze.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=hn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):He()},ze.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Xe(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},ze.prototype.pop=function(){return Xe(this,0,-1)},ze.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Xe(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},ze.prototype.shift=function(){return Xe(this,1)},ze.prototype.merge=function(){return Ke(this,void 0,arguments)},ze.prototype.mergeWith=function(e){var t=un.call(arguments,1);return Ke(this,e,t)},ze.prototype.mergeDeep=function(){return Ke(this,Ne,arguments)},ze.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Ke(this,Ie(e),t)},ze.prototype.setSize=function(e){return Xe(this,0,e)},ze.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:Xe(this,y(e,n),_(t,n))},ze.prototype.__iterator=function(e,t){var n=0,r=Be(this,t);return new x(function(){var t=r();return t===Kn?w():E(e,n++,t)})},ze.prototype.__iterate=function(e,t){for(var n,r=0,i=Be(this,t);(n=i())!==Kn&&e(n,r++,this)!==!1;);return r},ze.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ye(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ze.isList=qe;var $n="@@__IMMUTABLE_LIST__@@",Gn=ze.prototype;Gn[$n]=!0,Gn[dn]=Gn.remove,Gn.setIn=Bn.setIn,Gn.deleteIn=Gn.removeIn=Bn.removeIn,Gn.update=Bn.update,Gn.updateIn=Bn.updateIn,Gn.mergeIn=Bn.mergeIn,Gn.mergeDeepIn=Bn.mergeDeepIn,Gn.withMutations=Bn.withMutations,Gn.asMutable=Bn.asMutable,Gn.asImmutable=Bn.asImmutable,Gn.wasAltered=Bn.wasAltered,Fe.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&gn;if(r>=this.array.length)return new Fe([],e);var i,o=0===r;if(t>0){var a=this.array[r];if(i=a&&a.removeBefore(e,t-hn,n),i===a&&o)return this}if(o&&!i)return this;var s=$e(this,e);if(!o)for(var u=0;r>u;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},Fe.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&gn;if(r>=this.array.length)return this;var i;if(t>0){var o=this.array[r];if(i=o&&o.removeAfter(e,t-hn,n),i===o&&r===this.array.length-1)return this}var a=$e(this,e);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Xn,Kn={};e(Ze,fe),Ze.of=function(){return this(arguments)},Ze.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ze.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Ze.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Ze.prototype.set=function(e,t){return nt(this,e,t)},Ze.prototype.remove=function(e){return nt(this,e,vn)},Ze.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ze.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Ze.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ze.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Ze.isOrderedMap=Qe,Ze.prototype[pn]=!0,Ze.prototype[dn]=Ze.prototype.remove;var Jn;e(rt,O),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=lt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=ut(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Mt(this):0,function(i){return e(i,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(xn,t),r=t?Mt(this):0;return new x(function(){var i=n.next();return i.done?i:E(e,t?--r:r++,i.value,i)})},rt.prototype[pn]=!0,e(it,N),it.prototype.includes=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t),r=0;return new x(function(){var t=n.next();return t.done?t:E(e,r++,t.value,t)})},e(ot,I),ot.prototype.has=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t);return new x(function(){var t=n.next();return t.done?t:E(e,t.value,t.value,t)})},e(at,O),at.prototype.entrySeq=function(){return this._iter.toSeq()},at.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){kt(t);var r=o(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},at.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t);return new x(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){kt(r);var i=o(r);return E(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},it.prototype.cacheResult=rt.prototype.cacheResult=ot.prototype.cacheResult=at.prototype.cacheResult=Ct,e(It,te),It.prototype.toString=function(){return this.__toString(Dt(this)+" {","}")},It.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},It.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},It.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Lt(this,Ee()))},It.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Dt(this));if(this._map&&!this._map.has(e)){var n=this._defaultValues[e];if(t===n)return this}var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:Lt(this,r)},It.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Lt(this,t)},It.prototype.wasAltered=function(){return this._map.wasAltered()},It.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},It.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},It.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Lt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Zn=It.prototype;Zn[dn]=Zn.remove,Zn.deleteIn=Zn.removeIn=Bn.removeIn,Zn.merge=Bn.merge,Zn.mergeWith=Bn.mergeWith,Zn.mergeIn=Bn.mergeIn,Zn.mergeDeep=Bn.mergeDeep,Zn.mergeDeepWith=Bn.mergeDeepWith,Zn.mergeDeepIn=Bn.mergeDeepIn,Zn.setIn=Bn.setIn,Zn.update=Bn.update,Zn.updateIn=Bn.updateIn,Zn.withMutations=Bn.withMutations,Zn.asMutable=Bn.asMutable,Zn.asImmutable=Bn.asImmutable,e(Ut,re),Ut.of=function(){return this(arguments)},Ut.fromKeys=function(e){return this(n(e).keySeq())},Ut.prototype.toString=function(){return this.__toString("Set {","}")},Ut.prototype.has=function(e){return this._map.has(e)},Ut.prototype.add=function(e){return zt(this,this._map.set(e,!0))},Ut.prototype.remove=function(e){return zt(this,this._map.remove(e))},Ut.prototype.clear=function(){return zt(this,this._map.clear())},Ut.prototype.union=function(){var e=un.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Ut.prototype.intersect=function(){var e=un.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Ut.prototype.subtract=function(){var e=un.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Ut.prototype.merge=function(){return this.union.apply(this,arguments)},Ut.prototype.mergeWith=function(e){var t=un.call(arguments,1);return this.union.apply(this,t)},Ut.prototype.sort=function(e){return Bt(bt(this,e))},Ut.prototype.sortBy=function(e,t){return Bt(bt(this,t,e))},Ut.prototype.wasAltered=function(){return this._map.wasAltered()},Ut.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Ut.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Ut.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Ut.isSet=jt;var Qn="@@__IMMUTABLE_SET__@@",er=Ut.prototype;er[Qn]=!0,er[dn]=er.remove,er.mergeDeep=er.merge,er.mergeDeepWith=er.mergeWith,er.withMutations=Bn.withMutations,er.asMutable=Bn.asMutable,er.asImmutable=Bn.asImmutable,er.__empty=Ft,er.__make=qt;var tr;e(Bt,Ut),Bt.of=function(){return this(arguments)},Bt.fromKeys=function(e){return this(n(e).keySeq())},Bt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Bt.isOrderedSet=Yt;var nr=Bt.prototype;nr[pn]=!0,nr.__empty=Vt,nr.__make=Ht;var rr;e(Wt,ne),Wt.of=function(){return this(arguments)},Wt.prototype.toString=function(){return this.__toString("Stack [","]")},Wt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Wt.prototype.peek=function(){return this._head&&this._head.value},Wt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Gt(e,t)},Wt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;ce(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Gt(t,n)},Wt.prototype.pop=function(){return this.slice(1)},Wt.prototype.unshift=function(){return this.push.apply(this,arguments)},Wt.prototype.unshiftAll=function(e){return this.pushAll(e)},Wt.prototype.shift=function(){return this.pop.apply(this,arguments)},Wt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xt()},Wt.prototype.slice=function(e,t){if(v(e,t,this.size))return this;var n=y(e,this.size),r=_(t,this.size);if(r!==this.size)return ne.prototype.slice.call(this,e,t);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Gt(i,o)},Wt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Gt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Wt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&e(r.value,n++,this)!==!1;)r=r.next;return n},Wt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new x(function(){if(r){var t=r.value;return r=r.next,E(e,n++,t)}return w()})},Wt.isStack=$t;var ir="@@__IMMUTABLE_STACK__@@",or=Wt.prototype;or[ir]=!0,or.withMutations=Bn.withMutations,or.asMutable=Bn.asMutable,or.asImmutable=Bn.asImmutable,or.wasAltered=Bn.wasAltered;var ar;t.Iterator=x,Kt(t,{toArray:function(){ce(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new it(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,!0)},toMap:function(){return fe(this.toKeyedSeq())},toObject:function(){ce(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Ze(this.toKeyedSeq())},toOrderedSet:function(){return Bt(a(this)?this.valueSeq():this)},toSet:function(){return Ut(a(this)?this.valueSeq():this)},toSetSeq:function(){return new ot(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Wt(a(this)?this.valueSeq():this)},toList:function(){return ze(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=un.call(arguments,0);return St(this,gt(this,e))},includes:function(e){return this.some(function(t){return X(t,e)})},entries:function(){return this.__iterator(En)},every:function(e,t){ce(this.size);var n=!0;return this.__iterate(function(r,i,o){return e.call(t,r,i,o)?void 0:(n=!1,!1)}),n},filter:function(e,t){return St(this,ct(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return ce(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ce(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(bn)},map:function(e,t){return St(this,ut(this,e,t))},reduce:function(e,t,n){ce(this.size);var r,i;return arguments.length<2?i=!0:r=t,this.__iterate(function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return St(this,lt(this,!0))},slice:function(e,t){return St(this,dt(this,e,t,!0))},some:function(e,t){return!this.every(Qt(e),t)},sort:function(e){return St(this,bt(this,e))},values:function(){return this.__iterator(xn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ft(this,e,t)},equals:function(e){return K(this,e)},entrySeq:function(){var e=this;if(e._cache)return new L(e._cache);var t=e.toSeq().map(Zt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Qt(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate(function(n,i,o){return e.call(t,n,i,o)?(r=[i,n],!1):void 0}),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(g)},flatMap:function(e,t){return St(this,yt(this,e,t))},flatten:function(e){return St(this,vt(this,e,!0))},fromEntrySeq:function(){return new at(this)},get:function(e,t){return this.find(function(t,n){return X(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=Nt(e);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,vn):vn,r===vn)return t}return r},groupBy:function(e,t){return pt(this,e,t)},has:function(e){return this.get(e,vn)!==vn},hasIn:function(e){return this.getIn(e,vn)!==vn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return X(t,e)})},keySeq:function(){return this.toSeq().map(Jt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return xt(this,e)},maxBy:function(e,t){return xt(this,t,e)},min:function(e){return xt(this,e?en(e):rn)},minBy:function(e,t){return xt(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return St(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return St(this,mt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Qt(e),t)},sortBy:function(e,t){return St(this,bt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return St(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return St(this,ht(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Qt(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var sr=t.prototype;sr[ln]=!0,sr[kn]=sr.values,sr.__toJS=sr.toArray,sr.__toStringMapper=tn,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap,sr.contains=sr.includes,Kt(n,{flip:function(){return St(this,st(this))},mapEntries:function(e,t){var n=this,r=0;return St(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return St(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var ur=n.prototype;ur[cn]=!0,ur[kn]=sr.entries,ur.__toJS=sr.toObject,ur.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Kt(r,{toKeyedSeq:function(){return new rt(this,!1)},filter:function(e,t){return St(this,ct(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return St(this,lt(this,!1))},slice:function(e,t){return St(this,dt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=y(e,0>e?this.count():this.size);var r=this.slice(0,e);return St(this,1===n?r:r.concat(d(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return St(this,vt(this,e,!1))},get:function(e,t){return e=m(this,e),0>e||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=m(this,e),e>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return St(this,_t(this,e))},interleave:function(){var e=[this].concat(d(arguments)),t=wt(this.toSeq(),N.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),St(this,n)},keySeq:function(){return Q(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return St(this,mt(this,e,t,!1))},zip:function(){var e=[this].concat(d(arguments));return St(this,wt(this,nn,e))},zipWith:function(e){var t=d(arguments);return t[0]=this,St(this,wt(this,e,t))}}),r.prototype[fn]=!0,r.prototype[pn]=!0,Kt(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=sr.includes,i.prototype.contains=i.prototype.includes,Kt(O,n.prototype),Kt(N,r.prototype),Kt(I,i.prototype),Kt(te,n.prototype),Kt(ne,r.prototype),Kt(re,i.prototype);var lr={Iterable:t,Seq:C,Collection:ee,Map:fe,OrderedMap:Ze,List:ze,Stack:Wt,Set:Ut,OrderedSet:Bt,Record:It,Range:Q,Repeat:J,is:X,fromJS:V};return lr})},function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=n(3),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in n){s.properties.hasOwnProperty(f)?i(!1):void 0;var p=f.toLowerCase(),d=n[f],h={attributeName:p,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseAttribute:r(d,t.MUST_USE_ATTRIBUTE),mustUseProperty:r(d,t.MUST_USE_PROPERTY),hasSideEffects:r(d,t.HAS_SIDE_EFFECTS),hasBooleanValue:r(d,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.mustUseAttribute&&h.mustUseProperty?i(!1):void 0,!h.mustUseProperty&&h.hasSideEffects?i(!1):void 0,h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1?void 0:i(!1),u.hasOwnProperty(f)){var m=u[f];h.attributeName=m}a.hasOwnProperty(f)&&(h.attributeNamespace=a[f]),l.hasOwnProperty(f)&&(h.propertyName=l[f]),c.hasOwnProperty(f)&&(h.mutationMethod=c[f]),s.properties[f]=h}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=a[e];return r||(a[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:o};e.exports=s},function(e,t,n){"use strict";function r(e){return d+e.toString(36)}function i(e,t){return e.charAt(t)===d||t===e.length}function o(e){return""===e||e.charAt(0)===d&&e.charAt(e.length-1)!==d}function a(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(d)):""}function u(e,t){if(o(e)&&o(t)?void 0:p(!1),a(e,t)?void 0:p(!1),e===t)return e;var n,r=e.length+h;for(n=r;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function l(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,a=0;n>=a;a++)if(i(e,a)&&i(t,a))r=a;else if(e.charAt(a)!==t.charAt(a))break;var s=e.substr(0,r);return o(s)?void 0:p(!1),s}function c(e,t,n,r,i,o){e=e||"",t=t||"",e===t?p(!1):void 0;var l=a(t,e);l||a(e,t)?void 0:p(!1);for(var c=0,f=l?s:u,d=e;;d=f(d,t)){var h;if(i&&d===e||o&&d===t||(h=n(d,l,r)),h===!1||d===t)break;c++<m?void 0:p(!1)}}var f=n(175),p=n(3),d=".",h=d.length,m=1e4,g={createReactRootID:function(){return r(f.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===d&&e.length>1){var t=e.indexOf(d,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var o=l(e,t);o!==e&&c(e,o,n,r,!1,!0),o!==t&&c(o,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseTwoPhaseSkipTarget:function(e,t,n){e&&(c("",e,t,n,!0,!0),c(e,"",t,n,!0,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:d};e.exports=g},function(e,t){function n(e){return e=e===Object(e)?e:{data:e},e._id=++o,e._prev&&(e._prev=null),e}function r(e,t){t=t||{};for(var n=0,r=e.length;r>n;++n)t[e[n]._id]=1;return t}function i(e,t){t=t||{};for(var n in e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}var o=0;e.exports={ingest:n,idMap:r,derive:function(e){return n(i(e))},rederive:function(e,t){return i(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){o=0},idFilter:function(e){for(var t={},n=arguments.length;--n>0;)r(arguments[n],t);
return e.filter(function(e){return!t[e._id]})}}},function(e,t,n){"use strict";var r=n(38),i=n(120),o=n(349);t.defaultCellConfig={width:200,height:200},t.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var a={color:"#000000",opacity:.4,offset:0};t.defaultFacetConfig={scale:r.defaultFacetScaleConfig,axis:i.defaultFacetAxisConfig,grid:a,cell:t.defaultFacetCellConfig},function(e){e[e.NORMAL="normal"]="NORMAL",e[e.BOLD="bold"]="BOLD"}(t.FontWeight||(t.FontWeight={}));t.FontWeight;!function(e){e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.CROSS="cross"]="CROSS",e[e.DIAMOND="diamond"]="DIAMOND",e[e.TRIANGLEUP="triangle-up"]="TRIANGLEUP",e[e.TRIANGLEDOWN="triangle-down"]="TRIANGLEDOWN"}(t.Shape||(t.Shape={}));t.Shape;!function(e){e[e.LEFT="left"]="LEFT",e[e.RIGHT="right"]="RIGHT",e[e.CENTER="center"]="CENTER"}(t.HorizontalAlign||(t.HorizontalAlign={}));t.HorizontalAlign;!function(e){e[e.TOP="top"]="TOP",e[e.MIDDLE="middle"]="MIDDLE",e[e.BOTTOM="bottom"]="BOTTOM"}(t.VerticalAlign||(t.VerticalAlign={}));var s=t.VerticalAlign;!function(e){e[e.NORMAL="normal"]="NORMAL",e[e.ITALIC="italic"]="ITALIC"}(t.FontStyle||(t.FontStyle={}));t.FontStyle;!function(e){e[e.ZERO="zero"]="ZERO",e[e.CENTER="center"]="CENTER",e[e.NORMALIZE="normalize"]="NORMALIZE",e[e.NONE="none"]="NONE"}(t.StackOffset||(t.StackOffset={}));t.StackOffset;!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LINEAR_CLOSED="linear-closed"]="LINEAR_CLOSED",e[e.STEP="step"]="STEP",e[e.STEP_BEFORE="step-before"]="STEP_BEFORE",e[e.STEP_AFTER="step-after"]="STEP_AFTER",e[e.BASIS="basis"]="BASIS",e[e.BASIS_OPEN="basis-open"]="BASIS_OPEN",e[e.BASIS_CLOSED="basis-closed"]="BASIS_CLOSED",e[e.CARDINAL="cardinal"]="CARDINAL",e[e.CARDINAL_OPEN="cardinal-open"]="CARDINAL_OPEN",e[e.CARDINAL_CLOSED="cardinal-closed"]="CARDINAL_CLOSED",e[e.BUNDLE="bundle"]="BUNDLE",e[e.MONOTONE="monotone"]="MONOTONE"}(t.Interpolate||(t.Interpolate={}));t.Interpolate;t.defaultMarkConfig={color:"#4682b4",strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:s.MIDDLE,text:"Abc",shortTimeLabels:!1,applyColorToBackground:!1},t.defaultConfig={numberFormat:"s",timeFormat:"%Y-%m-%d",cell:t.defaultCellConfig,mark:t.defaultMarkConfig,scale:r.defaultScaleConfig,axis:i.defaultAxisConfig,legend:o.defaultLegendConfig,facet:t.defaultFacetConfig}},function(e,t){"use strict";function n(e,t){if(void 0===t&&(t=!1),e){var n=e.toString(),r=[];n.indexOf("year")>-1&&r.push(t?"%y":"%Y"),n.indexOf("month")>-1&&r.push(t?"%b":"%B"),n.indexOf("day")>-1?r.push(t?"%a":"%A"):n.indexOf("date")>-1&&r.push("%d");var i=[];n.indexOf("hours")>-1&&i.push("%H"),n.indexOf("minutes")>-1&&i.push("%M"),n.indexOf("seconds")>-1&&i.push("%S"),n.indexOf("milliseconds")>-1&&i.push("%L");var o=[];return r.length>0&&o.push(r.join("-")),i.length>0&&o.push(i.join(":")),o.length>0?o.join(" "):void 0}}!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDAY="yearmonthday"]="YEARMONTHDAY",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARDAY="yearday"]="YEARDAY",e[e.YEARDATE="yeardate"]="YEARDATE",e[e.YEARMONTHDAYHOURS="yearmonthdayhours"]="YEARMONTHDAYHOURS",e[e.YEARMONTHDAYHOURSMINUTES="yearmonthdayhoursminutes"]="YEARMONTHDAYHOURSMINUTES",e[e.YEARMONTHDAYHOURSMINUTESSECONDS="yearmonthdayhoursminutesseconds"]="YEARMONTHDAYHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS"}(t.TimeUnit||(t.TimeUnit={}));var r=t.TimeUnit;t.TIMEUNITS=[r.YEAR,r.MONTH,r.DAY,r.DATE,r.HOURS,r.MINUTES,r.SECONDS,r.MILLISECONDS,r.YEARMONTH,r.YEARMONTHDAY,r.YEARMONTHDATE,r.YEARDAY,r.YEARDATE,r.YEARMONTHDAYHOURS,r.YEARMONTHDAYHOURSMINUTES,r.YEARMONTHDAYHOURSMINUTESSECONDS,r.HOURSMINUTES,r.HOURSMINUTESSECONDS,r.MINUTESSECONDS,r.SECONDSMILLISECONDS],t.format=n},function(e,t,n){function r(e){return e.x||0}function i(e){return e.y||0}function o(e){return(e.x||0)+(e.width||0)}function a(e){return(e.y||0)+(e.height||0)}function s(e){return null==e.size?100:e.size}function u(e){return e.shape||"circle"}var l=n(12).svg,c=l.area().x(r).y1(i).y0(a),f=l.area().y(i).x1(r).x0(o),p=l.line().x(r).y(i);e.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:l.arc(),symbol:l.symbol().type(u).size(s),area:function(e){var t=e[0];return("horizontal"===t.orient?f:c).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return p.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)}},textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}},function(e,t){e.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},function(e,t,n){"use strict";function r(e){return n(18).lookup(e._parent)||null}function i(e){if(!e)return[];var t=e._parent&&r(e);if(!t)return[];for(var n=[t];t&&t._parent;)t=r(t),t&&n.push(t);return n}function o(e){return e.reduce(function(e,t){return"group"===t.type&&e.push(t._id),e},[])}function a(e){return o(i(e))}function s(e,t){var n,r,i,o,a;for(i=t.length-1;i>=0;--i){for(n=t[i],r=e.items,o=0,a=r.length;a>o&&(e=r[o].def.lyra_id===n?r[o].items[0]:null,null===e);++o);if(null===e)break}return e}e.exports={getParent:r,getParentGroupIds:a,getParents:i,getGroupIds:o,findInItemTree:s}},function(e,t,n){"use strict";var r=n(499);e.exports=r(n(500))},function(e,t,n){function r(e,t){return t?void(e[l]=t):e&&e[l]||null}function i(e,t){e=u.array(e),t=u.$(t);var n,r,i;if(e[l]&&(n=t(e[l]),u.isString(n)))return n;for(r=0,i=e.length;!u.isValid(n)&&i>r;++r)n=t?t(e[r]):e[r];return u.isDate(n)?"date":u.isNumber(n)?"number":u.isBoolean(n)?"boolean":u.isString(n)?"string":null}function o(e,t){return e.length?(t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=i(e,n),t},{})):void 0}function a(e,t){e=u.array(e),t=u.$(t);var n,r,i,o=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<o.length;++r)u.isValid(i)&&!f[o[r]](i)&&(o.splice(r,1),r-=1);if(0===o.length)return"string"}return o[0]}function s(e,t){return t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=a(e,n),t},{})}var u=n(10),l="__types__",c={"boolean":u["boolean"],integer:u.number,number:u.number,date:u.date,string:function(e){return""===e?null:e}},f={"boolean":function(e){return"true"===e||"false"===e||u.isBoolean(e)},integer:function(e){return f.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!u.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=r,i.all=o,i.infer=a,i.inferAll=s,i.parsers=c,e.exports=i},function(e,t,n){function r(e,t,n){var r=e&&e.nullh||0,i=u.random.normal(0,1),o=l.mean(t,n),a=l.stdev(t,n)/Math.sqrt(l.count.valid(t,n));if(0===a)return o-r===0?1:0;var s=(o-r)/a;return 2*i.cdf(-Math.abs(s))}function i(e,t,n,r){var i,o=r?t.map(a.$(n)):t,s=r?t.map(a.$(r)):n,u=l.count(o),c=l.count(s),f=Array();if(u!==c)throw Error("Array lengths must match.");for(i=0;u>i;++i)a.isValid(o[i])&&a.isValid(s[i])&&f.push(o[i]-s[i]);return l.z.test(f,e&&e.nullh||0)}function o(e,t,n,r){var i=r?t.map(a.$(n)):t,o=r?t.map(a.$(r)):n,s=l.count.valid(i),c=l.count.valid(o),f=u.random.normal(0,1),p=l.mean(i)-l.mean(o)-(e&&e.nullh||0),d=Math.sqrt(l.variance(i)/s+l.variance(o)/c);if(0===d)return 0===p?1:0;var h=p/d;return 2*f.cdf(-Math.abs(h))}var a=n(10),s=n(55),u=n(66),l=e.exports;l.unique=function(e,t,n){t=a.$(t),n=n||[];var r,i,o,s={};for(i=0,o=e.length;o>i;++i)r=t?t(e[i]):e[i],r in s||(s[r]=1,n.push(r));return n},l.count=function(e){return e&&e.length||0},l.count.valid=function(e,t){t=a.$(t);var n,r,i,o=0;for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],a.isValid(n)&&(o+=1);return o},l.count.missing=function(e,t){t=a.$(t);var n,r,i,o=0;for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],null==n&&(o+=1);return o},l.count.distinct=function(e,t){t=a.$(t);var n,r,i,o={},s=0;for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],n in o||(o[n]=1,s+=1);return s},l.count.map=function(e,t){t=a.$(t);var n,r,i,o={};for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],o[n]=n in o?o[n]+1:1;return o},l.median=function(e,t){return t&&(e=e.map(a.$(t))),e=e.filter(a.isValid).sort(a.cmp),l.quantile(e,.5)},l.quartile=function(e,t){t&&(e=e.map(a.$(t))),e=e.filter(a.isValid).sort(a.cmp);var n=l.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},l.quantile=function(e,t,n){void 0===n&&(n=t,t=a.identity),t=a.$(t);var r=(e.length-1)*n+1,i=Math.floor(r),o=+t(e[i-1]),s=r-i;return s?o+s*(t(e[i])-o):o},l.sum=function(e,t){t=a.$(t);for(var n,r=0,i=0,o=e.length;o>i;++i)n=t?t(e[i]):e[i],a.isValid(n)&&(r+=n);return r},l.mean=function(e,t){t=a.$(t);var n,r,i,o,s,u=0;for(r=0,o=0,i=e.length;i>r;++r)s=t?t(e[r]):e[r],a.isValid(s)&&(n=s-u,u+=n/++o);return u},l.mean.geometric=function(e,t){t=a.$(t);var n,r,i,o,s=1;for(o=0,n=0,r=e.length;r>o;++o)if(i=t?t(e[o]):e[o],a.isValid(i)){if(0>=i)throw Error("Geometric mean only defined for positive values.");s*=i,++n}return s=n>0?Math.pow(s,1/n):0},l.mean.harmonic=function(e,t){t=a.$(t);var n,r,i,o,s=0;for(o=0,n=0,r=e.length;r>o;++o)i=t?t(e[o]):e[o],a.isValid(i)&&(s+=1/i,++n);return n/s},l.variance=function(e,t){if(t=a.$(t),!a.isArray(e)||e.length<2)return 0;var n,r,i,o,s=0,u=0;for(r=0,i=0;r<e.length;++r)o=t?t(e[r]):e[r],a.isValid(o)&&(n=o-s,s+=n/++i,u+=n*(o-s));return u/=i-1},l.stdev=function(e,t){return Math.sqrt(l.variance(e,t))},l.modeskew=function(e,t){var n=l.mean(e,t),r=l.median(e,t),i=l.stdev(e,t);return 0===i?0:(n-r)/i},l.min=function(e,t){return l.extent(e,t)[0]},l.max=function(e,t){return l.extent(e,t)[1]},l.extent=function(e,t){t=a.$(t);var n,r,i,o,s=e.length;for(o=0;s>o;++o)if(i=t?t(e[o]):e[o],a.isValid(i)){n=r=i;break}for(;s>o;++o)i=t?t(e[o]):e[o],a.isValid(i)&&(n>i&&(n=i),i>r&&(r=i));return[n,r]},l.extent.index=function(e,t){t=a.$(t);var n,r,i,o,s=-1,u=-1,l=e.length;for(o=0;l>o;++o)if(i=t?t(e[o]):e[o],a.isValid(i)){n=r=i,s=u=o;break}for(;l>o;++o)i=t?t(e[o]):e[o],a.isValid(i)&&(n>i&&(n=i,s=o),i>r&&(r=i,u=o));return[s,u]},l.dot=function(e,t,n){var r,i,o=0;if(n)for(t=a.$(t),n=a.$(n),r=0;r<e.length;++r)i=t(e[r])*n(e[r]),i===i&&(o+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<e.length;++r)i=e[r]*t[r],i===i&&(o+=i)}return o},l.dist=function(e,t,n,r){var i,o,s=a.isFunction(n)||a.isString(n),u=e,l=s?e:t,c=s?r:n,f=2===c||null==c,p=e.length,d=0;for(s&&(t=a.$(t),n=a.$(n)),o=0;p>o;++o)i=s?t(u[o])-n(l[o]):u[o]-l[o],d+=f?i*i:Math.pow(Math.abs(i),c);return f?Math.sqrt(d):Math.pow(d,1/c)},l.cohensd=function(e,t,n){var r=n?e.map(a.$(t)):e,i=n?e.map(a.$(n)):t,o=l.mean(r),s=l.mean(i),u=l.count.valid(r),c=l.count.valid(i);if(0>=u+c-2)return 0;var f=l.variance(r),p=l.variance(i),d=Math.sqrt(((u-1)*f+(c-1)*p)/(u+c-2));return 0===d?0:(o-s)/d},l.covariance=function(e,t,n){var r,i,o,s,u,c=n?e.map(a.$(t)):e,f=n?e.map(a.$(n)):t,p=c.length,d=l.mean(c),h=l.mean(f),m=0,g=0;if(p!==f.length)throw Error("Input lengths must match.");for(r=0;p>r;++r)if(i=c[r],s=a.isValid(i),o=f[r],u=a.isValid(o),s&&u)m+=(i-d)*(o-h),++g;else if(s||u)throw Error("Valid values must align.");return m/(g-1)},l.rank=function(e,t){t=a.$(t)||a.identity;var n,r,i,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(a.comparator("val")),s=e.length,u=Array(s),l=-1,c={};for(n=0;s>n;++n){if(r=o[n].val,0>l&&c===r)l=n-1;else if(l>-1&&c!==r){for(i=1+(n-1+l)/2;n>l;++l)u[o[l].idx]=i;l=-1}u[o[n].idx]=n+1,c=r}if(l>-1)for(i=1+(s-1+l)/2;s>l;++l)u[o[l].idx]=i;return u},l.cor=function(e,t,n){var r=n;n=r?e.map(a.$(n)):t,t=r?e.map(a.$(t)):e;var i=l.dot(t,n),o=l.mean(t),s=l.mean(n),u=l.stdev(t),c=l.stdev(n),f=e.length;return(i-f*o*s)/((f-1)*u*c)},l.cor.rank=function(e,t,n){var r,i,o,a=n?l.rank(e,t):l.rank(e),s=n?l.rank(e,n):l.rank(t),u=e.length;for(r=0,i=0;u>r;++r)o=a[r]-s[r],i+=o*o;return 1-6*i/(u*(u*u-1))},l.cor.dist=function(e,t,n){var r,i,o,s,u=n?e.map(a.$(t)):e,c=n?e.map(a.$(n)):t,f=l.dist.mat(u),p=l.dist.mat(c),d=f.length;for(r=0,i=0,o=0,s=0;d>r;++r)i+=f[r]*f[r],o+=p[r]*p[r],s+=f[r]*p[r];return Math.sqrt(s/Math.sqrt(i*o))},l.linearRegression=function(e,t,n){var r,i,o=n?e.map(a.$(t)):e,s=n?e.map(a.$(n)):t,u=o.length,c=l.covariance(o,s),f=l.stdev(o),p=l.stdev(s),d=c/(f*f),h=l.mean(s)-d*l.mean(o),m={slope:d,intercept:h,R:c/(f*p),rss:0};for(i=0;u>i;++i)a.isValid(o[i])&&a.isValid(s[i])&&(r=d*o[i]+h-s[i],m.rss+=r*r);return m},l.bootstrap={},l.bootstrap.ci=function(e,t,n,r,i){var o,s,c,f,p,d,h;for(a.isFunction(t)||a.isString(t)?(o=e.map(a.$(t)),s=n,c=r,f=i):(o=e,s=t,c=n,f=r),s=s?+s:1e3,c=c||.05,p=u.random.bootstrap(o,f),h=0,d=Array(s);s>h;++h)d[h]=l.mean(p.samples(o.length));return d.sort(a.numcmp),[l.quantile(d,c/2),l.quantile(d,1-c/2)]},l.z={},l.z.ci=function(e,t,n){var r=e,i=t;(a.isFunction(t)||a.isString(t))&&(r=e.map(a.$(t)),i=n),i=i||.05;var o=.05===i?1.96:u.random.normal(0,1).icdf(1-i/2),s=l.mean(r),c=l.stdev(r)/Math.sqrt(l.count.valid(r));return[s-o*c,s+o*c]},l.z.test=function(e,t,n,s){return a.isFunction(n)||a.isString(n)?(s&&s.paired?i:o)(s,e,t,n):a.isArray(t)?(n&&n.paired?i:o)(n,e,t):a.isFunction(t)||a.isString(t)?r(n,e,t):r(t,e)},l.dist.mat=function(e){var t,n,r,i=e.length,o=i*i,a=Array(o),s=u.zeros(i),l=0;for(n=0;i>n;++n)for(a[n*i+n]=0,r=n+1;i>r;++r)a[n*i+r]=t=Math.abs(e[n]-e[r]),a[r*i+n]=t,s[n]+=t,s[r]+=t;for(n=0;i>n;++n)l+=s[n],s[n]/=i;for(l/=o,n=0;i>n;++n)for(r=n;i>r;++r)a[n*i+r]+=l-s[n]-s[r],a[r*i+n]=a[n*i+r];return a},l.entropy=function(e,t){t=a.$(t);var n,r,i=0,o=0,s=e.length;for(n=0;s>n;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;s>n;++n)r=(t?t(e[n]):e[n])/i,r&&(o+=r*Math.log(r));return-o/Math.LN2},l.mutual=function(e,t,n,r){var i,o,s,u=r?e.map(a.$(t)):e,l=r?e.map(a.$(n)):t,c=r?e.map(a.$(r)):n,f={},p={},d=c.length,h=0,m=0,g=0;for(s=0;d>s;++s)f[u[s]]=0,p[l[s]]=0;for(s=0;d>s;++s)f[u[s]]+=c[s],p[l[s]]+=c[s],h+=c[s];for(o=1/(h*Math.LN2),s=0;d>s;++s)0!==c[s]&&(i=h*c[s]/(f[u[s]]*p[l[s]]),m+=c[s]*o*Math.log(i),g+=c[s]*o*Math.log(c[s]/h));return[m,1+m/g]},l.mutual.info=function(e,t,n,r){return l.mutual(e,t,n,r)[0]},l.mutual.dist=function(e,t,n,r){return l.mutual(e,t,n,r)[1]},l.profile=function(e,t){var n,r,i,o,u,c=0,f=0,p=0,d=0,h=null,m=null,g=0,v=[],y={};for(i=0;i<e.length;++i)o=t?t(e[i]):e[i],y[o]=o in y?y[o]+1:(d+=1,1),null==o?++p:a.isValid(o)&&(u="string"==typeof o?o.length:o,(null===h||h>u)&&(h=u),(null===m||u>m)&&(m=u),n=u-c,c+=n/++f,g+=n*(u-c),v.push(u));return g/=f-1,r=Math.sqrt(g),v.sort(a.cmp),{type:s(e,t),unique:y,count:e.length,valid:f,missing:p,distinct:d,min:h,max:m,mean:c,stdev:r,median:o=l.quantile(v,.5),q1:l.quantile(v,.25),q3:l.quantile(v,.75),modeskew:0===r?0:(c-o)/r}},l.summary=function(e,t){t=t||a.keys(e[0]);var n=t.map(function(t){var n=l.profile(e,a.$(t));return n.field=t,n});return n.__summary__=!0,n}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";var r=n(155),i=n(275),o=n(168),a=n(177),s=n(178),u=n(3),l=(n(6),{}),c=null,f=function(e,t){e&&(i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return f(e,!0)},d=function(e){return f(e,!1)},h=null,m={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){h=e},getInstanceHandle:function(){return h},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){"function"!=typeof n?u(!1):void 0;var i=l[t]||(l[t]={});i[e]=n;var o=r.registrationNameModules[t];o&&o.didPutListener&&o.didPutListener(e,t,n)},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=r.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var i=l[t];i&&delete i[e]},deleteAllListeners:function(e){for(var t in l)if(l[t][e]){var n=r.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t),delete l[t][e]}},extractEvents:function(e,t,n,i,o){for(var s,u=r.plugins,l=0;l<u.length;l++){var c=u[l];if(c){var f=c.extractEvents(e,t,n,i,o);f&&(s=a(s,f))}}return s},enqueueEvents:function(e){e&&(c=a(c,e))},processEventQueue:function(e){var t=c;c=null,e?s(t,p):s(t,d),c?u(!1):void 0,o.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};e.exports=m},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return y(e,r)}function i(e,t,n){var i=t?v.bubbled:v.captured,o=r(e,n,i);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchIDs=m(n._dispatchIDs,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function a(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,i,e)}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=y(e,r);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchIDs=m(n._dispatchIDs,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e.dispatchMarker,null,e)}function l(e){g(e,o)}function c(e){g(e,a)}function f(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,s,e,t)}function p(e){g(e,u)}var d=n(31),h=n(58),m=(n(6),n(177)),g=n(178),v=d.PropagationPhases,y=h.getListener,_={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:f};e.exports=_},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(40),o=n(111),a={view:function(e){if(e.view)return e.view;var t=o(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t,n){function r(e,t){var n={};return i(e,n),n.add=[],n.mod=[],n.rem=[],n.reflow=t,n}function i(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,r=0,i=o.length;i>r;++r)t[n=o[r]]=e?e[n]:{}}var o=n(76).ALL;e.exports={create:r,copy:i}},function(e,t){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(t.AggregateOp||(t.AggregateOp={}));var n=t.AggregateOp;t.AGGREGATE_OPS=[n.VALUES,n.COUNT,n.VALID,n.MISSING,n.DISTINCT,n.SUM,n.MEAN,n.AVERAGE,n.VARIANCE,n.VARIANCEP,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MODESKEW,n.MIN,n.MAX,n.ARGMIN,n.ARGMAX],t.SHARED_DOMAIN_OPS=[n.MEAN,n.AVERAGE,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MIN,n.MAX]},function(e,t){function n(e,t,n){return n?e.createElementNS(n,t):e.createElement(t)}function r(e){if(e){var t=e.parentNode;t&&(t.removeChild(e),t.childNodes&&t.childNodes.length||r(t))}}e.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;r>n;++n)if(e.childNodes[n].tagName.toLowerCase()===t)return e.childNodes[n]},child:function(e,t,r,i,o,a){var s,u;return s=u=e.childNodes[t],(!s||a||s.tagName.toLowerCase()!==r.toLowerCase()||o&&s.getAttribute("class")!=o)&&(s=n(e.ownerDocument,r,i),e.insertBefore(s,u||null),o&&s.setAttribute("class",o)),s},clear:function(e,t){for(var n=e.childNodes.length;n>t;)e.removeChild(e.childNodes[--n]);return e},remove:r,cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r,i,o="<"+e;if(t)for(r in t)i=t[r],null!=i&&(o+=" "+r+'="'+i+'"');return n&&(o+=" "+n),o+">"},closeTag:function(e){return"</"+e+">"}}},function(e,t){function n(e){return null!=e.fontSize?e.fontSize:11}e.exports={size:n,value:function(e){return null!=e?String(e):""},font:function(e,t){var r=e.font;return t&&r&&(r=String(r).replace(/\"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+n(e)+"px "+(r||"sans-serif")},offset:function(e){var t=e.baseline,r=n(e);return Math.round("top"===t?.93*r:"middle"===t?.3*r:"bottom"===t?-.21*r:0)}}},function(e,t,n){var r=n(10),i=e.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],o=-1;if(0>n)for(;(r=e+n*++o)>t;)i.push(r);else for(;(r=e+n*++o)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&t>=r?1/n:0},r.cdf=function(r){return e>r?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&1>=t?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&t>r?1/n:0},r.cdf=function(r){var i=Math.floor(r);return e>i?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&1>=t?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,o=0,a=0;if(void 0!==n)return o=n,n=void 0,o;do o=2*Math.random()-1,a=2*Math.random()-1,r=o*o+a*a;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+a*i*t,e+o*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,o=Math.abs(i);if(o>37)r=0;else{var a,s=Math.exp(-o*o/2);7.07106781186547>o?(a=.0352624965998911*o+.700383064443688,a=a*o+6.37396220353165,a=a*o+33.912866078383,a=a*o+112.079291497871,a=a*o+221.213596169931,a=a*o+220.206867912376,r=s*a,a=.0883883476483184*o+1.75566716318264,a=a*o+16.064177579207,a=a*o+86.7807322029461,a=a*o+296.564248779674,a=a*o+637.333633378831,a=a*o+793.826512519948,a=a*o+440.413735824752,r/=a):(a=o+.65,a=o+4/a,a=o+3/a,a=o+2/a,a=o+1/a,r=s/a/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(0>=n||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),o=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,a=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(o*o-a)-o);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),o=n.length,a=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*o)]+(a?a():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},function(e,t,n){"use strict";var r=n(3),i=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:r(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=i},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,g)||(e[g]=h++,p[e[g]]={}),p[e[g]]}var i=n(31),o=n(58),a=n(155),s=n(290),u=n(23),l=n(176),c=n(7),f=n(114),p={},d=!1,h=0,m={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),v=c({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),s=a.registrationNameDependencies[e],u=i.topLevelTypes,l=0;l<s.length;l++){var c=s[l];o.hasOwnProperty(c)&&o[c]||(c===u.topWheel?f("wheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):f("mousewheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?f("scroll",!0)?v.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(f("focus",!0)?(v.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):f("focusin")&&(v.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),o[u.topBlur]=!0,o[u.topFocus]=!0):m.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,m[c],n),o[c]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!d){var e=l.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),d=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});u.measureMethods(v,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),e.exports=v},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";var r=n(67),i=r({prop:null,context:null,childContext:null});e.exports=i},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(61),o=n(176),a=n(110),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";var r=n(3),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,o,a,s,u){this.isInTransaction()?r(!1):void 0;var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,i,o,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(f){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){this.isInTransaction()?void 0:r(!1);for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,a=t[n],s=this.wrapperInitData[n];try{i=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}},o={Mixin:i,OBSERVED_ERROR:{}};e.exports=o},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t){"use strict";function n(e){return i[e]}function r(e){return(""+e).replace(o,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;e.exports=r},function(e,t,n){"use strict";var r=n(14),i=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=a},function(e,t){var n=e.exports={ALL:["data","fields","scales","signals"]};n.ALL.forEach(function(e){n[e.toUpperCase()]=e})},function(e,t,n){function r(e){e&&this.init(e)}var i=n(76).ALL,o=0,a=r.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},s=r.prototype;s.init=function(e){this._id=++o,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=i.length;n>t;++t)this._deps[i[t]]=[];return this._flags=0,this},s.rank=function(){return this._rank},s.rerank=function(){for(var e,t=this._graph,n=[this];n.length;)e=n.shift(),e._rank=t.rank(),n.unshift.apply(n,e.listeners());return this},s.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},s.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},s._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},s.router=function(e){return arguments.length?this._setf(a.Router,e):this._flags&a.Router},s.collector=function(e){return arguments.length?this._setf(a.Collector,e):this._flags&a.Collector},s.produces=function(e){return arguments.length?this._setf(a.Produces,e):this._flags&a.Produces},s.mutates=function(e){return arguments.length?this._setf(a.Mutates,e):this._flags&a.Mutates},s.reflows=function(e){return arguments.length?this._setf(a.Reflows,e):this._flags&a.Reflows},s.batch=function(e){return arguments.length?this._setf(a.Batch,e):this._flags&a.Batch;
},s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,o=0,a=t.length;a>o;++o)i=t[o],r[i]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},s.listeners=function(){return this._listeners},s.addListener=function(e){if(!(e instanceof r))throw Error("Listener is not a Node");return this._listeners._ids[e._id]?this:(this._listeners.push(e),this._listeners._ids[e._id]=1,this._rank>e._rank&&e.rerank(),this)},s.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=t>=0;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},s.disconnect=function(){this._listeners=[],this._listeners._ids={}},s.evaluate=function(e){return e},s.reevaluate=function(e){var t,n,r,o,a,s;for(r=0,o=i.length;o>r;++r)for(t=i[r],n=this._deps[t],a=0,s=n.length;s>a;++a)if(e[t][n[a]])return!0;return!1},r.reset=function(){o=0},e.exports=r},function(e,t,n){"use strict";function r(e){return e?e.indexOf("second")>-1?"second":e.indexOf("minute")>-1?"minute":e.indexOf("hour")>-1?"hour":e.indexOf("day")>-1||e.indexOf("date")>-1?"day":e.indexOf("month")>-1?"month":e.indexOf("year")>-1?"year":void 0:void 0}function i(e,t,n){function r(e,r){return void 0===r&&(r=!0),n?t+(r?", ":""):e+"("+t+")"+(r?", ":"")}void 0===n&&(n=!1);var i="datetime(",o=e.toString();return i+=o.indexOf("year")>-1?r("year"):"2006, ",i+=o.indexOf("month")>-1?r("month"):"0, ",i+=o.indexOf("day")>-1?r("day",!1)+"+1, ":o.indexOf("date")>-1?r("date"):"1, ",i+=o.indexOf("hours")>-1?r("hours"):"0, ",i+=o.indexOf("minutes")>-1?r("minutes"):"0, ",i+=o.indexOf("seconds")>-1?r("seconds"):"0, ",i+=o.indexOf("milliseconds")>-1?r("milliseconds",!1):"0",i+")"}function o(e,t){if(a.contains([s.ROW,s.COLUMN,s.SHAPE,s.COLOR],t))return null;switch(e){case u.TimeUnit.SECONDS:return a.range(0,60);case u.TimeUnit.MINUTES:return a.range(0,60);case u.TimeUnit.HOURS:return a.range(0,24);case u.TimeUnit.DAY:return a.range(0,7);case u.TimeUnit.DATE:return a.range(1,32);case u.TimeUnit.MONTH:return a.range(0,12)}return null}var a=n(5),s=n(8),u=n(50);t.smallestUnit=r,t.parseExpression=i,t.rawDomain=o},function(e,t){var n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];e.exports=function(e){var t,i,o,a,s,u,l,c,f,p,d,h=[];for(t=e.slice().replace(r[0],"###$1").split(r[1]).slice(1),c=0,p=t.length;p>c;++c){for(i=t[c],o=i.slice(1).trim().replace(r[2],"$1###$2").split(r[3]),u=i.charAt(0),a=[u],f=0,d=o.length;d>f;++f)(s=+o[f])===s&&a.push(s);if(l=n[u.toLowerCase()],a.length-1>l)for(f=1,d=a.length;d>f;f+=l)h.push([u].concat(a.slice(f,f+l)));else h.push(a)}return h}},function(e,t,n){function r(e,t,n,r){for(var o=i.segments(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<o.length;++a){var s=i.bezier(o[a]);e.bezierCurveTo.apply(e,s)}}var i=n(354);e.exports=function(e,t,n,i){var o,a,s,u,l,c=null,f=0,p=0,d=0,h=0;null==n&&(n=0),null==i&&(i=0),e.beginPath();for(var m=0,g=t.length;g>m;++m){switch(o=t[m],o[0]){case"l":f+=o[1],p+=o[2],e.lineTo(f+n,p+i);break;case"L":f=o[1],p=o[2],e.lineTo(f+n,p+i);break;case"h":f+=o[1],e.lineTo(f+n,p+i);break;case"H":f=o[1],e.lineTo(f+n,p+i);break;case"v":p+=o[1],e.lineTo(f+n,p+i);break;case"V":p=o[1],e.lineTo(f+n,p+i);break;case"m":f+=o[1],p+=o[2],e.moveTo(f+n,p+i);break;case"M":f=o[1],p=o[2],e.moveTo(f+n,p+i);break;case"c":a=f+o[5],s=p+o[6],d=f+o[3],h=p+o[4],e.bezierCurveTo(f+o[1]+n,p+o[2]+i,d+n,h+i,a+n,s+i),f=a,p=s;break;case"C":f=o[5],p=o[6],d=o[3],h=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,d+n,h+i,f+n,p+i);break;case"s":a=f+o[3],s=p+o[4],d=2*f-d,h=2*p-h,e.bezierCurveTo(d+n,h+i,f+o[1]+n,p+o[2]+i,a+n,s+i),d=f+o[1],h=p+o[2],f=a,p=s;break;case"S":a=o[3],s=o[4],d=2*f-d,h=2*p-h,e.bezierCurveTo(d+n,h+i,o[1]+n,o[2]+i,a+n,s+i),f=a,p=s,d=o[1],h=o[2];break;case"q":a=f+o[3],s=p+o[4],d=f+o[1],h=p+o[2],e.quadraticCurveTo(d+n,h+i,a+n,s+i),f=a,p=s;break;case"Q":a=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,a+n,s+i),f=a,p=s,d=o[1],h=o[2];break;case"t":a=f+o[1],s=p+o[2],null===c[0].match(/[QqTt]/)?(d=f,h=p):"t"===c[0]?(d=2*f-u,h=2*p-l):"q"===c[0]&&(d=2*f-d,h=2*p-h),u=d,l=h,e.quadraticCurveTo(d+n,h+i,a+n,s+i),f=a,p=s,d=f+o[1],h=p+o[2];break;case"T":a=o[1],s=o[2],d=2*f-d,h=2*p-h,e.quadraticCurveTo(d+n,h+i,a+n,s+i),f=a,p=s;break;case"a":r(e,f+n,p+i,[o[1],o[2],o[3],o[4],o[5],o[6]+f+n,o[7]+p+i]),f+=o[6],p+=o[7];break;case"A":r(e,f+n,p+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),f=o[6],p=o[7];break;case"z":case"Z":e.closePath()}c=o}}},function(e,t){function n(e){this.clear(),e&&this.union(e)}var r=n.prototype;r.clone=function(){return new n(this)},r.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},r.set=function(e,t,n,r){return this.x1=e,this.y1=t,this.x2=n,this.y2=r,this},r.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},r.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},r.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},r.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},r.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),o=t-t*r+n*i,a=n-t*i-n*r,s=this.x1,u=this.x2,l=this.y1,c=this.y2;return this.clear().add(r*s-i*l+o,i*s+r*l+a).add(r*s-i*c+o,i*s+r*c+a).add(r*u-i*l+o,i*u+r*l+a).add(r*u-i*c+o,i*u+r*c+a)},r.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},r.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},r.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},r.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},r.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},r.width=function(){return this.x2-this.x1},r.height=function(){return this.y2-this.y1},e.exports=n},function(e,t,n){function r(e,t){var n=t.properties,a=t.marks;return i.keys(n).forEach(function(r){n[r]=o(e,t.type,n[r])}),t.delay&&(t.delay=o(e,t.type,{delay:t.delay})),a&&(t.marks=a.map(function(t){return r(e,t)})),t}var i=n(1),o=n(83);e.exports=r,r.schema={defs:{mark:{type:"object",properties:{name:{type:"string"},key:{type:"string"},type:{"enum":["rect","symbol","path","arc","area","line","rule","image","text","group"]},from:{type:"object",properties:{data:{type:"string"},mark:{type:"string"},transform:{$ref:"#/defs/transform"}},additionalProperties:!1},delay:{$ref:"#/refs/numberValue"},ease:{"enum":["linear","quad","cubic","sin","exp","circle","bounce"].reduce(function(e,t){return["in","out","in-out","out-in"].forEach(function(n){e.push(t+"-"+n)}),e},[])},interactive:{type:"boolean"},properties:{type:"object",properties:{enter:{$ref:"#/defs/propset"},update:{$ref:"#/defs/propset"},exit:{$ref:"#/defs/propset"},hover:{$ref:"#/defs/propset"}},additionalProperties:!1,anyOf:[{required:["enter"]},{required:["update"]}]}},required:["type"]}}}},function(e,t,n){function r(e,t,n){function r(e){if(null!=f[e]){var t,n,r=d.array(f[e]);for(t=0,n=r.length;n>t;++t)E[e][r[t]]=1}}function i(e){var t=(e.parent?"parent_":"group_")+e.level;E._nRefs[t]=e}var u,l,c,f,v=e.config(),y="",_=d.keys(n),b=[],x={},E={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};for(y+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",u=0,l=_.length;l>u;++u)f=n[c=_[u]],y+=u>0?"\n  ":"  ",f.rule?(f=a(e,c,f.rule,b),y+="\n  "+f.code):d.isArray(f)?(f=a(e,c,f,b),y+="\n  "+f.code):(f=s(v,c,f),y+="d += set(o, "+d.str(c)+", "+f.val+");"),x[c]=!0,g.forEach(r),E.reflow=E.reflow||f.reflow,f.nested.length&&f.nested.forEach(i);d.keys(E._nRefs).forEach(function(e){E.nested.push(E._nRefs[e])}),E.nested.sort(function(e,t){return e=e.level,t=t.level,t>e?-1:e>t?1:e>=t?0:NaN}),x.x2&&(x.x?(y+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",y+="\n  d += set(o, 'width', (o.x2 - o.x));"):y+=x.width?"\n  d += set(o, 'x', (o.x2 - o.width));":"\n  d += set(o, 'x', o.x2);"),x.xc&&(y+=x.width?"\n  d += set(o, 'x', (o.xc - o.width/2));":"\n  d += set(o, 'x', o.xc);"),x.y2&&(x.y?(y+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",y+="\n  d += set(o, 'height', (o.y2 - o.y));"):y+=x.height?"\n  d += set(o, 'y', (o.y2 - o.height));":"\n  d += set(o, 'y', o.y2);"),x.yc&&(y+=x.height?"\n  d += set(o, 'y', (o.yc - o.height/2));":"\n  d += set(o, 'y', o.yc);"),o(t,x)&&(y+="\n  d += (item.touch(), 1);"),y+="\n  if (trans) trans.interpolate(item, o);",y+="\n  return d > 0;";try{var w=Function("item","group","trans","db","signals","predicates",y);return w.tpl=m,w.exprs=b,w.util=d,w.d3=p,d.extend(w,d.template.context),{encode:w,signals:d.keys(E.signals),scales:d.keys(E.scales),data:d.keys(E.data),fields:d.keys(E.fields),nested:E.nested,reflow:E.reflow}}catch(S){h.error(S),h.log(y)}}function i(e,t){return d.isObject(e)||(e={reflow:!1,nested:[]},g.forEach(function(t){e[t]=[]})),d.isObject(t)&&(e.reflow=e.reflow||t.reflow,e.nested.push.apply(e.nested,t.nested),g.forEach(function(n){e[n].push.apply(e[n],t[n])})),e}function o(e,t){return t.path||("area"===e||"line"===e)&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}function a(e,t,n,r){var o=e.config(),a=i(),u=[],l="";return(n||[]).forEach(function(c,f){var p=s(o,t,c);if(i(a,p),c.test){var h=e.expr(c.test);a.signals.push.apply(a.signals,h.globals),a.data.push.apply(a.data,h.dataSources),l+="if (exprs["+r.length+"](item.datum, null)) {\n    d += set(o, "+d.str(t)+", "+p.val+");",l+=n[f+1]?"\n  } else ":"  }",r.push(h.fn)}else{var m=c.predicate,g=m&&(m.name||m),v=e.predicate(g),y="predicates["+d.str(g)+"]",_=[],b=t+"_arg"+f;d.isObject(m)&&d.keys(m).forEach(function(e){if("name"!==e){var t=s(o,f,m[e],!0);_.push(d.str(e)+": "+t.val),i(a,t)}}),g?(a.signals.push.apply(a.signals,v.signals),a.data.push.apply(a.data,v.data),u.push(b+" = {\n    "+_.join(",\n    ")+"\n  }"),l+="if ("+y+".call("+y+","+b+", db, signals, predicates)) {\n    d += set(o, "+d.str(t)+", "+p.val+");",l+=n[f+1]?"\n  } else ":"  }"):l+="{\n    d += set(o, "+d.str(t)+", "+p.val+");\n  }\n"}}),u.length&&(l="var "+u.join(",\n      ")+";\n  "+l),a.code=l,a}function s(e,t,n,r){if(null==n)return null;if("fill"===t||"stroke"===t){if(n.c)return u(e,"hcl",n.h,n.c,n.l);if(n.h||n.s)return u(e,"hsl",n.h,n.s,n.l);if(n.l||n.a)return u(e,"lab",n.l,n.a,n.b);if(n.r||n.g||n.b)return u(e,"rgb",n.r,n.g,n.b)}var o=null,a=null,s=i(),f=null,p=null,h=null,m={};return void 0!==n.template&&(o=d.template.source(n.template,"tmpl",m),d.keys(m).forEach(function(e){var t=d.field(e),n=t.shift();"parent"===n||"group"===n?s.nested.push({parent:"parent"===n,group:"group"===n,level:1}):"datum"===n?s.fields.push(t[0]):s.signals.push(n)})),void 0!==n.value&&(o=d.str(n.value)),void 0!==n.signal&&(f=d.field(n.signal),o="signals["+f.map(d.str).join("][")+"]",s.signals.push(f.shift())),void 0!==n.field&&(n.field=d.isString(n.field)?{datum:n.field}:n.field,p=l(n.field),o=p.val,i(s,p)),void 0!==n.scale&&(h=c(n.scale),a=h.val,i(s,h),s.scales.push(n.scale.name||n.scale),null!==o||n.band||n.mult||n.offset||!r?o=a+(n.band?".rangeBand()":"("+(null!==o?o:"item.datum.data")+")"):r&&(o=a)),o="("+(n.mult?d.number(n.mult)+" * ":"")+o+")"+(n.offset?" + "+d.number(n.offset):""),s.val=o,s}function u(e,t,n,r,o){var a=n?s(e,"",n):e.color[t][0],u=r?s(e,"",r):e.color[t][1],l=o?s(e,"",o):e.color[t][2],c=i();[a,u,l].forEach(function(e){d.isArray||i(c,e)});var f="(this.d3."+t+"("+[a.val,u.val,l.val].join(",")+') + "")';return c.val=f,c}function l(e){if(d.isString(e))return{val:d.field(e).map(d.str).join("][")};var t=e.level||1,n=(e.group||e.parent)&&t,r=n?Array(t).join("group.mark."):"",o=l(e.datum||e.group||e.parent||e.signal),a=o.val,s=i(null,o);return e.datum?(a="item.datum["+a+"]",s.fields.push(e.datum)):e.group?(a=r+"group["+a+"]",s.nested.push({level:t,group:!0})):e.parent?(a=r+"group.datum["+a+"]",s.nested.push({level:t,parent:!0})):e.signal&&(a="signals["+a+"]",s.signals.push(d.field(e.signal)[0]),s.reflow=!0),s.val=a,s}function c(e){var t=null,n=null,r=i();return t=d.isString(e)?d.str(e):e.name?d.isString(e.name)?d.str(e.name):(n=l(e.name)).val:(n=l(e)).val,t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))",e.invert&&(t+=".invert"),n&&n.nested.forEach(function(e){e.scale=!0}),n?(n.val=t,n):(r.val=t,r)}function f(e){e=d.isArray(e)?{"enum":e}:{type:e};var t="number"===e.type&&e.type||"string",n={type:"object",allOf:[{$ref:"#/refs/"+t+"Modifiers"},{oneOf:[{$ref:"#/refs/signal",required:["signal"]},{properties:{value:e},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{band:{type:"boolean"}},required:["band"]}]}]};return"string"===e.type&&n.allOf[1].oneOf.push({properties:{template:{type:"string"}},required:["template"]}),{oneOf:[{type:"object",properties:{rule:{type:"array",items:{allOf:[{$ref:"#/defs/rule"},n]}}},additionalProperties:!1,required:["rule"]},{type:"array",items:{allOf:[{$ref:"#/defs/rule"},n]}},n]}}var p=n(12),d=n(1),h=n(2),m=n(4).Tuple,g=["signals","scales","data","fields"];e.exports=r,r.schema={refs:{field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:!1},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:!1},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:!1}]}]},scale:{title:"ScaleRef",oneOf:[{$ref:"#/refs/field"},{type:"object",properties:{name:{$ref:"#/refs/field"},invert:{type:"boolean","default":!1}},required:["name"]}]},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{mult:{type:"number"},offset:{type:"number"},scale:{$ref:"#/refs/scale"}}},value:f({},"value"),numberValue:f("number","numberValue"),stringValue:f("string","stringValue"),booleanValue:f("boolean","booleanValue"),arrayValue:f("array","arrayValue"),colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/stringValue"},{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]}]}},defs:{rule:{anyOf:[{type:"object",properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}}},{type:"object",properties:{test:{type:"string"}}}]},propset:{title:"Mark property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:f(["circle","square","cross","diamond","triangle-up","triangle-down"]),path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:f(["linear","step-before","step-after","basis","basis-open","cardinal","cardinal-open","monotone"]),tension:{$ref:"#/refs/numberValue"},orient:f(["horizontal","vertical"]),url:{$ref:"#/refs/stringValue"},align:f(["left","right","center"]),baseline:f(["top","middle","bottom","alphabetic"]),text:{$ref:"#/refs/stringValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/stringValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:!1}}}},function(e,t,n){function r(){return arguments.length?this.init.apply(this,arguments):this}function i(){var e,t,n,r,i,o,a,s=this._def.from,u=s.mark;if(u)r=this.sibling(u),e=r._isSuper?r:r._bounder,t=["vg",this._parent_id,u,e.listeners(!0).length].join("_"),n={name:t,transform:s.transform,modify:s.modify};else{if(e=this._graph.data(this._from),!e)throw Error('Data source "'+this._from+'" is not defined.');t=["vg",this._from,this._def.type,e.listeners(!0).length].join("_"),n={name:t,source:this._from,transform:s.transform,modify:s.modify}}this._from=t,this._ds=_.datasource(this._graph,n),u?(a=new p(this._graph).addListener(this._ds.listener()),a.evaluate=function(e){var t=m.create(e),n=r._output;return t.add=n.add,t.mod=n.mod,t.rem=n.rem,t},e.addListener(a)):(i=this._ds.source().last(),o=m.create(i),o.add=i.add,o.mod=i.mod,o.rem=i.rem,o.stamp=null,this._graph.propagate(o,this._ds.listener(),i.stamp))}function o(){var e=h.ingest(new c(this._mark));return this._def.width&&h.set(e,"width",this._def.width),this._def.height&&h.set(e,"height",this._def.height),e}function a(e,t,n,r,i){var a,u,l,c,f,p,d,m=s(this._def.key||(r?"_id":null)),g=this._mark.items||[],v=r?e.rem:g,y=h.idMap(!r||i?n:e.mod),_=[];for(a=0,l=v.length;l>a;++a)c=v[a]===g[a]?g[a]:m?this._map[m(v[a])]:v[a],c.status=b.EXIT;for(a=0,l=n.length;l>a;++a)f=n[a],c=m?this._map[u=m(f)]:g[a],p=c?!1:(c=o.call(this),!0),c.status=p?b.ENTER:b.UPDATE,d=!p&&c.datum!==f,c.datum=f,m&&(h.set(c,"key",u),this._map[u]=c),p?t.add.push(c):(d||y[f._id])&&t.mod.push(c),_.push(c);for(a=0,l=v.length;l>a;++a)c=v[a]===g[a]?g[a]:m?this._map[u=m(v[a])]:v[a],c.status===b.EXIT&&(c._dirty=!0,e.dirty.push(c),_.push(c),t.rem.push(c),m&&(this._map[u]=null));return this._mark.items=_,t}function s(e){if(null==e)return null;var t=u.array(e).map(u.accessor);return function(e){for(var n="",r=0,i=t.length;i>r;++r)r>0&&(n+="|"),n+=String(t[r](e));return n}}var u=n(1),l=n(2),c=n(34).Item,f=n(4),p=f.Node,d=f.Dependencies,h=f.Tuple,m=f.ChangeSet,g={},v=n(85),y=n(206),_=n(201),b=r.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},x=1,E=2,w=r.prototype=new p;w.init=function(e,t,n,r,o,a){return p.prototype.init.call(this,e).router(!0).collector(!0),this._def=t,this._mark=n,this._from=(t.from?t.from.data:null)||a,this._ds=u.isString(this._from)?e.data(this._from):null,this._map={},this._status=null,n.def=t,n.marktype=t.type,n.interactive=t.interactive!==!1,n.items=[],u.isValid(t.name)&&(n.name=t.name),this._parent=r,this._parent_id=o,t.from&&(t.from.mark||t.from.transform||t.from.modify)&&i.call(this),this._isSuper="group"!==this._def.type,this._encoder=new v(this._graph,this._mark,this),this._bounder=new y(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(d.DATA,this._from),this.dependency(d.DATA,this._encoder.dependency(d.DATA)),this.dependency(d.SCALES,this._encoder.dependency(d.SCALES)),this.dependency(d.SIGNALS,this._encoder.dependency(d.SIGNALS)),this},w.ds=function(){return this._ds},w.parent=function(){return this._parent},w.encoder=function(){return this._encoder},w.pipeline=function(){return[this]},w.connect=function(){var e=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach(function(t){(t=e._parent.scale(t))&&t.addListener(e)}),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=x,this},w.disconnect=function(){function e(e){for(var n,r=0,i=e.length;i>r;++r)(n=t._parent.scale(e[r]))&&n.removeListener(t)}var t=this;return this._listeners.length?(p.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),e(this._encoder._scales),e(u.keys(this._mark._scaleRefs)),this._status=E,this):this},w.sibling=function(e){return this._parent.child(e,this._parent_id)},w.evaluate=function(e){l.debug(e,["building",this._from||this._def.from,this._def.type]);var t,n,r,i,o=this,s=this._mark.def,c=s.properties||{},f=c.update||{},p=m.create(e);if(this._ds){if(r=p.data[i=this._ds.name()],p.data[i]=null,t=this._encoder.reevaluate(p),p.data[i]=r,n=this._ds.last(),!n)throw Error("Builder evaluated before backing DataSource.");n.stamp>this._stamp?a.call(this,n,p,this._ds.values(),!0,t):t&&(p.mod=this._mark.items.slice())}else r=u.isFunction(this._def.from)?this._def.from():[g],a.call(this,e,p,r);return this._output=p=this._graph.evaluate(p,this._encoder),f.nested&&f.nested.length&&this._status===x&&u.keys(this._mark._scaleRefs).forEach(function(e){var t=o._parent.scale(e);t&&(t.addListener(o),o.dependency(d.SCALES,e),o._encoder.dependency(d.SCALES,e))}),this._isSuper&&(p.mod=p.mod.filter(function(e){return e._dirty}),p=this._graph.evaluate(p,this._bounder)),p},e.exports=r},function(e,t,n){function r(e,t,n){var r=t.def.properties||{},i=r.enter,o=r.update,a=r.exit;c.prototype.init.call(this,e),this._mark=t,this._builder=n;var s=this._scales=[];return i&&s.push.apply(s,i.scales),o&&(this.dependency(f.DATA,o.data),this.dependency(f.SIGNALS,o.signals),this.dependency(f.FIELDS,o.fields),this.dependency(f.SCALES,o.scales),s.push.apply(s,o.scales)),a&&s.push.apply(s,a.scales),this.mutates(!0)}function i(e,t,n,r){var i,o,a,s=n.add.length;return(i=r.enter)&&(o=i[e]).length&&s&&(a=t.values(e,o,a=a||{})),(i=r.exit)&&(o=i[e]).length&&n.rem.length&&(a=t.values(e,o,a=a||{})),(i=r.update)&&(o=i[e]).length&&(s||n.mod.length)&&(a=t.values(e,o,a=a||{})),a||d}function o(e,t,n,r,i,o,a){var s=e.encode,u=t._dirty,l=s.call(s,t,t.mark.group||t,n,r,i,o);t._dirty=l||u,l&&!u&&a.push(t)}function a(){for(var e,t,n,r=this._mark.def.properties.update.nested,i=this._builder,o=0,a=0,s=r.length;s>a;++a)if(e=r[a],!e.scale){for(;o<e.level;++o)i=i.parent(),t=i.ds();if(n=(e.group?i.encoder():t.last())._stamp,n>this._stamp)return!0}return!1}var s=n(1),u=n(2),l=n(4),c=l.Node,f=l.Dependencies,p=n(34).bound,d={},h=r.prototype=new c;h.evaluate=function(e){u.debug(e,["encoding",this._mark.def.type]);var t,r,a,s,l=this._graph,c=this._mark.def.properties||{},p=this._mark.items,h=c.enter,m=c.update,g=c.exit,v=e.dirty,y=l.predicates(),_=e.request,b=this._mark.group,x=b&&(b.mark.axis||b.mark.legend),E=d,w=d;if(_&&!x){if((s=c[_])&&e.mod.length)for(E=s.data?l.values(f.DATA,s.data):null,w=s.signals?l.values(f.SIGNALS,s.signals):null,t=0,r=e.mod.length;r>t;++t)a=e.mod[t],o.call(this,s,a,e.trans,E,w,y,v);return e}for(E=i(f.DATA,l,e,c),w=i(f.SIGNALS,l,e,c),t=0,r=e.rem.length;r>t;++t)a=e.rem[t],g&&o.call(this,g,a,e.trans,E,w,y,v),e.trans&&!g?e.trans.interpolate(a,d):e.trans||p.pop();var S=n(84).STATUS.UPDATE;for(t=0,r=e.add.length;r>t;++t)a=e.add[t],h&&o.call(this,h,a,e.trans,E,w,y,v),m&&o.call(this,m,a,e.trans,E,w,y,v),a.status=S;if(m)for(t=0,r=e.mod.length;r>t;++t)a=e.mod[t],o.call(this,m,a,e.trans,E,w,y,v);return e},h.reevaluate=function(e){var t=this._mark.def,n=t.properties||{},r=s.isFunction(t.from)||t.orient||e.request||c.prototype.reevaluate.call(this,e);return r||(n.update?a.call(this):!1)},r.update=function(e,t,n,r,i){r=s.array(r);var a,u,l,c,d,h=e.predicates(),m=e.values(f.DATA),g=e.values(f.SIGNALS);for(a=0,u=r.length;u>a;++a)l=r[a],c=l.mark.def.properties,d=c&&c[n],d&&(o.call(null,d,l,t,m,g,h,i),p.item(l))},e.exports=r},function(e,t,n){function r(e){return f.prototype.init.call(this,e),f.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){function t(e){e.signal&&(l[e.signal]=1)}var n,r,i,a,s,u,l={},f=this._transform;if(!o.isArray(a=e)){a=[];for(s in e)u=o.array(e[s]),a.push({field:s,ops:u})}for(n=0,r=a.length;r>n;++n)i=a[n],i.field.signal&&(l[i.field.signal]=1),o.array(i.ops).forEach(t),o.array(i.as).forEach(t);return f._fields=a,f._aggr=null,f.dependency(c.SIGNALS,o.keys(l)),f}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=h.TUPLE,this._acc={groupby:o["true"],value:o["true"]},this.router(!0).produces(!0)}function i(e){var t,n,r,i,o,a,s,u=[];for(o=e._dims,t=0,n=o.length;n>t;++t)u.push(o[t].name);for(a=e._aggr,t=0,n=a.length;n>t;++t)for(s=a[t].measures.fields,r=0,i=s.length;i>r;++r)u.push(s[r]);return u}var o=n(1),a=n(4),s=n(2),u=a.ChangeSet,l=a.Tuple,c=a.Dependencies,f=n(9),p=n(391),d=r.prototype=Object.create(f.prototype);d.constructor=r;var h=r.TYPES={VALUE:1,TUPLE:2,MULTI:3};r.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],d.type=function(e){return this._type=e,this},d.accessors=function(e,t){var n=this._acc;n.groupby=o.$(e)||o["true"],n.value=o.$(t)||o["true"]},d.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],r=this.param("groupby").field,a=function(t){return t.signal?e.signalRef(t.signal):t},s=this._fields.map(function(e){var r={name:a(e.field),as:o.array(e.as),ops:o.array(a(e.ops)).map(a),get:e.get};return t=t||null!=r.get,n.push(r.name),r});r.forEach(function(e){e.get&&(t=!0),n.push(e.name||e)}),this._args=t||!s.length?null:n,s.length||(s={"*":"values"});var u=this._aggr=(new p).groupby(r).stream(!0).summarize(s);return this._out=i(u),this._type!==h.VALUE&&u.key("_id"),u},d.transform=function(e,t){s.debug(e,["aggregate"]);var n,r,i,o,a,c=u.create(e),f=this.aggr(),p=this._out,d=this._args,m=!0,g=l.prev;if(t&&(c.rem.push.apply(c.rem,f.result()),f.clear(),this._aggr=null,f=this.aggr()),this._type===h.TUPLE)n=function(e){f._add(e),l.prev_init(e)},r=function(e){f._rem(g(e))},i=function(e){f._mod(e,g(e))},o=function(e){f._markMod(e,g(e))};else{var v=this._acc.groupby,y=this._acc.value,_=this._type===h.VALUE?y:function(e){return{_id:e._id,groupby:v(e),value:y(e)}};n=function(e){f._add(_(e)),l.prev_init(e)},r=function(e){f._rem(_(g(e)))},i=function(e){f._mod(_(e),_(g(e)))},o=function(e){f._mark(_(e),_(g(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),d)for(a=0,m=!1;a<d.length;++a)if(e.fields[d[a]]){m=!0;break}e.mod.forEach(m?i:o)}for(a=0;a<p.length;++a)c.fields[p[a]]=1;return f._input=e,f.changes(c)},e.exports=r;var m=r.VALID_OPS;r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Aggregate transform",description:"Compute summary aggregate statistics",type:"object",properties:{type:{"enum":["aggregate"]},groupby:{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},description:"A list of fields to split the data into groups."},summarize:{oneOf:[{type:"object",additionalProperties:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{"enum":m},{$ref:"#/refs/signal"}]}}},{type:"array",items:{type:"object",properties:{field:{description:"The name of the field to aggregate.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},ops:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{"enum":m},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"An optional array of names to use for the output fields.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}}},additionalProperties:!1,required:["field","ops"]}}]}},additionalProperties:!1,required:["type"]}},function(e,t,n){"use strict";function r(e,t){if(!t.primitive)return{};var n=u(e,"marks."+t.primitive._id),r="properties.update."+t.name;return{field:u(n,r+".field"),group:u(n,r+".group"),scale:u(n,r+".scale"),signal:u(n,r+".signal")}}function i(e){return{resetProperty:function(t,n){e(f(t,n))}}}var o=n(11),a=n(36).connect,s=n(468),u=n(19).getIn,l=n(18),c=l.lookup,f=n(136).resetProperty,p=o.createClass({displayName:"Property",propTypes:{name:o.PropTypes.string.isRequired,label:o.PropTypes.string,field:o.PropTypes.number,group:o.PropTypes.number,scale:o.PropTypes.number,signal:o.PropTypes.string,resetProperty:o.PropTypes.func},mixins:[s],unbind:function(){var e=this.props;e.resetProperty(e.primitive._id,e.name)},render:function(){var e,t,n,r,i=this.state,a=this.props,s=a.name,u=a.label,l=a.type,f=a.scale,p=a.field,d=i.value,h=a.disabled||a.group;if(o.Children.forEach(a.children,function(t){var i=t&&t.props.className;t&&t.type;"extra"===i?r=t:"control"===i?n=t:("label"===l||i&&-1!==i.indexOf("label"))&&(e=t)}),e=e||o.createElement("label",{htmlFor:s},u),t=f&&(f=c(f))?o.createElement("div",{className:"scale",onClick:this.unbind},f.name):null,n=p&&(p=c(p))?o.createElement("div",{className:"field",onClick:this.unbind},p._name):n,!n)switch(l){case"number":n=o.createElement("input",{type:"number",value:!h&&d,disabled:h,onChange:this.handleChange});break;case"range":n=o.createElement("div",null,o.createElement("input",{type:"range",value:!h&&d,disabled:h,min:a.min,max:a.max,step:a.step,onChange:this.handleChange}));break;case"color":n=o.createElement("div",null,o.createElement("input",{type:"color",value:!h&&d,disabled:h,onChange:this.handleChange}));break;case"select":n=o.createElement("select",{value:d,onChange:this.handleChange},a.opts.map(function(e){return o.createElement("option",{key:e,value:e},e)},this));break;case"text":n=o.createElement("input",{type:"text",value:d,onChange:this.handleChange});break;default:n=null}var m="property";return a.canDrop&&(m+=" can-drop"),a.firstChild&&(m+=" first-child"),r&&(r=o.createElement("div",{className:"extra"},r)),o.createElement("div",{className:m},e,o.createElement("div",{className:"control"},t,n),r)}});e.exports=a(r,i)(p)},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t){return r(e.type+"_"+e._id+"_"+t)}},function(e,t,n){"use strict";e.exports=n(159)},function(e,t,n){e.exports={version:"__VERSION__",dataflow:n(4),parse:n(132),scene:{Bounder:n(206),Builder:n(84),Encoder:n(85),GroupBuilder:n(207),visit:n(209)},transforms:n(211),Transform:n(9),BatchTransform:n(22),Parameter:n(134),schema:n(378),config:n(130),util:n(135),logging:n(2),debug:n(2).debug}},function(e,t,n){"use strict";function r(){this._id=this._id||u.global(),s.primitive(this._id,this)}function i(e,t){var n,r,s,u=t!==!1;for(n in e)r=e[n],s=n.startsWith("_"),s=s||r._disabled||void 0===r,s?delete e[n]:o.isObject(r)&&(e[n]=r.signal&&u?a(r.signal):i(e[n],t));return e}var o=n(1),a=n(426),s=n(18),u=n(137);r.prototype.init=function(){return this},r.prototype["export"]=function(e){return i(o.duplicate(this),e)},r.prototype.manipulators=r.prototype["export"],e.exports=r},function(e,t,n){"use strict";function r(e){var t,n=e.type;for(t in e)this[t]=e[t];this.name=this.name||n+"_"+h.type(n),this._rule=new c.VLSingle(n)}var i=n(1),o=n(27),a=(n(42),n(91)),s=n(419),u=n(225),l=n(93),c=n(423),f=(n(88),n(18)),p=f.lookup,d=n(53).getParent,h=n(137);o(r,a),r.defaultProperties=function(){return{update:{x:{value:25},y:{value:25},fill:{value:"#4682b4"},fillOpacity:{value:1},stroke:{value:"#000000"},strokeWidth:{value:.25}}}},r.mergeProperties=function(e,t){return"object"!=typeof t?e:Object.keys(t).reduce(function(e,n){return"object"!=typeof e[n]?e[n]=t[n]:e[n]=i.extend(e[n],t[n]),e},e)},r.prototype.update=function(e){for(var t in e)this[t]=e[t]},r.prototype.dataset=function(e){var t;return arguments.length?(t=p(e))instanceof u?(this.from=e,this):t instanceof s?(this.from=t._source._id,this):(this.from=void 0,this):(t=p(this.from),t&&p(d(t)._id))},r.prototype["export"]=function(e){var t,n,o,s,u,l,c,f=a.prototype["export"].call(this,e),d=f.properties,h=this.properties.update,m=d.update,g=this.from&&p(this.from),v=i.keys(m);
for(g&&(f.from=g instanceof r?{mark:g.name}:{data:g.name}),s=0,u=v.length;u>s;++s)n=m[t=v[s]],o=h[t],i.isObject(n)||(n=m[t]={value:n}),o.scale&&(n.scale=(l=p(o.scale))&&l.name),o.field&&(n.field=(c=p(o.field))&&c._name),o.group&&(n.field={group:o.group});return e||(f.lyra_id=this._id),f},r.prototype.remove=function(){f.primitive(this._rule._id,null),f.primitive(this._id,null),f.removeListeners(this)},l(r.prototype),c(r.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){e.manipulators=function(){return[this["export"](!1),{type:"group",from:{mark:this.name,transform:[{type:u("manipulators_"+this.type),lyra_id:this._id},{type:"facet",groupby:["manipulator"]}]},marks:l}]}}function i(e){return{type:"path",name:s.CELL,properties:{update:{key:{field:e?{parent:"key"}:"key"},fill:{value:"transparent"},strokeWidth:{value:.35},path:{field:e?{parent:"layout_path"}:"layout_path"},stroke:{value:"transparent"}}}}}function o(e,t,n){var r=[{predicate:{name:s.CELL,key:{field:n?{parent:"key"}:"key"}}}];return a.extend(r[0],e),r.push(t),{rule:r}}var a=n(1),s=n(42),u=n(44),l=[];e.exports=r,r.CONST={LARGE:40,SMALL:20,PADDING:7,STROKE_PADDING:7,ARROWHEAD:7},r.size=function(e){var t=this.CONST;return e.width()<t.SMALL||e.height()<t.SMALL?t.SMALL:t.LARGE},r.coords=function(e,t){var n={topLeft:{x:e.x1,y:e.y1,cursor:"nw-resize"},topCenter:{x:e.x1+e.width()/2,y:e.y1,cursor:"n-resize"},topRight:{x:e.x2,y:e.y1,cursor:"ne-resize"},midLeft:{x:e.x1,y:e.y1+e.height()/2,cursor:"w-resize"},midCenter:{x:e.x1+e.width()/2,y:e.y1+e.height()/2,cursor:"move"},midRight:{x:e.x2,y:e.y1+e.height()/2,cursor:"e-resize"},bottomLeft:{x:e.x1,y:e.y2,cursor:"sw-resize"},bottomCenter:{x:e.x1+e.width()/2,y:e.y2,cursor:"s-resize"},bottomRight:{x:e.x2,y:e.y2,cursor:"se-resize"}};if(t)for(var r in n){var i=n[r];i.size=this.size(e),i.key=r,i.manipulator=t}return n},l.push(r.HANDLE={type:"symbol",from:{transform:[{type:"filter",test:'datum.manipulator === "handle"'}]},properties:{update:{x:{field:"x"},y:{field:"y"},shape:{value:"square"},size:{field:"size"},fill:{value:"white"},stroke:{value:"black"},strokeWidth:{value:.5}},hover:{cursor:{field:"cursor"}}}}),l.push(r.CONNECTOR={type:"group",from:{transform:[{type:"filter",test:'datum.manipulator === "connector"'}]},marks:[{type:"symbol",properties:{update:{x:{field:{parent:"x"}},y:{field:{parent:"y"}},shape:{value:"diamond"},size:{field:{parent:"size"}},fill:{value:"white"},stroke:o({value:"lightsalmon"},{value:"cyan"},!0),strokeWidth:{value:.5}}}},i(!0)]}),l.push(r.ARROW={type:"group",from:{transform:[{type:"filter",test:'datum.manipulator === "arrow"'},{type:"facet",groupby:["key"]}]},marks:[{type:"line",properties:{update:{x:{field:"x"},y:{field:"y"},fill:o({value:"lightsalmon"},{value:"cyan"}),stroke:o({value:"lightsalmon"},{value:"cyan"}),strokeWidth:{value:3}}}},i()]}),l.push(r.SPAN=a.extend({},r.ARROW,{from:{transform:[{type:"filter",test:'datum.manipulator === "span"'},{type:"facet",groupby:["key"]}]}})),r.BUBBLE_CURSOR={type:"line",from:{data:"bubble_cursor"},properties:{update:{x:{field:"x"},y:{field:"y"},fill:{value:"lightsalmon"},fillOpacity:{value:.2}}}}},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,n,r,a){function s(t){return e(t=new Date(+t)),t}return s.floor=s,s.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var o=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return o;for(n(t,1),e(t),r>t&&o.push(new Date(+t));n(t,i),e(t),r>t;)o.push(new Date(+t));return o},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),o.setTime(+n),e(i),e(o),Math.floor(r(i,o))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,o=new Date,a=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):a:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),u=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),l=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),c=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),p=n(1),d=n(2),h=n(3),m=n(4),g=n(5),v=n(6),y=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),_=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),b=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),x=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),E=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),w=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),S=r(0),k=r(1),M=r(2),T=r(3),A=r(4),C=r(5),O=r(6),N=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),I=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),L=a.range,D=s.range,P=u.range,R=l.range,U=c.range,j=f.range,z=p.range,q=d.range,F=h.range,B=m.range,Y=g.range,H=v.range,V=f.range,W=y.range,$=_.range,G=a,X=L,K=b.range,J=x.range,Z=E.range,Q=w.range,ee=S.range,te=k.range,ne=M.range,re=T.range,ie=A.range,oe=C.range,ae=O.range,se=S.range,ue=N.range,le=I.range,ce="0.1.1";e.version=ce,e.milliseconds=L,e.seconds=D,e.minutes=P,e.hours=R,e.days=U,e.sundays=j,e.mondays=z,e.tuesdays=q,e.wednesdays=F,e.thursdays=B,e.fridays=Y,e.saturdays=H,e.weeks=V,e.months=W,e.years=$,e.utcMillisecond=G,e.utcMilliseconds=X,e.utcSeconds=K,e.utcMinutes=J,e.utcHours=Z,e.utcDays=Q,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=oe,e.utcSaturdays=ae,e.utcWeeks=se,e.utcMonths=ue,e.utcYears=le,e.millisecond=a,e.second=s,e.minute=u,e.hour=l,e.day=c,e.sunday=f,e.monday=p,e.tuesday=d,e.wednesday=h,e.thursday=m,e.friday=g,e.saturday=v,e.week=f,e.month=y,e.year=_,e.utcSecond=b,e.utcMinute=x,e.utcHour=E,e.utcDay=w,e.utcSunday=S,e.utcMonday=k,e.utcTuesday=M,e.utcWednesday=T,e.utcThursday=A,e.utcFriday=C,e.utcSaturday=O,e.utcWeek=S,e.utcMonth=N,e.utcYear=I,e.interval=t})},function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,u,l,c,f=e.maxbins||15,p=e.base||10,d=Math.log(p),h=e.div||[5,2],m=e.min,g=e.max,v=g-m;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/d),r=e.minstep||0,t=Math.max(r,Math.pow(p,Math.round(Math.log(v)/d)-n));Math.ceil(v/t)>f;)t*=p;for(l=0;l<h.length;++l)u=t/h[l],u>=r&&f>=v/u&&(t=u)}return u=Math.log(t),s=u>=0?0:~~(-u/d)+1,c=Math.pow(p,-s-1),m=Math.min(m,Math.floor(m/t+c)*t),g=Math.ceil(g/t)*t,{start:m,stop:g,step:t,unit:{precision:s},value:o,index:a}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;l.cmp(e[i],t)<0?n=i+1:r=i}return n}function o(e){return this.step*Math.floor(e/this.step+f)}function a(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(o.call(this,e))}function u(e){return a.call(this,this.unit.unit(e))}var l=n(10),c=n(99),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,o=e.maxbins||20,a=e.minbins||4,l=+i-+n,f=e.unit?t[e.unit]:t.find(l,a,o),p=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:o,minstep:f.minstep,steps:f.step});return p.unit=f,p.index=u,e.raw||(p.value=s),p},e.exports=r},function(e,t,n){function r(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function i(e){var t=b.isString(e)?w[r(e)]:w.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);S=t}function o(e){var t=b.isString(e)?E[r(e)]:E.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);k=t,g=v=y=_=null}function a(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];n>r&&(a=r,r=n,n=a);var i=r-n||(t=1,n||r||1),o=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=i/t/o;return a>=T?o*=10:a>=A?o*=5:a>=C&&(o*=2),[Math.ceil(n/o)*o,Math.floor(r/o)*o+o/2,o]}function s(e,t){return function(n){var r=e(n),i=r.indexOf(t);if(0>i)return r;for(var o=u(r,i),a=o<r.length?r.slice(o):"";--o>i;)if("0"!==r[o]){++o;break}return r.slice(0,o)+a}}function u(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&57>=n)return r+1}function l(e){var t=S.format(".1f")(1)[1];switch(null==e&&(e=","),e=w.formatSpecifier(e),null==e.precision&&(e.precision=12),e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return s(S.format(e),t)}function c(e,t,n){var r=a(e,t);switch(null==n&&(n=",f"),n=w.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=w.precisionPrefix(r[2],i)),S.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=w.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=w.precisionFixed(r[2])-2*("%"===n.type))}return S.format(n)}function f(){var e=k.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),o=e("%a %d"),a=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var l=+e;return(x.second(e)<l?t:x.minute(e)<l?n:x.hour(e)<l?r:x.day(e)<l?i:x.month(e)<l?x.week(e)<l?o:a:x.year(e)<l?s:u)(e)}}function p(){var e=k.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),o=e("%a %d"),a=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var l=+e;return(x.utcSecond(e)<l?t:x.utcMinute(e)<l?n:x.utcHour(e)<l?r:x.utcDay(e)<l?i:x.utcMonth(e)<l?x.utcWeek(e)<l?o:a:x.utcYear(e)<l?s:u)(e)}}function d(e,t){var n=t?v||(v=k.format("%b")):g||(g=k.format("%B"));return M.setMonth(e),n(M)}function h(e,t){var n=t?_||(_=k.format("%a")):y||(y=k.format("%A"));return M.setMonth(0),M.setDate(2+e),n(M)}function m(e){return Math.floor(e/3)+1}var g,v,y,_,b=n(10),x=n(94),E=n(236),w=n(235),S=w,k=E,M=new Date(2e3,0,1);e.exports={numberLocale:i,number:function(e){return S.format(e)},numberPrefix:function(e,t){return S.formatPrefix(e,t)},timeLocale:o,time:function(e){return k.format(e)},utc:function(e){return k.utcFormat(e)},locale:function(e){i(e),o(e)},auto:{number:l,linear:c,time:function(){return f()},utc:function(){return p()}},month:d,day:h,quarter:m};var T=Math.sqrt(50),A=Math.sqrt(10),C=Math.sqrt(2)},function(e,t,n){var r=n(10);e.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},function(e,t,n){function r(e){var t=e.url;if(!t&&e.file)return d+e.file;if(e.baseURL&&!p.test(t)&&(c(t,"/")||"/"===e.baseURL[e.baseURL.length-1]||(t="/"+t),t=e.baseURL+t),!i.useXHR&&c(t,"//")&&(t=(e.defaultProtocol||"http")+":"+t),e.domainWhiteList){var r,o;if(i.useXHR){var a=document.createElement("a");a.href=t,""===a.host&&(a.href=a.href),r=a.hostname.toLowerCase(),o=window.location.hostname}else{var s=n(413).parse(t);r=s.hostname,o=null}if(o!==r){var u=e.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!u)throw"URL is not whitelisted: "+t}}return t}function i(e,t){return i.loader(e,t)}function o(e,t){var n,r=t||function(e){throw e};try{n=i.sanitizeUrl(e)}catch(o){return void r(o)}return n?i.useXHR?i.xhr(n,e,t):c(n,d)?i.file(n.slice(d.length),e,t):n.indexOf("://")<0?i.file(n,e,t):i.http(n,e,t):void r("Invalid URL: "+e.url)}function a(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function s(e,t,n){function r(){var e=s.status;!e&&a(s)||e>=200&&300>e||304===e?n(null,s.responseText):n(s,null)}var o=!!n,s=new XMLHttpRequest;if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(e)||(s=new XDomainRequest),o&&("onload"in s?s.onload=s.onerror=r:s.onreadystatechange=function(){s.readyState>3&&r()}),s.open("GET",e,o),s.setRequestHeader){var u=f.extend({},i.headers,t.headers);for(var l in u)s.setRequestHeader(l,u[l])}return s.send(),!o&&a(s)?s.responseText:void 0}function u(e,t,r){var i=n(410);return r?void i.readFile(e,r):i.readFileSync(e,"utf8")}function l(e,t,r){var o=f.extend({},i.headers,t.headers);if(!r)return n(412)("GET",e,{headers:o}).getBody();var a={url:e,encoding:null,gzip:!0,headers:o};n(411)(a,function(e,t,n){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",r(e,null)):r(null,n)})}function c(e,t){return null==e?!1:0===e.lastIndexOf(t,0)}var f=n(10),p=/^([A-Za-z]+:)?\/\//,d="file://";i.loader=o,i.sanitizeUrl=r,i.xhr=s,i.file=u,i.http=l,i.useXHR="undefined"!=typeof XMLHttpRequest,i.headers={},e.exports=i},function(e,t,n){function r(e){return l.setTime(+e),l}function i(e,t,n,r,i,o){var a={type:e,date:t,unit:n};return r?a.step=r:a.minstep=1,null!=i&&(a.min=i),null!=o&&(a.max=o),a}function o(e,t,n,r,o,a){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,o,a)}function a(e,t,n,r){var i,o,a,s=h[0];for(i=1,o=h.length;o>i;++i)if(s=h[i],t>s[0]){if(a=t/s[0],a>r)return e[h[i-1][1]];if(a>=n)return e[s[1]]}return e[h[o-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return a(e,t,n,r)},r}var u=n(94),l=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),p=[o("second",u.second,c),o("minute",u.minute,c),o("hour",u.hour,c),o("day",u.day,c,[1,7]),o("month",u.month,c,[1,3,6]),o("year",u.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],d=[o("second",u.utcSecond,f),o("minute",u.utcMinute,f),o("hour",u.utcHour,f),o("day",u.utcDay,f,[1,7]),o("month",u.utcMonth,f,[1,3,6]),o("year",u.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],h=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];e.exports=s(p),e.exports.utc=s(d)},function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(37),o=n(7),a=n(3);o(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?a(!1):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e){return c.hasOwnProperty(e)?!0:l.hasOwnProperty(e)?!1:u.test(e)?(c[e]=!0,!0):(l[e]=!0,!1)}function i(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&1>t||e.hasOverloadedBooleanValue&&t===!1}var o=n(46),a=n(23),s=n(320),u=(n(6),/^[a-zA-Z_][\w\.\-]*$/),l={},c={},f={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+s(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(i(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+s(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+s(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+s(t):""},setValueForProperty:function(e,t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else if(i(r,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute){var s=r.attributeName,u=r.attributeNamespace;u?e.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}else{var l=r.propertyName;r.hasSideEffects&&""+e[l]==""+n||(e[l]=n)}}else o.isCustomAttribute(t)&&f.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){r(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseAttribute)e.removeAttribute(n.attributeName);else{var i=n.propertyName,a=o.getDefaultValueForProperty(e.nodeName,i);n.hasSideEffects&&""+e[i]===a||(e[i]=a)}}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};a.measureMethods(f,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),e.exports=f},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?l(!1):void 0}function i(e){r(e),null!=e.value||null!=e.onChange?l(!1):void 0}function o(e){r(e),null!=e.checked||null!=e.onChange?l(!1):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(174),u=n(70),l=n(3),c=(n(6),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func},p={},d={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var i=f[r](t,r,e,u.prop);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(i(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(i(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=d},function(e,t,n){"use strict";var r=n(105),i=n(16),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};e.exports=o},function(e,t,n){"use strict";var r=n(3),i=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i?r(!1):void 0,o.unmountIDFromEnvironment=e.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,o.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};e.exports=o},function(e,t,n){"use strict";var r=n(154),i=n(101),o=n(16),a=n(23),s=n(3),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:function(e,t,n){var r=o.getNode(e);u.hasOwnProperty(t)?s(!1):void 0,null!=n?i.setValueForProperty(r,t,n):i.deleteValueForProperty(r,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);r.processUpdates(e,t)}};a.measureMethods(l,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=l},function(e,t,n){"use strict";function r(e){s.enqueueUpdate(e)}function i(e,t){var n=a.get(e);return n?n:null}var o=(n(32),n(20)),a=n(60),s=n(24),u=n(7),l=n(3),c=(n(6),{isMounted:function(e){var t=a.get(e);return t?!!t._renderedComponent:!1},enqueueCallback:function(e,t){"function"!=typeof t?l(!1):void 0;var n=i(e);return n?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){"function"!=typeof t?l(!1):void 0,e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(t),r(n)}},enqueueSetProps:function(e,t){var n=i(e,"setProps");n&&c.enqueueSetPropsInternal(n,t)},enqueueSetPropsInternal:function(e,t){var n=e._topLevelWrapper;n?void 0:l(!1);var i=n._pendingElement||n._currentElement,a=i.props,s=u({},a.props,t);n._pendingElement=o.cloneAndReplaceProps(i,o.cloneAndReplaceProps(a,s)),r(n)},enqueueReplaceProps:function(e,t){var n=i(e,"replaceProps");n&&c.enqueueReplacePropsInternal(n,t)},enqueueReplacePropsInternal:function(e,t){var n=e._topLevelWrapper;n?void 0:l(!1);var i=n._pendingElement||n._currentElement,a=i.props;n._pendingElement=o.cloneAndReplaceProps(i,o.cloneAndReplaceProps(a,t)),r(n)},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}});e.exports=c},function(e,t){"use strict";e.exports="0.14.8"},function(e,t,n){"use strict";function r(e){return null==e?null:1===e.nodeType?e:i.has(e)?o.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render?a(!1):void 0,void a(!1))}var i=(n(32),n(60)),o=n(16),a=n(3);n(6);e.exports=r},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return r?!!n[r]:!1}function r(e){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[i]);return"function"==typeof t?t:void 0}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=n},function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e){var t;if(null===e||e===!1)t=new a(i);else if("object"==typeof e){var n=e;!n||"function"!=typeof n.type&&"string"!=typeof n.type?l(!1):void 0,t="string"==typeof n.type?s.createInternalComponent(n):r(n.type)?new n.type(n):new c}else"string"==typeof e||"number"==typeof e?t=s.createInstanceForText(e):l(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var o=n(281),a=n(166),s=n(172),u=n(7),l=n(3),c=(n(6),function(){});u(c.prototype,o.Mixin,{_instantiateReactComponent:i}),e.exports=i},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(14);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t,n){"use strict";var r=n(14),i=n(74),o=n(75),a=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){o(e,i(t))})),e.exports=a},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var i=typeof e,o=typeof t;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";function r(e){return m[e]}function i(e,t){return e&&null!=e.key?a(e.key):t.toString(36)}function o(e){return(""+e).replace(g,r)}function a(e){return"$"+o(e)}function s(e,t,n,r){var o=typeof e;if("undefined"!==o&&"boolean"!==o||(e=null),null===e||"string"===o||"number"===o||l.isValidElement(e))return n(r,e,""===t?d+i(e,0):t),1;var u,c,m=0,g=""===t?d:t+h;if(Array.isArray(e))for(var v=0;v<e.length;v++)u=e[v],c=g+i(u,v),m+=s(u,c,n,r);else{var y=f(e);if(y){var _,b=y.call(e);if(y!==e.entries)for(var x=0;!(_=b.next()).done;)u=_.value,c=g+i(u,x++),m+=s(u,c,n,r);else for(;!(_=b.next()).done;){var E=_.value;E&&(u=E[1],c=g+a(E[0])+h+i(u,0),m+=s(u,c,n,r))}}else if("object"===o){String(e);p(!1)}}return m}function u(e,t,n){return null==e?0:s(e,"",t,n)}var l=(n(32),n(20)),c=n(47),f=n(112),p=n(3),d=(n(6),c.SEPARATOR),h=":",m={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g;e.exports=u},function(e,t,n){"use strict";var r=(n(7),n(26)),i=(n(6),r);e.exports=i},function(e,t,n){function r(e){a.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var i=n(2),o=n(48),a=n(77).prototype,s=n(62),u=r.prototype=Object.create(a);u.constructor=r,u.data=function(){return this._data},u.evaluate=function(e){i.debug(e,["collecting"]);var t=s.create(e);return e.rem.length&&(this._data=o.idFilter(this._data,e.rem),t.rem=e.rem.slice(0)),e.add.length&&(this._data=this._data.concat(e.add),t.add=e.add.slice(0)),e.mod.length&&(t.mod=e.mod.slice(0)),e.sort&&this._data.sort(e.sort),e.reflow&&(t.mod=t.mod.concat(o.idFilter(this._data,t.add,t.mod,t.rem)),t.reflow=!1),t},e.exports=r},function(e,t){"use strict";!function(e){e[e.TOP="top"]="TOP",e[e.RIGHT="right"]="RIGHT",e[e.LEFT="left"]="LEFT",e[e.BOTTOM="bottom"]="BOTTOM"}(t.AxisOrient||(t.AxisOrient={}));t.AxisOrient;t.defaultAxisConfig={offset:void 0,grid:void 0,labels:!0,labelMaxLength:25,tickSize:void 0,characterWidth:6},t.defaultFacetAxisConfig={axisWidth:0,labels:!0,grid:!1,tickSize:0}},function(e,t,n){"use strict";function r(e){return{formatParse:l.formatParse.parseUnit(e),nullFilter:c.nullFilter.parseUnit(e),filter:f.filter.parseUnit(e),nonPositiveFilter:h.nonPositiveFilter.parseUnit(e),source:u.source.parseUnit(e),bin:p.bin.parseUnit(e),calculate:d.formula.parseUnit(e),timeUnit:v.timeUnit.parseUnit(e),timeUnitDomain:y.timeUnitDomain.parseUnit(e),summary:m.summary.parseUnit(e),stackScale:g.stackScale.parseUnit(e),colorRank:_.colorRank.parseUnit(e)}}function i(e){return{formatParse:l.formatParse.parseFacet(e),nullFilter:c.nullFilter.parseFacet(e),filter:f.filter.parseFacet(e),nonPositiveFilter:h.nonPositiveFilter.parseFacet(e),source:u.source.parseFacet(e),bin:p.bin.parseFacet(e),calculate:d.formula.parseFacet(e),timeUnit:v.timeUnit.parseFacet(e),timeUnitDomain:y.timeUnitDomain.parseFacet(e),summary:m.summary.parseFacet(e),stackScale:g.stackScale.parseFacet(e),colorRank:_.colorRank.parseFacet(e)}}function o(e){return{filter:f.filter.parseLayer(e),formatParse:l.formatParse.parseLayer(e),nullFilter:c.nullFilter.parseLayer(e),nonPositiveFilter:h.nonPositiveFilter.parseLayer(e),source:u.source.parseLayer(e),bin:p.bin.parseLayer(e),calculate:d.formula.parseLayer(e),timeUnit:v.timeUnit.parseLayer(e),timeUnitDomain:y.timeUnitDomain.parseLayer(e),summary:m.summary.parseLayer(e),stackScale:g.stackScale.parseLayer(e),colorRank:_.colorRank.parseLayer(e)}}function a(e,t){var n=e.component.data,r=u.source.assemble(e,n);if(r&&t.push(r),m.summary.assemble(n,e).forEach(function(e){t.push(e)}),t.length>0){var i=t[t.length-1],o=_.colorRank.assemble(n);o.length>0&&(i.transform=(i.transform||[]).concat(o));var a=h.nonPositiveFilter.assemble(n);a.length>0&&(i.transform=(i.transform||[]).concat(a))}else{if(s.keys(n.colorRank).length>0)throw new Error("Invalid colorRank not merged");if(s.keys(n.nonPositiveFilter).length>0)throw new Error("Invalid nonPositiveFilter not merged")}var l=g.stackScale.assemble(n);return l&&t.push(l),y.timeUnitDomain.assemble(n).forEach(function(e){t.push(e)}),t}var s=n(5),u=n(333),l=n(331),c=n(191),f=n(189),p=n(188),d=n(190),h=n(332),m=n(335),g=n(334),v=n(192),y=n(336),_=n(330);t.parseUnitData=r,t.parseFacetData=i,t.parseLayerData=o,t.assembleData=a},function(e,t,n){"use strict";function r(e,t){var n=e.component.layout;if(!n.width&&!n.height)return t;var r=v.keys(v.extend(n.width.distinct,n.height.distinct)),i=n.width.formula.concat(n.height.formula).map(function(e){return v.extend({type:"formula"},e)});return[r.length>0?{name:e.dataName(m.LAYOUT),source:e.dataTable(),transform:[{type:"aggregate",summarize:r.map(function(e){return{field:e,ops:["distinct"]}})}].concat(i)}:{name:e.dataName(m.LAYOUT),values:[{}],transform:i}]}function i(e){return{width:o(e,h.X),height:o(e,h.Y)}}function o(e,t){var n=e.config().cell,r=t===h.X?n.width:n.height;return{distinct:p(e,t),formula:[{field:e.channelSizeName(t),expr:a(e,t,r)}]}}function a(e,t,n){if(e.has(t)){if(e.isOrdinalScale(t)){var r=e.scale(t);return"("+d(e,t)+" + "+r.padding+") * "+r.bandSize}return n+""}return e.mark()===y.TEXT&&t===h.X?e.config().scale.textBandWidth+"":e.config().scale.bandSize+""}function s(e){return{width:u(e,h.COLUMN),height:u(e,h.ROW)}}function u(e,t){var n=e.child().component.layout,r=t===h.ROW?"height":"width",i=n[r],o=v.extend(p(e,t),i.distinct),a=i.formula.concat([{field:e.channelSizeName(t),expr:l(e,t,e.child().channelSizeName(t))}]);return delete n[r],{distinct:o,formula:a}}function l(e,t,n){var r=e.scale(t);return e.has(t)?"(datum."+n+" + "+r.padding+") * "+d(e,t):"datum."+n+" + "+e.config().facet.scale.padding}function c(e){return{width:f(e,h.X),height:f(e,h.Y)}}function f(e,t){var n=e.children()[0].component.layout,r=t===h.Y?"height":"width",i=n[r],o=i.distinct,a=[{field:e.channelSizeName(t),expr:i.formula[0].expr}];return e.children().forEach(function(e){delete e.component.layout[r]}),{distinct:o,formula:a}}function p(e,t){if(e.has(t)&&e.isOrdinalScale(t)){var n=e.scale(t);if(n.type===g.ScaleType.ORDINAL&&!(n.domain instanceof Array)){var r=e.field(t),i={};return i[r]=!0,i}}return{}}function d(e,t){var n=e.scale(t);if(n.domain instanceof Array)return n.domain.length;var r=e.fieldDef(t).timeUnit,i=r?_.rawDomain(r,t):null;return null!==i?i.length:e.field(t,{datum:!0,prefn:"distinct_"})}var h=n(8),m=n(33),g=n(38),v=n(5),y=n(29),_=n(78);t.assembleLayout=r,t.parseUnitLayout=i,t.parseFacetLayout=s,t.parseLayerLayout=c},function(e,t,n){"use strict";var r=n(8),i=n(28),o=n(13),a=n(38),s=n(5),u=function(){function e(){this._nameMap={}}return e.prototype.rename=function(e,t){this._nameMap[e]=t},e.prototype.get=function(e){for(;this._nameMap[e];)e=this._nameMap[e];return e},e}(),l=function(){function e(e,t,n){this._warnings=[],this._parent=t,this._name=e.name||n,this._dataNameMap=t?t._dataNameMap:new u,this._scaleNameMap=t?t._scaleNameMap:new u,this._sizeNameMap=t?t._sizeNameMap:new u,this._data=e.data,this._description=e.description,this._transform=e.transform,this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}return e.prototype.parse=function(){this.parseData(),this.parseSelectionData(),this.parseLayoutData(),this.parseScale(),this.parseAxis(),this.parseLegend(),this.parseAxisGroup(),this.parseGridGroup(),this.parseMark()},e.prototype.assembleScales=function(){return s.flatten(s.vals(this.component.scale).map(function(e){var t=[e.main];return e.colorLegend&&t.push(e.colorLegend),e.binColorLegend&&t.push(e.binColorLegend),t}))},e.prototype.assembleAxes=function(){return s.vals(this.component.axis)},e.prototype.assembleLegends=function(){return s.vals(this.component.legend)},e.prototype.assembleGroup=function(){var e={};e.marks=this.assembleMarks();var t=this.assembleScales();t.length>0&&(e.scales=t);var n=this.assembleAxes();n.length>0&&(e.axes=n);var r=this.assembleLegends();return r.length>0&&(e.legends=r),e},e.prototype.reduce=function(e,t,n){return i.channelMappingReduce(this.channels(),this.mapping(),e,t,n)},e.prototype.forEach=function(e,t){i.channelMappingForEach(this.channels(),this.mapping(),e,t)},e.prototype.parent=function(){return this._parent},e.prototype.name=function(e,t){return void 0===t&&(t="_"),(this._name?this._name+t:"")+e},e.prototype.description=function(){return this._description},e.prototype.data=function(){return this._data},e.prototype.renameData=function(e,t){this._dataNameMap.rename(e,t)},e.prototype.dataName=function(e){return this._dataNameMap.get(this.name(String(e)))},e.prototype.renameSize=function(e,t){this._sizeNameMap.rename(e,t)},e.prototype.channelSizeName=function(e){return this.sizeName(e===r.X||e===r.COLUMN?"width":"height")},e.prototype.sizeName=function(e){return this._sizeNameMap.get(this.name(e,"_"))},e.prototype.transform=function(){return this._transform||{}},e.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=s.extend({binSuffix:this.scale(e).type===a.ScaleType.ORDINAL?"_range":"_start"},t)),o.field(n,t)},e.prototype.scale=function(e){return this._scale[e]},e.prototype.isOrdinalScale=function(e){var t=this.scale(e);return t&&t.type===a.ScaleType.ORDINAL},e.prototype.renameScale=function(e,t){this._scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e){return this._scaleNameMap.get(this.name(e+""))},e.prototype.sort=function(e){return(this.mapping()[e]||{}).sort},e.prototype.axis=function(e){return this._axis[e]},e.prototype.legend=function(e){return this._legend[e]},e.prototype.config=function(){return this._config},e.prototype.addWarning=function(e){s.warning(e),this._warnings.push(e)},e.prototype.warnings=function(){return this._warnings},e.prototype.isUnit=function(){return!1},e.prototype.isFacet=function(){return!1},e.prototype.isLayer=function(){return!1},e}();t.Model=l},function(e,t,n){"use strict";function r(e){return e.channels().reduce(function(t,n){if(e.scale(n)){var r=e.fieldDef(n),s={main:i(e,r,n)};n===x.COLOR&&e.legend(x.COLOR)&&(r.type===A.ORDINAL||r.bin||r.timeUnit)&&(s.colorLegend=o(e,r),r.bin&&(s.binColorLegend=a(e,r))),t[n]=s}return t},{})}function i(e,n,r){var i=e.scale(r),o=e.sort(r),a={name:e.scaleName(r),type:i.type};return a.domain=u(i,e,r),C.extend(a,f(i,e,r)),o&&"descending"===("string"==typeof o?o:o.order)&&(a.reverse=!0),["round","clamp","nice","exponent","zero","padding","points"].forEach(function(o){var s=t[o](i,r,n,e);void 0!==s&&(a[o]=s)}),a}function o(e,n){return{name:e.scaleName(t.COLOR_LEGEND),type:M.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(x.COLOR,n.bin||n.timeUnit?{}:{prefn:"rank_"}),sort:!0},range:{data:e.dataTable(),field:e.field(x.COLOR),sort:!0}}}function a(e,n){return{name:e.scaleName(t.COLOR_LEGEND_LABEL),type:M.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(x.COLOR),sort:!0},range:{data:e.dataTable(),field:S.field(n,{binSuffix:"_range"}),sort:{field:e.field(x.COLOR,{binSuffix:"_start"}),op:"min"}}}}function s(e,t,n,r){if(!x.hasScale(n))return null;if(C.contains([x.ROW,x.COLUMN,x.SHAPE],n))return M.ScaleType.ORDINAL;if(void 0!==e.type)return e.type;switch(t.type){case A.NOMINAL:return M.ScaleType.ORDINAL;case A.ORDINAL:return n===x.COLOR?M.ScaleType.LINEAR:M.ScaleType.ORDINAL;case A.TEMPORAL:if(n===x.COLOR)return M.ScaleType.TIME;if(t.timeUnit)switch(t.timeUnit){case T.TimeUnit.HOURS:case T.TimeUnit.DAY:case T.TimeUnit.MONTH:return M.ScaleType.ORDINAL;default:return M.ScaleType.TIME}return M.ScaleType.TIME;case A.QUANTITATIVE:return t.bin?C.contains([x.X,x.Y,x.COLOR],n)?M.ScaleType.LINEAR:M.ScaleType.ORDINAL:M.ScaleType.LINEAR}return null}function u(e,t,n){var r=t.fieldDef(n);if(e.domain)return e.domain;if(r.type===A.TEMPORAL)return O.rawDomain(r.timeUnit,n)?{data:r.timeUnit,field:"date"}:{data:t.dataTable(),field:t.field(n),sort:{field:t.field(n),op:"min"}};var i=t.stack();if(i&&n===i.fieldChannel)return i.offset===E.StackOffset.NORMALIZE?[0,1]:{data:t.dataName(w.STACKED_SCALE),field:t.field(n,{prefn:"sum_"})};var o=c(e,t,n),a=l(t,n,e.type);return o?{data:w.SOURCE,field:t.field(n,{noAggregate:!0})}:r.bin?e.type===M.ScaleType.ORDINAL?{data:t.dataTable(),field:t.field(n,{binSuffix:"_range"}),sort:{field:t.field(n,{binSuffix:"_start"}),op:"min"}}:n===x.COLOR?{data:t.dataTable(),field:t.field(n,{binSuffix:"_start"})}:{data:t.dataTable(),field:[t.field(n,{binSuffix:"_start"}),t.field(n,{binSuffix:"_end"})]}:a?{data:a.op?w.SOURCE:t.dataTable(),field:r.type===A.ORDINAL&&n===x.COLOR?t.field(n,{prefn:"rank_"}):t.field(n),sort:a}:{data:t.dataTable(),field:r.type===A.ORDINAL&&n===x.COLOR?t.field(n,{prefn:"rank_"}):t.field(n)}}function l(e,t,n){if(n===M.ScaleType.ORDINAL){var r=e.sort(t);return C.contains(["ascending","descending",void 0],r)?!0:"string"!=typeof r?{op:r.op,field:r.field}:void 0}}function c(e,t,n){var r=t.fieldDef(n);return e.useRawDomain&&r.aggregate&&b.SHARED_DOMAIN_OPS.indexOf(r.aggregate)>=0&&(r.type===A.QUANTITATIVE&&!r.bin||r.type===A.TEMPORAL&&C.contains([M.ScaleType.TIME,M.ScaleType.UTC],e.type))}function f(e,t,n){var r=t.fieldDef(n),i=t.config().scale;if(e.type===M.ScaleType.ORDINAL&&e.bandSize&&C.contains([x.X,x.Y],n))return{bandSize:e.bandSize};if(e.range&&!C.contains([x.X,x.Y,x.ROW,x.COLUMN],n))return{range:e.range};switch(n){case x.ROW:return{range:"height"};case x.COLUMN:return{range:"width"}}var o=t;switch(n){case x.X:return{rangeMin:0,rangeMax:o.config().cell.width};case x.Y:return{rangeMin:o.config().cell.height,rangeMax:0};case x.SIZE:if(o.mark()===k.BAR){if(void 0!==i.barSizeRange)return{range:i.barSizeRange};var a="horizontal"===t.config().mark.orient?x.Y:x.X;return{range:[t.config().mark.barThinSize,t.scale(a).bandSize]}}if(o.mark()===k.TEXT)return{range:i.fontSizeRange};if(o.mark()===k.RULE)return{range:i.ruleSizeRange};if(o.mark()===k.TICK)return{range:i.tickSizeRange};if(void 0!==i.pointSizeRange)return{range:i.pointSizeRange};var s=p(o);return{range:[9,(s-2)*(s-2)]};case x.SHAPE:return{range:i.shapeRange};case x.COLOR:return r.type===A.NOMINAL?{range:i.nominalColorRange}:{range:i.sequentialColorRange};case x.OPACITY:return{range:i.opacity}}return{}}function p(e){var t=e.config().scale,n=e.has(x.X),r=e.has(x.Y),i=S.isMeasure(e.encoding().x),o=S.isMeasure(e.encoding().y);return n&&r?i!==o?e.scale(i?x.Y:x.X).bandSize:Math.min(e.scale(x.X).bandSize||t.bandSize,e.scale(x.Y).bandSize||t.bandSize):r?o?e.config().scale.bandSize:e.scale(x.Y).bandSize:n?i?e.config().scale.bandSize:e.scale(x.X).bandSize:e.config().scale.bandSize}function d(e){return C.contains([M.ScaleType.LINEAR,M.ScaleType.POW,M.ScaleType.SQRT,M.ScaleType.LOG,M.ScaleType.TIME,M.ScaleType.UTC],e.type)?e.clamp:void 0}function h(e){return e.type===M.ScaleType.POW?e.exponent:void 0}function m(e,t,n){return C.contains([M.ScaleType.LINEAR,M.ScaleType.POW,M.ScaleType.SQRT,M.ScaleType.LOG,M.ScaleType.TIME,M.ScaleType.UTC,M.ScaleType.QUANTIZE],e.type)?void 0!==e.nice?e.nice:C.contains([M.ScaleType.TIME,M.ScaleType.UTC],e.type)?O.smallestUnit(n.timeUnit):C.contains([x.X,x.Y],t):void 0}function g(e,t){return e.type===M.ScaleType.ORDINAL&&C.contains([x.X,x.Y],t)?e.padding:void 0}function v(e,t,n,r){return e.type===M.ScaleType.ORDINAL&&C.contains([x.X,x.Y],t)?!0:void 0}function y(e,t){return C.contains([x.X,x.Y,x.ROW,x.COLUMN,x.SIZE],t)&&void 0!==e.round?e.round:void 0}function _(e,t,n){return C.contains([M.ScaleType.TIME,M.ScaleType.UTC,M.ScaleType.ORDINAL],e.type)?void 0:void 0!==e.zero?e.zero:!n.bin&&C.contains([x.X,x.Y],t)}var b=n(63),x=n(8),E=n(49),w=n(33),S=n(13),k=n(29),M=n(38),T=n(50),A=n(17),C=n(5),O=n(78);t.COLOR_LEGEND="color_legend",t.COLOR_LEGEND_LABEL="color_legend_label",t.parseScaleComponent=r,t.scaleType=s,t.domain=u,t.domainSort=l,t.rangeMixins=f,t.clamp=d,t.exponent=h,t.nice=m,t.padding=g,t.points=v,t.round=y,t.zero=_},function(e,t,n){"use strict";function r(e){return void 0!==e.facet}function i(e){if(a(e)){var t=h.has(e.encoding,m.ROW),n=h.has(e.encoding,m.COLUMN);return t||n}return!1}function o(e){return a(e)?!i(e):!1}function a(e){return void 0!==e.mark}function s(e){return void 0!==e.layers}function u(e){if(i(e)){var t=h.has(e.encoding,m.ROW),n=h.has(e.encoding,m.COLUMN),r=y.duplicate(e.encoding);return delete r.column,delete r.row,y.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},{data:e.data},e.transform?{transform:e.transform}:{},{facet:y.extend(t?{row:e.encoding.row}:{},n?{column:e.encoding.column}:{}),spec:{mark:e.mark,encoding:r}},e.config?{config:e.config}:{})}return e}function l(e){return g.isAggregate(e.encoding)}function c(e){return g.fieldDefs(e.encoding)}function f(e){return e}function p(e){return(g.has(e.encoding,m.COLOR)||g.has(e.encoding,m.SHAPE))&&(e.mark===v.BAR||e.mark===v.AREA)&&(!e.config||!e.config.mark.stacked!=!1)&&g.isAggregate(e.encoding)}function d(e){var t=e.encoding,n=y.duplicate(e.encoding);return n.x=t.y,n.y=t.x,n.row=t.column,n.column=t.row,e.encoding=n,e}var h=n(28),m=n(8),g=n(28),v=n(29),y=n(5);t.isFacetSpec=r,t.isExtendedUnitSpec=i,t.isUnitSpec=o,t.isSomeUnitSpec=a,t.isLayerSpec=s,t.normalize=u,t.alwaysNoOcclusion=l,t.fieldDefs=c,t.getCleanSpec=f,t.isStack=p,t.transpose=d},function(e,t){function n(){this._el=null,this._bgcolor=null}var r=n.prototype;r.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},r.element=function(){return this._el},r.scene=function(){return this._el&&this._el.firstChild},r.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},r.resize=function(e,t,n){return this._width=e,this._height=t,this._padding=n||{top:0,left:0,bottom:0,right:0},this},r.render=function(){return this},e.exports=n},function(e,t,n){function r(e){this._pending=0,this._config=e||r.Config}function i(e,t){var n=a.sanitizeUrl(this.params(e));if(!n)return t&&t(e,null),null;var r=this,i=new Image;return r._pending+=1,i.onload=function(){r._pending-=1,i.loaded=!0,t&&t(null,i)},i.src=n,i}function o(e,t){var r=this,i=new(n(212).Image);return r._pending+=1,a(this.params(e),function(e,n){return r._pending-=1,e?(t&&t(e,null),null):(i.src=n,i.loaded=!0,void(t&&t(null,i)))}),i}var a=n(98);r.Config=null;var s=r.prototype;s.pending=function(){return this._pending},s.params=function(e){var t,n={url:e};for(t in this._config)n[t]=this._config[t];return n},s.imageURL=function(e){return a.sanitizeUrl(this.params(e))},s.loadImage=function(e,t){return a.useXHR?i.call(this,e,t):o.call(this,e,t)},e.exports=r},function(e,t,n){function r(){return N||(N=b.instance(1,1).getContext("2d"))}function i(e,t){return e.stroke&&0!==e.opacity&&0!==e.stokeOpacity&&t.expand(null!=e.strokeWidth?e.strokeWidth:1),t}function o(e,t,n,r,o){return null==t?n.set(0,0,0,0):(k(I.bounds(n),t,r,o),i(e,n)),n}function a(e,t){var n=e.path?e.pathCache||(e.pathCache=S(e.path)):null;return o(e,n,t,e.x,e.y)}function s(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=S(M(n)));return o(r,i,t)}function u(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=S(T(n)));return o(r,i,t)}function l(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))}function c(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return n-="center"===e.align?i/2:"right"===e.align?i:0,r-="middle"===e.baseline?o/2:"bottom"===e.baseline?o:0,t.set(n,r,n+i,r+o)}function f(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r))}function p(e,t){var n,r,o,a,s,u,l,c,f,p=e.x||0,d=e.y||0,h=e.innerRadius||0,m=e.outerRadius||0,g=(e.startAngle||0)-A,v=(e.endAngle||0)-A,y=1/0,_=-(1/0),b=1/0,x=-(1/0),E=[g,v],w=g-g%A;for(r=0;4>r&&v>w;++r,w+=A)E.push(w);for(r=0,o=E.length;o>r;++r)n=E[r],a=Math.cos(n),u=h*a,c=m*a,s=Math.sin(n),l=h*s,f=m*s,y=Math.min(y,u,c),_=Math.max(_,u,c),b=Math.min(b,l,f),x=Math.max(x,l,f);return i(e,t.set(p+y,d+b,p+_,d+x))}function d(e,t){var n,r,o,a,s=null!=e.size?e.size:100,u=e.x||0,l=e.y||0;switch(e.shape){case"cross":r=3*Math.sqrt(s/5)/2,t.set(u-r,l-r,u+r,l+r);break;case"diamond":a=Math.sqrt(s/(2*O)),o=a*O,t.set(u-o,l-a,u+o,l+a);break;case"square":r=Math.sqrt(s),n=r/2,t.set(u-n,l-n,u+n,l+n);break;case"triangle-down":o=Math.sqrt(s/C),a=o*C/2,t.set(u-o,l-a,u+o,l+a);break;case"triangle-up":o=Math.sqrt(s/C),a=o*C/2,t.set(u-o,l-a,u+o,l+a);break;default:n=Math.sqrt(s/Math.PI),t.set(u-n,l-n,u+n,l+n)}return i(e,t)}function h(e,t,n){var i,o,a=r(),s=E.size(e),u=e.align,l=e.radius||0,c=e.x||0,f=e.y||0,p=e.dx||0,d=(e.dy||0)+E.offset(e)-Math.round(.8*s);return l&&(o=(e.theta||0)-Math.PI/2,c+=l*Math.cos(o),f+=l*Math.sin(o)),a.font=E.font(e),i=a.measureText(E.value(e.text)).width,"center"===u?p-=i/2:"right"===u&&(p-=i),t.set(p+=c,d+=f,p+i,d+s),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,c,f),t.expand(n?0:1)}function m(e,t,n){var r,o,a=e.axisItems||[],s=e.items||[],u=e.legendItems||[];if(!e.clip){for(r=0,o=a.length;o>r;++r)t.union(a[r].bounds);for(r=0,o=s.length;o>r;++r)s[r].bounds&&t.union(s[r].bounds);if(n)for(r=0,o=u.length;o>r;++r)t.union(u[r].bounds)}return(e.clip||e.width||e.height)&&i(e,t.add(0,0).add(e.width||0,e.height||0)),t.translate(e.x||0,e.y||0)}function g(e,t,n){var r=e.mark.marktype;t=t||L[r],t.nest&&(e=e.mark);var i=e.bounds,o=e["bounds:prev"]||(e["bounds:prev"]=new _);return i?(o.clear().union(i),i.clear()):e.bounds=new _,t(e,e.bounds,n),i||o.clear().union(e.bounds),e.bounds}function v(e,t,n){var r,i,o,a,s=e.marktype,u=L[s],l=e.items,c=l&&l.length;if(u.nest)return o=c?l[0]:(D.mark=e,D),a=g(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new _,c)for(r=0,i=l.length;i>r;++r)t.union(g(l[r],u,n));return e.bounds=t}var y=n(373),_=n(81),b=n(129),x=n(51),E=n(65),w=n(194),S=w.parse,k=w.render,M=x.path.area,T=x.path.line,A=Math.PI/2,C=Math.sqrt(3),O=Math.tan(30*Math.PI/180),N=null,I=y(),L={group:m,symbol:d,image:c,rect:l,rule:f,arc:p,text:h,path:a,area:s,line:u};L.area.nest=!0,L.line.nest=!0;var D={mark:null};e.exports={mark:v,item:g,text:h,group:m}},function(e,t,n){function r(e,t){e=e||1,t=t||1;var r;if("undefined"!=typeof document&&document.createElement)r=document.createElement("canvas"),r.width=e,r.height=t;else{var i=n(212);if(!i.prototype)return null;r=new i(e,t)}return a(r)}function i(e,t,n,r,i){var a=this._ctx=e.getContext("2d"),s=1;return e.width=t+r.left+r.right,e.height=n+r.top+r.bottom,i&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&(a.pixelratio=s=o(e)||1),a.setTransform(s,0,0,s,s*r.left,s*r.top),e}function o(e){var t=e.getContext("2d"),n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var o=e.width,a=e.height;e.width=o*i,e.height=a*i,e.style.width=o+"px",e.style.height=a+"px"}return i}function a(e){var t=e.getContext("2d");if(!t.vgLineDash){var n=function(){},r=[];return t.setLineDash?(t.vgLineDash=function(e){this.setLineDash(e||r)},t.vgLineDashOffset=function(e){this.lineDashOffset=e}):void 0!==t.webkitLineDash?(t.vgLineDash=function(e){this.webkitLineDash=e||r},t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}):void 0!==t.mozDash?(t.vgLineDash=function(e){this.mozDash=e},t.vgLineDashOffset=n):(t.vgLineDash=n,t.vgLineDashOffset=n),e}}e.exports={instance:r,resize:i,lineDash:a}},function(e,t,n){var r=n(12),i={};i.load={baseURL:"",domainWhiteList:!1},i.autopadInset=5,i.scale={time:r.time.scale,utc:r.time.scale.utc},i.render={retina:!0},i.scene={fill:void 0,fillOpacity:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,strokeDash:void 0,strokeDashOffset:void 0},i.axis={orient:"bottom",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1/0,titleOffsetAutoMargin:4},i.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},i.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},i.range={category10:r.scale.category10().range(),category20:r.scale.category20().range(),category20b:r.scale.category20b().range(),category20c:r.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},e.exports=i},function(e,t,n){function r(e,t){return function(n){n=n.map(e);var r=n.length;if(2>r||r>3)throw Error("scale takes exactly 2 or 3 arguments.");return"this.defs.scale(this.model, "+t+", "+n[0]+","+n[1]+(r>2?","+n[2]:"")+")"}}function i(e,t,n,r,i){if(i&&i.scale||(i=i&&i.mark?i.mark.group:e.scene().items[0]),e.group(i._id)!==i)throw Error('Scope for scale "'+n+'" is not a valid group item.');var o=i.scale(n);return o?t?o.invert(r):o(r):r}function o(e,t,n,r){var i=t,o=n;return t>n&&(i=n,o=t),r?e>i&&o>e:e>=i&&o>=e}function a(e){return function(t,n,r,i){var o;if(3!==t.length)throw Error("indata takes 3 arguments.");if("Literal"!==t[0].type)throw Error("Data source name must be a literal for indata.");return o=t[0].value,i[o]=1,"Literal"===t[2].type&&a.model.requestIndex(o,t[2].value),t=t.map(e),"this.defs.indata(this.model,"+t[0]+","+t[1]+","+t[2]+")"}}function s(e,t,n,r){var i=e.data(t),o=i.getIndex(r);return o[n]>0}function u(e,t){return d.format(e,"number")(t)}function l(e,t){return d.format(e,"time")(t)}function c(e,t){return d.format(e,"utc")(t)}function f(e){return function(t){a.model=e;var n=g(t);return n.model=e,n.sig=e?e._signals:{},n}}var p=n(1),d=p.template,h=n(326),m=["datum","event","signals"],g=h.compiler(m,{idWhiteList:m,fieldVar:m[0],globalVar:function(e){return"this.sig["+p.str(e)+"]._value"},functions:function(e){var t=h.functions(e);return t.eventItem="event.vg.getItem",t.eventGroup="event.vg.getGroup",t.eventX="event.vg.getX",t.eventY="event.vg.getY",t.open="window.open",t.scale=r(e,!1),t.iscale=r(e,!0),t.inrange="this.defs.inrange",t.indata=a(e),t.format="this.defs.format",t.timeFormat="this.defs.timeFormat",t.utcFormat="this.defs.utcFormat",t},functionDefs:function(){return{scale:i,inrange:o,indata:s,format:u,timeFormat:l,utcFormat:c}}});f.scale=i,f.codegen=g.codegen,e.exports=f},function(e,t,n){e.exports={axes:n(200),background:n(379),data:n(201),events:n(183),expr:n(131),legends:n(202),mark:n(82),marks:n(380),modify:n(203),padding:n(381),predicates:n(382),properties:n(83),signals:n(204),spec:n(383),streams:n(205),transforms:n(133)}},function(e,t,n){function r(e,t){var n,r=o[t.type];if(!r)throw new Error('"'+t.type+'" is not a valid transformation');return n=new r(e),t.output&&n.output(t.output),i.keys(t).forEach(function(e){"type"!==e&&"output"!==e&&n.param(e,t[e])}),n}var i=n(1),o=n(211);e.exports=r;var a=i.keys(o).filter(function(e){return o[e].schema}),s=a.reduce(function(e,t){return e[t+"Transform"]=o[t].schema,e},{});r.schema={defs:i.extend(s,{transform:{type:"array",items:{oneOf:a.map(function(e){return{$ref:"#/defs/"+e+"Transform"}})}}})}},function(e,t,n){function r(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals=[]}function i(){var e=s.test(this._type),t=u.test(this._type),n=l.test(this._type),r=e?this._value:this._value[0],i=e?this._accessors:this._accessors[0];return!o.isValid(i)&&f.test(this._type)?r:t?{name:r,source:i}:n?{field:r,accessor:i}:r}var o=n(1),a=n(4).Dependencies,s=/array/i,u=/data/i,l=/field/i,c=/expr/i,f=/value/i,p=r.prototype;p.get=function(){var e,t,n,r,a,s=this._transform._graph,c=u.test(this._type),f=l.test(this._type);if(!this._resolution)return i.call(this);if(c)return this._accessors=this._value.map(function(e){return s.data(e)}),i.call(this);for(e=0,t=this._signals.length;t>e;++e)n=this._signals[e],r=n.index,a=n.value(s),f&&(this._accessors[r]=this._value[r]!=a?o.accessor(a):this._accessors[r]),this._value[r]=a;return i.call(this)},p.set=function(e){var t=this,n=t._transform._graph,r=c.test(this._type),i=u.test(this._type),s=l.test(this._type);return t._signals=[],this._value=o.array(e).map(function(e,u){var l;return o.isString(e)?r?(l=n.expr(e),t._transform.dependency(a.FIELDS,l.fields),t._transform.dependency(a.SIGNALS,l.globals),t._transform.dependency(a.DATA,l.dataSources),l.fn):(s?(t._accessors[u]=o.accessor(e),t._transform.dependency(a.FIELDS,o.field(e))):i&&(t._resolution=!0,t._transform.dependency(a.DATA,e)),e):void 0!==e.value?e.value:void 0!==e.field?(t._accessors[u]=o.accessor(e.field),t._transform.dependency(a.FIELDS,o.field(e.field)),e.field):void 0!==e.signal?(t._resolution=!0,t._transform.dependency(a.SIGNALS,e.signal),t._signals.push({index:u,value:function(t){return t.signalRef(e.signal)}}),e.signal):void 0!==e.expr?(t._resolution=!0,l=n.expr(e.expr),t._transform.dependency(a.SIGNALS,l.globals),t._signals.push({index:u,value:function(){return l.fn()}}),e.expr):e}),t._transform},e.exports=r,r.schema={type:"object",oneOf:[{properties:{field:{type:"string"}},required:["field"]},{properties:{value:{type:"string"}},required:["value"]}]}},function(e,t,n){var r=n(1),i={};r.extend(i,n(409)),e.exports=r.extend(i,r)},function(e,t,n){"use strict";function r(e,t){return{type:l.RULES_ADD_SCALE_TO_GROUP,groupId:t,id:e._id}}function i(e,t){var n=e._parent;return e._parent=t,{type:l.RULES_ADD_AXIS_TO_GROUP,oldGroupId:n,groupId:t,id:e._id}}function o(e,t){var n=e._parent;return e._parent=t,{type:l.RULES_ADD_LEGEND_TO_GROUP,oldGroupId:n,groupId:t,id:e._id}}function a(e,t,n){return{type:l.RULES_SET_PROPERTY,id:e,property:t,value:n}}function s(e,t){return{type:l.RULES_DISABLE_PROPERTY,id:e,property:t}}function u(e,t){return{type:l.RULES_RESET_PROPERTY,id:e,property:t}}var l=n(21);e.exports={addScaleToGroup:r,addAxisToGroup:i,addLegendToGroup:o,setProperty:a,disableProperty:s,resetProperty:u}},function(e,t){"use strict";function n(){return o++}function r(e){return e?("undefined"==typeof a[e]&&(a[e]=1),a[e]++):void 0}function i(){o=1,Object.keys(a).forEach(function(e){a[e]=1})}var o=1,a={};e.exports={global:n,type:r,reset:i}},function(e,t,n){"use strict";function r(e){return f.prototype.init.call(this,e),f.addParameters(this,{lyra_id:{type:"value"}}),this._cacheID=null,this._cacheMode=null,this._cache=[],this._voronoi=new p(e),this.router(!0).produces(!0).dependency(c.SIGNALS,[d.SELECTED,d.MODE])}var i=n(1),o=n(90),a=n(27),s=o.dataflow,u=s.ChangeSet,l=s.Tuple,c=s.Dependencies,f=o.Transform,p=o.transforms.voronoi,d=n(42),h=i.$("x"),m=i.$("y");a(r,f),r.prototype.transform=function(e){var t=this._graph,n=t.signal(d.SELECTED).value(),r=t.signal(d.MODE).value(),o=n.mark.def,a=this.param("lyra_id"),s=this._cache,c=this._cacheID,f=this._cacheMode,p=u.create(e);if(!s.length||c===n._id&&f===r||(p.rem=s.splice(0)),!o||o&&a!==o.lyra_id)return p;var g=this[r](n).map(function(e){return e.mode=r,e.lyra_id=a,e});s.length&&c===n._id?(g.forEach(function(e,t){i.extend(s[t],e)}),p.mod.push.apply(p.mod,s)):(this._cacheID=n._id,this._cacheMode=r,s.push.apply(s,g.map(l.ingest)),p.add.push.apply(p.add,s));
var v=[[i.min(s,h)-100,i.min(s,m)-50],[i.max(s,h)+50,i.max(s,m)+50]];return this._voronoi.param("x","x").param("y","y").param("clipExtent",v).batchTransform(p,s)},r.prototype.handles=function(e){return[]},r.prototype.connectors=function(e){return[]},r.prototype.channels=function(e){return[]},r.prototype.altchannels=function(e){return[]},e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(42);e.exports=function(e,t,n){var o=i.ANCHOR,a=o+".target",s="("+o+"&&"+a+"&&"+a+".datum &&";return s+=n?a+".datum.mode === "+r.str(t)+" &&"+a+".datum.lyra_id === "+r.str(e._id)+"&&test(regexp("+r.str(n)+', "i"), '+a+".datum.key)":a+".mark && "+a+".mark.name === "+r.str(e.name),s+")"}},function(e,t){"use strict";e.exports=function(e,t){return function(n){return n.key=e,n.manipulator=t,n}}},function(e,t){"use strict";e.exports=function(e,t,n){return"if("+e+","+t+","+n+")"}},function(e,t,n){(function(e,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(e.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function a(t,n){if(t=m(t,0>n?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function s(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|y(t,n);return e=m(e,r),e.write(t,n),e}function u(t,n){if(e.isBuffer(n))return l(t,n);if(K(n))return c(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(t,n);if(n instanceof ArrayBuffer)return p(t,n)}return n.length?d(t,n):h(t,n)}function l(e,t){var n=0|g(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(t,n){return e.TYPED_ARRAY_SUPPORT?(n.byteLength,t=e._augment(new Uint8Array(n))):t=f(t,new Uint8Array(n)),t}function d(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(e,t){var n,r=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,r=0|g(n.length)),e=m(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function m(t,n){e.TYPED_ARRAY_SUPPORT?(t=e._augment(new Uint8Array(n)),t.__proto__=e.prototype):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=J),t}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function v(t,n){if(!(this instanceof v))return new v(t,n);var r=new e(t,n);return delete r.parent,r}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return C(this,t,n);case"binary":return O(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function x(e,t,n,r){return $(Y(t,e.length-n),e,n,r)}function E(e,t,n,r){return $(H(t),e,n,r)}function w(e,t,n,r){return E(e,t,n,r)}function S(e,t,n,r){return $(W(t),e,n,r)}function k(e,t,n,r){return $(V(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var u,l,c,f;switch(s){case 1:128>o&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return A(r)}function A(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=B(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,n,r,i,o,a){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||a>n)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function P(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function j(e,t,n,r,i){return i||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,i){return i||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function q(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function B(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return G.toByteArray(q(e))}function $(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var G=n(231),X=n(259),K=n(260);t.Buffer=e,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var J={};e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),e.TYPED_ARRAY_SUPPORT?(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array):(e.prototype.length=void 0,e.prototype.parent=void 0),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,a=Math.min(r,i);a>o&&t[o]===n[o];)++o;return o!==a&&(r=t[o],i=n[o]),i>r?-1:r>i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!K(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var i=new e(n),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(i,o),o+=a.length}return i},e.byteLength=y,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):_.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return w(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=e._augment(this.subarray(t,n));else{var o=n-t;i=new e(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),X.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),X.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),X.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),X.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||D(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||D(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):P(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):P(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):R(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):R(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):P(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):P(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):R(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):R(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o,a=i-r;if(this===t&&n>r&&i>n)for(o=a-1;o>=0;o--)t[o+n]=this[o+r];else if(1e3>a||!e.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)t[o+n]=this[o+r];else t._set(this.subarray(r,r+a),n);return a},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=Y(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(142).Buffer,function(){return this}())},function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function i(e){if(o.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=o.array(e[t]),r.push({name:t,ops:n});return r}var o=n(10),a=n(240),s=n(238),u=r.Flags={ADD_CELL:1,MOD_CELL:2},l=r.prototype;l.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},l.key=function(e){return null==e?this._key:(this._key=o.$(e),this)},l.groupby=function(e){return this._dims=o.array(e).map(function(e,t){if(e=o.isString(e)?{name:e,get:o.$(e)}:o.isFunction(e)?{name:o.name(e)||e.name||"_"+t,get:e}:e.name&&o.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},l.summarize=function(e){e=i(e),this._count=!0;var t,n,r,s,u,l,c,f=this._aggr=[];for(r=0;r<e.length;++r){for(s=0,t=[],n=e[r];s<n.ops.length;++s)u=n.ops[s],"count"!==u&&(this._count=!1),l=n.as&&n.as[s]||u+("*"===n.name?"":"_"+n.name),t.push(a[u](l));c=n.get&&o.$(n.get)||("*"===n.name?o.identity:o.$(n.name)),f.push({name:n.name,measures:a.create(t,this._stream,c,this._assign)})}return this.clear()},l.count=function(){return this.summarize({"*":"count"})},l._assign=function(e,t,n){e[t]=n},l.clear=function(){return this._cells={},this},l._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;r>t;++t)i+="|"+n[t].get(e);return i},l._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},l._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:u.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new s(this._key)),r},l._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;n>t;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},l._ingest=o.identity,l._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=u.MOD_CELL,this._on_add&&this._on_add(e,n)},l._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=u.MOD_CELL,this._on_rem&&this._on_rem(e,n)},l._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),a=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!o.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<a.length;++n)r.aggs[a[n].name].rem(t),i.aggs[a[n].name].add(e);r.flag|=u.MOD_CELL,i.flag|=u.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},l._markMod=function(e){var t=this._cell(e);t.flag|=u.MOD_CELL},l.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},l.changes=function(e){var t,n,r,i,o=e||{add:[],rem:[],mod:[]},a=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<a.length;++r)t.aggs[a[r].name].set();t.num<=0?(o.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&u.ADD_CELL?o.add.push(t.tuple):n&u.MOD_CELL&&o.mod.push(t.tuple)),t.flag=0}return this._rems=!1,o},l.execute=function(e){return this.clear().insert(e).result()},l.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},l.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},l._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},e.exports=r},function(e,t,n){function r(e,t,n){n=a(e,t,n);var r=o(n);return r?p.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||p.identity}function i(e,t,n){n=a(e,t,n);var r=o(n);return r?s(e,n.accessor,r):u(e,n.accessor,n&&n.sort)}function o(e){var t=e.type,n=null;return(null==t||h[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?l.date(e):l(e)),n}function a(){var e=arguments,t=0,n=p.isArray(e[t])?e[t++]:null,r=p.isFunction(e[t])||p.isString(e[t])?p.$(e[t++]):null,i=p.extend({},e[t]);if(n&&(i.type=i.type||f(n,r),h[i.type])){var o=d.extent(n,r);i=p.extend({min:o[0],max:o[1]},i)}return r&&(i.accessor=r),i}function s(e,t,n){for(var r,i,o=c.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),a=0;a<e.length;++a)if(r=t?t(e[a]):e[a],p.isValid(r)){if(i=n.index(r),0>i||i>=o.length||!isFinite(i))continue;o[i].count+=1}return o.bins=n,o}function u(e,t,n){var r=d.unique(e,t),i=d.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(p.comparator(n?"-count":"+value"))}var l=n(95),c=n(66),f=n(55),p=n(10),d=n(56),h={integer:1,number:1,date:1};e.exports={$bin:r,histogram:i}},function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=s[n](e,t),t&&t.parse&&i(e,t.parse),e}function i(e,t){var n,r,i,s,l,c,f=e.length;for(t="auto"===t?a.inferAll(e):o.duplicate(t),n=o.keys(t),r=n.map(function(e){var n=t[e];if(n&&0===n.indexOf("date:")){var r=n.split(/:(.+)?/,2),i=r[1];if(!("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1]))throw Error("Format pattern must be quoted: "+i);return i=i.slice(1,-1),i=u(i),function(e){return i.parse(e)}}if(!a.parsers[n])throw Error("Illegal format pattern: "+e+":"+n);return a.parsers[n]}),s=0,c=n.length;f>s;++s)for(i=e[s],l=0;c>l;++l)i[n[l]]=r[l](i[n[l]]);a.annotation(e,t)}var o=n(10),a=n(55),s=n(243),u=n(96).time;r.formats=s,e.exports=r},function(e,t,n){function r(e){var t=i(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(f)}function i(e,t,n){t=t||"obj";var r=0,i="'",s=p;return e.replace(s,function(s,u,l){return i+=e.slice(r,l).replace(g,a),r=l+s.length,u&&(i+="'\n+((__t=("+o(u,t,n)+"))==null?'':__t)+\n'"),s}),i+"'"}function o(e,t,n){function i(e){return e=e||"",f?(f=!1,p="String("+p+")"+e):p+=e,p}function o(){return"(typeof "+p+'==="number"?new Date('+p+"):"+p+")"}function a(e){var t=b[0];if(!("'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]))throw Error("Format pattern must be quoted: "+t);t=t.slice(1,-1),v=s(t,e),f=!1;var n="number"===e?p:o();p="this.formats["+v+"]("+n+")"}var u=e.match(d),c=u.shift().trim(),f=!0;n&&(n[c]=1);for(var p=r.property(t,c),m=0;m<u.length;++m){var g,v,y,_=u[m],b=null;switch((g=_.indexOf(":"))>0&&(_=_.slice(0,g),b=u[m].slice(g+1).match(h).map(function(e){return e.trim()})),_=_.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":v=l.number(b[0]),i(".slice(0,"+v+")");break;case"right":v=l.number(b[0]),i(".slice(-"+v+")");break;case"mid":v=l.number(b[0]),y=v+l.number(b[1]),i(".slice(+"+v+","+y+")");break;case"slice":v=l.number(b[0]),i(".slice("+v+(b.length>1?","+l.number(b[1]):"")+")");break;case"truncate":v=l.number(b[0]),y=b[1],y="left"!==y&&"middle"!==y&&"center"!==y?"right":y,p="this.truncate("+i()+","+v+",'"+y+"')";break;case"pad":v=l.number(b[0]),y=b[1],y="left"!==y&&"middle"!==y&&"center"!==y?"right":y,p="this.pad("+i()+","+v+",'"+y+"')";break;case"number":a("number");break;case"time":a("time");break;case"time-utc":a("utc");break;case"month":p="this.month("+p+")";break;case"month-abbrev":p="this.month("+p+",true)";break;case"day":p="this.day("+p+")";break;case"day-abbrev":p="this.day("+p+",true)";break;case"quarter":p="this.quarter("+p+")";break;default:throw Error("Unrecognized template filter: "+_)}}return p}function a(e){return"\\"+m[e]}function s(e,t){var n=t+":"+e;if(null==f.format_map[n]){var r=c[t](e),i=f.formats.length;return f.formats.push(r),f.format_map[n]=i,i}return f.format_map[n]}function u(e,t){return f.formats[s(e,t)]}var l=n(10),c=n(96),f={formats:[],format_map:{},truncate:l.truncate,pad:l.pad,day:c.day,month:c.month,quarter:c.quarter};r.source=i,r.context=f,r.format=u,e.exports=r,r.clearFormatCache=function(){f.formats=[],f.format_map={}},r.property=function(e,t){var n=l.field(t).map(l.str).join("][");return e+"["+n+"]"};var p=/\{\{(.+?)\}\}|$/g,d=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,h=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,m={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\u2028|\u2029/g},function(e,t,n){"use strict";var r=n(26),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";function r(e,t){var n=!0;e:for(;n;){var r=e,o=t;if(n=!1,r&&o){if(r===o)return!0;if(i(r))return!1;if(i(o)){e=r,t=o.parentNode,n=!0;continue e}return r.contains?r.contains(o):r.compareDocumentPosition?!!(16&r.compareDocumentPosition(o)):!1}return!1}}var i=n(255);e.exports=r},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t,n){"use strict";function r(e){return a?void 0:o(!1),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var i=n(14),o=n(3),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(e){p[e]=f,s[e]=!0}),e.exports=r},function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=r.bind(t),a=0;a<n.length;a++)if(!o(n[a])||e[n[a]]!==t[n[a]])return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},function(e,t,n){"use strict";function r(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var i=n(272),o=n(171),a=n(23),s=n(75),u=n(115),l=n(3),c={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:u,processUpdates:function(e,t){for(var n,a=null,c=null,f=0;f<e.length;f++)if(n=e[f],n.type===o.MOVE_EXISTING||n.type===o.REMOVE_NODE){var p=n.fromIndex,d=n.parentNode.childNodes[p],h=n.parentID;d?void 0:l(!1),a=a||{},a[h]=a[h]||[],a[h][p]=d,c=c||[],c.push(d)}var m;if(m=t.length&&"string"==typeof t[0]?i.dangerouslyRenderMarkup(t):t,c)for(var g=0;g<c.length;g++)c[g].parentNode.removeChild(c[g]);for(var v=0;v<e.length;v++)switch(n=e[v],n.type){case o.INSERT_MARKUP:r(n.parentNode,m[n.markupIndex],n.toIndex);break;case o.MOVE_EXISTING:r(n.parentNode,a[n.parentID][n.fromIndex],n.toIndex);break;case o.SET_MARKUP:s(n.parentNode,n.content);break;case o.TEXT_CONTENT:u(n.parentNode,n.content);break;case o.REMOVE_NODE:}}};a.measureMethods(c,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),e.exports=c},function(e,t,n){"use strict";function r(){
if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1?void 0:a(!1),!l.plugins[n]){t.extractEvents?void 0:a(!1),l.plugins[n]=t;var r=t.eventTypes;for(var o in r)i(r[o],t,o)?void 0:a(!1)}}}function i(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)?a(!1):void 0,l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,t,n)}return!0}return e.registrationName?(o(e.registrationName,t,n),!0):!1}function o(e,t,n){l.registrationNameModules[e]?a(!1):void 0,l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(3),s=null,u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){s?a(!1):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]?a(!1):void 0,u[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=l},function(e,t,n){"use strict";function r(e){return(""+e).replace(b,"//")}function i(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=i.getPooled(t,n);v(e,o,r),i.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var i=e.result,o=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?l(u,i,n,g.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(u!==t?r(u.key||"")+"/":"")+n)),i.push(u))}function l(e,t,n,i,o){var a="";null!=n&&(a=r(n)+"/");var l=s.getPooled(t,a,i,o);v(e,u,l),s.release(l)}function c(e,t,n){if(null==e)return e;var r=[];return l(e,r,null,t,n),r}function f(e,t,n){return null}function p(e,t){return v(e,f,null)}function d(e){var t=[];return l(e,t,null,g.thatReturnsArgument),t}var h=n(37),m=n(20),g=n(26),v=n(117),y=h.twoArgumentPooler,_=h.fourArgumentPooler,b=/\/(?!\/)/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,_);var x={forEach:a,map:c,mapIntoWithKeyPrefixInternal:l,count:p,toArray:d};e.exports=x},function(e,t,n){"use strict";function r(e,t){var n=E.hasOwnProperty(t)?E[t]:null;S.hasOwnProperty(t)&&(n!==b.OVERRIDE_BASE?g(!1):void 0),e.hasOwnProperty(t)&&(n!==b.DEFINE_MANY&&n!==b.DEFINE_MANY_MERGED?g(!1):void 0)}function i(e,t){if(t){"function"==typeof t?g(!1):void 0,p.isValidElement(t)?g(!1):void 0;var n=e.prototype;t.hasOwnProperty(_)&&w.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==_){var o=t[i];if(r(n,i),w.hasOwnProperty(i))w[i](e,o);else{var a=E.hasOwnProperty(i),l=n.hasOwnProperty(i),c="function"==typeof o,f=c&&!a&&!l&&t.autobind!==!1;if(f)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(l){var d=E[i];!a||d!==b.DEFINE_MANY_MERGED&&d!==b.DEFINE_MANY?g(!1):void 0,d===b.DEFINE_MANY_MERGED?n[i]=s(n[i],o):d===b.DEFINE_MANY&&(n[i]=u(n[i],o))}else n[i]=o}}}}function o(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in w;i?g(!1):void 0;var o=n in e;o?g(!1):void 0,e[n]=r}}}function a(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:g(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?g(!1):void 0,e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return a(i,n),a(i,r),i}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);return n}function c(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=l(e,n)}}var f=n(158),p=n(20),d=(n(70),n(69),n(173)),h=n(7),m=n(57),g=n(3),v=n(67),y=n(35),_=(n(6),y({mixins:null})),b=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),x=[],E={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},w={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=h({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=h({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=h({},e.propTypes,t)},statics:function(e,t){o(e,t)},autobind:function(){}},S={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},k=function(){};h(k.prototype,f.prototype,S);var M={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&c(this),this.props=e,this.context=t,this.refs=m,this.updater=n||d,this.state=null;var r=this.getInitialState?this.getInitialState():null;"object"!=typeof r||Array.isArray(r)?g(!1):void 0,this.state=r};t.prototype=new k,t.prototype.constructor=t,x.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:g(!1);for(var n in E)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){x.push(e)}}};e.exports=M},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}var i=n(173),o=(n(73),n(57)),a=n(3);n(6);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?a(!1):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};e.exports=r},function(e,t,n){"use strict";var r=n(32),i=n(162),o=n(164),a=n(47),s=n(16),u=n(23),l=n(39),c=n(24),f=n(107),p=n(108),d=n(321);n(6);o.inject();var h=u.measure("React","render",s.render),m={findDOMNode:p,render:h,unmountComponentAtNode:s.unmountComponentAtNode,version:f,unstable_batchedUpdates:c.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:r,InstanceHandles:a,Mount:s,Reconciler:l,TextComponent:i});e.exports=m},function(e,t){"use strict";var n={useCreateElement:!1};e.exports=n},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=a.getValue(e);null!=t&&i(this,Boolean(e.multiple),t)}}function i(e,t,n){var r,i,o=s.getNode(e._rootNodeID).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=a.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,u.asap(r,this),n}var a=n(102),s=n(16),u=n(24),l=n(7),c=(n(6),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),f={valueContextKey:c,getNativeProps:function(e,t,n){return l({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=a.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,n){var r=l({},n);return r[c]=e._wrapperState.initialValue,r},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=a.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,i(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?i(e,Boolean(t.multiple),t.defaultValue):i(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=f},function(e,t,n){"use strict";var r=n(154),i=n(101),o=n(103),a=n(16),s=n(7),u=n(74),l=n(115),c=(n(118),function(e){});s(c.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[a.ownerDocumentContextKey],o=r.createElement("span");return i.setAttributeForID(o,e),a.getID(o),l(o,this._stringText),o}var s=u(this._stringText);return t.renderToStaticMarkup?s:"<span "+i.createMarkupForID(e)+">"+s+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=a.getNode(this._rootNodeID);r.updateTextContent(i,n)}}},unmountComponent:function(){o.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=c},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(24),o=n(72),a=n(7),s=n(26),u={initialize:s,close:function(){p.isBatchingUpdates=!1}},l={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[l,u];a(r.prototype,o.Mixin,{getTransactionWrappers:function(){return c}});var f=new r,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i,o){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?e(t,n,r,i,o):f.perform(e,null,t,n,r,i,o)}};e.exports=p},function(e,t,n){"use strict";function r(){if(!k){k=!0,v.EventEmitter.injectReactEventListener(g),v.EventPluginHub.injectEventPluginOrder(s),v.EventPluginHub.injectInstanceHandle(y),v.EventPluginHub.injectMount(_),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:u,ChangeEventPlugin:o,SelectEventPlugin:x,BeforeInputEventPlugin:i}),v.NativeComponent.injectGenericComponentClass(h),v.NativeComponent.injectTextComponentClass(m),v.Class.injectMixin(f),v.DOMProperty.injectDOMPropertyConfig(c),v.DOMProperty.injectDOMPropertyConfig(S),v.EmptyComponent.injectEmptyComponent("noscript"),v.Updates.injectReconcileTransaction(b),v.Updates.injectBatchingStrategy(d),v.RootIndex.injectCreateReactRootIndex(l.canUseDOM?a.createReactRootIndex:E.createReactRootIndex),v.Component.injectEnvironment(p)}}var i=n(268),o=n(270),a=n(271),s=n(273),u=n(274),l=n(14),c=n(277),f=n(279),p=n(103),d=n(163),h=n(283),m=n(162),g=n(291),v=n(292),y=n(47),_=n(16),b=n(296),x=n(302),E=n(303),w=n(304),S=n(301),k=!1;e.exports={inject:r}},function(e,t,n){"use strict";function r(){if(f.current){var e=f.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;o("uniqueKey",e,t)}}function o(e,t,n){var i=r();if(!i){var o="string"==typeof n?n:n.displayName||n.name;o&&(i=" Check the top-level render call using <"+o+">.")}var a=h[e]||(h[e]={});if(a[i])return null;a[i]=!0;var s={parentOrOwner:i,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return t&&t._owner&&t._owner!==f.current&&(s.childOwner=" It was passed a child from "+t._owner.getName()+"."),s}function a(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];l.isValidElement(r)&&i(r,t)}else if(l.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var o=p(e);if(o&&o!==e.entries)for(var a,s=o.call(e);!(a=s.next()).done;)l.isValidElement(a.value)&&i(a.value,t)}}function s(e,t,n,i){for(var o in t)if(t.hasOwnProperty(o)){var a;try{"function"!=typeof t[o]?d(!1):void 0,a=t[o](n,o,e,i)}catch(s){a=s}if(a instanceof Error&&!(a.message in m)){m[a.message]=!0;r()}}}function u(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name;t.propTypes&&s(n,t.propTypes,e.props,c.prop),"function"==typeof t.getDefaultProps}}var l=n(20),c=n(70),f=(n(69),n(32)),p=(n(73),n(112)),d=n(3),h=(n(6),{}),m={},g={createElement:function(e,t,n){var r="string"==typeof e||"function"==typeof e,i=l.createElement.apply(this,arguments);if(null==i)return i;if(r)for(var o=2;o<arguments.length;o++)a(arguments[o],e);return u(i),i},createFactory:function(e){var t=g.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=l.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)a(arguments[i],r.type);return u(r),r}};e.exports=g},function(e,t,n){"use strict";function r(){a.registerNullComponentID(this._rootNodeID)}var i,o=n(20),a=n(167),s=n(39),u=n(7),l={injectEmptyComponent:function(e){i=o.createElement(e)}},c=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(i)};u(c.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(r,this),this._rootNodeID=e,s.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){s.unmountComponent(this._renderedComponent),a.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),c.injection=l,e.exports=c},function(e,t){"use strict";function n(e){return!!o[e]}function r(e){o[e]=!0}function i(e){delete o[e]}var o={},a={isNullComponentID:n,registerNullComponentID:r,deregisterNullComponentID:i};e.exports=a},function(e,t,n){"use strict";function r(e,t,n,r){try{return t(n,r)}catch(o){return void(null===i&&(i=o))}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var e=i;throw i=null,e}}};e.exports=o},function(e,t,n){"use strict";function r(e){return o(document.documentElement,e)}var i=n(287),o=n(148),a=n(149),s=n(150),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";var r=n(313),i=/\/?>/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(i," "+o.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(o.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(e);return i===n}};e.exports=o},function(e,t,n){"use strict";var r=n(67),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=i},function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=f[t];return null==n&&(f[t]=n=l(t)),n}function i(e){return c?void 0:u(!1),new c(e.type,e.props)}function o(e){return new p(e)}function a(e){return e instanceof p}var s=n(7),u=n(3),l=null,c=null,f={},p=null,d={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){s(f,e)}},h={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:o,isTextComponent:a,injection:d};e.exports=h},function(e,t,n){"use strict";function r(e,t){}var i=(n(6),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")},enqueueSetProps:function(e,t){r(e,"setProps")},enqueueReplaceProps:function(e,t){r(e,"replaceProps")}});e.exports=i},function(e,t,n){"use strict";function r(e){function t(t,n,r,i,o,a){if(i=i||E,a=a||r,null==n[r]){var s=_[o];return t?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+i+"`.")):null}return e(n,r,i,o,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i,o){var a=t[n],s=m(a);if(s!==e){var u=_[i],l=g(a);return new Error("Invalid "+u+" `"+o+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return r(t)}function o(){return r(b.thatReturns(null))}function a(e){function t(t,n,r,i,o){var a=t[n];if(!Array.isArray(a)){var s=_[i],u=m(a);return new Error("Invalid "+s+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<a.length;l++){var c=e(a,l,r,i,o+"["+l+"]");if(c instanceof Error)return c}return null}return r(t)}function s(){function e(e,t,n,r,i){if(!y.isValidElement(e[t])){var o=_[r];return new Error("Invalid "+o+" `"+i+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return r(e)}function u(e){function t(t,n,r,i,o){if(!(t[n]instanceof e)){var a=_[i],s=e.name||E,u=v(t[n]);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return r(t)}function l(e){function t(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(a===e[s])return null;var u=_[i],l=JSON.stringify(e);return new Error("Invalid "+u+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function c(e){function t(t,n,r,i,o){var a=t[n],s=m(a);if("object"!==s){var u=_[i];return new Error("Invalid "+u+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an object."))}for(var l in a)if(a.hasOwnProperty(l)){var c=e(a,l,r,i,o+"."+l);if(c instanceof Error)return c}return null}return r(t)}function f(e){function t(t,n,r,i,o){for(var a=0;a<e.length;a++){var s=e[a];if(null==s(t,n,r,i,o))return null}var u=_[i];return new Error("Invalid "+u+" `"+o+"` supplied to "+("`"+r+"`."))}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function e(e,t,n,r,i){if(!h(e[t])){var o=_[r];return new Error("Invalid "+o+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function d(e){function t(t,n,r,i,o){var a=t[n],s=m(a);if("object"!==s){var u=_[i];return new Error("Invalid "+u+" `"+o+"` of type `"+s+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in e){var c=e[l];if(c){var f=c(a,l,r,i,o+"."+l);if(f)return f}}return null}return r(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||y.isValidElement(e))return!0;var t=x(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!h(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!h(i[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var y=n(20),_=n(69),b=n(26),x=n(112),E="<<anonymous>>",w={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:o(),arrayOf:a,element:s(),instanceOf:u,node:p(),objectOf:c,oneOf:l,oneOfType:f,shape:d};e.exports=w},function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};e.exports=r},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t,n){"use strict";function r(e,t){if(null==t?i(!1):void 0,null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var i=n(3);e.exports=r},function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=n},function(e,t,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(14),o=null;e.exports=r},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&r[e.type]||"textarea"===t)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){function r(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=l.create(),this._output=null,this._indexes={},this._indexFields=[],this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function i(e){var t=new p(e._graph).router(!0).collector(!0);return t.data=function(){return e._data},t.evaluate=function(t){u.debug(t,["input",e._name]);var n,r=e._input,i=l.create(t);for(n in r.fields)i.fields[n]=1;return r.rem.length&&(e._data=f.idFilter(e._data,r.rem)),r.add.length&&(e._data=e._data.concat(r.add)),r.sort&&e._data.sort(r.sort),t.reflow&&(r.mod=r.mod.concat(f.idFilter(e._data,r.add,r.mod,r.rem))),e._input=l.create(),i.add=r.add,i.mod=r.mod,i.rem=r.rem,i.facet=e._facet,i},t}function o(e){function t(t){var n,r,i,o,a,u,l=e._indexFields;for(n=0;n<l.length;++n){for(o=l[n],a=e._indexes[o],i=s.$(o),r=0;r<t.add.length;++r)u=i(t.add[r]),f.prev_init(t.add[r]),a[u]=(a[u]||0)+1;for(r=0;r<t.rem.length;++r)u=i(t.rem[r]),a[u]=(a[u]||0)-1;for(r=0;r<t.mod.length;++r)u=i(t.mod[r]._prev),a[u]=(a[u]||0)-1,u=i(t.mod[r]),a[u]=(a[u]||0)+1}}var n=new p(e._graph).router(!0).reflows(!0).collector(!0);return n.data=function(){return e._collector?e._collector.data():e._data},n.evaluate=function(n){u.debug(n,["output",e._name]),t(n);var r=l.create(n,!0);return e._facet&&(e._facet.values=e.values(),n.facet=null),e._output=n,r.data[e._name]=1,r},n}function a(e){var t=new p(e._graph).router(!0);return t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=l.create(t);return r.add=t.add.map(function(e){return n[e._id]=f.derive(e)}),r.mod=t.mod.map(function(e){return f.rederive(e,n[e._id])}),r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t}),e._input=r}return e._input=t},t}var s=n(1),u=n(2),l=n(62),c=n(119),f=n(48),p=n(77),d=r.prototype;d.name=function(e){return arguments.length?(this._name=e,this):this._name},d.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},d.insert=function(e){return this._input.add=this._input.add.concat(e.map(f.ingest)),this},d.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},d.update=function(e,t,n){var r=this._input.mod,i=f.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach(function(e){var o=e[t],a=n(e);o!==a&&(f.set(e,t,a),1!==i[e._id]&&(r.push(e),i[e._id]=1))}),this},d.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},d.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,this):this._mutates},d.last=function(){return this._output},d.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},d.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n=this._graph;return e.unshift(this._inputNode=i(this)),t=n.preprocess(e),t.router&&e.push(t.collector=new c(n)),e.push(this._outputNode=o(this)),this._collector=t.collector,this._mutates=!!t.mutates,n.connect(this._pipeline=e),this},d.synchronize=function(){return this._graph.synchronize(this._pipeline),this},d.getIndex=function(e){var t,n,r,i,o=this.values(),a=this._indexes,u=this._indexFields,l=s.$(e);if(!a[e])for(a[e]=t={},u.push(e),n=0,r=o.length;r>n;++n)i=l(o[n]),t[i]=(t[i]||0)+1,f.prev_init(o[n]);return a[e]},d.listener=function(){return a(this).addListener(this._inputNode)},d.addListener=function(e){return e instanceof r?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},d.removeListener=function(e){this._outputNode.removeListener(e)},d.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},e.exports=r},function(e,t,n){function r(e,t,n){return a.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var i=n(62),o=n(77),a=o.prototype,s=r.prototype=Object.create(a);s.constructor=r,s.name=function(){return this._name},s.value=function(e){return arguments.length?(this._value=e,this):this._value},s.values=s.value,s.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},s.fire=function(e){e||(e=i.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},s.on=function(e){var t=this,n=new o(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},s.off=function(e){var t,n,r=this._handlers;for(t=r.length;--t>=0;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},e.exports=r},function(e,t){e.exports=function(){"use strict";function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,n,r,i){this.message=e,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function n(e){function n(t){var n,r,i=ht[t];if(i)return i;for(n=t-1;!ht[n];)n--;for(i=ht[n],i={line:i.line,column:i.column,seenCR:i.seenCR};t>n;)r=e.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return ht[t]=i,i}function r(e,t){var r=n(e),i=n(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function i(e){mt>pt||(pt>mt&&(mt=pt,gt=[]),gt.push(e))}function o(e,n,r,i){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return r=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&o(n),new t(null!==e?e:a(n,r),n,r,i)}function a(){var e;return e=s()}function s(){var t,n,r,o,a,l;return t=pt,n=u(),n!==b?(r=v(),r!==b?(44===e.charCodeAt(pt)?(o=w,pt++):(o=b,0===vt&&i(S)),o!==b?(a=v(),a!==b?(l=s(),l!==b?(dt=t,n=k(n,l),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=pt,n=u(),n!==b&&(dt=t,n=M(n)),t=n),t}function u(){var t,n,r,o,a,s,c,f,p,d,h,m,g,y;return t=pt,91===e.charCodeAt(pt)?(n=T,pt++):(n=b,0===vt&&i(A)),n!==b?(r=v(),r!==b?(o=l(),o!==b?(a=v(),a!==b?(44===e.charCodeAt(pt)?(s=w,pt++):(s=b,0===vt&&i(S)),s!==b?(c=v(),c!==b?(f=l(),f!==b?(p=v(),p!==b?(93===e.charCodeAt(pt)?(d=C,pt++):(d=b,0===vt&&i(O)),d!==b?(h=v(),h!==b?(62===e.charCodeAt(pt)?(m=N,pt++):(m=b,0===vt&&i(I)),m!==b?(g=v(),g!==b?(y=u(),y!==b?(dt=t,n=L(o,f,y),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=l()),t}function l(){var e,t,n,r;if(e=pt,t=c(),t!==b){if(n=[],r=d(),r!==b)for(;r!==b;)n.push(r),r=d();else n=b;n!==b?(dt=e,t=D(t,n),e=t):(pt=e,e=b)}else pt=e,e=b;return e===b&&(e=pt,t=c(),t!==b&&(dt=e,t=P(t)),e=t),e}function c(){var t,n,r,o,a;return t=pt,40===e.charCodeAt(pt)?(n=R,pt++):(n=b,0===vt&&i(U)),n!==b?(r=s(),r!==b?(41===e.charCodeAt(pt)?(o=j,pt++):(o=b,0===vt&&i(z)),o!==b?(dt=t,n=q(r),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=pt,64===e.charCodeAt(pt)?(n=F,pt++):(n=b,0===vt&&i(B)),n!==b?(r=h(),r!==b?(58===e.charCodeAt(pt)?(o=Y,pt++):(o=b,0===vt&&i(H)),o!==b?(a=p(),a!==b?(dt=t,n=V(r,a),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=pt,n=f(),n!==b?(58===e.charCodeAt(pt)?(r=Y,pt++):(r=b,0===vt&&i(H)),r!==b?(o=p(),o!==b?(dt=t,n=W(n,o),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=pt,n=m(),n!==b?(58===e.charCodeAt(pt)?(r=Y,pt++):(r=b,0===vt&&i(H)),r!==b?(o=p(),o!==b?(dt=t,n=$(n,o),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t===b&&(t=pt,n=p(),n!==b&&(dt=t,n=G(n)),t=n,t===b&&(t=pt,n=h(),n!==b&&(dt=t,n=X(n)),t=n))))),t}function f(){var t;return e.substr(pt,4)===K?(t=K,pt+=4):(t=b,0===vt&&i(J)),t===b&&(e.substr(pt,6)===Z?(t=Z,pt+=6):(t=b,0===vt&&i(Q)),t===b&&(e.substr(pt,4)===ee?(t=ee,pt+=4):(t=b,0===vt&&i(te)),t===b&&(e.substr(pt,3)===ne?(t=ne,pt+=3):(t=b,0===vt&&i(re)),t===b&&(e.substr(pt,4)===ie?(t=ie,pt+=4):(t=b,0===vt&&i(oe)),t===b&&(e.substr(pt,4)===ae?(t=ae,pt+=4):(t=b,0===vt&&i(se)),t===b&&(e.substr(pt,4)===ue?(t=ue,pt+=4):(t=b,0===vt&&i(le)),t===b&&(e.substr(pt,5)===ce?(t=ce,pt+=5):(t=b,0===vt&&i(fe)),t===b&&(e.substr(pt,4)===pe?(t=pe,pt+=4):(t=b,0===vt&&i(de)),t===b&&(e.substr(pt,5)===he?(t=he,pt+=5):(t=b,0===vt&&i(me))))))))))),t}function p(){var t;return e.substr(pt,9)===ge?(t=ge,pt+=9):(t=b,0===vt&&i(ve)),t===b&&(e.substr(pt,7)===ye?(t=ye,pt+=7):(t=b,0===vt&&i(_e)),t===b&&(e.substr(pt,5)===be?(t=be,pt+=5):(t=b,0===vt&&i(xe)),t===b&&(e.substr(pt,8)===Ee?(t=Ee,pt+=8):(t=b,0===vt&&i(we)),t===b&&(e.substr(pt,5)===Se?(t=Se,pt+=5):(t=b,0===vt&&i(ke)),t===b&&(e.substr(pt,7)===Me?(t=Me,pt+=7):(t=b,0===vt&&i(Te)),t===b&&(e.substr(pt,8)===Ae?(t=Ae,pt+=8):(t=b,0===vt&&i(Ce)),t===b&&(e.substr(pt,5)===Oe?(t=Oe,pt+=5):(t=b,0===vt&&i(Ne)),t===b&&(e.substr(pt,10)===Ie?(t=Ie,pt+=10):(t=b,0===vt&&i(Le)),t===b&&(e.substr(pt,9)===De?(t=De,
pt+=9):(t=b,0===vt&&i(Pe)),t===b&&(e.substr(pt,8)===Re?(t=Re,pt+=8):(t=b,0===vt&&i(Ue)),t===b&&(e.substr(pt,9)===je?(t=je,pt+=9):(t=b,0===vt&&i(ze)),t===b&&(e.substr(pt,10)===qe?(t=qe,pt+=10):(t=b,0===vt&&i(Fe)),t===b&&(e.substr(pt,10)===Be?(t=Be,pt+=10):(t=b,0===vt&&i(Ye)),t===b&&(e.substr(pt,9)===He?(t=He,pt+=9):(t=b,0===vt&&i(Ve)),t===b&&(e.substr(pt,8)===We?(t=We,pt+=8):(t=b,0===vt&&i($e)),t===b&&(e.substr(pt,9)===Ge?(t=Ge,pt+=9):(t=b,0===vt&&i(Xe)),t===b&&(e.substr(pt,8)===Ke?(t=Ke,pt+=8):(t=b,0===vt&&i(Je)),t===b&&(e.substr(pt,9)===Ze?(t=Ze,pt+=9):(t=b,0===vt&&i(Qe)))))))))))))))))))),t}function d(){var t,n,r,o;return t=pt,91===e.charCodeAt(pt)?(n=T,pt++):(n=b,0===vt&&i(A)),n!==b?(r=g(),r!==b?(93===e.charCodeAt(pt)?(o=C,pt++):(o=b,0===vt&&i(O)),o!==b?(dt=t,n=et(r),t=n):(pt=t,t=b)):(pt=t,t=b)):(pt=t,t=b),t}function h(){var t,n,r;if(t=pt,n=[],tt.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(nt)),r!==b)for(;r!==b;)n.push(r),tt.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(nt));else n=b;return n!==b&&(dt=t,n=rt(n)),t=n}function m(){var t,n,r;if(t=pt,n=[],it.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(ot)),r!==b)for(;r!==b;)n.push(r),it.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(ot));else n=b;return n!==b&&(dt=t,n=at(n)),t=n}function g(){var t,n,r;if(t=pt,n=[],st.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(ut)),r!==b)for(;r!==b;)n.push(r),st.test(e.charAt(pt))?(r=e.charAt(pt),pt++):(r=b,0===vt&&i(ut));else n=b;return n!==b&&(dt=t,n=lt(n)),t=n}function v(){var t,n;for(t=[],ct.test(e.charAt(pt))?(n=e.charAt(pt),pt++):(n=b,0===vt&&i(ft));n!==b;)t.push(n),ct.test(e.charAt(pt))?(n=e.charAt(pt),pt++):(n=b,0===vt&&i(ft));return t}var y,_=arguments.length>1?arguments[1]:{},b={},x={start:a},E=a,w=",",S={type:"literal",value:",",description:'","'},k=function(e,t){return[e].concat(t)},M=function(e){return[e]},T="[",A={type:"literal",value:"[",description:'"["'},C="]",O={type:"literal",value:"]",description:'"]"'},N=">",I={type:"literal",value:">",description:'">"'},L=function(e,t,n){return{start:e,middle:n,end:t,str:"["+e.str+", "+t.str+"] > "+n.str}},D=function(e,t){return e.filters=t,e.str+=t.map(function(e){return"["+e+"]"}).join(""),e},P=function(e){return e},R="(",U={type:"literal",value:"(",description:'"("'},j=")",z={type:"literal",value:")",description:'")"'},q=function(e){return{stream:e,str:"("+e.map(function(e){return e.str}).join(", ")+")"}},F="@",B={type:"literal",value:"@",description:'"@"'},Y=":",H={type:"literal",value:":",description:'":"'},V=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},W=function(e,t){return{event:t,mark:e,str:e+":"+t}},$=function(e,t){return{event:t,target:e,str:e+":"+t}},G=function(e){return{event:e,str:e}},X=function(e){return{signal:e,str:e}},K="rect",J={type:"literal",value:"rect",description:'"rect"'},Z="symbol",Q={type:"literal",value:"symbol",description:'"symbol"'},ee="path",te={type:"literal",value:"path",description:'"path"'},ne="arc",re={type:"literal",value:"arc",description:'"arc"'},ie="area",oe={type:"literal",value:"area",description:'"area"'},ae="line",se={type:"literal",value:"line",description:'"line"'},ue="rule",le={type:"literal",value:"rule",description:'"rule"'},ce="image",fe={type:"literal",value:"image",description:'"image"'},pe="text",de={type:"literal",value:"text",description:'"text"'},he="group",me={type:"literal",value:"group",description:'"group"'},ge="mousedown",ve={type:"literal",value:"mousedown",description:'"mousedown"'},ye="mouseup",_e={type:"literal",value:"mouseup",description:'"mouseup"'},be="click",xe={type:"literal",value:"click",description:'"click"'},Ee="dblclick",we={type:"literal",value:"dblclick",description:'"dblclick"'},Se="wheel",ke={type:"literal",value:"wheel",description:'"wheel"'},Me="keydown",Te={type:"literal",value:"keydown",description:'"keydown"'},Ae="keypress",Ce={type:"literal",value:"keypress",description:'"keypress"'},Oe="keyup",Ne={type:"literal",value:"keyup",description:'"keyup"'},Ie="mousewheel",Le={type:"literal",value:"mousewheel",description:'"mousewheel"'},De="mousemove",Pe={type:"literal",value:"mousemove",description:'"mousemove"'},Re="mouseout",Ue={type:"literal",value:"mouseout",description:'"mouseout"'},je="mouseover",ze={type:"literal",value:"mouseover",description:'"mouseover"'},qe="mouseenter",Fe={type:"literal",value:"mouseenter",description:'"mouseenter"'},Be="touchstart",Ye={type:"literal",value:"touchstart",description:'"touchstart"'},He="touchmove",Ve={type:"literal",value:"touchmove",description:'"touchmove"'},We="touchend",$e={type:"literal",value:"touchend",description:'"touchend"'},Ge="dragenter",Xe={type:"literal",value:"dragenter",description:'"dragenter"'},Ke="dragover",Je={type:"literal",value:"dragover",description:'"dragover"'},Ze="dragleave",Qe={type:"literal",value:"dragleave",description:'"dragleave"'},et=function(e){return e},tt=/^[a-zA-Z0-9_\-]/,nt={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},rt=function(e){return e.join("")},it=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,ot={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},at=function(e){return e.join("")},st=/^['"a-zA-Z0-9_().><=! \t-&|~]/,ut={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},lt=function(e){return e.join("")},ct=/^[ \t\r\n]/,ft={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},pt=0,dt=0,ht=[{line:1,column:1,seenCR:!1}],mt=0,gt=[],vt=0;if("startRule"in _){if(!(_.startRule in x))throw new Error("Can't start parsing from rule \""+_.startRule+'".');E=x[_.startRule]}if(y=E(),y!==b&&pt===e.length)return y;throw y!==b&&pt<e.length&&i({type:"end",description:"end of input"}),o(null,gt,mt<e.length?e.charAt(mt):null,mt<e.length?r(mt,mt+1):r(mt,mt))}return e(t,Error),{SyntaxError:t,parse:n}}()},function(e,t){e.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},function(e,t){e.exports=function(e){function t(t,n,r,i){var o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",o="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),replace:n("replace",i),regexp:o,test:n("test",o),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},function(e,t,n){"use strict";function r(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.SHAPE:return 6;default:return 10}}var i=n(8);t.autoMaxBins=r},function(e,t,n){"use strict";function r(e,t){return t.reduce(function(t,n){return e.axis(n)&&(t[n]=o(n,e)),t},{})}function i(e,n){var r=e===v.COLUMN,i=e===v.ROW,o=r?"x":i?"y":e,a={type:o,scale:n.scaleName(e),grid:!0,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}},s=n.axis(e);["layer","ticks","values","subdivide"].forEach(function(r){var i,o=(i=t[r])?i(n,e,a):s[r];void 0!==o&&(a[r]=o)});var u=n.axis(e).properties||{};return["grid"].forEach(function(t){var r=E[t]?E[t](n,e,u[t]||{},a):u[t];void 0!==r&&b.keys(r).length>0&&(a.properties=a.properties||{},a.properties[t]=r)}),a}function o(e,n){var r=e===v.COLUMN,i=e===v.ROW,o=r?"x":i?"y":e,a=n.axis(e),s={type:o,scale:n.scaleName(e)};b.extend(s,x.formatMixins(n,e,n.axis(e).format)),["grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","values","subdivide"].forEach(function(r){var i,o=(i=t[r])?i(n,e,s):a[r];void 0!==o&&(s[r]=o)});var u=n.axis(e).properties||{};return["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(t){var r=E[t]?E[t](n,e,u[t]||{},s):u[t];void 0!==r&&b.keys(r).length>0&&(s.properties=s.properties||{},s.properties[t]=r)}),s}function a(e,t){return e.axis(t).offset}function s(e,t){var n=e.axis(t).grid;return void 0!==n?n:!e.isOrdinalScale(t)&&!e.fieldDef(t).bin}function u(e,t){return t!==v.ROW&&t!==v.COLUMN?s(e,t)&&(t===v.Y||t===v.X)&&!(e.parent()&&e.parent().isFacet()):void 0}function l(e,t,n){var r=e.axis(t).layer;return void 0!==r?r:n.grid?"back":void 0}function c(e,t){var n=e.axis(t).orient;return n?n:t===v.COLUMN?g.AxisOrient.TOP:void 0}function f(e,t){var n=e.axis(t).ticks;return void 0!==n?n:t!==v.X||e.fieldDef(t).bin?void 0:5}function p(e,t){var n=e.axis(t).tickSize;return void 0!==n?n:void 0}function d(e,t){var n=e.axis(t).tickSizeEnd;return void 0!==n?n:void 0}function h(e,t){var n=e.axis(t);if(void 0!==n.title)return n.title;var r,i=y.title(e.fieldDef(t));if(n.titleMaxLength)r=n.titleMaxLength;else if(t!==v.X||e.isOrdinalScale(v.X)){if(t===v.Y&&!e.isOrdinalScale(v.Y)){var o=e;r=o.config().cell.height/e.axis(v.Y).characterWidth}}else{var o=e;r=o.config().cell.width/e.axis(v.X).characterWidth}return r?b.truncate(i,r):i}function m(e,t){var n=e.axis(t).titleOffset;return void 0!==n?n:void 0}var g=n(120),v=n(8),y=n(13),_=n(17),b=n(5),x=n(15);t.parseAxisComponent=r,t.parseInnerAxis=i,t.parseAxis=o,t.offset=a,t.gridShow=s,t.grid=u,t.layer=l,t.orient=c,t.ticks=f,t.tickSize=p,t.tickSizeEnd=d,t.title=h,t.titleOffset=m;var E;!function(e){function t(e,t,n){var r=e.axis(t);return b.extend(void 0!==r.axisColor?{stroke:{value:r.axisColor}}:{},void 0!==r.axisWidth?{strokeWidth:{value:r.axisWidth}}:{},n||{})}function n(e,t,n){var r=e.axis(t);return b.extend(void 0!==r.gridColor?{stroke:{value:r.gridColor}}:{},void 0!==r.gridOpacity?{strokeOpacity:{value:r.gridOpacity}}:{},void 0!==r.gridWidth?{strokeWidth:{value:r.gridWidth}}:{},void 0!==r.gridDash?{strokeDashOffset:{value:r.gridDash}}:{},n||{})}function r(e,t,n,r){var i=e.fieldDef(t),o=e.axis(t);return o.labels?(b.contains([_.NOMINAL,_.ORDINAL],i.type)&&o.labelMaxLength&&(n=b.extend({text:{template:"{{ datum.data | truncate:"+o.labelMaxLength+"}}"}},n||{})),void 0!==o.labelAngle?n.angle={value:o.labelAngle}:t!==v.X||!y.isDimension(i)&&i.type!==_.TEMPORAL||(n.angle={value:270}),void 0!==o.labelAlign?n.align={value:o.labelAlign}:n.angle&&(270===n.angle.value?n.align={value:"top"===r.orient?"left":"x"===r.type?"right":"center"}:90===n.angle.value&&(n.align={value:"center"})),void 0!==o.labelBaseline?n.baseline={value:o.labelBaseline}:n.angle&&(270===n.angle.value?n.baseline={value:"x"===r.type?"middle":"bottom"}:90===n.angle.value&&(n.baseline={value:"bottom"})),void 0!==o.tickLabelColor&&(n.stroke={value:o.tickLabelColor}),void 0!==o.tickLabelFont&&(n.font={value:o.tickLabelFont}),void 0!==o.tickLabelFontSize&&(n.fontSize={value:o.tickLabelFontSize}),0===b.keys(n).length?void 0:n):b.extend({text:""},n)}function i(e,t,n){var r=e.axis(t);return b.extend(void 0!==r.tickColor?{stroke:{value:r.tickColor}}:{},void 0!==r.tickWidth?{strokeWidth:{value:r.tickWidth}}:{},n||{})}function o(e,t,n){var r=e.axis(t);return b.extend(void 0!==r.titleColor?{stroke:{value:r.titleColor}}:{},void 0!==r.titleFont?{font:{value:r.titleFont}}:{},void 0!==r.titleFontSize?{fontSize:{value:r.titleFontSize}}:{},void 0!==r.titleFontWeight?{fontWeight:{value:r.titleFontWeight}}:{},n||{})}e.axis=t,e.grid=n,e.labels=r,e.ticks=i,e.title=o}(E=t.properties||(t.properties={}))},function(e,t,n){"use strict";var r,i=n(186),o=n(8),a=n(13),s=n(5);!function(e){function t(e){return e.reduce(function(t,n,r){var u=e.fieldDef(r).bin;if(u){var l=s.extend({type:"bin",field:n.field,output:{start:a.field(n,{binSuffix:"_start"}),mid:a.field(n,{binSuffix:"_mid"}),end:a.field(n,{binSuffix:"_end"})}},"boolean"==typeof u?{}:u);l.maxbins||l.step||(l.maxbins=i.autoMaxBins(r));var c=[l],f=e.isOrdinalScale(r)||r===o.COLOR;f&&c.push({type:"formula",field:a.field(n,{binSuffix:"_range"}),expr:a.field(n,{datum:!0,binSuffix:"_start"})+" + '-' + "+a.field(n,{datum:!0,binSuffix:"_end"})});var p=s.hash(u)+"_"+n.field+"oc:"+f;t[p]=c}return t},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(s.extend(n,r.bin),delete r.bin),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(s.extend(n,t.bin),delete t.bin)}),n}function u(e){return s.flatten(s.vals(e.bin))}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=u}(r=t.bin||(t.bin={}))},function(e,t){"use strict";var n;!function(e){function t(e){return e.transform().filter}function n(e){var n=t(e),r=e.child().component.data;return!r.source&&r.filter&&(n=(n?n+" && ":"")+r.filter,delete r.filter),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&r.filter&&r.filter===n&&delete r.filter}),n}function i(e){var t=e.filter;return t?[{type:"filter",test:t}]:[]}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=i}(n=t.filter||(t.filter={}))},function(e,t,n){"use strict";var r,i=n(5);!function(e){function t(e){return(e.transform().calculate||[]).reduce(function(e,t){return e[i.hash(t)]=t,e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(i.extend(n,r.calculate),delete r.calculate),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;!t.source&&t.calculate&&(i.extend(n||{},t.calculate),delete t.calculate)}),n}function o(e){return i.vals(e.calculate).reduce(function(e,t){return e.push(i.extend({type:"formula"},t)),e},[])}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=o}(r=t.formula||(t.formula={}))},function(e,t,n){"use strict";var r,i=n(5),o={nominal:!1,ordinal:!1,quantitative:!0,temporal:!0};!function(e){function t(e){var t=e.transform().filterNull;return e.reduce(function(e,n){return t||void 0===t&&n.field&&"*"!==n.field&&o[n.type]?e[n.field]=!0:e[n.field]=!1,e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(i.extend(n,r.nullFilter),delete r.nullFilter),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&!i.differ(r.nullFilter,n)&&(i.extend(n,r.nullFilter),delete r.nullFilter)}),n}function a(e){var t=i.keys(e.nullFilter).filter(function(t){return e.nullFilter[t]});return t.length>0?[{type:"filter",test:t.map(function(e){return"datum."+e+"!==null"}).join(" && ")}]:[]}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=a}(r=t.nullFilter||(t.nullFilter={}))},function(e,t,n){"use strict";var r,i=n(13),o=n(17),a=n(5),s=n(78);!function(e){function t(e){return e.reduce(function(e,t,n){var r=i.field(t,{nofn:!0,datum:!0});if(t.type===o.TEMPORAL&&t.timeUnit){var a=i.field(t);e[a]={type:"formula",field:i.field(t),expr:s.parseExpression(t.timeUnit,r)}}return e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(a.extend(n,r.timeUnit),delete r.timeUnit),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(a.extend(n,t.timeUnit),delete t.timeUnit)}),n}function u(e){return a.vals(e.timeUnit)}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=u}(r=t.timeUnit||(t.timeUnit={}))},function(e,t,n){"use strict";function r(e,t,n,r){var o=i(e,t,n);if(o.length>0&&d.contains([c.BAR,c.AREA],e)&&r.mark.stacked!==l.StackOffset.NONE&&p.isAggregate(t)){var a=p.has(t,s.X)&&f.isMeasure(t.x),u=p.has(t,s.Y)&&f.isMeasure(t.y);if(a&&!u)return{groupbyChannel:s.Y,fieldChannel:s.X,stackFields:o,offset:r.mark.stacked};if(u&&!a)return{groupbyChannel:s.X,fieldChannel:s.Y,stackFields:o,offset:r.mark.stacked}}return null}function i(e,t,n){return[s.COLOR,s.DETAIL,s.OPACITY,s.SIZE].reduce(function(e,r){var i=t[r];if(p.has(t,r))if(d.isArray(i))i.forEach(function(t){e.push(f.field(t))});else{var o=i,a=n[r];e.push(f.field(o,{binSuffix:a&&a.type===u.ScaleType.ORDINAL?"_range":"_start"}))}return e},[])}function o(e){var t=e.stack();return{type:"impute",field:e.field(t.fieldChannel),groupby:t.stackFields,orderby:[e.field(t.groupbyChannel)],method:"value",value:0}}function a(e){var t=e.stack(),n=e.encoding(),r=e.has(s.ORDER)?(d.isArray(n[s.ORDER])?n[s.ORDER]:[n[s.ORDER]]).map(h.sortField):t.stackFields.map(function(e){return"-"+e}),i=e.field(t.fieldChannel),o={type:"stack",groupby:[e.field(t.groupbyChannel)],field:e.field(t.fieldChannel),sortby:r,output:{start:i+"_start",end:i+"_end"}};return t.offset&&(o.offset=t.offset),o}var s=n(8),u=n(38),l=n(49),c=n(29),f=n(13),p=n(28),d=n(5),h=n(15);t.compileStackProperties=r,t.imputeTransform=o,t.stackTransform=a},function(e,t,n){e.exports={parse:n(79),render:n(80)}},function(e,t){function n(){this._active=null,this._handlers={}}var r=n.prototype;r.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.padding(t)},r.element=function(){return this._el},r.padding=function(e){return this._padding=e||{top:0,left:0,bottom:0,right:0},this},r.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},r.on=function(){},r.off=function(){},r.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},r.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},e.exports=n},function(e,t,n){e.exports={arc:n(358),area:n(359),group:n(360),image:n(361),line:n(362),path:n(363),rect:n(364),rule:n(365),symbol:n(366),text:n(367)}},function(e,t,n){function r(e){return i(e.x||0,e.y||0)}function i(e,t){return"translate("+e+","+t+")"}var o=n(65),a=n(51),s=a.textAlign,u=a.path;e.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",r(t)),e("d",u.arc(t))}},area:{tag:"path",type:"area",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var i,o,a=null;e("transform",r(t)),t.clip&&(i=n._defs,a=t.clip_id||(t.clip_id="clip"+i.clip_id++),o=i.clipping[a]||(i.clipping[a]={id:a}),o.width=t.width||0,o.height=t.height||0),e("clip-path",a?"url(#"+a+")":null)},background:function(e,t){e("class","background"),e("width",t.width||0),e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,o=t.y||0,a=t.width||0,s=t.height||0,u=n.imageURL(t.url);r-="center"===t.align?a/2:"right"===t.align?a:0,o-="middle"===t.baseline?s/2:"bottom"===t.baseline?s:0,e("href",u,"http://www.w3.org/1999/xlink","xlink:href"),e("transform",i(r,o)),e("width",a),e("height",s)}},line:{tag:"path",type:"line",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",r(t)),e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(e,t){e("transform",r(t)),e("width",t.width||0),e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",r(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){e("transform",r(t)),e("d",u.symbol(t))}},text:{tag:"text",type:"text",nest:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+o.offset(t),u=t.x||0,l=t.y||0,c=t.angle||0,f=t.radius||0;f&&(n=(t.theta||0)-Math.PI/2,u+=f*Math.cos(n),l+=f*Math.sin(n)),e("text-anchor",s[t.align]||"start"),c?(n=i(u,l)+" rotate("+c+")",(r||a)&&(n+=" "+i(r,a))):n=i(u+r,l+a),e("transform",n)}}}},function(e,t,n){function r(e,t){return JSON.stringify(e,u,t)}function i(e){var t="string"==typeof e?JSON.parse(e):e;return o(t)}function o(e){var t,n,r,i,u,l=e.marktype;for(r=0,i=s.length;i>r;++r)if(u=e[s[r]])for(t=0,n=u.length;n>t;++t)u[t][l?"mark":"group"]=e,l&&"group"!==l||o(u[t]);return l&&a.mark(e),e}var a=n(128),s=["items","axisItems","legendItems"],u=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];e.exports={toJSON:r,fromJSON:i}},function(e,t,n){function r(e,t,n){this._el=null,this._model=null,this._width=this.__width=t||500,this._height=this.__height=n||300,this._bgcolor=null,this._cursor=!0,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._skipSignals=!1,this._changeset=null,this._repaint=!0,this._renderers=c,this._io=null,this._api={}}function i(e){var t=this,n=this._model.data(e);if(!n)return f.error('Data source "'+e+'" is not defined.');var r=n.pipeline()[0],i=this._streamer,o={};return this._api[e]?this._api[e]:(o.insert=function(a){return n.insert(u.duplicate(a)),i.addListener(r),t._changeset.data[e]=1,o},o.update=function(){return i.addListener(r),t._changeset.data[e]=1,n.update.apply(n,arguments),o},o.remove=function(){return i.addListener(r),t._changeset.data[e]=1,n.remove.apply(n,arguments),o},o.values=function(){return n.values()},this._api[e]=o)}function o(e,t){var n=this._changeset,r=this._model.signal(e);return r?(this._streamer.addListener(r.value(t)),n.signals[e]=1,void(n.reflow=!0)):f.error('Signal "'+e+'" is not defined.')}function a(){var e=this;return e._renderNode=new l.Node(e._model).router(!0),e._renderNode.evaluate=function(t){f.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;return r&&r.scene&&r.scene(n),t.trans?t.trans.start(function(t){e._renderer.render(n,t)}):e._repaint?e._renderer.render(n):t.dirty.length&&e._renderer.render(n,t.dirty),t.dirty.length&&(t.dirty.forEach(function(e){e._dirty=!1}),n.items[0]._dirty=!1),e._repaint=e._skipSignals=!1,t},e._model.scene(e._renderNode),!0}var s=n(12),u=n(1),l=n(4),c=n(34).render,f=n(2),p=l.Dependencies,d=n(205),h=n(85),m=n(384),g=r.prototype;g.model=function(e){return arguments.length?(this._model!==e&&(this._model=e,this._streamer=new l.Node(e),this._streamer._rank=-1,this._changeset=l.ChangeSet.create(),this._handler&&this._handler.model(e)),this):this._model},g.data=function(e){var t=this;return arguments.length?u.isString(e)?i.call(t,e):(u.isObject(e)&&u.keys(e).forEach(function(n){var r=i.call(t,n);e[n](r)}),this):t._model.values()};var v=u.toMap(["width","height","padding"]);g.signal=function(e,t,n){var r,i,a=this._model;if(!arguments.length)return a.values(p.SIGNALS);if(1===arguments.length&&u.isString(e))return a.values(p.SIGNALS,e);u.isObject(e)?(i=e,n=t):(i={},i[e]=t);for(r in i)v[r]?this[r](i[r]):o.call(this,r,i[r]);return this._skipSignals=n,this},g.width=function(e){return arguments.length?(this.__width!==e&&(this._width=this.__width=e,this.model().width(e),this.initialize(),this._strict&&(this._autopad=1),o.call(this,"width",e)),this):this.__width},g.height=function(e){return arguments.length?(this.__height!==e&&(this._height=this.__height=e,this.model().height(e),this.initialize(),this._strict&&(this._autopad=1),o.call(this,"height",e)),this):this.__height},g.background=function(e){return arguments.length?(this._bgcolor!==e&&(this._bgcolor=e,this.initialize()),this):this._bgcolor},g.padding=function(e){return arguments.length?(this._padding!==e&&(u.isString(e)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===e):(this._autopad=0,this._padding=e,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,this._padding),this._handler&&this._handler.padding(this._padding),o.call(this,"padding",this._padding)),this._repaint=!0,this):this._padding},g.autopad=function(e){if(this._autopad<1)return this;this._autopad=0;var t=this.model().scene().bounds,n=this._padding,r=this.model().config(),i=r.autopadInset,a=t.x1<0?Math.ceil(-t.x1)+i:0,s=t.y1<0?Math.ceil(-t.y1)+i:0,u=t.x2>this._width?Math.ceil(+t.x2-this._width)+i:0;return t=t.y2>this._height?Math.ceil(+t.y2-this._height)+i:0,n={left:a,top:s,right:u,bottom:t},this._strict?(this._autopad=0,this._padding=n,this._width=Math.max(0,this.__width-(a+u)),this._height=Math.max(0,this.__height-(s+t)),this._model.width(this._width).height(this._height).reset(),o.call(this,"width",this._width),o.call(this,"height",this._height),o.call(this,"padding",n),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(n).update(e),this},g.viewport=function(e){return arguments.length?(this._viewport!==e&&(this._viewport=e,this.initialize()),this):this._viewport},g.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else{if(u.isString(e))throw new Error("Unknown renderer: "+e);if(!e)throw new Error("No renderer specified")}return this._io!==e&&(this._io=e,this._renderer=null,this.initialize(),this._build&&this.render()),this},g.initialize=function(e){var t,n=this,r=n._width,i=n._height,o=n._padding,a=n._bgcolor,u=this.model().config();return arguments.length&&null!==e||(e=this._el?this._el.parentNode:null)?(s.select(e).select("div.vega").remove(),this._el=e=s.select(e).append("div").attr("class","vega").style("position","relative").node(),n._viewport&&s.select(e).style("width",(n._viewport[0]||r)+"px").style("height",(n._viewport[1]||i)+"px").style("overflow","auto"),c.canvas.Renderer.RETINA=u.render.retina,n._renderer=(n._renderer||new this._io.Renderer(u.load)).initialize(e,r,i,o).background(a),t=n._handler,n._handler=(new this._io.Handler).initialize(e,o,n),t?t.handlers().forEach(function(e){n._handler.on(e.type,e.handler)}):n._detach=d(this),this._repaint=!0,this):this},g.destroy=function(){this._detach&&this._detach()},g.update=function(e){e=e||{};var t=this,n=this._model,r=this._streamer,i=this._changeset,o=e.duration?new m(e.duration,e.ease):null;if(o&&(i.trans=o),void 0!==e.props){if(u.keys(i.data).length>0)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");i.reflow=!0,i.request=e.props}var s=t._build;return t._build=t._build||a.call(this),e.items&&s?(h.update(n,e.trans,e.props,e.items,i.dirty),t._renderNode.evaluate(i)):r.listeners().length&&s?(this._repaint&&r.addListener(n.node()),n.propagate(i,r,null,this._skipSignals),r.disconnect()):n.fire(i),t._changeset=l.ChangeSet.create(),t.autopad(e)},g.toImageURL=function(e){var t,n=this;switch(e||"png"){case"canvas":case"png":t=c.canvas.Renderer;break;case"svg":t=c.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var r=c.canvas.Renderer.RETINA;c.canvas.Renderer.RETINA=!1;var i=new t(n._model.config.load).initialize(null,n._width,n._height,n._padding).background(n._bgcolor).render(n._model.scene());if(c.canvas.Renderer.RETINA=r,"svg"===e){var o=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(o)}return i.canvas().toDataURL("image/png")},g.render=function(e){return this._renderer.render(this._model.scene(),e),this},g.on=function(){return this._handler.on.apply(this._handler,arguments),this},g.onSignal=function(e,t){var n=this._model.signal(e);return n?n.on(t):f.error('Signal "'+e+'" is not defined.'),this},g.off=function(){return this._handler.off.apply(this._handler,arguments),this},g.offSignal=function(e,t){var n=this._model.signal(e);return n?n.off(t):f.error('Signal "'+e+'" is not defined.'),this},r.factory=function(e){var t=n(376);return function(n){n=n||{};var i=e.defs(),o=(n.el?new r:new t).model(e).renderer(n.renderer||"canvas").width(i.width).height(i.height).background(i.background).padding(i.padding).viewport(i.viewport).initialize(n.el);return n.data&&o.data(n.data),n.el&&(n.hover!==!1&&o.on("mouseover",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"hover",items:t})}).on("mouseout",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"update",items:t})}),n.cursor!==!1&&o.onSignal("cursor",function(e,t){var n=s.select("body");u.isString(t)?(o._cursor="default"===t,n.style("cursor",t)):u.isObject(t)&&o._cursor&&n.style("cursor",t["default"])})),o}},e.exports=r},function(e,t,n){function r(e,t,n,r){var o=e.config();(t||[]).forEach(function(t,s){n[s]=n[s]||a(e),i(o,t,s,n[s],r)})}function i(e,t,n,r,i){void 0!==t.scale&&r.scale(i.scale(t.scale)),r.orient(t.orient||s[t.type]),r.offset(t.offset||0),r.layer(t.layer||"front"),r.grid(t.grid||!1),r.title(t.title||null),r.titleOffset(null!=t.titleOffset?t.titleOffset:e.axis.titleOffset),r.tickValues(t.values||null),r.tickFormat(t.format||null),r.tickFormatType(t.formatType||null),r.tickSubdivide(t.subdivide||0),r.tickPadding(t.tickPadding||e.axis.padding);var a=[];if(void 0!==t.tickSize)for(var u=0;3>u;++u)a.push(t.tickSize);else{var l=e.axis.tickSize;a=[l,l,l]}null!=t.tickSizeMajor&&(a[0]=t.tickSizeMajor),null!=t.tickSizeMinor&&(a[1]=t.tickSizeMinor),null!=t.tickSizeEnd&&(a[2]=t.tickSizeEnd),a.length&&r.tickSize.apply(r,a),r.tickCount(t.ticks||e.axis.ticks);var c=t.properties;c&&c.ticks?(r.majorTickProperties(c.majorTicks?o.extend({},c.ticks,c.majorTicks):c.ticks),r.minorTickProperties(c.minorTicks?o.extend({},c.ticks,c.minorTicks):c.ticks)):(r.majorTickProperties(c&&c.majorTicks||{}),r.minorTickProperties(c&&c.minorTicks||{})),r.tickLabelProperties(c&&c.labels||{}),r.titleProperties(c&&c.title||{}),r.gridLineProperties(c&&c.grid||{}),r.domainProperties(c&&c.axis||{})}var o=n(1),a=n(385),s={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};e.exports=r,r.schema={defs:{axis:{type:"object",properties:{type:{"enum":["x","y"]},scale:{type:"string"},orient:{"enum":["top","bottom","left","right"]},title:{type:"string"},titleOffset:{type:"number"},format:{type:"string"},formatType:{"enum":["time","utc","string","number"]},ticks:{type:"number"},values:{type:"array",items:{type:["string","number"]}},subdivide:{type:"number"},tickPadding:{type:"number"},tickSize:{type:"number"},tickSizeMajor:{type:"number"},tickSizeMinor:{type:"number"},tickSizeEnd:{type:"number"},offset:{oneOf:[{type:"number"},{type:"object",properties:{scale:{type:"string"},value:{type:["string","number"]}},required:["scale","value"],additionalProperties:!1}]},layer:{"enum":["front","back"],"default":"front"},grid:{type:"boolean"},properties:{type:"object",properties:{ticks:{$ref:"#/defs/propset"},majorTicks:{$ref:"#/defs/propset"},minorTicks:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},title:{$ref:"#/defs/propset"},grid:{$ref:"#/defs/propset"},axis:{$ref:"#/defs/propset"}},additionalProperties:!1}},additionalProperties:!1,required:["type","scale"]}}}},function(e,t,n){function r(e,t,n){function a(e,t){o.error("PARSE DATA FAILED: "+t.name+" "+e),l=-1,n(e)}function s(t){return function(r,o){if(r)a(r,t);else if(l>0)try{e.data(t.name).values(i.read(o,t.format)),0===--l&&n()}catch(s){a(s,t)}}}var u=e.config(),l=0;
return(t||[]).forEach(function(t){t.url&&(l+=1,i.load(i.extend({url:t.url},u.load),s(t)));try{r.datasource(e,t)}catch(n){a(n,t)}}),0===l&&setTimeout(n,1),t}var i=n(1),o=n(2),a=n(133),s=n(203);r.datasource=function(e,t){var n=(t.transform||[]).map(function(t){return a(e,t)}),r=(t.modify||[]).map(function(n){return s(e,n,t)}),o=e.data(t.name,r.concat(n));return t.values?o.values(i.read(t.values,t.format)):t.source&&(o.source(t.source).addListener(o),e.removeListener(o.pipeline()[0])),o},e.exports=r;var u={oneOf:[{"enum":["auto"]},{type:"object",additionalProperties:{"enum":["number","boolean","date","string"]}}]};r.schema={defs:{data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{$ref:"#/defs/transform"},modify:{$ref:"#/defs/modify"},format:{type:"object",oneOf:[{properties:{type:{"enum":["json"]},parse:u,property:{type:"string"}},additionalProperties:!1},{properties:{type:{"enum":["csv","tsv"]},parse:u},additionalProperties:!1},{oneOf:[{properties:{type:{"enum":["topojson"]},feature:{type:"string"}},additionalProperties:!1},{properties:{type:{"enum":["topojson"]},mesh:{type:"string"}},additionalProperties:!1}]},{properties:{type:{"enum":["treejson"]},children:{type:"string"},parse:u},additionalProperties:!1}]}},required:["name"]},{anyOf:[{required:["name","modify"]},{oneOf:[{properties:{source:{type:"string"}},required:["source"]},{properties:{values:{type:"array"}},required:["values"]},{properties:{url:{type:"string"}},required:["url"]}]}]}]}}}},function(e,t,n){function r(e,t,n,r){(t||[]).forEach(function(t,a){n[a]=n[a]||o(e),i(t,a,n[a],r)})}function i(e,t,n,r){n.size(e.size?r.scale(e.size):null),n.shape(e.shape?r.scale(e.shape):null),n.fill(e.fill?r.scale(e.fill):null),n.stroke(e.stroke?r.scale(e.stroke):null),e.orient&&n.orient(e.orient),null!=e.offset&&n.offset(e.offset),n.title(e.title||null),n.values(e.values||null),n.format(void 0!==e.format?e.format:null),n.formatType(e.formatType||null);var i=e.properties;n.titleProperties(i&&i.title||{}),n.labelProperties(i&&i.labels||{}),n.legendProperties(i&&i.legend||{}),n.symbolProperties(i&&i.symbols||{}),n.gradientProperties(i&&i.gradient||{})}var o=n(386);e.exports=r,r.schema={defs:{legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},orient:{"enum":["left","right"],"default":"right"},offset:{type:"number"},title:{type:"string"},values:{type:"array"},format:{type:"string"},formatType:{"enum":["time","utc","string","number"]},properties:{type:"object",properties:{title:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},legend:{$ref:"#/defs/propset"},symbols:{$ref:"#/defs/propset"},gradient:{$ref:"#/defs/propset"}},additionalProperties:!1}},additionalProperties:!1,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]}]}}}},function(e,t,n){function r(e,t,n,r){var i,o,a,s,u=!0,l=e.length;for(i=n.length-1;i>=0;--i){for(o=0;l>o;++o)if(a=e[o],s=t&&a(t)||t,a(n[i])!==s){u=!1;break}u&&r.push.apply(r,n.splice(i,1)),u=!0}}function i(e,t,n){var r=c.ingest(t);e.add.push(r),n._data.push(r)}function o(e,t,n){var o=t.signal?a.field(t.signal):null,u=o?o[0]:null,h=t.predicate?e.predicate(t.predicate.name||t.predicate):null,m=t.test?e.expr(t.test):null,g=null===h&&null===m,v=t.type===p.CLEAR,y=a.array(t.field||"data"),_=y.map(a.accessor),b=y.map(a.mutator),x=new l(e).router(v);return x.evaluate=function(l){var x,E;if(null!==h&&(x=e.values(f.DATA,h.data||d),E=e.values(f.SIGNALS,h.signals||d),g=h.call(h,{},x,E,e._predicates)),null!==m&&(E=e.values(f.SIGNALS,m.globals||d),g=m.fn()),s.debug(l,[t.type+"ing",g]),!g||!v&&!l.signals[u])return l;var w,S=o?e.signalRef(t.signal):null,k=e.data(n.name),M=null,T=[],A=[],C=0;return a.isObject(S)?(w=S,t.field||(y=a.keys(w),_=y.map(a.accessor),b=y.map(a.mutator))):(w={},b.forEach(function(e){e(w,S)})),t.type===p.INSERT?i(l,w,k):t.type===p.REMOVE?(r(_,S,l.mod,l.rem),r(_,S,l.add,A),r(_,S,k._data,A)):t.type===p.UPSERT?(l.mod.forEach(function(e){var t=_.every(function(t){return t(e)===t(w)});t&&(a.extend(e,w),C+=1)}),0===C&&i(l,w,k)):t.type===p.TOGGLE?(r(_,S,l.mod,A),l.rem.push.apply(l.rem,A),r(_,S,l.add,T),T.length||A.length?k._data=k._data.filter(function(e){return A.indexOf(e)<0&&T.indexOf(e)<0}):(l.add.push(M=c.ingest(w)),k._data.push(M))):t.type===p.CLEAR&&(l.rem.push.apply(l.rem,l.mod.splice(0)),l.add.splice(0),k._data.splice(0)),y.forEach(function(e){l.fields[e]=1}),l},u&&x.dependency(f.SIGNALS,u),h&&(x.dependency(f.DATA,h.data),x.dependency(f.SIGNALS,h.signals)),m&&(x.dependency(f.SIGNALS,m.globals),x.dependency(f.DATA,m.dataSources)),x}var a=n(1),s=n(2),u=n(4),l=u.Node,c=u.Tuple,f=u.Dependencies,p={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"},d=[];e.exports=o,o.schema={defs:{modify:{type:"array",items:{type:"object",oneOf:[{properties:{type:{"enum":[p.INSERT,p.REMOVE,p.UPSERT,p.TOGGLE]},signal:{type:"string"},field:{type:"string"}},required:["type","signal"]},{properties:{type:{"enum":[p.CLEAR]},predicate:{type:"string"}},required:["type","predicate"]},{properties:{type:{"enum":[p.CLEAR]},test:{type:"string"}},required:["type","test"]}]}}}}},function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){if(-1!==u.indexOf(t.name))throw Error('Signal name "'+t.name+'" is a reserved keyword ('+u.join(", ")+").");var n=e.signal(t.name,t.init).verbose(t.verbose);t.init&&t.init.expr&&(t.init.expr=e.expr(t.init.expr),n.value(i(e,t.init))),t.expr&&(t.expr=e.expr(t.expr),n.evaluate=function(r){var o=i(e,t),a=r.signals;return(o!==n.value()||n.verbose())&&(n.value(o),a[t.name]=1),a[t.name]?r:e.doNotPropagate},n.dependency(s,t.expr.globals),t.expr.globals.forEach(function(t){e.signal(t).addListener(n)}))}),t}function i(e,t){var n=t.expr,i=n.fn();return t.scale?r.scale(e,t,i):i}var o=n(1),a=n(131),s=n(4).Dependencies.SIGNALS,u=["datum","event","signals","width","height","padding"].concat(o.keys(a.codegen.functions));r.scale=function(e,t,n,r,i){var s,u=t.scale,l=u.name||u.signal||u,c=u.scope;return c&&(c.signal?c=e.signalRef(c.signal):o.isString(c)&&(s=u._expr=u._expr||e.expr(c),c=s.fn(r,i))),a.scale(e,u.invert,l,n,c)},e.exports=r,r.schema={refs:{signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},scopedScale:{oneOf:[{type:"string"},{type:"object",properties:{name:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},scope:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},invert:{type:"boolean","default":!1}},additionalProperties:!1,required:["name"]}]}},defs:{signal:{type:"object",properties:{name:{type:"string",not:{"enum":u}},init:{},verbose:{type:"boolean","default":!1},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"},streams:{$ref:"#/defs/streams"}},additionalProperties:!1,required:["name"]}}}},function(e,t,n){function r(e){function t(t,n){var r,o,a,s=i.mouse((i.event=t,e.renderer().scene())),u=e.padding(),l={};if(n)for(r=n.mark,o="group"===r.marktype?n:r.group,a=n;null!=a;a=a.mark.group)a.mark.def.name&&(l[a.mark.def.name]=a);l.root=e.model().scene().items[0],t.vg=Object.create(f),t.vg.group=o,t.vg.item=n||{},t.vg.name=l,t.vg.x=s[0]-u.left,t.vg.y=s[1]-u.top}function n(e,t,n,r){function i(e){return!e.fn(n,r)}var o,s,l,c,f=e.handlers[t],p=e.nodes[t],d=a.ChangeSet.create(null,!0),h=!1;for(s=0,l=f.length;l>s;++s)c=f[s],h=c.filters.some(i),h||(o=c.exp.fn(n,r),c.spec.scale&&(o=u.scale(m,c.spec,o,n,r)),(o!==c.signal.value()||c.signal.verbose())&&(c.signal.value(o),d.signals[c.signal.name()]=1));m.propagate(d,p)}function r(e,t,n,i){t.forEach(function(t){t.event?p(e,t,n,i):t.signal?d(e,t,n,i):t.start?h(e,t,n,i):t.stream&&(t.filters&&t.stream.forEach(function(e){e.filters=o.array(e.filters).concat(t.filters)}),r(e,t.stream,n,i))})}function p(e,t,n,r){var i=t.event,s=t.name,u=t.mark,l=t.target,c=o.array(t.filters),f=l?x:b,p=l?l+":"+i:i,d=f.nodes[p]||(f.nodes[p]=new a.Node(m)),h=f.handlers[p]||(f.handlers[p]=[]);s?c.push('!!event.vg.name["'+s+'"]'):u&&c.push("event.vg.item.mark && event.vg.item.mark.marktype==="+o.str(u)),h.push({signal:e,exp:n,spec:r,filters:c.map(function(e){return m.expr(e)})}),d.addListener(e)}function d(e,t,n,r){var i=e.name(),o=m.signal(i+c,null);o.evaluate=function(o){if(!o.signals[t.signal])return m.doNotPropagate;var a=n.fn();return r.scale&&(a=u.scale(m,r,a)),(a!==e.value()||e.verbose())&&(e.value(a),o.signals[i]=1,o.reflow=!0),o},o.dependency(a.Dependencies.SIGNALS,t.signal),o.addListener(e),m.signal(t.signal).addListener(o)}function h(e,t,n,i){var o=e.name(),a=o+l,s=t.middle,u=s.filters||(s.filters=[]),c=m.signal(a)||m.signal(a,!1);r(c,[t.start],g,{}),r(c,[t.end],v,{}),u.push(c.name()),r(e,[t.middle],n,i)}var m=e.model(),g=m.expr("true"),v=m.expr("false"),y=m.defs().signals,_={handlers:{},nodes:{}},b=o.duplicate(_),x=o.duplicate(_);return o.array(y).forEach(function(e){var t=m.signal(e.name);e.expr||o.array(e.streams).forEach(function(e){var n=s.parse(e.type),i=m.expr(e.expr);r(t,n,i,e)})}),o.keys(b.handlers).forEach(function(r){e.on(r,function(e,i){e.preventDefault(),t(e,i),n(b,r,i&&i.datum||{},e)})}),o.keys(x.handlers).forEach(function(e){function r(r){t(r),n(x,e,i.select(this).datum(),r)}if("undefined"!=typeof window){for(var o=x.handlers[e],a=e.split(":"),s="window"===a[0]?[window]:window.document.querySelectorAll(a[0]),u=0;u<s.length;++u)s[u].addEventListener(a[1],r);o.elements=s,o.listener=r}}),x.detach=function(){o.keys(x.handlers).forEach(function(e){for(var t=x.handlers[e],n=e.split(":"),r=o.array(t.elements),i=0;i<r.length;++i)r[i].removeEventListener(n[1],t.listener)})},x.detach}var i=n(12),o=n(1),a=n(4),s=n(183),u=n(204),l="_vgGATEKEEPER",c="_vgEVALUATOR",f={getItem:function(){return this.item},getGroup:function(e){return e?this.name[e]:this.group},getXY:function(e){var t={x:this.x,y:this.y};for("string"==typeof e&&(e=this.name[e]);e;e=e.mark&&e.mark.group)t.x-=e.x||0,t.y-=e.y||0;return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};e.exports=r,r.schema={defs:{streams:{type:"array",items:{type:"object",properties:{type:{type:"string"},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"}},additionalProperties:!1,required:["type","expr"]}}}}},function(e,t,n){function r(e,t){return this._mark=t,s.prototype.init.call(this,e).router(!0).reflows(!0).mutates(!0)}var i=n(1),o=n(4),a=n(34),s=o.Node,u=n(2),l=a.bound,c=a.Bounds,f=n(85),p=r.prototype=new s;p.evaluate=function(e){u.debug(e,["bounds",this._mark.marktype]);var t,n,r,a,s,p,d=this._mark,h=d.marktype,m="group"===h,g=d.items,v=i.array(d.def.legends).length>0,y=d.bounds,_=!y||e.rem.length;if("line"===h||"area"===h)l.mark(d,null,m&&!v);else if(e.add.forEach(function(e){l.item(e),_=_||y&&!y.encloses(e.bounds)}),e.mod.forEach(function(e){_=_||y&&y.alignsWith(e.bounds),l.item(e)}),_)for(y=d.bounds&&d.bounds.clear()||(d.bounds=new c),t=0,n=g.length;n>t;++t)y.union(g[t].bounds);if(m&&v){for(t=0,n=g.length;n>t;++t)for(s=g[t],s._legendPositions=null,r=0,a=s.legendItems.length;a>r;++r)p=s.legendItems[r],f.update(this._graph,e.trans,"legendPosition",p.items,e.dirty),l.mark(p,null,!1);l.mark(d,null,!0)}return o.ChangeSet.create(e,!0)},e.exports=r},function(e,t,n){function r(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=o.bind(this),arguments.length?this.init.apply(this,arguments):this}function i(e){function t(e){e.type!=x.MARK||e.inline||void 0===g._graph.data(e.from)||g._recursor.removeListener(e.builder)}function n(t){var n=t.scale();e.scales[n.scaleName]&&t.reset().def()}function r(t){var n=t.size()||t.shape()||t.fill()||t.stroke();e.scales[n.scaleName]&&t.reset().def()}function i(e){g._recursor.removeListener(e.builder),e.builder.disconnect()}var o,a,f,p,d,h,m,g=this,v=c.array(this._def.marks).length>0,y=c.array(this._def.axes).length>0,_=c.array(this._def.legends).length>0,b=!1;for(o=0,p=e.add.length;p>o;++o)d=e.add[o],v&&s.call(this,e,d),y&&u.call(this,e,d),_&&l.call(this,e,d);for(o=e.add.length-1;o>=0;--o)for(d=e.add[o],a=this._children[d._id].length-1;a>=0;--a)f=this._children[d._id][a],f.builder.connect(),h=f.builder.pipeline(),m=f.builder._def,b=m.type!==x.GROUP,b=b&&void 0!==this._graph.data(f.from),b=b&&1===h[h.length-1].listeners().length,b=b&&m.from&&!m.from.mark,f.inline=b,b?this._graph.evaluate(e,f.builder):this._recursor.addListener(f.builder);for(o=0,p=e.mod.length;p>o;++o)d=e.mod[o],v&&g._children[d._id].forEach(t),y&&d.axes.forEach(n),_&&d.legends.forEach(r);for(o=0,p=e.rem.length;p>o;++o)d=e.rem[o],g._children[d._id].forEach(i),delete g._children[d._id];return e}function o(e,t){var n=this,r=null;if(2===arguments.length)return n._scales[e]=t,t;for(;null==r&&(r=n._scales[e],n=n.mark?n.mark.group:n._parent););return r}function a(e,t){g.debug(e,["building group",t._id]),t._scales=t._scales||{},t.scale=o.bind(t),t.items=t.items||[],this._children[t._id]=this._children[t._id]||[],t.axes=t.axes||[],t.axisItems=t.axisItems||[],t.legends=t.legends||[],t.legendItems=t.legendItems||[],this._graph.group(t._id,t)}function s(e,t){g.debug(e,["building children marks #"+t._id]);var n,i,o,a,s,u,l=this._def.marks;for(a=0,s=l.length;s>a;++a)n=l[a],i=n.from||{},o=t.datum._facetID,t.items[a]={group:t,_scaleRefs:{}},u=n.type===x.GROUP?new r:new v,u.init(this._graph,n,t.items[a],this,t._id,o),this._children[t._id].push({builder:u,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:o),type:x.MARK})}function u(e,t){var n=t.axes,i=t.axisItems,o=this;_(this._graph,this._def.axes,n,t),n.forEach(function(e,n){var a=o._def.axes[n].scale,s=e.def(),u=null;i[n]={group:t,axis:e,layer:s.layer},u=s.type===x.GROUP?new r:new v,u.init(o._graph,s,i[n],o).dependency(d.SCALES,a),o._children[t._id].push({builder:u,type:x.AXIS,scale:a})})}function l(e,t){var n=t.legends,i=t.legendItems,o=this;b(this._graph,this._def.legends,n,t),n.forEach(function(e,n){var a=e.size()||e.shape()||e.fill()||e.stroke(),s=e.def(),u=null;i[n]={group:t,legend:e},u=s.type===x.GROUP?new r:new v,u.init(o._graph,s,i[n],o).dependency(d.SCALES,a),o._children[t._id].push({builder:u,type:x.LEGEND,scale:a})})}var c=n(1),f=n(4),p=f.Node,d=f.Dependencies,h=f.Tuple,m=f.Collector,g=n(2),v=n(84),y=n(208),_=n(200),b=n(202),x=r.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},E=r.prototype=new v;E.init=function(e,t){var n,r=this;this._scaler=new p(e),(t.scales||[]).forEach(function(t){t=r.scale(n=t.name,new y(e,t,r)),r.scale(n+":prev",t),r._scaler.addListener(t)}),this._recursor=new p(e),this._recursor.evaluate=i.bind(this);var o=(t.axes||[]).reduce(function(e,t){return e[t.scale]=1,e},{});return o=(t.legends||[]).reduce(function(e,t){return e[t.size||t.shape||t.fill||t.stroke],e},o),this._recursor.dependency(d.SCALES,c.keys(o)),this._collector=new m(e),v.prototype.init.apply(this,arguments)},E.evaluate=function(){var e=v.prototype.evaluate.apply(this,arguments),t=this._graph,n=this,r=this._scales,i=this._mark.items;if(e.mod.length<i.length){var o=c.keys(r).some(function(t){return r[t].reevaluate(e)});o&&(e.mod=e.mod.concat(h.idFilter(i,e.mod)))}return e.add.forEach(function(t){a.call(n,e,t)}),e.rem.forEach(function(e){t.group(e._id,null)}),e},E.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},E.disconnect=function(){var e=this;return c.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder),t.builder.disconnect()})}),e._children={},v.prototype.disconnect.call(this)},E.child=function(e,t){for(var n,r=this._children[t],i=0,o=r.length;o>i&&(n=r[i],n.type!=x.MARK||n.builder._def.name!=e);++i);return n.builder},e.exports=r},function(e,t,n){function r(e,t,n){return this._def=t,this._parent=n,this._updated=!1,w.prototype.init.call(this,e).reflows(!0)}function i(e){var t=this._def.name,n=t+":prev",r=o.call(this,e.scale(t)),i=r.type===T.ORDINAL?a:u,s=y.call(this,e);return i.call(this,r,s,e),e.scale(t,r),e.scale(n,e.scale(n)||r),r}function o(e){var t=this._graph.config(),n=this._def.type||T.LINEAR;if(!e||n!==e.type){var r=t.scale[n]||_.scale[n];if(!r)throw Error("Unrecognized scale type: "+n);(e=r()).type=e.type||n,e.scaleName=this._def.name,e._prev={}}return e}function a(e,t,n){var r,i,o=this._def,a=e._prev,u=!1,l=g.call(this,o.padding)||0,c=null==o.outerPadding?l:g.call(this,o.outerPadding),f=o.points&&g.call(this,o.points),p=g.call(this,o.round)||null==o.round,d=!0;if(b.isObject(o.range)&&!b.isArray(o.range)&&(u=!0,t=m.call(this,A.RANGE,o.range,e,n)),r=m.call(this,A.DOMAIN,o.domain,e,n),r&&!b.equal(a.domain,r)&&(e.domain(r),a.domain=r,this._updated=!0),!b.equal(a.range,t)){if(o.bandSize){var h,v=g.call(this,o.bandSize),y=r.length,_=o.points?l*v:l*v*(y-1)+2*c;t[0]>t[1]?(h=t[1]||0,t=[h+(v*y+_),h]):(h=t[0]||0,t=[h,h+(v*y+_)]),o.reverse&&(t=t.reverse())}i="string"==typeof t[0],i||t.length>2||1===t.length||u?(e.range(t),d=!1):f&&p?e.rangeRoundPoints(t,l):f?e.rangePoints(t,l):p?e.rangeRoundBands(t,l,c):e.rangeBands(t,l,c),a.range=t,this._updated=!0}!e.invert&&d&&s(e)}function s(e){e.invert=function(t,n){var r=e.range(),i=r[0]<r[1],o=i?N:I;if(1===arguments.length){if(!b.isNumber(t))throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").");return e.domain()[o(r,t)]}if(2===arguments.length){if(!b.isNumber(t)||!b.isNumber(n))throw Error("Extents to ordinal invert are not numbers ("+t+", "+n+").");var a,s=e.domain(),u=o(r,t),l=o(r,n),c=r.length-1;return u>l&&(a=u,u=l,l=u),0>u&&(u=0),l>c&&(l=c),(i?b.range(u,l+1):b.range(l,u-1,-1)).map(function(e){return s[e]})}}}function u(e,t,n){var r,i,o=this._def,a=e._prev,s=g.call(this,o.round),u=g.call(this,o.exponent),l=g.call(this,o.clamp),c=g.call(this,o.nice);r=o.type===T.QUANTILE?m.call(this,A.DOMAIN,o.domain,e,n):v.call(this,e,n),r&&!b.equal(a.domain,r)&&(e.domain(r),a.domain=r,this._updated=!0),"height"===g.call(this,o.range)&&(t=t.reverse()),t&&!b.equal(a.range,t)&&(e[s&&e.rangeRound?"rangeRound":"range"](t),a.range=t,this._updated=!0),u&&o.type===T.POWER&&e.exponent(u),l&&e.clamp(!0),c&&(o.type===T.TIME?(i=_.time[c],i||E.error("Unrecognized interval: "+i),e.nice(i)):e.nice())}function l(e){return e.type===T.ORDINAL||e.type===T.QUANTILE}function c(e){return e.fields||b.array(e)}function f(e){return e.some(function(e){return e.data?e.data&&b.array(e.field).some(function(e){return e.parent}):!0})}function p(e,t){return b.array(e.field).map(function(e){return e.parent?b.accessor(e.parent)(t.datum):e})}function d(e,t){var n=c(e);return 1==n.length&&1==b.array(n[0].field).length?k.TYPES.TUPLE:l(t)&&b.isObject(e.sort)?k.TYPES.MULTI:k.TYPES.VALUE}function h(e,t,n,r){var i=c(t),o=f(i),a=d(t,n),s=l(n),u=t.sort,h="_"+e,m=p(i[0],r);if(n[h]||this[h])return n[h]||this[h];var g,v,y=new k(this._graph).type(a);return o?n[h]=y:this[h]=y,s?a===k.TYPES.VALUE?(g=[{name:A.GROUPBY,get:b.identity}],v={"*":A.COUNT}):a===k.TYPES.TUPLE?(g=[{name:A.GROUPBY,get:b.$(m[0])}],v=b.isObject(u)?[{field:A.VALUE,get:b.$(u.field),ops:[u.op]}]:{"*":A.COUNT}):(g=A.GROUPBY,v=[{field:A.VALUE,ops:[u.op]}]):(g=[],v=[{field:A.VALUE,get:a==k.TYPES.TUPLE?b.$(m[0]):b.identity,ops:[A.MIN,A.MAX],as:[A.MIN,A.MAX]}]),y.param("groupby",g).param("summarize",v),y._lastUpdate=-1,y}function m(e,t,n,r){function i(e){w.dependency(S.SIGNALS,e)}if(null==t)return[];if(b.isArray(t))return t.map(g.bind(this));var o,a,s,u,m,v,y,_,x,E,w=this,M=this._graph,T=c(t),C=f(T),O=d(t,n),N=h.apply(this,arguments),I=t.sort,L=l(n);if(C||!C&&N._lastUpdate<this._stamp){for(o=0,a=T.length;a>o;++o)if(m=T[o],x=m.data||r.datum._facetID,_=M.data(x).last(),!(_.stamp<=this._stamp)){for(v=p(m,r),s=0,u=v.length;u>s;++s)y=v[s],O===k.TYPES.VALUE?N.accessors(null,y):O===k.TYPES.MULTI&&N.accessors(y,m.sort||I.field),N.evaluate(_);this.dependency(S.DATA,x),N.dependency(S.SIGNALS).forEach(i)}N._lastUpdate=this._stamp,_=N.aggr().result(),L?(b.isObject(I)?(E=I.op+"_"+A.VALUE,E=b.comparator(E)):I===!0&&(E=b.comparator(A.GROUPBY)),E&&(_=_.sort(E)),N._values=_.map(function(e){return e[A.GROUPBY]})):(_=_[0],N._values=b.isValid(_)?[_[A.MIN],_[A.MAX]]:[])}return N._values}function g(e){if(!e||!e.signal)return e;var t,n=e.signal;return this.dependency(S.SIGNALS,(t=b.field(n))[0]),this._graph.signalRef(t)}function v(e,t){var n,r,i=this._def,o=[null,null];return void 0!==i.domain&&(o=b.isObject(i.domain)?m.call(this,A.DOMAIN,i.domain,e,t):o),r=o.length-1,void 0!==i.domainMin&&(b.isObject(i.domainMin)?i.domainMin.signal?o[0]=b.isValid(n=g.call(this,i.domainMin))?n:o[0]:o[0]=m.call(this,A.DOMAIN+A.MIN,i.domainMin,e,t)[0]:o[0]=i.domainMin),void 0!==i.domainMax&&(b.isObject(i.domainMax)?i.domainMax.signal?o[r]=b.isValid(n=g.call(this,i.domainMax))?n:o[r]:o[r]=m.call(this,A.DOMAIN+A.MAX,i.domainMax,e,t)[1]:o[r]=i.domainMax),i.type===T.LOG||i.type===T.TIME||!i.zero&&void 0!==i.zero||(o[0]=Math.min(0,o[0]),o[r]=Math.max(0,o[r])),o}function y(e){var t=this._def,n=this._graph.config(),r=g.call(this,t.range),i=[null,null];if(void 0!==r)if("string"==typeof r)if(M[r])i=[0,e[r]];else{if(!n.range[r])return E.error("Unrecogized range: "+r),i;i=n.range[r]}else if(b.isArray(r))i=b.duplicate(r).map(g.bind(this));else{if(b.isObject(r))return null;i=[0,r]}if(void 0!==t.rangeMin&&(i[0]=t.rangeMin.signal?g.call(this,t.rangeMin):t.rangeMin),void 0!==t.rangeMax&&(i[i.length-1]=t.rangeMax.signal?g.call(this,t.rangeMax):t.rangeMax),void 0!==t.reverse){var o=g.call(this,t.reverse);b.isObject(o)&&(o=b.accessor(o.field)(e.datum)),o&&(i=i.reverse())}return i}var _=n(12),b=n(1),x=n(4),E=n(2),w=x.Node,S=x.Dependencies,k=n(86),M={width:1,height:1},T={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},A={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"},C=r.prototype=new w;C.evaluate=function(e){var t=this,n=function(e){i.call(t,e)};return this._updated=!1,e.add.forEach(n),e.mod.forEach(n),this._updated&&(e.scales[this._def.name]=1,E.debug(e,["scale",this._def.name])),x.ChangeSet.create(e,!0)},C.dependency=function(e,t){if(2==arguments.length){var n=e===S.DATA?"data":"signal";t=b.array(t);for(var r=0,i=t.length;i>r;++r)this._graph[n](t[r]).addListener(this._parent)}return w.prototype.dependency.call(this,e,t)};var O=_.bisector(b.numcmp).right,N=function(e,t){return O(e,t)-1},I=_.bisector(function(e,t){return-1*b.numcmp(e,t)}).left;e.exports=r;var L=[{"enum":["width","height","shapes","category10","category20","category20b","category20c"]},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}];r.schema={refs:{data:{type:"object",properties:{data:{oneOf:[{type:"string"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},field:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}},{type:"object",properties:{parent:{type:"string"}},required:["parent"]},{type:"array",items:{type:"object",properties:{parent:{type:"string"}},required:["parent"]}}]},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{type:"string"},op:{"enum":n(86).VALID_OPS}}}]}},additionalProperties:!1}},defs:{scale:{title:"Scale function",type:"object",allOf:[{properties:{name:{type:"string"},type:{"enum":[T.LINEAR,T.ORDINAL,T.TIME,T.TIME_UTC,T.LOG,T.POWER,T.SQRT,T.QUANTILE,T.QUANTIZE,T.THRESHOLD],"default":T.LINEAR},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/data"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},domainMin:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},domainMax:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},rangeMin:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},rangeMax:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},reverse:{oneOf:[{type:"boolean"},{$ref:"#/refs/data"}]},round:{type:"boolean"}},required:["name"]},{oneOf:[{properties:{type:{"enum":[T.ORDINAL]},range:{oneOf:L.concat({$ref:"#/refs/data"})},points:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},outerPadding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandSize:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{"enum":[T.TIME,T.TIME_UTC]},range:{oneOf:L},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{"enum":["second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]}},required:["type"]},{anyOf:[{properties:{type:{"enum":[T.LINEAR,T.LOG,T.POWER,T.SQRT,T.QUANTILE,T.QUANTIZE,T.THRESHOLD],"default":T.LINEAR},range:{oneOf:L},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},zero:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}}},{properties:{type:{"enum":[T.POWER]},exponent:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]}]}]}]}}}},function(e,t){e.exports=function n(e,t){var r,i,o,a,s;if(t(e))return!0;var u=["items","axisItems","legendItems"];for(o=0,a=u.length;a>o;++o)if(s=e[u[o]])for(r=0,i=s.length;i>r;++r)if(n(s[r],t))return!0}},function(e,t,n){function r(e){return u.prototype.init.call(this,e),u.addParameters(this,r.Parameters),u.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i=n(12),o=n(1),a=n(4).Tuple,s=n(2),u=n(9);r.Parameters={projection:{type:"value","default":"mercator"},center:{type:"array<value>"},translate:{type:"array<value>","default":n(52).center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},r.d3Projection=function(){var e,t,n,a=this.param("projection"),s=r.Parameters;a!==this._mode&&(this._mode=a,this._projection=i.geo[a]()),e=this._projection;for(t in s)"projection"!==t&&e[t]&&(n=this.param(t),void 0===n||o.isArray(n)&&0===n.length||n!==e[t]()&&e[t](n));return e};var l=r.prototype=Object.create(u.prototype);l.constructor=r,l.transform=function(e){function t(e){var t=[i(e),o(e)],r=u(t)||[null,null];a.set(e,n.x,r[0]),a.set(e,n.y,r[1])}s.debug(e,["geo"]);var n=this._output,i=this.param("lon").accessor,o=this.param("lat").accessor,u=r.d3Projection.call(this);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.x]=1,e.fields[n.y]=1,e},e.exports=r,r.baseSchema={projection:{description:"The type of cartographic projection to use.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"mercator"},center:{description:"The center of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},translate:{description:"The translation of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},rotate:{description:"The rotation of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},scale:{description:"The scale of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},precision:{description:"The desired precision of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipAngle:{description:"The clip angle of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipExtent:{description:"The clip extent of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Geo transform",description:"Performs a cartographic projection. Given longitude and latitude values, sets corresponding x and y properties for a mark.",type:"object",properties:o.extend({type:{"enum":["geo"]},lon:{description:"The input longitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},lat:{description:"The input latitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string","default":"layout_x"},y:{type:"string","default":"layout_y"}},additionalProperties:!1}},r.baseSchema),required:["type","lon","lat"],additionalProperties:!1}},function(e,t,n){e.exports={aggregate:n(86),bin:n(387),cross:n(389),countpattern:n(388),linkpath:n(399),facet:n(390),filter:n(392),fold:n(393),force:n(394),formula:n(395),geo:n(210),geopath:n(396),hierarchy:n(397),impute:n(398),lookup:n(400),pie:n(401),rank:n(402),sort:n(403),stack:n(404),treeify:n(405),treemap:n(406),voronoi:n(407),wordcloud:n(408)}},function(e,t){},function(e,t,n){"use strict";function r(e){var t=p({_id:e._id||c.global(),name:e.name||f(e.type)},e),n={id:t._id,name:t.name,type:s,props:t,streams:d.getHandleStreams(t)};return n}function i(e,t,n){return{type:l,id:e,property:t,value:n}}function o(e,t){return{type:u,childId:e,parentId:t}}var a=n(21),s=a.MARK_ADD,u=a.MARK_SET_PARENT,l=a.MARK_UPDATE_PROPERTY,c=n(137),f=n(508),p=n(218),d=n(217);e.exports={addMark:r,updateMarkProperty:i,setParent:o}},function(e,t,n){"use strict";var r=n(21).SELECT_MARK;e.exports=function(e){return{type:r,markId:e}}},function(e,t,n){"use strict";var r=n(54),i=n(450);e.exports=function(e){return e.prototype.requestVegaReparse=function(){r.dispatch(i(!0))},e}},function(e,t,n){"use strict";function r(e){for(var t=1;d[e];)e+=++t;return d[e]=1,e}function i(e,t,n,i){return this.name=r(e),this.type=t,this.domain=n,this.range=i,this._domain=[],this._range=[],l.call(this)}function o(e){return e._name}function a(e){var t,n,r,i,a,u={};if(1===e.length&&(e=e[0]))return n=f(e),{data:p(n).name,field:n._name};for(r=0,i=e.length;i>r;++r)n=f(e[r]),t=p(n),u[t._id]=u[t._id]||(u[t._id]=[]),u[t._id].push(n);if(a=s.keys(u),1===a.length)e={data:t.name,field:u[t._id].map(o)};else for(e={fields:[]},r=0,i=a.length;i>r;++r)t=f(a[r]),e.fields.push({data:t.name,field:u[t._id].map(o)})}var s=n(1),u=n(27),l=n(91),c=n(18),f=c.lookup,p=n(53).getParent,d={};u(i,l),i.prototype.parent=null,i.prototype["export"]=i.prototype.manipulators=function(e){var t=l.prototype["export"].call(this,e);return!this.domain&&this._domain.length&&(t.domain=a(this._domain)),!this.range&&this._range.length&&(t.range=a(this._range)),t},e.exports=i},function(e,t,n){"use strict";function r(e){s[e]||console.warn('unrecognized mark type "'+e+'"')}function i(e){return r(e),s[e]}function o(e,t){return r(e),s[e]&&s[e].defaultProperties(t)}function a(e){var t=e.type;return r(t),s[t]&&"function"==typeof s[t].getHandleStreams?s[t].getHandleStreams(e):{}}var s={area:n(226),group:n(420),line:n(227),rect:n(421),scene:n(422),symbol:n(228),text:n(229)};e.exports={getConstructor:i,getDefaults:o,getHandleStreams:a}},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,s=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(s[l]=r[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(e,t,n){"use strict";var r=n(186),i=n(8),o=n(49),a=n(33),s=n(28),u=n(13),l=n(328),c=n(350),f=n(125),p=n(50),d=n(17),h=n(352),m=n(5);t.bin=r,t.channel=i,t.compile=l.compile,t.config=o,t.data=a,t.encoding=s,t.fieldDef=u,t.shorthand=c,t.spec=f,t.timeUnit=p,t.type=d,t.util=m,t.validate=h,t.version="__VERSION__"},function(e,t){"use strict";e.exports=function(e){
return{type:"EXPAND_LAYERS",layerIds:e}}},function(e,t,n){"use strict";function r(e){return{type:o.HINTS_ON,on:e}}function i(){return{type:o.HINTS_CLEAR}}var o=n(21);e.exports={on:r,clearHints:i}},function(e,t,n){"use strict";var r=n(21).SIGNAL_SET,i=n(44);e.exports=function(e,t){return{type:r,signal:i(e),value:t}}},function(e,t,n){"use strict";var r=n(11),i=n(89),o=r.createClass({displayName:"ContentEditable",propTypes:{value:r.PropTypes.string,save:r.PropTypes.func},getInitialState:function(){return{edit:!1}},componentDidMount:function(){this._el=i.findDOMNode(this)},componentDidUpdate:function(){this.state.edit&&this._el.focus()},componentWillUnmount:function(){this._el=null},start:function(){this.setState({edit:!0})},stop:function(){this.setState({edit:!1}),this.props.save&&this.props.save(this._el.textContent.trim())},handleEnter:function(e){(!e.keyCode||e.keyCode&&13===e.keyCode)&&this._el.blur()},render:function(){var e=this.props;return r.createElement("div",{style:e.style,className:(e.className||"")+" content-editable",contentEditable:this.state.edit,onClick:e.onClick,onDoubleClick:e.onDoubleClick||this.start,onBlur:this.stop,onKeyDown:this.handleEnter},e.value)}});e.exports=o},function(e,t,n){"use strict";function r(e,t,n){return this._gtype=e,e===u.AXIS?(this.type=t,this.scale=+n||n._id,this.orient=l[t],this.properties={ticks:{},majorTicks:{},minorTicks:{},title:{},labels:{},axis:{}}):e===u.LEGEND&&(this._type=t,this[t]=+n||n._id,this.properties={title:{},labels:{},symbols:{},gradient:{},legend:{}}),this.title=void 0,o.call(this)}var i=n(27),o=n(91),a=n(18),s=a.lookup,u={AXIS:1,LEGEND:2},l={x:"bottom",y:"left"};i(r,o),r.prototype.init=function(){return this},r.prototype["export"]=r.prototype.manipulators=function(e){var t=o.prototype["export"].call(this,e),n=this._gtype,r=this._type;return n===u.AXIS?t.scale=s(t.scale).name:n===u.LEGEND&&(t[r]=s(t[r]).name),t},e.exports=r,r.TYPES=u},function(e,t,n){"use strict";function r(e,t){return this.name=e,this.source=void 0,this.url=void 0,this.format=void 0,t&&(this._parent=t),s.call(this)}var i=n(1),o=n(27),a=n(516),s=n(91),u=n(484);o(r,s),r.prototype.init=function(e){var t=this;return new Promise(function(n,r){i.isString(e)?n((t.source=e,t)):i.isArray(e)?n((t._values=e,t)):(t.format=e.format,e.values?n((t._values=i.read(e.values,t.format),t)):e.url&&n(a(i.load)({url:t.url=e.url}).then(function(e){return t._vals=i.read(e,t.format),t})))}).then(function(e){return e.schema()})},r.prototype.input=function(){return this._values||this._vals},r.prototype.output=function(){var e=n(18).view;return e?e.data(this.name).values():this.input()},r.prototype.schema=function(){if(this._schema)return this._schema;var e=this,t=i.type.inferAll(this.output()),n=i.keys(t).reduce(function(n,r){return n[r]=new u(r,t[r],e._id),n},{});return this._schema=n},r.prototype.summary=function(){var e=this.schema();return i.summary(this.output()).filter(function(e){return"_id"!==e.field}).map(function(t){return e[t.field].profile(t),t})},r.prototype["export"]=function(e){var t=s.prototype["export"].call(this,e);return this._values?t.values=this._values:this._vals&&!e&&(t.values=this._vals,delete t.url),t},e.exports=r},function(e,t,n){"use strict";function r(e){s.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(42),s=n(92),u=n(139),l=n(141),c=n(88),f=n(418),p=a.DELTA,d=p+".x",h=p+".y";o(r,s),r.defaultProperties=function(e){return i.extend({type:"area",properties:s.mergeProperties(s.defaultProperties(),{update:{x2:{value:0},y2:{value:0},xc:{value:60,_disabled:!0},yc:{value:60,_disabled:!0},tension:{value:13},interpolate:{value:"monotone"},fill:{value:"#55498D"},stroke:{value:"#55498D"},orient:{value:"vertical"},width:{value:30,_disabled:!0},height:{value:30,_disabled:!0}}})},e)},r.getHandleStreams=function(e){var t=u.bind(null,e,"handles"),n=c(e,"x"),r=c(e,"xc"),i=c(e,"x2"),o=c(e,"y"),a=c(e,"yc"),s=c(e,"y2"),f=c(e,"width"),m=c(e,"height"),g={};return g[n]=[{type:p,expr:l(t()+"||"+t("left"),n+"+"+d,n)}],g[r]=[{type:p,expr:l(t()+"||"+t("left"),r+"+"+d,r)}],g[i]=[{type:p,expr:l(t()+"||"+t("right"),i+"+"+d,i)}],g[o]=[{type:p,expr:l(t()+"||"+t("top"),o+"+"+h,o)}],g[a]=[{type:p,expr:l(t()+"||"+t("top"),a+"+"+h,a)}],g[s]=[{type:p,expr:l(t()+"||"+t("bottom"),s+"+"+h,s)}],g[f]=[{type:p,expr:l(t("left"),f+"-"+d,f)},{type:p,expr:l(t("right"),f+"+"+d,f)}],g[m]=[{type:p,expr:l(t("top"),m+"-"+h,m)},{type:p,expr:l(t("bottom"),m+"+"+h,m)}],g},r.prototype["export"]=function(e){var t=s.prototype["export"].call(this,e);return t.from||(t.from={data:"dummy_data_area"},t.properties.update.x={field:"x"},t.properties.update.y={field:"y"}),"horizontal"===t.properties.update.orient.value?delete t.properties.update.y2:delete t.properties.update.x2,t},r.INTERPOLATE=f,r.ORIENT=["horizontal","vertical"],e.exports=r},function(e,t,n){"use strict";function r(e){s.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(42),s=n(92),u=n(139),l=n(141),c=n(88),f=n(418),p=a.DELTA,d=p+".x",h=p+".y";o(r,s),r.defaultProperties=function(e){var t={type:"line",properties:s.mergeProperties(s.defaultProperties(),{update:{stroke:{value:"#000000"},strokeWidth:{value:3},tension:{value:13},interpolate:{value:"monotone"}}})};return delete t.properties.update.fill,delete t.properties.update.fillOpacity,i.extend(t,e)},r.getHandleStreams=function(e){var t=u.bind(null,e,"handles"),n=c(e,"x"),r=c(e,"y"),i={};return i[n]=[{type:p,expr:l(t(),n+"+"+d,n)}],i[r]=[{type:p,expr:l(t(),r+"+"+h,r)}],i},r.prototype["export"]=function(e){var t=s.prototype["export"].call(this,e);return t.from||(t.from={data:"dummy_data_line"},t.properties.update.x={field:"foo"},t.properties.update.y={field:"bar"}),t},r.INTERPOLATE=f,e.exports=r},function(e,t,n){"use strict";function r(e){s.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(42),s=n(92),u=n(139),l=n(141),c=n(88),f=a.DELTA,p=f+".x",d=f+".y";o(r,s),r.defaultProperties=function(e){return i.extend({type:"symbol",properties:s.mergeProperties(s.defaultProperties(),{update:{size:{value:100},shape:{value:"circle"}}})},e)},r.getHandleStreams=function(e){var t=u.bind(null,e,"handles"),n=c(e,"x"),r=c(e,"y"),i=c(e,"size"),o={};return o[n]=[{type:f,expr:l(t(),n+"+"+p,n)}],o[r]=[{type:f,expr:l(t(),r+"+"+d,r)}],o[i]=[{type:f,expr:l(t("top"),i+"-("+d+"<<5)",i)},{type:f,expr:l(t("bottom"),i+"+("+d+"<<5)",i)}],o},r.SHAPES=["circle","square","cross","diamond","triangle-up","triangle-down"],e.exports=r},function(e,t,n){"use strict";function r(e){s.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(42),s=n(92),u=n(139),l=n(141),c=n(88),f=a.DELTA,p=f+".x",d=f+".y";o(r,s),r.defaultProperties=function(e){return i.extend({type:"text",properties:s.mergeProperties(s.defaultProperties(),{update:{strokeWidth:{value:0},x:{value:80},y:{value:30},dx:{value:0,offset:0},dy:{value:0,offset:0},text:{value:"Text"},align:{value:"center"},baseline:{value:"middle"},font:{value:"Helvetica"},fontSize:{value:14},fontStyle:{value:"normal"},fontWeight:{value:"normal"},angle:{value:0}}})},e)},r.getHandleStreams=function(e){var t=u.bind(null,e,"handles"),n=c(e,"x"),r=c(e,"y"),i=c(e,"fontSize"),o={};return o[n]=[{type:f,expr:l(t(),n+"+"+p,n)}],o[r]=[{type:f,expr:l(t(),r+"+"+d,r)}],o[i]=[{type:f,expr:l(t("left")+"&&"+t("top"),i+"-"+p,i)},{type:f,expr:l(t("right")+"&&"+t("bottom"),i+"+"+p,i)},{type:f,expr:l(t("left")+"&&"+t("top"),i+"-"+d,i)},{type:f,expr:l(t("right")+"&&"+t("bottom"),i+"+"+d,i)}],o},r.alignments=["left","center","right"],r.baselines=["top","middle","bottom"],r.fonts=["Helvetica","Verdana","Georgia","Palatino","Garamond","Trebuchet MS"],r.fontStyles=["normal","italic"],r.fontWeights=["normal","bold"],e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=o(e,"marks."+t),i=n&&n.toJS();return i?"group"===i.type||"scene"===i.type?i._id:r(e,i._parent):o(e,"scene.id")}function i(e,t,n,r){var i=o(e,"marks."+t+".properties.update");if(i){var a=i.toJS(),s=a[n]||a[r];return s.scale}}var o=n(19).getIn;e.exports={getClosestGroupId:r,getGuideScale:i}},function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===p?63:u>t?-1:u+10>t?t-u+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function n(e){function n(e){l[f++]=e}var r,i,a,s,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new o(3*e.length/4-u),a=u>0?e.length-4:e.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===u&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),l}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,u="";for(i=0,a=e.length-s;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(s){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),p="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}(t)},function(e,t,n){function r(e){return e.text}function i(){return"serif"}function o(){return"normal"}function a(e){return Math.sqrt(e.value)}function s(){return 30*(~~(6*Math.random())-3)}function u(){return 1}function l(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(b<<5)/o,x/o);var a=0,s=0,u=0,l=n.length;for(--r;++r<l;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font;var c=i.measureText(t.text+"m").width*o,f=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*_),d=Math.cos(t.rotate*_),h=c*d,m=c*p,g=f*d,v=f*p;c=Math.max(Math.abs(h+v),Math.abs(h-v))+31>>5<<5,f=~~Math.max(Math.abs(m+g),Math.abs(m-g))}else c=c+31>>5<<5;if(f>u&&(u=f),a+c>=b<<5&&(a=0,s+=u,u=0),s+f>=x)break;i.translate((a+(c>>1))/o,(s+(f>>1))/o),t.rotate&&i.rotate(t.rotate*_),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var y=i.getImageData(0,0,(b<<5)/o,x/o).data,E=[];--r>=0;)if(t=n[r],t.hasText){for(var c=t.width,w=c>>5,f=t.y1-t.y0,S=0;f*w>S;S++)E[S]=0;if(a=t.xoff,null==a)return;s=t.yoff;for(var k=0,M=-1,T=0;f>T;T++){for(var S=0;c>S;S++){var A=w*T+(S>>5),C=y[(s+T)*(b<<5)+(a+S)<<2]?1<<31-S%32:0;E[A]|=C,k|=C}k?M=T:(t.y0++,f--,T--,s++)}t.y1=t.y0+M,t.sprite=E.slice(0,(t.y1-t.y0)*w)}}}function c(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;l>f;f++){r=0;for(var p=0;o>=p;p++)if((r<<u|(o>p?(r=i[f*o+p])>>>s:0))&t[c+p])return!0;c+=n}return!1}function f(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function p(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function d(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function h(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var o=0>e?-1:1;switch(Math.sqrt(1+4*o*e)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function m(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function g(){return document.createElement("canvas")}function v(e){return"function"==typeof e?e:function(){return e}}var y=n(233).dispatch,_=Math.PI/180,b=64,x=2048;e.exports=function(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(b<<5)/t,e.height=x/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,r){for(var i,o,a,s=([{x:0,y:0},{x:n[0],y:n[1]}],t.x),u=t.y,l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),f=A(n),d=L()<.5?1:-1,h=-d;(i=f(h+=d))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=l));)if(t.x=s+o,t.y=u+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>n[0]||t.y+t.y1>n[1])&&(!r||!c(t,e,n[0]))&&(!r||p(t,r))){for(var m,g=t.sprite,v=t.width>>5,y=n[0]>>5,_=t.x-(v<<4),b=127&_,x=32-b,E=t.y1-t.y0,w=(t.y+t.y0)*y+(_>>5),S=0;E>S;S++){m=0;for(var k=0;v>=k;k++)e[w+k]|=m<<x|(v>k?(m=g[S*v+k])>>>b:0);w+=y}return delete t.sprite,!0}return!1}var n=[256,256],h=r,_=i,w=a,S=o,k=o,M=s,T=u,A=d,C=[],O=1/0,N=y("word","end"),I=null,L=Math.random,D={},P=g;return D.canvas=function(e){return arguments.length?(P=v(e),D):P},D.start=function(){function r(){for(var e=Date.now();Date.now()-e<O&&++u<s&&I;){var r=p[u];r.x=n[0]*(L()+.5)>>1,r.y=n[1]*(L()+.5)>>1,l(i,r,p,u),r.hasText&&t(o,r,a)&&(c.push(r),N.word(r),a?f(a,r):a=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}],r.x-=n[0]>>1,r.y-=n[1]>>1)}u>=s&&(D.stop(),N.end(c,a))}var i=e(P()),o=m((n[0]>>5)*n[1]),a=null,s=C.length,u=-1,c=[],p=C.map(function(e,t){return e.text=h.call(this,e,t),e.font=_.call(this,e,t),e.style=S.call(this,e,t),e.weight=k.call(this,e,t),e.rotate=M.call(this,e,t),e.size=~~w.call(this,e,t),e.padding=T.call(this,e,t),e}).sort(function(e,t){return t.size-e.size});return I&&clearInterval(I),I=setInterval(r,0),r(),D},D.stop=function(){return I&&(clearInterval(I),I=null),D},D.timeInterval=function(e){return arguments.length?(O=null==e?1/0:e,D):O},D.words=function(e){return arguments.length?(C=e,D):C},D.size=function(e){return arguments.length?(n=[+e[0],+e[1]],D):n},D.font=function(e){return arguments.length?(_=v(e),D):_},D.fontStyle=function(e){return arguments.length?(S=v(e),D):S},D.fontWeight=function(e){return arguments.length?(k=v(e),D):k},D.rotate=function(e){return arguments.length?(M=v(e),D):M},D.text=function(e){return arguments.length?(h=v(e),D):h},D.spiral=function(e){return arguments.length?(A=E[e]||e,D):A},D.fontSize=function(e){return arguments.length?(w=v(e),D):w},D.padding=function(e){return arguments.length?(T=v(e),D):T},D.random=function(e){return arguments.length?(L=e,D):L},D.on=function(){var e=N.on.apply(N,arguments);return e===N?D:e},D};var E={archimedean:d,rectangular:h}},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){return new n(arguments)}function n(e){function t(e){var t=(e+="").indexOf("."),n=e;if(t>=0?e=e.slice(0,t):n+=".",e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}function n(e){return function(){for(var t,n=a[e],r=-1,i=n.length;++r<i;)(t=n[r].value)&&t.apply(this,arguments);return u}}var r,i=-1,o=e.length,a={},s={},u=this;for(u.on=function(e,n){if(e=t(e),arguments.length<2)return(n=s[e.name])&&n.value;if(e.type){var r,i=a[e.type],o=s[e.name];o&&(o.value=null,r=i.indexOf(o),a[e.type]=i=i.slice(0,r).concat(i.slice(r+1)),delete s[e.name]),n&&(n={value:n},s[e.name]=n,i.push(n))}else if(null==n)for(var l in a)(n=s[l+e.name])&&(n.value=null,i=a[l],r=i.indexOf(n),a[l]=i.slice(0,r).concat(i.slice(r+1)),delete s[n.name]);return u};++i<o;){if(r=e[i]+"",!r||r in u)throw new Error("illegal or duplicate type: "+r);a[r]=[],u[r]=n(r)}}t.prototype=n.prototype;var r="0.2.6";e.version=r,e.dispatch=t})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return new o(e)}function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e,t){var r=n(e);return function(n,i){return t(r(n),i,e)}}function i(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function o(e){function t(t){return t.map(o).join(e)}function o(e){return a.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var a=new RegExp('["'+e+"\n]"),s=e.charCodeAt(0);this.parse=function(e,t){var i,o,a=this.parseRows(e,function(e,a){return i?i(e,a-1):(o=e,void(i=t?r(e,t):n(e)))});return a.columns=o,a},this.parseRows=function(e,t){function n(){if(c>=l)return a;if(i)return i=!1,o;var t,n=c;if(34===e.charCodeAt(n)){for(var r=n;r++<l;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return c=r+2,t=e.charCodeAt(r+1),13===t?(i=!0,10===e.charCodeAt(r+2)&&++c):10===t&&(i=!0),e.slice(n+1,r).replace(/""/g,'"')}for(;l>c;){var u=1;if(t=e.charCodeAt(c++),10===t)i=!0;else if(13===t)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(t!==s)continue;return e.slice(n,c-u)}return e.slice(n)}for(var r,i,o={},a={},u=[],l=e.length,c=0,f=0;(r=n())!==a;){for(var p=[];r!==o&&r!==a;)p.push(r),r=n();t&&null==(p=t(p,f++))||u.push(p)}return u},this.format=function(t,n){return null==n&&(n=i(t)),[n.map(o).join(e)].concat(t.map(function(t){return n.map(function(e){return o(t[e])}).join(e)})).join("\n")},this.formatRows=function(e){return e.map(t).join("\n")}}t.prototype=o.prototype;var a=t(","),s=t("	"),u="0.1.14";e.version=u,e.dsv=t,e.csv=a,e.tsv=s})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:NaN}function r(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],o=r[1],a=o-(h=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+t(e,Math.max(0,n+a-1))[0]}function o(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],o=r[1];return 0>o?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}function a(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,o=-1;r>i;++i)switch(e[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e}function s(e){return new u(e)}function u(e){if(!(t=g.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",o=t[4]||"",a=!!t[5],s=t[6]&&+t[6],u=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(u=!0,c="g"):m[c]||(c=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=l,this.type=c}function l(e){return e}function c(e){function t(e){e=s(e);var t=e.fill,n=e.align,r=e.sign,i=e.symbol,l=e.zero,c=e.width,f=e.comma,p=e.precision,d=e.type,g="$"===i?a[0]:"#"===i&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",y="$"===i?a[1]:/[%p]/.test(d)?"%":"",_=m[d],b=!d||/[defgprs%]/.test(d);return p=null==p?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),function(e){var i=g,a=y;if("c"===d)a=_(e)+a,e="";else{e=+e;var s=(0>e||0>1/e)&&(e*=-1,!0);if(e=_(e,p),s){var m,x=-1,E=e.length;for(s=!1;++x<E;)if(m=e.charCodeAt(x),m>48&&58>m||"x"===d&&m>96&&103>m||"X"===d&&m>64&&71>m){s=!0;break}}if(i=(s?"("===r?r:"-":"-"===r||"("===r?"":r)+i,a=a+("s"===d?v[8+h/3]:"")+(s&&"("===r?")":""),b)for(var m,x=-1,E=e.length;++x<E;)if(m=e.charCodeAt(x),48>m||m>57){a=(46===m?u+e.slice(x+1):e.slice(x))+a,e=e.slice(0,x);break}}f&&!l&&(e=o(e,1/0));var w=i.length+e.length+a.length,S=c>w?new Array(c-w+1).join(t):"";switch(f&&l&&(e=o(S+e,S.length?c-a.length:1/0),S=""),n){case"<":return i+e+a+S;case"=":return i+S+e+a;case"^":return S.slice(0,w=S.length>>1)+i+e+a+S.slice(w)}return S+i+e+a}}function i(e,r){var i=t((e=s(e),e.type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),a=Math.pow(10,-o),u=v[8+o/3];return function(e){return i(a*e)+u}}var o=e.grouping&&e.thousands?r(e.grouping,e.thousands):l,a=e.currency,u=e.decimal;return{format:t,formatPrefix:i}}function f(e){return Math.max(0,-n(Math.abs(e)))}function p(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function d(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1}var h,m={"":a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return o(100*e,t)},r:o,s:i,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var v=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],y=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),_=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),b=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),x=c({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),E=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),w=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),S=c({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),k=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),M=c({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),T=c({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),A=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),C=c({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),O=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),N=c({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),I=c({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),L=c({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),D=c({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),P=c({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),R=c({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),U=c({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),j=c({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),z=c({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),q=c({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),F=y.format,B=y.formatPrefix,Y="0.4.2";e.version=Y,e.format=F,e.formatPrefix=B,e.locale=c,e.localeCaEs=_,e.localeCsCz=b,e.localeDeCh=x,e.localeDeDe=E,e.localeEnCa=w,e.localeEnGb=S,e.localeEnUs=y,e.localeEsEs=k,e.localeFiFi=M,e.localeFrCa=T,e.localeFrFr=A,e.localeHeIl=C,e.localeHuHu=O,e.localeItIt=N,e.localeJaJp=I,e.localeKoKr=L,e.localeMkMk=D,e.localeNlNl=P,e.localePlPl=R,e.localePtBr=U,e.localeRuRu=j,e.localeSvSe=z,e.localeZhCn=q,e.formatSpecifier=s,e.precisionFixed=f,e.precisionPrefix=p,e.precisionRound=d})},function(e,t,n){!function(e,r){r(t,n(94))}(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function o(e){function t(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=ee[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function o(e,t){return function(n){var o=i(1900),s=a(o,e,n+="",0);if(s!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var u="Z"in o?r(i(o.y)).getUTCDay():t(i(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(u+5)%7:o.w+7*o.U-(u+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,r(o)):t(o)}}function a(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;s>a;){if(r>=u)return-1;if(i=t.charCodeAt(a++),37===i){if(i=t.charAt(a++),o=Ue[i in ee?t.charAt(a++):i],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=ke.exec(t.slice(n));return r?(e.p=Me[r[0].toLowerCase()],n+r[0].length):-1}function Q(e,t,n){var r=Ce.exec(t.slice(n));return r?(e.w=Oe[r[0].toLowerCase()],n+r[0].length):-1}function te(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ae[r[0].toLowerCase()],n+r[0].length):-1}function ne(e,t,n){var r=Le.exec(t.slice(n));return r?(e.m=De[r[0].toLowerCase()],n+r[0].length):-1}function re(e,t,n){var r=Ne.exec(t.slice(n));return r?(e.m=Ie[r[0].toLowerCase()],n+r[0].length):-1}function ie(e,t,n){return a(e,ve,t,n)}function oe(e,t,n){return a(e,ye,t,n)}function ae(e,t,n){return a(e,_e,t,n)}function se(e){return Ee[e.getDay()]}function ue(e){return xe[e.getDay()]}function le(e){return Se[e.getMonth()]}function ce(e){return we[e.getMonth()]}function fe(e){return be[+(e.getHours()>=12)]}function pe(e){return Ee[e.getUTCDay()]}function de(e){return xe[e.getUTCDay()]}function he(e){return Se[e.getUTCMonth()]}function me(e){return we[e.getUTCMonth()]}function ge(e){return be[+(e.getUTCHours()>=12)]}var ve=e.dateTime,ye=e.date,_e=e.time,be=e.periods,xe=e.days,Ee=e.shortDays,we=e.months,Se=e.shortMonths,ke=u(be),Me=l(be),Te=u(xe),Ae=l(xe),Ce=u(Ee),Oe=l(Ee),Ne=u(we),Ie=l(we),Le=u(Se),De=l(Se),Pe={a:se,A:ue,b:le,B:ce,c:null,d:S,e:S,H:k,I:M,j:T,L:A,m:C,M:O,p:fe,S:N,U:I,w:L,W:D,x:null,X:null,y:P,Y:R,Z:U,"%":Z},Re={a:pe,A:de,b:he,B:me,c:null,d:j,e:j,H:z,I:q,j:F,L:B,m:Y,M:H,p:ge,S:V,U:W,w:$,W:G,x:null,X:null,y:X,Y:K,Z:J,"%":Z},Ue={a:Q,A:te,b:ne,B:re,c:ie,d:v,e:v,H:_,I:_,j:y,L:E,m:g,M:b,p:s,S:x,U:f,w:c,W:p,x:oe,X:ae,y:h,Y:d,Z:m,"%":w};return Pe.x=t(ye,Pe),Pe.X=t(_e,Pe),Pe.c=t(ve,Pe),Re.x=t(ye,Re),Re.X=t(_e,Re),Re.c=t(ve,Re),{format:function(e){var r=t(e+="",Pe);return r.parse=o(e,n),r.toString=function(){return e},r},utcFormat:function(e){var n=t(e+="",Re);return n.parse=o(e,r),n.toString=function(){return e},n}}}function a(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(t)+i:i)}function s(e){return e.replace(re,"\\$&")}function u(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function l(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function c(e,t,n){var r=te.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f(e,t,n){var r=te.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=te.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function d(e,t,n){var r=te.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function h(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function g(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function v(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function b(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function x(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function E(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function w(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function S(e,t){return a(e.getDate(),t,2)}function k(e,t){return a(e.getHours(),t,2)}function M(e,t){return a(e.getHours()%12||12,t,2)}function T(e,n){return a(1+t.day.count(t.year(e),e),n,3)}function A(e,t){return a(e.getMilliseconds(),t,3)}function C(e,t){return a(e.getMonth()+1,t,2)}function O(e,t){return a(e.getMinutes(),t,2)}function N(e,t){return a(e.getSeconds(),t,2)}function I(e,n){return a(t.sunday.count(t.year(e),e),n,2)}function L(e){return e.getDay()}function D(e,n){return a(t.monday.count(t.year(e),e),n,2)}function P(e,t){return a(e.getFullYear()%100,t,2)}function R(e,t){return a(e.getFullYear()%1e4,t,4)}function U(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+a(t/60|0,"0",2)+a(t%60,"0",2)}function j(e,t){return a(e.getUTCDate(),t,2)}function z(e,t){return a(e.getUTCHours(),t,2)}function q(e,t){return a(e.getUTCHours()%12||12,t,2)}function F(e,n){return a(1+t.utcDay.count(t.utcYear(e),e),n,3)}function B(e,t){return a(e.getUTCMilliseconds(),t,3)}function Y(e,t){return a(e.getUTCMonth()+1,t,2)}function H(e,t){return a(e.getUTCMinutes(),t,2)}function V(e,t){return a(e.getUTCSeconds(),t,2)}function W(e,n){return a(t.utcSunday.count(t.utcYear(e),e),n,2)}function $(e){return e.getUTCDay()}function G(e,n){return a(t.utcMonday.count(t.utcYear(e),e),n,2)}function X(e,t){return a(e.getUTCFullYear()%100,t,2)}function K(e,t){return a(e.getUTCFullYear()%1e4,t,4)}function J(){return"+0000"}function Z(){return"%"}function Q(e){return e.toISOString()}var ee={"-":"",_:" ",0:"0"},te=/^\s*\d+/,ne=/^%/,re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie=o({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),oe=o({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),ae=o({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),se=o({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ue=o({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),le=o({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ce=o({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],
shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fe=o({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),pe=o({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),de=o({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),he=o({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),me=o({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),ge=o({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ve=o({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),ye=o({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),_e=o({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),be=o({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),xe=o({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),Ee=o({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),we=o({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),Se=o({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),ke=o({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Me="%Y-%m-%dT%H:%M:%S.%LZ";Q.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Q.toString=function(){return Me};var Te=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Q:ie.utcFormat(Me),Ae=ie.format,Ce=ie.utcFormat,Oe="0.2.1";e.version=Oe,e.format=Ae,e.utcFormat=Ce,e.locale=o,e.localeCaEs=oe,e.localeDeCh=ae,e.localeDeDe=se,e.localeEnCa=ue,e.localeEnGb=le,e.localeEnUs=ie,e.localeEsEs=ce,e.localeFiFi=fe,e.localeFrCa=pe,e.localeFrFr=de,e.localeHeIl=he,e.localeHuHu=me,e.localeItIt=ge,e.localeJaJp=ve,e.localeKoKr=ye,e.localeMkMk=_e,e.localeNlNl=be,e.localePlPl=xe,e.localePtBr=Ee,e.localeRuRu=we,e.localeSvSe=Se,e.localeZhCn=ke,e.isoFormat=Te})},function(e,t,n){var r=n(10),i=n(99),o=i.utc,a=e.exports;a.$year=r.$func("year",i.year.unit),a.$month=r.$func("month",i.months.unit),a.$date=r.$func("date",i.dates.unit),a.$day=r.$func("day",i.weekdays.unit),a.$hour=r.$func("hour",i.hours.unit),a.$minute=r.$func("minute",i.minutes.unit),a.$second=r.$func("second",i.seconds.unit),a.$utcYear=r.$func("utcYear",o.year.unit),a.$utcMonth=r.$func("utcMonth",o.months.unit),a.$utcDate=r.$func("utcDate",o.dates.unit),a.$utcDay=r.$func("utcDay",o.weekdays.unit),a.$utcHour=r.$func("utcHour",o.hours.unit),a.$utcMinute=r.$func("utcMinute",o.minutes.unit),a.$utcSecond=r.$func("utcSecond",o.seconds.unit)},function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var i=n(10),o=n(56),a="__dl_rem__",s=r.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,s=this._add,u=this._rem,l=this._key,c=Array(s.length-u.length);if(i.isObject(u[0]))if(l)for(r=i.toMap(u,l),e=0,t=0,n=s.length;n>e;++e)r.hasOwnProperty(l(s[e]))||(c[t++]=s[e]);else{for(e=0,n=u.length;n>e;++e)u[e][a]=1;for(e=0,t=0,n=s.length;n>e;++e)s[e][a]||(c[t++]=s[e]);for(e=0,n=u.length;n>e;++e)delete u[e][a]}else for(r=o.count.map(u),e=0,t=0,n=s.length;n>e;++e)r[s[e]]>0?r[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=o.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},s.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},s.quartile=function(e){return this._get===e&&this._q||(this._q=o.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},e.exports=r},function(e,t,n){var r=n(10),i=n(143);e.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},function(e,t,n){function r(e){return function(t){var n=a.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function i(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=s[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return a.vals(r).sort(function(e,t){return e.idx-t.idx})}function o(e,t,r,o){var s=i(e,t),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return s.forEach(function(e){e.idx<0?(u=e.init+u,l=e.add+l,c=e.rem+c):(u+=e.init,l+=e.add,c+=e.rem)}),e.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"}),f+="return t;",u=Function("cell","t",u),u.prototype.assign=o,u.prototype.add=Function("t","var v = this.get(t);"+l),u.prototype.rem=Function("t","var v = this.get(t);"+c),u.prototype.set=Function(f),u.prototype.get=r,u.prototype.distinct=n(56).count.distinct,u.prototype.isValid=a.isValid,u.fields=e.map(a.$("out")),u}var a=n(10),s={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:r({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};s.create=o,e.exports=s},function(e,t,n){function r(e,t){t=s.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||s.keys(e[0]),r=u.all(e);if(t.start||t.limit){var i=t.start||0,o=t.limit?i+t.limit:e.length;e=e.slice(i,o)}var a=n.map(function(n){var i=f[r[n]]||"",o=c("{{"+n+i+"}}"),a=l.max(e,function(e){return o(e).length});return a=Math.max(Math.min(n.length,t.minwidth),a),t.maxwidth>0?Math.min(a,t.maxwidth):a}),d=n.map(function(e,t){return s.truncate(s.pad(e,a[t],"center"),a[t])}).join(t.separator),h=c(n.map(function(e,t){return"{{"+e+(f[r[e]]||"")+("|pad:"+a[t]+","+(p[r[e]]||"right"))+("|truncate:"+a[t])+"}}"}).join(t.separator));return d+"\n"+e.map(h).join("\n")}function i(e){e=e?e.__summary__?e:l.summary(e):this;var t,n,r=[];for(t=0,n=e.length;n>t;++t)r.push("-- "+e[t].field+" --"),"string"===e[t].type||e[t].distinct<10?r.push(a(e[t])):r.push(o(e[t])),r.push("");return r.join("\n")}function o(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function a(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=s.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var s=n(10),u=n(55),l=n(56),c=n(146);e.exports={table:r,summary:i};var f={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},p={number:"left",integer:"left"}},function(e,t,n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return o.dsv(t.delimiter).parse(e)}var i=n(10),o=n(234);r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?i.extend(n,t):t)}},e.exports=r},function(e,t,n){var r=n(242);e.exports={json:n(97),topojson:n(244),treejson:n(245),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("	")}},function(e,t,n){var r=n(97),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var o,a=r(e,t);if(t&&t.feature){if(o=a.objects[t.feature])return n.feature(a,o).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(o=a.objects[t.mesh])return[n.mesh(a,a.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson=n(322),e.exports=i},function(e,t,n){function r(e,t){function n(e,t){e[i]=t,o.push(e);var a=e[r];if(a)for(var s=0;s<a.length;++s)n(a[s],e)}var r=t&&t.children||"children",i=t&&t.parent||"parent",o=[];return n(e,null),o.root=e,o}var i=n(97);e.exports=function(e,t){return r(i(e,t),t)}},function(e,t,n){var r=n(10),i=n(98),o=n(145);e.exports=r.keys(o.formats).reduce(function(e,t){return e[t]=function(e,n,a){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(a=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var s=i(e,a?function(e,t){if(e)return void a(e,null);try{t=o(t,n),a(null,t)}catch(r){a(r,null)}}:void 0);return a?void 0:o(s,n)},e},{})},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(247),o=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():o(e):[e]}var o=n(258);e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function i(e,t){var n=l;l?void 0:u(!1);var i=r(e),o=i&&s(i);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var f=n.getElementsByTagName("script");f.length&&(t?void 0:u(!1),a(f).forEach(t));for(var p=a(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var o=n(14),a=n(249),s=n(151),u=n(3),l=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=i},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(252),o=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(254);e.exports=r},function(e,t){"use strict";function n(e,t,n){if(!e)return null;var i={};for(var o in e)r.call(e,o)&&(i[o]=t.call(n,e[o],o,e));return i}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?i(!1):void 0,"number"!=typeof t?i(!1):void 0,0===t||t-1 in e?void 0:i(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),o=0;t>o;o++)r[o]=e[o];return r}var i=n(3);e.exports=r},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=h,a/=256,l-=8);e[n+d-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r="undefined"!=typeof JSON?JSON:n(262);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var a="boolean"==typeof t.cycles?t.cycles:!1,s=t.replacer||function(e,t){return t},u=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},o={key:r,value:t[r]};return e(i,o)}}}(t.cmp),l=[];return function c(e,t,f,p){var d=n?"\n"+new Array(p+1).join(n):"",h=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),f=s.call(e,t,f),void 0!==f){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var m=[],g=0;g<f.length;g++){var v=c(f,g,f[g],p+1)||r.stringify(null);m.push(d+n+v)}return"["+m.join(",")+d+"]"}if(-1!==l.indexOf(f)){if(a)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(f);for(var y=o(f).sort(u&&u(f)),m=[],g=0;g<y.length;g++){var t=y[g],_=c(f,t,f[t],p+1);if(_){var b=r.stringify(t)+h+_;m.push(d+n+b)}}return l.splice(l.indexOf(f),1),"{"+m.join(",")+d+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},function(e,t,n){t.parse=n(263),t.stringify=n(264)},function(e,t){var n,r,i,o,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(e){throw{name:"SyntaxError",message:e,at:n,text:i}},u=function(e){return e&&e!==r&&s("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(n),n+=1,r},l=function(){var e,t="";for("-"===r&&(t="-",u("-"));r>="0"&&"9">=r;)t+=r,u();if("."===r)for(t+=".";u()&&r>="0"&&"9">=r;)t+=r;if("e"===r||"E"===r)for(t+=r,u(),"-"!==r&&"+"!==r||(t+=r,u());r>="0"&&"9">=r;)t+=r,u();return e=+t,isFinite(e)?e:void s("Bad number")},c=function(){var e,t,n,i="";if('"'===r)for(;u();){if('"'===r)return u(),i;if("\\"===r)if(u(),"u"===r){for(n=0,t=0;4>t&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof a[r])break;i+=a[r]}else i+=r}s("Bad string")},f=function(){for(;r&&" ">=r;)u()},p=function(){switch(r){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}s("Unexpected '"+r+"'")},d=function(){var e=[];if("["===r){if(u("["),f(),"]"===r)return u("]"),e;for(;r;){if(e.push(o()),f(),"]"===r)return u("]"),e;u(","),f()}}s("Bad array")},h=function(){var e,t={};if("{"===r){if(u("{"),f(),"}"===r)return u("}"),t;for(;r;){if(e=c(),f(),u(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=o(),f(),"}"===r)return u("}"),t;u(","),f()}}s("Bad object")};o=function(){switch(f(),r){case"{":return h();case"[":return d();case'"':return c();case"-":return l();default:return r>="0"&&"9">=r?l():p()}},e.exports=function(e,t){var a;return i=e,n=0,r=" ",a=o(),f(),r&&s("Syntax error"),"function"==typeof t?function u(e,n){var r,i,o=e[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i=u(o,r),void 0!==i?o[r]=i:delete o[r]);return t.call(e,n,o)}({"":a},""):a}},function(e,t){function n(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function r(e,t){var s,u,l,c,f,p=i,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof a&&(d=a.call(t,e,d)),typeof d){case"string":return n(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(i+=o,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(c=d.length,s=0;c>s;s+=1)f[s]=r(s,d)||"null";return l=0===f.length?"[]":i?"[\n"+i+f.join(",\n"+i)+"\n"+p+"]":"["+f.join(",")+"]",i=p,l}if(a&&"object"==typeof a)for(c=a.length,s=0;c>s;s+=1)u=a[s],"string"==typeof u&&(l=r(u,d),l&&f.push(n(u)+(i?": ":":")+l));else for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&(l=r(u,d),l&&f.push(n(u)+(i?": ":":")+l));return l=0===f.length?"{}":i?"{\n"+i+f.join(",\n"+i)+"\n"+p+"}":"{"+f.join(",")+"}",i=p,l}}var i,o,a,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.exports=function(e,t,n){var s;if(i="",o="","number"==typeof n)for(s=0;n>s;s+=1)o+=" ";else"string"==typeof n&&(o=n);if(a=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return r("",{"":e})}},function(e,t,n){function r(e){if(!a(e)||p.call(e)!=s||o(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var i=n(535),o=n(536),a=n(537),s="[object Object]",u=Object.prototype,l=Function.prototype.toString,c=u.hasOwnProperty,f=l.call(Object),p=u.toString;e.exports=r},function(e,t,n){e.exports=n(540)},function(e,t,n){"use strict";var r=n(16),i=n(108),o=n(149),a={componentDidMount:function(){this.props.autoFocus&&o(i(this))}},s={Mixin:a,focusDOMComponent:function(){o(r.getNode(this._rootNodeID))}};e.exports=s},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case A.topCompositionStart:return C.compositionStart;case A.topCompositionEnd:return C.compositionEnd;case A.topCompositionUpdate:return C.compositionUpdate}}function a(e,t){return e===A.topKeyDown&&t.keyCode===x}function s(e,t){switch(e){case A.topKeyUp:return-1!==b.indexOf(t.keyCode);case A.topKeyDown:return t.keyCode!==x;case A.topKeyPress:case A.topMouseDown:case A.topBlur:return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function l(e,t,n,r,i){var l,c;if(E?l=o(e):N?s(e,r)&&(l=C.compositionEnd):a(e,r)&&(l=C.compositionStart),!l)return null;k&&(N||l!==C.compositionStart?l===C.compositionEnd&&N&&(c=N.getData()):N=g.getPooled(t));var f=v.getPooled(l,n,r,i);if(c)f.data=c;else{var p=u(r);null!==p&&(f.data=p)}return h.accumulateTwoPhaseDispatches(f),f}function c(e,t){switch(e){case A.topCompositionEnd:return u(t);case A.topKeyPress:var n=t.which;return n!==M?null:(O=!0,T);case A.topTextInput:var r=t.data;return r===T&&O?null:r;default:return null}}function f(e,t){if(N){if(e===A.topCompositionEnd||s(e,t)){var n=N.getData();return g.release(N),N=null,n}return null}switch(e){case A.topPaste:return null;case A.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case A.topCompositionEnd:return k?null:t.data;default:return null}}function p(e,t,n,r,i){var o;if(o=S?c(e,r):f(e,r),!o)return null;var a=y.getPooled(C.beforeInput,n,r,i);return a.data=o,h.accumulateTwoPhaseDispatches(a),a}var d=n(31),h=n(59),m=n(14),g=n(276),v=n(306),y=n(309),_=n(35),b=[9,13,27,32],x=229,E=m.canUseDOM&&"CompositionEvent"in window,w=null;m.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var S=m.canUseDOM&&"TextEvent"in window&&!w&&!r(),k=m.canUseDOM&&(!E||w&&w>8&&11>=w),M=32,T=String.fromCharCode(M),A=d.topLevelTypes,C={beforeInput:{phasedRegistrationNames:{bubbled:_({onBeforeInput:null}),captured:_({onBeforeInputCapture:null})},dependencies:[A.topCompositionEnd,A.topKeyPress,A.topTextInput,A.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:_({onCompositionEnd:null}),captured:_({onCompositionEndCapture:null})},dependencies:[A.topBlur,A.topCompositionEnd,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:_({onCompositionStart:null}),captured:_({onCompositionStartCapture:null})},dependencies:[A.topBlur,A.topCompositionStart,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:_({onCompositionUpdate:null}),captured:_({onCompositionUpdateCapture:null})},dependencies:[A.topBlur,A.topCompositionUpdate,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]}},O=!1,N=null,I={eventTypes:C,extractEvents:function(e,t,n,r,i){return[l(e,t,n,r,i),p(e,t,n,r,i)]}};e.exports=I},function(e,t,n){"use strict";var r=n(153),i=n(14),o=n(23),a=(n(248),n(314)),s=n(253),u=n(257),l=(n(6),u(function(e){return s(e)})),c=!1,f="cssFloat";if(i.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(d){c=!0}void 0===document.documentElement.style.cssFloat&&(f="styleFloat")}var h={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=l(n)+":",t+=a(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=a(i,t[i]);if("float"===i&&(i=f),o)n[i]=o;else{var s=c&&r.shorthandPropertyExpansions[i];if(s)for(var u in s)n[u]="";else n[i]=""}}}};o.measureMethods(h,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),e.exports=h},function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=w.getPooled(C.change,N,e,S(e));b.accumulateTwoPhaseDispatches(t),E.batchedUpdates(o,t)}function o(e){_.enqueueEvents(e),_.processEventQueue(!1)}function a(e,t){O=e,N=t,O.attachEvent("onchange",i)}function s(){O&&(O.detachEvent("onchange",i),O=null,N=null)}function u(e,t,n){return e===A.topChange?n:void 0}function l(e,t,n){e===A.topFocus?(s(),a(t,n)):e===A.topBlur&&s()}function c(e,t){O=e,N=t,I=e.value,L=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(O,"value",R),O.attachEvent("onpropertychange",p)}function f(){O&&(delete O.value,O.detachEvent("onpropertychange",p),O=null,N=null,I=null,L=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==I&&(I=t,i(e))}}function d(e,t,n){return e===A.topInput?n:void 0}function h(e,t,n){e===A.topFocus?(f(),c(t,n)):e===A.topBlur&&f()}function m(e,t,n){return e!==A.topSelectionChange&&e!==A.topKeyUp&&e!==A.topKeyDown||!O||O.value===I?void 0:(I=O.value,N)}function g(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===A.topClick?n:void 0}var y=n(31),_=n(58),b=n(59),x=n(14),E=n(24),w=n(40),S=n(111),k=n(114),M=n(180),T=n(35),A=y.topLevelTypes,C={change:{phasedRegistrationNames:{bubbled:T({onChange:null}),captured:T({onChangeCapture:null})},dependencies:[A.topBlur,A.topChange,A.topClick,A.topFocus,A.topInput,A.topKeyDown,A.topKeyUp,A.topSelectionChange]}},O=null,N=null,I=null,L=null,D=!1;x.canUseDOM&&(D=k("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;x.canUseDOM&&(P=k("input")&&(!("documentMode"in document)||document.documentMode>9));var R={get:function(){return L.get.call(this)},set:function(e){I=""+e,L.set.call(this,e)}},U={eventTypes:C,extractEvents:function(e,t,n,i,o){var a,s;if(r(t)?D?a=u:s=l:M(t)?P?a=d:(a=m,s=h):g(t)&&(a=v),a){var c=a(e,t,n);if(c){var f=w.getPooled(C.change,c,i,o);return f.type="change",b.accumulateTwoPhaseDispatches(f),f}}s&&s(e,t,n)}};e.exports=U},function(e,t){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};e.exports=r},function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=n(14),o=n(250),a=n(26),s=n(151),u=n(3),l=/^(<[^ \/>]+)/,c="data-danger-index",f={dangerouslyRenderMarkup:function(e){i.canUseDOM?void 0:u(!1);for(var t,n={},f=0;f<e.length;f++)e[f]?void 0:u(!1),t=r(e[f]),t=s(t)?t:"*",n[t]=n[t]||[],n[t][f]=e[f];var p=[],d=0;for(t in n)if(n.hasOwnProperty(t)){var h,m=n[t];for(h in m)if(m.hasOwnProperty(h)){var g=m[h];m[h]=g.replace(l,"$1 "+c+'="'+h+'" ')}for(var v=o(m.join(""),a),y=0;y<v.length;++y){var _=v[y];_.hasAttribute&&_.hasAttribute(c)&&(h=+_.getAttribute(c),_.removeAttribute(c),p.hasOwnProperty(h)?u(!1):void 0,p[h]=_,d+=1)}}return d!==p.length?u(!1):void 0,p.length!==e.length?u(!1):void 0,p},dangerouslyReplaceNodeWithMarkup:function(e,t){i.canUseDOM?void 0:u(!1),t?void 0:u(!1),"html"===e.tagName.toLowerCase()?u(!1):void 0;var n;n="string"==typeof t?o(t,a)[0]:t,e.parentNode.replaceChild(n,e)}};e.exports=f},function(e,t,n){"use strict";var r=n(35),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null
}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];e.exports=i},function(e,t,n){"use strict";var r=n(31),i=n(59),o=n(71),a=n(16),s=n(35),u=r.topLevelTypes,l=a.getFirstReactDOM,c={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},f=[null,null],p={eventTypes:c,extractEvents:function(e,t,n,r,s){if(e===u.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var p;if(t.window===t)p=t;else{var d=t.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var h,m,g="",v="";if(e===u.topMouseOut?(h=t,g=n,m=l(r.relatedTarget||r.toElement),m?v=a.getID(m):m=p,m=m||p):(h=p,m=t,v=n),h===m)return null;var y=o.getPooled(c.mouseLeave,g,r,s);y.type="mouseleave",y.target=h,y.relatedTarget=m;var _=o.getPooled(c.mouseEnter,v,r,s);return _.type="mouseenter",_.target=m,_.relatedTarget=h,i.accumulateEnterLeaveDispatches(y,_,g,v),f[0]=y,f[1]=_,f}};e.exports=p},function(e,t,n){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function i(e){return e===g.topMouseMove||e===g.topTouchMove}function o(e){return e===g.topMouseDown||e===g.topTouchStart}function a(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=m.Mount.getNode(r),t?d.invokeGuardedCallbackWithCatch(i,n,e,r):d.invokeGuardedCallback(i,n,e,r),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)a(e,t,n[i],r[i]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;Array.isArray(t)?h(!1):void 0;var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function f(e){return!!e._dispatchListeners}var p=n(31),d=n(168),h=n(3),m=(n(6),{Mount:null,injectMount:function(e){m.Mount=e}}),g=p.topLevelTypes,v={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:f,getNode:function(e){return m.Mount.getNode(e)},getID:function(e){return m.Mount.getID(e)},injection:m};e.exports=v},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(37),o=n(7),a=n(179);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;r>e&&n[e]===i[e];e++);var a=r-e;for(t=1;a>=t&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r,i=n(46),o=n(14),a=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,u=i.injection.HAS_BOOLEAN_VALUE,l=i.injection.HAS_SIDE_EFFECTS,c=i.injection.HAS_NUMERIC_VALUE,f=i.injection.HAS_POSITIVE_NUMERIC_VALUE,p=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var d=document.implementation;r=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var h={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|u,allowTransparency:a,alt:null,async:u,autoComplete:null,autoPlay:u,capture:a|u,cellPadding:null,cellSpacing:null,charSet:a,challenge:a,checked:s|u,classID:a,className:r?a:s,cols:a|f,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:a,"default":u,defer:u,dir:null,disabled:a|u,download:p,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:u,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,inputMode:a,integrity:null,is:a,keyParams:a,keyType:a,kind:null,label:null,lang:null,list:a,loop:s|u,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,minLength:a,multiple:s|u,muted:s|u,name:null,nonce:a,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,reversed:u,role:a,rows:a|f,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:a|u,selected:s|u,shape:null,size:a|f,sizes:a,span:f,spellCheck:null,src:null,srcDoc:s,srcLang:null,srcSet:a,start:c,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|l,width:a,wmode:a,wrap:null,about:a,datatype:a,inlist:a,prefix:a,property:a,resource:a,"typeof":a,vocab:a,autoCapitalize:a,autoCorrect:a,autoSave:null,color:null,itemProp:a,itemScope:a|u,itemType:a,itemID:a,itemRef:a,results:null,security:a,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=h},function(e,t,n){"use strict";var r=n(159),i=n(288),o=n(293),a=n(7),s=n(315),u={};a(u,o),a(u,{findDOMNode:s("findDOMNode","ReactDOM","react-dom",r,r.findDOMNode),render:s("render","ReactDOM","react-dom",r,r.render),unmountComponentAtNode:s("unmountComponentAtNode","ReactDOM","react-dom",r,r.unmountComponentAtNode),renderToString:s("renderToString","ReactDOMServer","react-dom/server",i,i.renderToString),renderToStaticMarkup:s("renderToStaticMarkup","ReactDOMServer","react-dom/server",i,i.renderToStaticMarkup)}),u.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,u.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i,e.exports=u},function(e,t,n){"use strict";var r=(n(60),n(108)),i=(n(6),"_getDOMNodeDidWarn"),o={getDOMNode:function(){return this.constructor[i]=!0,r(this)}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n){var r=void 0===e[n];null!=t&&r&&(e[n]=o(t,null))}var i=n(39),o=n(113),a=n(116),s=n(117),u=(n(6),{instantiateChildren:function(e,t,n){if(null==e)return null;var i={};return s(e,r,i),i},updateChildren:function(e,t,n,r){if(!t&&!e)return null;var s;for(s in t)if(t.hasOwnProperty(s)){var u=e&&e[s],l=u&&u._currentElement,c=t[s];if(null!=u&&a(l,c))i.receiveComponent(u,c,n,r),t[s]=u;else{u&&i.unmountComponent(u,s);var f=o(c,null);t[s]=f}}for(s in e)!e.hasOwnProperty(s)||t&&t.hasOwnProperty(s)||i.unmountComponent(e[s]);return t},unmountChildren:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];i.unmountComponent(n)}}});e.exports=u},function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function i(e){}var o=n(104),a=n(32),s=n(20),u=n(60),l=n(23),c=n(70),f=(n(69),n(39)),p=n(106),d=n(7),h=n(57),m=n(3),g=n(116);n(6);i.prototype.render=function(){var e=u.get(this)._currentElement.type;return e(this.props,this.context,this.updater)};var v=1,y={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=v++,this._rootNodeID=e;var r,o,a=this._processProps(this._currentElement.props),l=this._processContext(n),c=this._currentElement.type,d="prototype"in c;d&&(r=new c(a,l,p)),d&&null!==r&&r!==!1&&!s.isValidElement(r)||(o=r,r=new i(c)),r.props=a,r.context=l,r.refs=h,r.updater=p,this._instance=r,u.set(r,this);var g=r.state;void 0===g&&(r.state=g=null),"object"!=typeof g||Array.isArray(g)?m(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,r.componentWillMount&&(r.componentWillMount(),this._pendingStateQueue&&(r.state=this._processPendingState(r.props,r.context))),void 0===o&&(o=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(o);var y=f.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return r.componentDidMount&&t.getReactMountReady().enqueue(r.componentDidMount,r),y},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),f.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,u.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,r=n.contextTypes;if(!r)return h;t={};for(var i in r)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"object"!=typeof t.childContextTypes?m(!1):void 0;for(var i in r)i in t.childContextTypes?void 0:m(!1);return d({},e,r)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var i=this.getName();for(var o in e)if(e.hasOwnProperty(o)){var a;try{"function"!=typeof e[o]?m(!1):void 0,a=e[o](t,o,i,n)}catch(s){a=s}if(a instanceof Error){r(this);n===c.prop}}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&f.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,r,i){var o,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?o=n.props:(o=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(o,s));var u=this._processPendingState(o,s),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(o,u,s);l?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,o,u,s,e,i)):(this._currentElement=n,this._context=i,a.props=o,a.state=u,a.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=d({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];d(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(i,o),c&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(g(r,i))f.receiveComponent(n,i,e,this._processChildContext(t));else{var o=this._rootNodeID,a=n._rootNodeID;f.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=f.mountComponent(this._renderedComponent,o,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){o.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;a.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}return null===e||e===!1||s.isValidElement(e)?void 0:m(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?m(!1):void 0;var r=t.getPublicInstance(),i=n.refs===h?n.refs={}:n.refs;i[e]=r},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof i?null:e},_instantiateReactComponent:null};l.measureMethods(y,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var _={Mixin:y};e.exports=_},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getNativeProps:function(e,t,r){if(!t.disabled)return t;var i={};for(var o in t)t.hasOwnProperty(o)&&!n[o]&&(i[o]=t[o]);return i}};e.exports=r},function(e,t,n){"use strict";function r(){return this}function i(){var e=this._reactInternalComponent;return!!e}function o(){}function a(e,t){var n=this._reactInternalComponent;n&&(I.enqueueSetPropsInternal(n,e),t&&I.enqueueCallbackInternal(n,t))}function s(e,t){var n=this._reactInternalComponent;n&&(I.enqueueReplacePropsInternal(n,e),t&&I.enqueueCallbackInternal(n,t))}function u(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children?R(!1):void 0,"object"==typeof t.dangerouslySetInnerHTML&&W in t.dangerouslySetInnerHTML?void 0:R(!1)),null!=t.style&&"object"!=typeof t.style?R(!1):void 0)}function l(e,t,n,r){var i=C.findReactContainerForID(e);if(i){var o=i.nodeType===$?i.ownerDocument:i;F(t,o)}r.getReactMountReady().enqueue(c,{id:e,registrationName:t,listener:n})}function c(){var e=this;E.putListener(e.id,e.registrationName,e.listener)}function f(){var e=this;e._rootNodeID?void 0:R(!1);var t=C.getNode(e._rootNodeID);switch(t?void 0:R(!1),e._tag){case"iframe":e._wrapperState.listeners=[E.trapBubbledEvent(x.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in G)G.hasOwnProperty(n)&&e._wrapperState.listeners.push(E.trapBubbledEvent(x.topLevelTypes[n],G[n],t));break;case"img":e._wrapperState.listeners=[E.trapBubbledEvent(x.topLevelTypes.topError,"error",t),E.trapBubbledEvent(x.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[E.trapBubbledEvent(x.topLevelTypes.topReset,"reset",t),E.trapBubbledEvent(x.topLevelTypes.topSubmit,"submit",t)]}}function p(){k.mountReadyWrapper(this)}function d(){T.postUpdateWrapper(this)}function h(e){Q.call(Z,e)||(J.test(e)?void 0:R(!1),Z[e]=!0)}function m(e,t){return e.indexOf("-")>=0||null!=t.is}function g(e){h(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var v=n(267),y=n(269),_=n(46),b=n(101),x=n(31),E=n(68),w=n(103),S=n(282),k=n(285),M=n(286),T=n(161),A=n(289),C=n(16),O=n(294),N=n(23),I=n(106),L=n(7),D=n(73),P=n(74),R=n(3),U=(n(114),n(35)),j=n(75),z=n(115),q=(n(152),n(118),n(6),E.deleteListener),F=E.listenTo,B=E.registrationNameModules,Y={string:!0,number:!0},H=U({children:null}),V=U({style:null}),W=U({__html:null}),$=1,G={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},X={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K={listing:!0,pre:!0,textarea:!0},J=(L({menuitem:!0},X),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),Z={},Q={}.hasOwnProperty;g.displayName="ReactDOMComponent",g.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e;var r=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(f,this);break;case"button":r=S.getNativeProps(this,r,n);break;case"input":k.mountWrapper(this,r,n),r=k.getNativeProps(this,r,n);break;case"option":M.mountWrapper(this,r,n),r=M.getNativeProps(this,r,n);break;case"select":T.mountWrapper(this,r,n),r=T.getNativeProps(this,r,n),n=T.processChildContext(this,r,n);break;case"textarea":A.mountWrapper(this,r,n),r=A.getNativeProps(this,r,n)}u(this,r);var i;if(t.useCreateElement){var o=n[C.ownerDocumentContextKey],a=o.createElement(this._currentElement.type);b.setAttributeForID(a,this._rootNodeID),C.getID(a),this._updateDOMProperties({},r,t,a),this._createInitialChildren(t,r,n,a),i=a}else{var s=this._createOpenTagMarkupAndPutListeners(t,r),l=this._createContentMarkup(t,r,n);i=!l&&X[this._tag]?s+"/>":s+">"+l+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(p,this);case"button":case"select":case"textarea":r.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this)}return i},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(B.hasOwnProperty(r))i&&l(this._rootNodeID,r,i,e);else{r===V&&(i&&(i=this._previousStyleCopy=L({},t.style)),i=y.createMarkupForStyles(i));var o=null;null!=this._tag&&m(this._tag,t)?r!==H&&(o=b.createMarkupForCustomAttribute(r,i)):o=b.createMarkupForProperty(r,i),o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n;var a=b.createMarkupForID(this._rootNodeID);return n+" "+a},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=Y[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=P(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return K[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&j(r,i.__html);else{var o=Y[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)z(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)r.appendChild(s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var i=t.props,o=this._currentElement.props;switch(this._tag){case"button":i=S.getNativeProps(this,i),o=S.getNativeProps(this,o);break;case"input":k.updateWrapper(this),i=k.getNativeProps(this,i),o=k.getNativeProps(this,o);break;case"option":i=M.getNativeProps(this,i),o=M.getNativeProps(this,o);break;case"select":i=T.getNativeProps(this,i),o=T.getNativeProps(this,o);break;case"textarea":A.updateWrapper(this),i=A.getNativeProps(this,i),o=A.getNativeProps(this,o)}u(this,o),this._updateDOMProperties(i,o,e,null),this._updateDOMChildren(i,o,e,r),!D&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(d,this)},_updateDOMProperties:function(e,t,n,r){var i,o,a;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i))if(i===V){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else B.hasOwnProperty(i)?e[i]&&q(this._rootNodeID,i):(_.properties[i]||_.isCustomAttribute(i))&&(r||(r=C.getNode(this._rootNodeID)),b.deleteValueForProperty(r,i));for(i in t){var u=t[i],c=i===V?this._previousStyleCopy:e[i];if(t.hasOwnProperty(i)&&u!==c)if(i===V)if(u?u=this._previousStyleCopy=L({},u):this._previousStyleCopy=null,c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(a=a||{},a[o]=u[o])}else a=u;else B.hasOwnProperty(i)?u?l(this._rootNodeID,i,u,n):c&&q(this._rootNodeID,i):m(this._tag,t)?(r||(r=C.getNode(this._rootNodeID)),i===H&&(u=null),b.setValueForAttribute(r,i,u)):(_.properties[i]||_.isCustomAttribute(i))&&(r||(r=C.getNode(this._rootNodeID)),null!=u?b.setValueForProperty(r,i,u):b.deleteValueForProperty(r,i))}a&&(r||(r=C.getNode(this._rootNodeID)),y.setValueForStyles(r,a))},_updateDOMChildren:function(e,t,n,r){var i=Y[typeof e.children]?e.children:null,o=Y[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,l=null!=o?null:t.children,c=null!=i||null!=a,f=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!f&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":k.unmountWrapper(this);break;case"html":case"head":case"body":R(!1)}if(this.unmountChildren(),E.deleteAllListeners(this._rootNodeID),w.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var n=this._nodeWithLegacyProperties;n._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=C.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=r,e.isMounted=i,e.setState=o,e.replaceState=o,e.forceUpdate=o,e.setProps=a,e.replaceProps=s,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},N.measureMethods(g,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),L(g.prototype,g.Mixin,O.Mixin),e.exports=g},function(e,t,n){"use strict";function r(e){return i.createFactory(e)}var i=n(20),o=(n(165),n(256)),a=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);e.exports=a},function(e,t,n){"use strict";function r(){this._rootNodeID&&p.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=a.executeOnChange(t,e);u.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var o=s.getNode(this._rootNodeID),l=o;l.parentNode;)l=l.parentNode;for(var p=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),d=0;d<p.length;d++){var h=p[d];if(h!==o&&h.form===o.form){var m=s.getID(h);m?void 0:c(!1);var g=f[m];g?void 0:c(!1),u.asap(r,g)}}}return n}var o=n(105),a=n(102),s=n(16),u=n(24),l=n(7),c=n(3),f={},p={getNativeProps:function(e,t,n){var r=a.getValue(t),i=a.getChecked(t),o=l({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=r?r:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return o},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=n?n:null,onChange:i.bind(e)}},mountReadyWrapper:function(e){f[e._rootNodeID]=e},unmountWrapper:function(e){delete f[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&o.updatePropertyByID(e._rootNodeID,"checked",n||!1);var r=a.getValue(t);null!=r&&o.updatePropertyByID(e._rootNodeID,"value",""+r)}};e.exports=p},function(e,t,n){"use strict";var r=n(156),i=n(161),o=n(7),a=(n(6),i.valueContextKey),s={mountWrapper:function(e,t,n){var r=n[a],i=null;if(null!=r)if(i=!1,Array.isArray(r)){for(var o=0;o<r.length;o++)if(""+r[o]==""+t.value){i=!0;break}}else i=""+r==""+t.value;e._wrapperState={selected:i}},getNativeProps:function(e,t,n){var i=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(i.selected=e._wrapperState.selected);var a="";return r.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(a+=e))}),a&&(i.children=a),i}};e.exports=s},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(u){return null}var l=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=l?0:s.toString().length,f=s.cloneRange();f.selectNodeContents(e),f.setEnd(s.startContainer,s.startOffset);var p=r(f.startContainer,f.startOffset,f.endContainer,f.endOffset),d=p?0:f.toString().length,h=d+c,m=document.createRange();m.setStart(n,i),m.setEnd(o,a);var g=m.collapsed;return{start:g?h:d,end:g?d:h}}function a(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,i=Math.min(t.start,r),o="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(e,i),u=l(e,o);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=n(14),l=n(318),c=n(179),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:f?i:o,setOffsets:f?a:s};e.exports=p},function(e,t,n){"use strict";var r=n(164),i=n(299),o=n(107);r.inject();var a={renderToString:i.renderToString,renderToStaticMarkup:i.renderToStaticMarkup,version:o};e.exports=a},function(e,t,n){"use strict";function r(){this._rootNodeID&&c.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=o.executeOnChange(t,e);return s.asap(r,this),n}var o=n(102),a=n(105),s=n(24),u=n(7),l=n(3),c=(n(6),{getNativeProps:function(e,t,n){null!=t.dangerouslySetInnerHTML?l(!1):void 0;var r=u({},t,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return r},mountWrapper:function(e,t){var n=t.defaultValue,r=t.children;null!=r&&(null!=n?l(!1):void 0,Array.isArray(r)&&(r.length<=1?void 0:l(!1),r=r[0]),n=""+r),null==n&&(n="");var a=o.getValue(t);e._wrapperState={initialValue:""+(null!=a?a:n),onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=o.getValue(t);null!=n&&a.updatePropertyByID(e._rootNodeID,"value",""+n)}});e.exports=c},function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue(!1)}var i=n(58),o={handleTopLevel:function(e,t,n,o,a){var s=i.extractEvents(e,t,n,o,a);r(s)}};e.exports=o},function(e,t,n){"use strict";function r(e){var t=p.getID(e),n=f.getReactRootIDFromNodeID(t),r=p.findReactContainerForID(n),i=p.getFirstReactDOM(r);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){a(e)}function a(e){for(var t=p.getFirstReactDOM(m(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var o=p.getID(t)||"";v._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,m(e.nativeEvent))}}function s(e){var t=g(window);e(t)}var u=n(147),l=n(14),c=n(37),f=n(47),p=n(16),d=n(24),h=n(7),m=n(111),g=n(251);h(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?u.listen(r,t,v.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?u.capture(r,t,v.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=s.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(v._enabled){var n=i.getPooled(e,t);try{d.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=v},function(e,t,n){"use strict";var r=n(46),i=n(58),o=n(104),a=n(157),s=n(166),u=n(68),l=n(172),c=n(23),f=n(175),p=n(24),d={Component:o.injection,Class:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:u.injection,NativeComponent:l.injection,Perf:c.injection,RootIndex:f.injection,Updates:p.injection};e.exports=d},function(e,t,n){"use strict";var r=n(156),i=n(158),o=n(157),a=n(284),s=n(20),u=(n(165),n(174)),l=n(107),c=n(7),f=n(319),p=s.createElement,d=s.createFactory,h=s.cloneElement,m={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:f},Component:i,createElement:p,cloneElement:h,isValidElement:s.isValidElement,PropTypes:u,createClass:o.createClass,createFactory:d,createMixin:function(e){return e},DOM:a,version:l,__spread:c};e.exports=m},function(e,t,n){"use strict";function r(e,t,n){g.push({parentID:e,parentNode:null,type:f.INSERT_MARKUP,markupIndex:v.push(t)-1,content:null,fromIndex:null,toIndex:n})}function i(e,t,n){g.push({parentID:e,parentNode:null,type:f.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:t,toIndex:n})}function o(e,t){g.push({parentID:e,parentNode:null,type:f.REMOVE_NODE,markupIndex:null,content:null,fromIndex:t,toIndex:null})}function a(e,t){g.push({parentID:e,parentNode:null,type:f.SET_MARKUP,markupIndex:null,content:t,
fromIndex:null,toIndex:null})}function s(e,t){g.push({parentID:e,parentNode:null,type:f.TEXT_CONTENT,markupIndex:null,content:t,fromIndex:null,toIndex:null})}function u(){g.length&&(c.processChildrenUpdates(g,v),l())}function l(){g.length=0,v.length=0}var c=n(104),f=n(171),p=(n(32),n(39)),d=n(280),h=n(316),m=0,g=[],v=[],y={Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return d.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r){var i;return i=h(t),d.updateChildren(e,i,n,r)},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=this._rootNodeID+a,l=p.mountComponent(s,u,t,n);s._mountIndex=o++,i.push(l)}return i},updateTextContent:function(e){m++;var t=!0;try{var n=this._renderedChildren;d.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChild(n[r]);this.setTextContent(e),t=!1}finally{m--,m||(t?l():u())}},updateMarkup:function(e){m++;var t=!0;try{var n=this._renderedChildren;d.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setMarkup(e),t=!1}finally{m--,m||(t?l():u())}},updateChildren:function(e,t,n){m++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{m--,m||(r?l():u())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,i=this._reconcilerUpdateChildren(r,e,t,n);if(this._renderedChildren=i,i||r){var o,a=0,s=0;for(o in i)if(i.hasOwnProperty(o)){var u=r&&r[o],l=i[o];u===l?(this.moveChild(u,s,a),a=Math.max(u._mountIndex,a),u._mountIndex=s):(u&&(a=Math.max(u._mountIndex,a),this._unmountChild(u)),this._mountChildByNameAtIndex(l,o,s,t,n)),s++}for(o in r)!r.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||this._unmountChild(r[o])}},unmountChildren:function(){var e=this._renderedChildren;d.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){o(this._rootNodeID,e._mountIndex)},setTextContent:function(e){s(this._rootNodeID,e)},setMarkup:function(e){a(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,i){var o=this._rootNodeID+t,a=p.mountComponent(e,o,r,i);e._mountIndex=n,this.createChild(e,a)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};e.exports=y},function(e,t,n){"use strict";var r=n(3),i={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){i.isValidOwner(n)?void 0:r(!1),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i.isValidOwner(n)?void 0:r(!1),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};e.exports=i},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=!e&&s.useCreateElement}var i=n(100),o=n(37),a=n(68),s=n(160),u=n(169),l=n(72),c=n(7),f={initialize:u.getSelectionInformation,close:u.restoreSelection},p={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[f,p,d],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};c(r.prototype,l.Mixin,m),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(295),a={};a.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,r=null===t||t===!1;return n||r||t._owner!==e._owner||t.ref!==e.ref},a.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},e.exports=a},function(e,t){"use strict";var n={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=n},function(e,t,n){"use strict";function r(e){a.isValidElement(e)?void 0:h(!1);var t;try{f.injection.injectBatchingStrategy(l);var n=s.createReactRootID();return t=c.getPooled(!1),t.perform(function(){var r=d(e,null),i=r.mountComponent(n,t,p);return u.addChecksumToMarkup(i)},null)}finally{c.release(t),f.injection.injectBatchingStrategy(o)}}function i(e){a.isValidElement(e)?void 0:h(!1);var t;try{f.injection.injectBatchingStrategy(l);var n=s.createReactRootID();return t=c.getPooled(!0),t.perform(function(){var r=d(e,null);return r.mountComponent(n,t,p)},null)}finally{c.release(t),f.injection.injectBatchingStrategy(o)}}var o=n(163),a=n(20),s=n(47),u=n(170),l=n(298),c=n(300),f=n(24),p=n(57),d=n(113),h=n(3);e.exports={renderToString:r,renderToStaticMarkup:i}},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=o.getPooled(null),this.useCreateElement=!1}var i=n(37),o=n(100),a=n(72),s=n(7),u=n(26),l={initialize:function(){this.reactMountReady.reset()},close:u},c=[l],f={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};s(r.prototype,a.Mixin,f),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r=n(46),i=r.injection.MUST_USE_ATTRIBUTE,o={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},a={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,xlinkActuate:i,xlinkArcrole:i,xlinkHref:i,xlinkRole:i,xlinkShow:i,xlinkTitle:i,xlinkType:i,xmlBase:i,xmlLang:i,xmlSpace:i,y1:i,y2:i,y:i},DOMAttributeNamespaces:{xlinkActuate:o.xlink,xlinkArcrole:o.xlink,xlinkHref:o.xlink,xlinkRole:o.xlink,xlinkShow:o.xlink,xlinkTitle:o.xlink,xlinkType:o.xlink,xmlBase:o.xml,xmlLang:o.xml,xmlSpace:o.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};e.exports=a},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e,t){if(b||null==v||v!==c())return null;var n=r(v);if(!_||!d(_,n)){_=n;var i=l.getPooled(g.select,y,e,t);return i.type="select",i.target=v,a.accumulateTwoPhaseDispatches(i),i}return null}var o=n(31),a=n(59),s=n(14),u=n(169),l=n(40),c=n(150),f=n(180),p=n(35),d=n(152),h=o.topLevelTypes,m=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},v=null,y=null,_=null,b=!1,x=!1,E=p({onSelect:null}),w={eventTypes:g,extractEvents:function(e,t,n,r,o){if(!x)return null;switch(e){case h.topFocus:(f(t)||"true"===t.contentEditable)&&(v=t,y=n,_=null);break;case h.topBlur:v=null,y=null,_=null;break;case h.topMouseDown:b=!0;break;case h.topContextMenu:case h.topMouseUp:return b=!1,i(r,o);case h.topSelectionChange:if(m)break;case h.topKeyDown:case h.topKeyUp:return i(r,o)}return null},didPutListener:function(e,t,n){t===E&&(x=!0)}};e.exports=w},function(e,t){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=r},function(e,t,n){"use strict";var r=n(31),i=n(147),o=n(59),a=n(16),s=n(305),u=n(40),l=n(308),c=n(310),f=n(71),p=n(307),d=n(311),h=n(61),m=n(312),g=n(26),v=n(109),y=n(3),_=n(35),b=r.topLevelTypes,x={abort:{phasedRegistrationNames:{bubbled:_({onAbort:!0}),captured:_({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:_({onBlur:!0}),captured:_({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:_({onCanPlay:!0}),captured:_({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:_({onCanPlayThrough:!0}),captured:_({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:_({onClick:!0}),captured:_({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:_({onContextMenu:!0}),captured:_({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:_({onCopy:!0}),captured:_({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:_({onCut:!0}),captured:_({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:_({onDoubleClick:!0}),captured:_({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:_({onDrag:!0}),captured:_({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:_({onDragEnd:!0}),captured:_({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:_({onDragEnter:!0}),captured:_({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:_({onDragExit:!0}),captured:_({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:_({onDragLeave:!0}),captured:_({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:_({onDragOver:!0}),captured:_({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:_({onDragStart:!0}),captured:_({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:_({onDrop:!0}),captured:_({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:_({onDurationChange:!0}),captured:_({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:_({onEmptied:!0}),captured:_({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:_({onEncrypted:!0}),captured:_({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:_({onEnded:!0}),captured:_({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:_({onError:!0}),captured:_({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:_({onFocus:!0}),captured:_({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:_({onInput:!0}),captured:_({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:_({onKeyDown:!0}),captured:_({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:_({onKeyPress:!0}),captured:_({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:_({onKeyUp:!0}),captured:_({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:_({onLoad:!0}),captured:_({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:_({onLoadedData:!0}),captured:_({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:_({onLoadedMetadata:!0}),captured:_({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:_({onLoadStart:!0}),captured:_({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:_({onMouseDown:!0}),captured:_({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:_({onMouseMove:!0}),captured:_({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:_({onMouseOut:!0}),captured:_({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:_({onMouseOver:!0}),captured:_({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:_({onMouseUp:!0}),captured:_({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:_({onPaste:!0}),captured:_({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:_({onPause:!0}),captured:_({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:_({onPlay:!0}),captured:_({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:_({onPlaying:!0}),captured:_({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:_({onProgress:!0}),captured:_({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:_({onRateChange:!0}),captured:_({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:_({onReset:!0}),captured:_({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:_({onScroll:!0}),captured:_({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:_({onSeeked:!0}),captured:_({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:_({onSeeking:!0}),captured:_({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:_({onStalled:!0}),captured:_({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:_({onSubmit:!0}),captured:_({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:_({onSuspend:!0}),captured:_({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:_({onTimeUpdate:!0}),captured:_({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:_({onTouchCancel:!0}),captured:_({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:_({onTouchEnd:!0}),captured:_({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:_({onTouchMove:!0}),captured:_({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:_({onTouchStart:!0}),captured:_({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:_({onVolumeChange:!0}),captured:_({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:_({onWaiting:!0}),captured:_({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:_({onWheel:!0}),captured:_({onWheelCapture:!0})}}},E={topAbort:x.abort,topBlur:x.blur,topCanPlay:x.canPlay,topCanPlayThrough:x.canPlayThrough,topClick:x.click,topContextMenu:x.contextMenu,topCopy:x.copy,topCut:x.cut,topDoubleClick:x.doubleClick,topDrag:x.drag,topDragEnd:x.dragEnd,topDragEnter:x.dragEnter,topDragExit:x.dragExit,topDragLeave:x.dragLeave,topDragOver:x.dragOver,topDragStart:x.dragStart,topDrop:x.drop,topDurationChange:x.durationChange,topEmptied:x.emptied,topEncrypted:x.encrypted,topEnded:x.ended,topError:x.error,topFocus:x.focus,topInput:x.input,topKeyDown:x.keyDown,topKeyPress:x.keyPress,topKeyUp:x.keyUp,topLoad:x.load,topLoadedData:x.loadedData,topLoadedMetadata:x.loadedMetadata,topLoadStart:x.loadStart,topMouseDown:x.mouseDown,topMouseMove:x.mouseMove,topMouseOut:x.mouseOut,topMouseOver:x.mouseOver,topMouseUp:x.mouseUp,topPaste:x.paste,topPause:x.pause,topPlay:x.play,topPlaying:x.playing,topProgress:x.progress,topRateChange:x.rateChange,topReset:x.reset,topScroll:x.scroll,topSeeked:x.seeked,topSeeking:x.seeking,topStalled:x.stalled,topSubmit:x.submit,topSuspend:x.suspend,topTimeUpdate:x.timeUpdate,topTouchCancel:x.touchCancel,topTouchEnd:x.touchEnd,topTouchMove:x.touchMove,topTouchStart:x.touchStart,topVolumeChange:x.volumeChange,topWaiting:x.waiting,topWheel:x.wheel};for(var w in E)E[w].dependencies=[w];var S=_({onClick:null}),k={},M={eventTypes:x,extractEvents:function(e,t,n,r,i){var a=E[e];if(!a)return null;var g;switch(e){case b.topAbort:case b.topCanPlay:case b.topCanPlayThrough:case b.topDurationChange:case b.topEmptied:case b.topEncrypted:case b.topEnded:case b.topError:case b.topInput:case b.topLoad:case b.topLoadedData:case b.topLoadedMetadata:case b.topLoadStart:case b.topPause:case b.topPlay:case b.topPlaying:case b.topProgress:case b.topRateChange:case b.topReset:case b.topSeeked:case b.topSeeking:case b.topStalled:case b.topSubmit:case b.topSuspend:case b.topTimeUpdate:case b.topVolumeChange:case b.topWaiting:g=u;break;case b.topKeyPress:if(0===v(r))return null;case b.topKeyDown:case b.topKeyUp:g=c;break;case b.topBlur:case b.topFocus:g=l;break;case b.topClick:if(2===r.button)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:g=f;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:g=p;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:g=d;break;case b.topScroll:g=h;break;case b.topWheel:g=m;break;case b.topCopy:case b.topCut:case b.topPaste:g=s}g?void 0:y(!1);var _=g.getPooled(a,n,r,i);return o.accumulateTwoPhaseDispatches(_),_},didPutListener:function(e,t,n){if(t===S){var r=a.getNode(e);k[e]||(k[e]=i.listen(r,"click",g))}},willDeleteListener:function(e,t){t===S&&(k[e].remove(),delete k[e])}};e.exports=M},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(40),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(40),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(71),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(61),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(40),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(61),o=n(109),a=n(317),s=n(110),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,u),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(61),o=n(110),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var i=n(71),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0,o=e.length,a=-4&o;a>i;){for(;i<Math.min(i+4096,a);i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;o>i;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=n(153),o=i.isUnitlessNumber;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i){return i}n(7),n(6);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=e,i=void 0===r[n];i&&null!=t&&(r[n]=t)}function i(e){if(null==e)return e;var t={};return o(e,r,t),t}var o=n(117);n(6);e.exports=i},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(109),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,t>=o&&a>=t)return{node:i,offset:t-o};o=a}i=n(r(i))}}e.exports=i},function(e,t,n){"use strict";function r(e){return i.isValidElement(e)?void 0:o(!1),e}var i=n(20),o=n(3);e.exports=r},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(74);e.exports=r},function(e,t,n){"use strict";var r=n(16);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+a,e[1]=(r+=e[1])*o+s}}function r(e){if(!e)return t;var n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var u=Math.round((e[0]-a)/i),l=Math.round((e[1]-s)/o);e[0]=u-n,e[1]=l-r,n=u,r=l}}function i(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function o(e,t){for(var n=0,r=e.length;r>n;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function a(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:u(e,t)};return null==t.id&&delete n.id,n}function u(e,t){function r(e,t){t.length&&t.pop();for(var n,r=f[0>e?~e:e],o=0,a=r.length;a>o;++o)t.push(n=r[o].slice()),c(n,o);0>e&&i(t,a)}function o(e){return e=e.slice(),c(e,0),e}function a(e){for(var t=[],n=0,i=e.length;i>n;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0].slice());return t}function u(e){return e.map(s)}function l(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(l)}:t in p?{type:t,coordinates:p[t](e)}:null}var c=n(e.transform),f=e.arcs,p={Point:function(e){return o(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(o)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return u(e.arcs)},MultiPolygon:function(e){return e.arcs.map(u)}};return l(t)}function l(e,t){function n(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],0>t?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[0>e?~e:e]=1}),s.push(r)}}var i={},o={},a={},s=[],u=-1;return t.forEach(function(n,r){var i,o=e.arcs[0>n?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],u=i[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=u,r=o[u]){delete o[r.start];var l=r===t?t:t.concat(r);o[l.start=t.start]=a[l.end=r.end]=l}else o[t.start]=a[t.end]=t;else if(t=o[u])if(delete o[t.start],t.unshift(e),t.start=s,r=a[s]){delete a[r.end];var c=r===t?t:r.concat(t);o[c.start=r.start]=a[c.end=t.end]=c}else o[t.start]=a[t.end]=t;else t=[e],o[t.start=s]=a[t.end=u]=t}),r(a,o),r(o,a),t.forEach(function(e){i[0>e?~e:e]||s.push([e])}),s}function c(e){return u(e,f.apply(this,arguments))}function f(e,t,n){function r(e){var t=0>e?~e:e;(c[t]||(c[t]=[])).push({i:e,g:u})}function i(e){e.forEach(r)}function o(e){e.forEach(i)}function a(e){"GeometryCollection"===e.type?e.geometries.forEach(a):e.type in f&&(u=e,f[e.type](e.arcs))}var s=[];if(arguments.length>1){var u,c=[],f={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};a(t),c.forEach(arguments.length<3?function(e){s.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&s.push(e[0].i)})}else for(var p=0,d=e.arcs.length;d>p;++p)s.push(p);return{type:"MultiLineString",arcs:l(e,s)}}function p(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function d(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return o/2}function h(e){return u(e,m.apply(this,arguments))}function m(e,t){function n(e){e.forEach(function(t){t.forEach(function(t){(i[t=0>t?~t:t]||(i[t]=[])).push(e)})}),o.push(e)}function r(t){return Math.abs(d(u(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}var i={},o=[],a=[];return t.forEach(function(e){"Polygon"===e.type?n(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(n)}),o.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,a.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[0>e?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),o.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:a.map(function(t){var n,o=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[0>e?~e:e].length<2&&o.push(e)})})}),o=l(e,o),(n=o.length)>1)for(var a,s,u=1,c=r(o[0]);n>u;++u)(a=r(o[u]))>c&&(s=o[0],o[0]=o[u],o[u]=s,c=a);return o})}}function g(e){function t(e,t){e.forEach(function(e){0>e&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in s&&s[e.type](e.arcs,t)}var i={},a=e.map(function(){return[]}),s={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var u in i)for(var l=i[u],c=l.length,f=0;c>f;++f)for(var p=f+1;c>p;++p){var d,h=l[f],m=l[p];(d=a[h])[u=o(d,m)]!==m&&d.splice(u,0,m),(d=a[m])[u=o(d,h)]!==h&&d.splice(u,0,h)}return a}function v(e,t){return e[1][2]-t[1][2]}function y(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,i=r[n];if(v(e,i)>=0)break;r[i._=t]=i,r[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,o=n-1,a=t,s=r[a];if(i>o&&v(r[o],s)<0&&(s=r[a=o]),i>n&&v(r[n],s)<0&&(s=r[a=n]),a===t)break;r[s._=t]=s,r[e._=t=a]=e}}var n={},r=[],i=0;return n.push=function(t){return e(r[t._=i]=t,i++),i},n.pop=function(){if(!(0>=i)){var e,n=r[0];return--i>0&&(e=r[i],t(r[e._=0]=e,0)),n}},n.remove=function(n){var o,a=n._;if(r[a]===n)return a!==--i&&(o=r[i],(v(o,n)<0?e:t)(r[o._=a]=o,a)),a},n}function _(e,t){function i(e){s.remove(e),e[1][2]=t(e),s.push(e)}var o=n(e.transform),a=r(e.transform),s=y();return t||(t=p),e.arcs.forEach(function(e){var n,r,u,l,c=[],f=0;for(r=0,u=e.length;u>r;++r)l=e[r],o(e[r]=[l[0],l[1],1/0],r);for(r=1,u=e.length-1;u>r;++r)n=e.slice(r-1,r+2),n[1][2]=t(n),c.push(n),s.push(n);for(r=0,u=c.length;u>r;++r)n=c[r],n.previous=c[r-1],n.next=c[r+1];for(;n=s.pop();){var p=n.previous,d=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],p&&(p.next=d,p[2]=n[2],i(p)),d&&(d.previous=p,d[0]=n[0],i(d))}e.forEach(a)}),e}var b="1.6.26";e.version=b,e.mesh=c,e.meshArcs=f,e.merge=h,e.mergeArcs=m,e.feature=a,e.neighbors=g,e.presimplify=_})},function(e,t,n){function r(){}var i=n(1),o=n(2),a=n(324),s=n(62),u=n(181),l=n(119),c=n(48),f=n(182),p=n(76),d=r.prototype;d.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this._requestedIndexes={},this.doNotPropagate={}},d.rank=function(){return++this._rank},d.values=function(e,t,n){var r,o,a=e===p.SIGNALS?this._signals:this._data,s=void 0!==t?t:i.keys(a);if(Array.isArray(s)){for(r=n||{},o=0;o<s.length;++o)r[s[o]]=a[s[o]].values();return r}return a[s].values()},d.dataValues=function(e){return this.values(p.DATA,e)},d.signalValues=function(e){return this.values(p.SIGNALS,e)},d.data=function(e,t,n){var r=this._data;if(arguments.length)return 1===arguments.length?r[e]:r[e]=new u(this,e,n).pipeline(t);var i,o=[];for(i in r)o.push(r[i]);return o},d.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}return this._signals[e]=new f(this,e,t)},d.signalRef=function(e){Array.isArray(e)||(e=i.field(e));var t=this.signal(e[0]).value();if(e.length>1)for(var n=1,r=e.length;r>n;++n)t=t[e[n]];return t},d.requestIndex=function(e,t){var n=this._requestedIndexes,r=n[e]||(n[e]={});return r[t]=!0,this},d.buildIndexes=function(){var e,t,n,r,o,a,s,u,l=this._requestedIndexes,c=i.keys(l);for(e=0,t=c.length;t>e;++e){if(a=this.data(o=c[e]),!a)throw Error("Data source "+i.str(o)+" does not exist.");for(s=i.keys(l[o]),n=0,r=s.length;r>n;++n)null!==(u=s[n])&&(a.getIndex(u),l[o][u]=null)}return this},d.propagate=function(e,t,n,r){var i,o,u,l,c,p,d,h,m={},g=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,m[t._id]=e,g.push(t.qrank(!0));g.size()>0;)if(t=g.peek(),h=t instanceof f,e=m[t._id],t.rank()!==t.qrank())g.replace(t.qrank(!0));else if(g.pop(),m[t._id]=null,i=t._listeners,(!h||h&&!r)&&(e=this.evaluate(e,t)),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=s.create(e,!0)),p=0,d=i.length;d>p;++p)if(o=i[p],void 0!==(u=m[o._id])){if(null===u)throw Error("Already propagated to node.");if(u===e)continue;if(l=e.add.length||e.mod.length||e.rem.length,c=u.add.length||u.mod.length||u.rem.length,l&&c)throw Error("Multiple changeset pulses to same node");m[o._id]=l?e:u,m[o._id].reflow=e.reflow||u.reflow}else g.push(o.qrank(!0)),m[o._id]=e;return this.done(e)},d.done=function(e){o.debug(e,["bookkeeping"]);for(var t in e.data)this.data(t).synchronize();return this},d.preprocess=function(e){for(var t,n,r,i,o=this,a=0,s=0;s<e.length;++s)t=e[s],t.batch()&&!t._collector&&(n||!r?(t=new l(o),e.splice(s,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,a=a||t.mutates(),t.produces()&&(e.splice(s+1,0,new l(o)),n=!1);return{router:n,collector:r,mutates:a}},d.connect=function(e){var t,n,r,o,a,s,u,l,c,f;for(a=0,s=e.length;s>a;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(p.DATA),u=0,l=r.length;l>u;++u){if(!(c=this.data(f=r[u])))throw new Error("Unknown data source "+i.str(f));c.addListener(t)}for(o=n.dependency(p.SIGNALS),u=0,l=o.length;l>u;++u){if(!(c=this.signal(f=o[u])))throw new Error("Unknown signal "+i.str(f));c.addListener(t)}a>0&&e[a-1].addListener(n)}return e},d.disconnect=function(e){var t,n,r,i,o,a,s,u;for(o=0,a=e.length;a>o;++o){for(n=e[o],n.collector()&&(t=n),r=n.dependency(p.DATA),s=0,u=r.length;u>s;++s)this.data(r[s]).removeListener(t);for(i=n.dependency(p.SIGNALS),s=0,u=i.length;u>s;++s)this.signal(i[s]).removeListener(t);n.disconnect()}return e},d.synchronize=function(e){var t,n,r,i,o,a,s,u,l={};for(r=0,i=e.length;i>r;++r)if(t=e[r],t.collector())for(o=0,n=t.data(),a=n.length;a>o;++o)u=(s=n[o])._id,l[u]||(c.prev_update(s),l[u]=1);return this},d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp,r=t.router()||e.add.length||e.rem.length;return r||!n||t.reevaluate(e)},d.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},e.exports=r},function(e,t){function n(e){this.cmp=e,this.nodes=[]}function r(e,t,n,r){var i,o,a;for(i=e[n];n>t&&(a=n-1>>1,o=e[a],r(i,o)<0);)e[n]=o,
n=a;return e[n]=i}function i(e,t,n){for(var i,o=t,a=e.length,s=e[t],u=2*t+1;a>u;)i=u+1,a>i&&n(e[u],e[i])>=0&&(u=i),e[t]=e[u],t=u,u=2*t+1;return e[t]=s,r(e,o,t,n)}var o=n.prototype;o.size=function(){return this.nodes.length},o.clear=function(){return this.nodes=[],this},o.peek=function(){return this.nodes[0]},o.push=function(e){var t=this.nodes;return t.push(e),r(t,0,t.length-1,this.cmp)},o.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,i(t,0,this.cmp)):e=n,e},o.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,i(t,0,this.cmp),n},o.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,i(t,0,this.cmp)),e},e.exports=n},function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}e.exports=function(e){function t(e){var t={code:o(e),globals:i(h),fields:i(m),dataSources:i(g),defs:u};return h={},m={},g={},t}function o(e){if("string"==typeof e)return e;var t=y[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}e=e||{};var a=e.constants||n(184),s=(e.functions||n(185))(o),u=e.functionDefs?e.functionDefs(o):{},l=e.idWhiteList?r(e.idWhiteList):null,c=e.idBlackList?r(e.idBlackList):null,f=0,p=e.fieldVar||"datum",d=e.globalVar||"signals",h={},m={},g={},v="function"==typeof d?d:function(e){return d+'["'+e+'"]'},y={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(a.hasOwnProperty(t))return a[t];if(l)return l.hasOwnProperty(t)?t:(h[t]=1,v(t));if(c&&c.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(o).join("\n")},MemberExpression:function(e){var t=!e.computed,n=o(e.object);t&&(f+=1);var r=o(e.property);return n===p&&(m[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=s.hasOwnProperty(t)&&s[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,h,m,g):r+"("+n.map(o).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(o).join(",")+"]"},BinaryExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+o(e.argument)+")"},ConditionalExpression:function(e){return"("+o(e.test)+"?"+o(e.consequent)+":"+o(e.alternate)+")"},LogicalExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(o).join(",")+"}"},Property:function(e){f+=1;var t=o(e.key);return f-=1,t+":"+o(e.value)},ExpressionStatement:function(e){return o(e.expression)}};return t.functions=s,t.functionDefs=u,t.constants=a,t}},function(e,t,n){var r=n(327),i=n(325),o=e.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,a=function(t){var i=n(o.parse(t));e[r]='"use strict"; return ('+i.code+");";var a=Function.apply(null,e);return i.fn=e.length>8?function(){return a.apply(i,arguments)}:function(e,t,n,r,o,s,u){return a.call(i,e,t,n,r,o,s,u)},i};return a.codegen=n,a},functions:n(185),constants:n(184)}},function(e,t){e.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function a(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&Se.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&Se.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function u(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function l(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function c(e){if(Me&&l(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Te;Oe>Te;)if(e=ke.charCodeAt(Te),i(e))++Te;else{if(!o(e))break;++Te,13===e&&10===ke.charCodeAt(Te)&&++Te,++Ae,Ce=Te,t=!0}}function p(e){var t,r,i,o=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(Oe>Te&&n(ke[Te])))return"";i=ke[Te++],o=16*o+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(o)}function d(){var e,t,r,i;for(e=ke[Te],t=0,"}"===e&&z({},we.UnexpectedToken,"ILLEGAL");Oe>Te&&(e=ke[Te++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&z({},we.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function h(){var e,t;for(e=ke.charCodeAt(Te++),t=String.fromCharCode(e),92===e&&(117!==ke.charCodeAt(Te)&&z({},we.UnexpectedToken,"ILLEGAL"),++Te,e=p("u"),e&&"\\"!==e&&a(e.charCodeAt(0))||z({},we.UnexpectedToken,"ILLEGAL"),t=e);Oe>Te&&(e=ke.charCodeAt(Te),s(e));)++Te,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ke.charCodeAt(Te)&&z({},we.UnexpectedToken,"ILLEGAL"),++Te,e=p("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||z({},we.UnexpectedToken,"ILLEGAL"),t+=e);return t}function m(){var e,t;for(e=Te++;Oe>Te;){if(t=ke.charCodeAt(Te),92===t)return Te=e,h();if(!s(t))break;++Te}return ke.slice(e,Te)}function g(){var e,t,n;return e=Te,t=92===ke.charCodeAt(Te)?h():m(),n=1===t.length?_e.Identifier:c(t)?_e.Keyword:"null"===t?_e.NullLiteral:"true"===t||"false"===t?_e.BooleanLiteral:_e.Identifier,{type:n,value:t,lineNumber:Ae,lineStart:Ce,start:e,end:Te}}function v(){var e,t,n,r,i=Te,o=ke.charCodeAt(Te),a=ke[Te];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Te,Le.tokenize&&(40===o?Le.openParenToken=Le.tokens.length:123===o&&(Le.openCurlyToken=Le.tokens.length)),{type:_e.Punctuator,value:String.fromCharCode(o),lineNumber:Ae,lineStart:Ce,start:i,end:Te};default:if(e=ke.charCodeAt(Te+1),61===e)switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Te+=2,{type:_e.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(e),lineNumber:Ae,lineStart:Ce,start:i,end:Te};case 33:case 61:return Te+=2,61===ke.charCodeAt(Te)&&++Te,{type:_e.Punctuator,value:ke.slice(i,Te),lineNumber:Ae,lineStart:Ce,start:i,end:Te}}}return r=ke.substr(Te,4),">>>="===r?(Te+=4,{type:_e.Punctuator,value:r,lineNumber:Ae,lineStart:Ce,start:i,end:Te}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Te+=3,{type:_e.Punctuator,value:n,lineNumber:Ae,lineStart:Ce,start:i,end:Te}):(t=n.substr(0,2),a===t[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?(Te+=2,{type:_e.Punctuator,value:t,lineNumber:Ae,lineStart:Ce,start:i,end:Te}):"<>=!+-*%&|^/".indexOf(a)>=0?(++Te,{type:_e.Punctuator,value:a,lineNumber:Ae,lineStart:Ce,start:i,end:Te}):void z({},we.UnexpectedToken,"ILLEGAL")))}function y(e){for(var t="";Oe>Te&&n(ke[Te]);)t+=ke[Te++];return 0===t.length&&z({},we.UnexpectedToken,"ILLEGAL"),a(ke.charCodeAt(Te))&&z({},we.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Ae,lineStart:Ce,start:e,end:Te}}function _(e){for(var n="0"+ke[Te++];Oe>Te&&r(ke[Te]);)n+=ke[Te++];return(a(ke.charCodeAt(Te))||t(ke.charCodeAt(Te)))&&z({},we.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:Ae,lineStart:Ce,start:e,end:Te}}function b(){var n,i,o;if(o=ke[Te],e(t(o.charCodeAt(0))||"."===o,"Numeric literal must start with a decimal digit or a decimal point"),i=Te,n="","."!==o){if(n=ke[Te++],o=ke[Te],"0"===n){if("x"===o||"X"===o)return++Te,y(i);if(r(o))return _(i);o&&t(o.charCodeAt(0))&&z({},we.UnexpectedToken,"ILLEGAL")}for(;t(ke.charCodeAt(Te));)n+=ke[Te++];o=ke[Te]}if("."===o){for(n+=ke[Te++];t(ke.charCodeAt(Te));)n+=ke[Te++];o=ke[Te]}if("e"===o||"E"===o)if(n+=ke[Te++],o=ke[Te],"+"!==o&&"-"!==o||(n+=ke[Te++]),t(ke.charCodeAt(Te)))for(;t(ke.charCodeAt(Te));)n+=ke[Te++];else z({},we.UnexpectedToken,"ILLEGAL");return a(ke.charCodeAt(Te))&&z({},we.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseFloat(n),lineNumber:Ae,lineStart:Ce,start:i,end:Te}}function x(){var t,n,i,a,s,u,l,c,f="",h=!1;for(l=Ae,c=Ce,t=ke[Te],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Te,++Te;Oe>Te;){if(i=ke[Te++],i===t){t="";break}if("\\"===i)if(i=ke[Te++],i&&o(i.charCodeAt(0)))++Ae,"\r"===i&&"\n"===ke[Te]&&++Te,Ce=Te;else switch(i){case"u":case"x":"{"===ke[Te]?(++Te,f+=d()):(u=Te,s=p(i),s?f+=s:(Te=u,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="	";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\x0B";break;default:r(i)?(a="01234567".indexOf(i),0!==a&&(h=!0),Oe>Te&&r(ke[Te])&&(h=!0,a=8*a+"01234567".indexOf(ke[Te++]),"0123".indexOf(i)>=0&&Oe>Te&&r(ke[Te])&&(a=8*a+"01234567".indexOf(ke[Te++]))),f+=String.fromCharCode(a)):f+=i}else{if(o(i.charCodeAt(0)))break;f+=i}}return""!==t&&z({},we.UnexpectedToken,"ILLEGAL"),{type:_e.StringLiteral,value:f,octal:h,startLineNumber:l,startLineStart:c,lineNumber:Ae,lineStart:Ce,start:n,end:Te}}function E(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void z({},we.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){z({},we.InvalidRegExp)}try{return new RegExp(e,t)}catch(o){return null}}function w(){var t,n,r,i,a;for(t=ke[Te],e("/"===t,"Regular expression literal must start with a slash"),n=ke[Te++],r=!1,i=!1;Oe>Te;)if(t=ke[Te++],n+=t,"\\"===t)t=ke[Te++],o(t.charCodeAt(0))&&z({},we.UnterminatedRegExp),n+=t;else if(o(t.charCodeAt(0)))z({},we.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||z({},we.UnterminatedRegExp),a=n.substr(1,n.length-2),{value:a,literal:n}}function S(){var e,t,n,r;for(t="",n="";Oe>Te&&(e=ke[Te],s(e.charCodeAt(0)));)if(++Te,"\\"===e&&Oe>Te)if(e=ke[Te],"u"===e){if(++Te,r=Te,e=p("u"))for(n+=e,t+="\\u";Te>r;++r)t+=ke[r];else Te=r,n+="u",t+="\\u";q({},we.UnexpectedToken,"ILLEGAL")}else t+="\\",q({},we.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function k(){var e,t,n,r;return Ne=null,f(),e=Te,t=w(),n=S(),r=E(t.value,n.value),Le.tokenize?{type:_e.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Ae,lineStart:Ce,start:e,end:Te}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Te}}function M(){var e,t,n,r;return f(),e=Te,t={start:{line:Ae,column:Te-Ce}},n=k(),t.end={line:Ae,column:Te-Ce},Le.tokenize||(Le.tokens.length>0&&(r=Le.tokens[Le.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||Le.tokens.pop())),Le.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Te],loc:t})),n}function T(e){return e.type===_e.Identifier||e.type===_e.Keyword||e.type===_e.BooleanLiteral||e.type===_e.NullLiteral}function A(){var e,t;if(e=Le.tokens[Le.tokens.length-1],!e)return M();if("Punctuator"===e.type){if("]"===e.value)return v();if(")"===e.value)return t=Le.tokens[Le.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?v():M();if("}"===e.value){if(Le.tokens[Le.openCurlyToken-3]&&"Keyword"===Le.tokens[Le.openCurlyToken-3].type){if(t=Le.tokens[Le.openCurlyToken-4],!t)return v()}else{if(!Le.tokens[Le.openCurlyToken-4]||"Keyword"!==Le.tokens[Le.openCurlyToken-4].type)return v();if(t=Le.tokens[Le.openCurlyToken-5],!t)return M()}return v()}return M()}return"Keyword"===e.type&&"this"!==e.value?M():v()}function C(){var e;return f(),Te>=Oe?{type:_e.EOF,lineNumber:Ae,lineStart:Ce,start:Te,end:Te}:(e=ke.charCodeAt(Te),a(e)?g():40===e||41===e||59===e?v():39===e||34===e?x():46===e?t(ke.charCodeAt(Te+1))?b():v():t(e)?b():Le.tokenize&&47===e?A():v())}function O(){var e,t,n,r;return f(),e={start:{line:Ae,column:Te-Ce}},t=C(),e.end={line:Ae,column:Te-Ce},t.type!==_e.EOF&&(n=ke.slice(t.start,t.end),r={type:be[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.tokens.push(r)),t}function N(){var e;return e=Ne,Te=e.end,Ae=e.lineNumber,Ce=e.lineStart,Ne="undefined"!=typeof Le.tokens?O():C(),Te=e.end,Ae=e.lineNumber,Ce=e.lineStart,e}function I(){var e,t,n;e=Te,t=Ae,n=Ce,Ne="undefined"!=typeof Le.tokens?O():C(),Te=e,Ae=t,Ce=n}function L(){this.line=Ae,this.column=Te-Ce}function D(){this.start=new L,this.end=null}function P(e){e.type===_e.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function R(){Te=Ne.start,Ne.type===_e.StringLiteral?(Ae=Ne.startLineNumber,Ce=Ne.startLineStart):(Ae=Ne.lineNumber,Ce=Ne.lineStart),Le.range&&(this.range=[Te,0]),Le.loc&&(this.loc=new D)}function U(e){Le.range&&(this.range=[e.start,0]),Le.loc&&(this.loc=new P(e))}function j(){var e,t,n,r;return e=Te,t=Ae,n=Ce,f(),r=Ae!==t,Te=e,Ae=t,Ce=n,r}function z(t,n){var r,i=Array.prototype.slice.call(arguments,2),o=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+o),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-Ce+1):(r=new Error("Line "+Ae+": "+o),r.index=Te,r.lineNumber=Ae,r.column=Te-Ce+1),r.description=o,r}function q(){try{z.apply(null,arguments)}catch(e){if(!Le.errors)throw e;Le.errors.push(e)}}function F(e){if(e.type===_e.EOF&&z(e,we.UnexpectedEOS),e.type===_e.NumericLiteral&&z(e,we.UnexpectedNumber),e.type===_e.StringLiteral&&z(e,we.UnexpectedString),e.type===_e.Identifier&&z(e,we.UnexpectedIdentifier),e.type===_e.Keyword){if(u(e.value))z(e,we.UnexpectedReserved);else if(Me&&l(e.value))return void q(e,we.StrictReservedWord);z(e,we.UnexpectedToken,e.value)}z(e,we.UnexpectedToken,e.value)}function B(e){var t=N();t.type===_e.Punctuator&&t.value===e||F(t)}function Y(e){if(Le.errors){var t=Ne;t.type!==_e.Punctuator&&t.value!==e?q(t,we.UnexpectedToken,t.value):N()}else B(e)}function H(e){return Ne.type===_e.Punctuator&&Ne.value===e}function V(e){return Ne.type===_e.Keyword&&Ne.value===e}function W(){var e;return 59===ke.charCodeAt(Te)||H(";")?void N():(e=Ae,f(),void(Ae===e&&(Ne.type===_e.EOF||H("}")||F(Ne))))}function $(){var e=[],t=new R;for(B("[");!H("]");)H(",")?(N(),e.push(null)):(e.push(le()),H("]")||B(","));return N(),t.finishArrayExpression(e)}function G(){var e,t=new R;return e=N(),e.type===_e.StringLiteral||e.type===_e.NumericLiteral?(Me&&e.octal&&q(e,we.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function X(){var e,t,n,r,i=new R;return e=Ne,e.type===_e.Identifier?(n=G(),B(":"),r=le(),i.finishProperty("init",n,r)):e.type!==_e.EOF&&e.type!==_e.Punctuator?(t=G(),B(":"),r=le(),i.finishProperty("init",t,r)):void F(e)}function K(){var e,t,n,r,i=[],o={},a=String,s=new R;for(B("{");!H("}");)e=X(),t=e.key.type===xe.Identifier?e.key.name:a(e.key.value),r="init"===e.kind?Ee.Data:"get"===e.kind?Ee.Get:Ee.Set,n="$"+t,Object.prototype.hasOwnProperty.call(o,n)?(o[n]===Ee.Data?Me&&r===Ee.Data?q({},we.StrictDuplicateProperty):r!==Ee.Data&&q({},we.AccessorDataProperty):r===Ee.Data?q({},we.AccessorDataProperty):o[n]&r&&q({},we.AccessorGetSet),o[n]|=r):o[n]=r,i.push(e),H("}")||Y(",");return B("}"),s.finishObjectExpression(i)}function J(){var e;return B("("),++Ie.parenthesisCount,e=ce(),B(")"),e}function Z(){var e,t,n,r;if(H("("))return J();if(H("["))return $();if(H("{"))return K();if(e=Ne.type,r=new R,e===_e.Identifier||De[Ne.value])n=r.finishIdentifier(N().value);else if(e===_e.StringLiteral||e===_e.NumericLiteral)Me&&Ne.octal&&q(Ne,we.StrictOctalLiteral),n=r.finishLiteral(N());else{if(e===_e.Keyword)throw new Error("Disabled.");e===_e.BooleanLiteral?(t=N(),t.value="true"===t.value,n=r.finishLiteral(t)):e===_e.NullLiteral?(t=N(),t.value=null,n=r.finishLiteral(t)):H("/")||H("/=")?(n="undefined"!=typeof Le.tokens?r.finishLiteral(M()):r.finishLiteral(k()),I()):F(N())}return n}function Q(){var e=[];if(B("("),!H(")"))for(;Oe>Te&&(e.push(le()),!H(")"));)Y(",");return B(")"),e}function ee(){var e,t=new R;return e=N(),T(e)||F(e),t.finishIdentifier(e.value)}function te(){return B("."),ee()}function ne(){var e;return B("["),e=ce(),B("]"),e}function re(){var e,t,n,r,i=Ie.allowIn;for(r=Ne,Ie.allowIn=!0,e=Z();;)if(H("."))n=te(),e=new U(r).finishMemberExpression(".",e,n);else if(H("("))t=Q(),e=new U(r).finishCallExpression(e,t);else{if(!H("["))break;n=ne(),e=new U(r).finishMemberExpression("[",e,n)}return Ie.allowIn=i,e}function ie(){var e=re();if(Ne.type===_e.Punctuator&&(H("++")||H("--"))&&!j())throw new Error("Disabled.");return e}function oe(){var e,t,n;if(Ne.type!==_e.Punctuator&&Ne.type!==_e.Keyword)t=ie();else{if(H("++")||H("--"))throw new Error("Disabled.");if(H("+")||H("-")||H("~")||H("!"))n=Ne,e=N(),t=oe(),t=new U(n).finishUnaryExpression(e.value,t);else{if(V("delete")||V("void")||V("typeof"))throw new Error("Disabled.");t=ie()}}return t}function ae(e,t){var n=0;if(e.type!==_e.Punctuator&&e.type!==_e.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function se(){var e,t,n,r,i,o,a,s,u,l;if(e=Ne,u=oe(),r=Ne,i=ae(r,Ie.allowIn),0===i)return u;for(r.prec=i,N(),t=[e,Ne],a=oe(),o=[u,r,a];(i=ae(Ne,Ie.allowIn))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=new U(t[t.length-1]).finishBinaryExpression(s,u,a),o.push(n);r=N(),r.prec=i,o.push(r),t.push(Ne),n=oe(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)n=new U(t.pop()).finishBinaryExpression(o[l-1].value,o[l-2],n),l-=2;return n}function ue(){var e,t,n,r,i;return i=Ne,e=se(),H("?")&&(N(),t=Ie.allowIn,Ie.allowIn=!0,n=le(),Ie.allowIn=t,B(":"),r=le(),e=new U(i).finishConditionalExpression(e,n,r)),e}function le(){var e,t,n,r;return e=Ie.parenthesisCount,r=Ne,t=Ne,n=ue()}function ce(){var e=le();if(H(","))throw new Error("Disabled.");return e}function fe(e){var t=ce();return W(),e.finishExpressionStatement(t)}function pe(){var e,t,n=Ne.type;if(n===_e.EOF&&F(Ne),n===_e.Punctuator&&"{"===Ne.value)throw new Error("Disabled.");if(t=new R,n===_e.Punctuator)switch(Ne.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===_e.Keyword)throw new Error("Disabled.");return e=ce(),W(),t.finishExpressionStatement(e)}function de(){if(Ne.type===_e.Keyword)switch(Ne.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return pe()}return Ne.type!==_e.EOF?pe():void 0}function he(){for(var e,t,n,r,i=[];Oe>Te&&(t=Ne,t.type===_e.StringLiteral)&&(e=de(),i.push(e),e.expression.type===xe.Literal);)n=ke.slice(t.start+1,t.end-1),"use strict"===n?(Me=!0,r&&q(r,we.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;Oe>Te&&(e=de(),"undefined"!=typeof e);)i.push(e);return i}function me(){var e,t;return f(),I(),t=new R,Me=!0,e=he(),t.finishProgram(e)}function ge(){var e,t,n,r=[];for(e=0;e<Le.tokens.length;++e)t=Le.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.range&&(n.range=t.range),Le.loc&&(n.loc=t.loc),r.push(n);Le.tokens=r}function ve(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),ke=e,Te=0,Ae=ke.length>0?1:0,Ce=0,Oe=ke.length,Ne=null,Ie={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},t=t||{},t.tokens=!0,Le.tokens=[],Le.tokenize=!0,Le.openParenToken=-1,Le.openCurlyToken=-1,Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]);try{if(I(),Ne.type===_e.EOF)return Le.tokens;for(N();Ne.type!==_e.EOF;)try{N()}catch(i){if(Le.errors){Le.errors.push(i);break}throw i}ge(),r=Le.tokens,"undefined"!=typeof Le.errors&&(r.errors=Le.errors)}catch(o){throw o}finally{Le={}}return r}function ye(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),ke=e,Te=0,Ae=ke.length>0?1:0,Ce=0,Oe=ke.length,Ne=null,Ie={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},"undefined"!=typeof t&&(Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,Le.loc&&null!==t.source&&void 0!==t.source&&(Le.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(Le.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]));try{n=me(),"undefined"!=typeof Le.tokens&&(ge(),n.tokens=Le.tokens),"undefined"!=typeof Le.errors&&(n.errors=Le.errors)}catch(i){throw i}finally{Le={}}return n}var _e,be,xe,Ee,we,Se,ke,Me,Te,Ae,Ce,Oe,Ne,Ie,Le;_e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},be={},be[_e.BooleanLiteral]="Boolean",be[_e.EOF]="<end>",be[_e.Identifier]="Identifier",be[_e.Keyword]="Keyword",be[_e.NullLiteral]="Null",be[_e.NumericLiteral]="Numeric",be[_e.Punctuator]="Punctuator",be[_e.StringLiteral]="String",be[_e.RegularExpression]="RegularExpression",xe={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},Ee={Data:1,Get:2,Set:4},we={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},Se={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},U.prototype=R.prototype={finish:function(){Le.range&&(this.range[1]=Te),Le.loc&&(this.loc.end=new L,Le.source&&(this.loc.source=Le.source))},finishArrayExpression:function(e){return this.type=xe.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=xe.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?xe.LogicalExpression:xe.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=xe.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=xe.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=xe.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=xe.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=xe.Literal,this.value=e.value,this.raw=ke.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=xe.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=xe.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=xe.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=xe.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=xe.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var De={"if":1,"this":1};return{tokenize:ve,parse:ye}}()},function(e,t,n){"use strict";function r(e){var t=s.normalize(e),n=l.buildModel(t,null,"");return n.parse(),i(n)}function i(e){var t=e.config(),n=u.extend({width:1,height:1,padding:"auto"},t.viewport?{viewport:t.viewport}:{},t.background?{background:t.background}:{},{data:[].concat(e.assembleData([]),e.assembleLayout([])),marks:[o(e)]});return{spec:n}}function o(e){var t=u.extend({name:e.name("root"),type:"group"},e.description()?{description:e.description()}:{},{from:{data:a.LAYOUT},properties:{update:u.extend({width:{field:"width"},height:{field:"height"}},e.assembleParentGroupProperties(e.config().cell))}});return u.extend(t,e.assembleGroup())}var a=n(33),s=n(125),u=n(5),l=n(15);t.compile=r,t.assembleRootGroup=o},function(e,t,n){"use strict";function r(e,t,n){return u.extend(["filled","opacity","orient","align"].reduce(function(r,l){var c=n.mark[l];switch(l){case"filled":void 0===c&&(r[l]=e!==s.POINT&&e!==s.LINE&&e!==s.RULE);break;case"opacity":void 0===c&&u.contains([s.POINT,s.TICK,s.CIRCLE,s.SQUARE],e)&&(o.isAggregate(t)&&!o.has(t,i.DETAIL)||(r[l]=.7));break;case"orient":var f=a.isMeasure(t.x),p=a.isMeasure(t.y);f&&!p?e===s.TICK?r[l]="vertical":r[l]="horizontal":!f&&p&&(e===s.TICK?r[l]="horizontal":r[l]="vertical");break;case"align":void 0===c&&(r[l]=o.has(t,i.X)?"center":"right")}return r},{}),n.mark)}var i=n(8),o=n(28),a=n(13),s=n(29),u=n(5);t.initMarkConfig=r},function(e,t,n){"use strict";var r,i=n(8),o=n(17),a=n(5);!function(e){function t(e){var t={};return e.has(i.COLOR)&&e.fieldDef(i.COLOR).type===o.ORDINAL&&(t[e.field(i.COLOR)]=[{type:"sort",by:e.field(i.COLOR)},{type:"rank",field:e.field(i.COLOR),output:{rank:e.field(i.COLOR,{prefn:"rank_"})}}]),t}function n(e){var t=e.child().component.data;if(!t.source){var n=t.colorRank;return delete t.colorRank,n}return{}}function r(e){var t={};return e.children().forEach(function(e){var n=e.component.data;n.source||(a.extend(t,n.colorRank),delete n.colorRank)}),t}function s(e){return a.flatten(a.vals(e.colorRank))}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=s}(r=t.colorRank||(t.colorRank={}))},function(e,t,n){"use strict";var r,i=n(13),o=n(17),a=n(5);!function(e){function t(e){var t=(e.transform().calculate||[]).reduce(function(e,t){return e[t.field]=!0,e},{}),n={};return e.forEach(function(e){if(e.type===o.TEMPORAL)n[e.field]="date";else if(e.type===o.QUANTITATIVE){if(i.isCount(e)||t[e.field])return;n[e.field]="number"}}),n}function n(e){var n=t(e),r=e.child().component.data;return!r.source&&r.formatParse&&(a.extend(n,r.formatParse),delete r.formatParse),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&!a.differ(r.formatParse,n)&&(a.extend(n,r.formatParse),delete r.formatParse)}),n}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r}(r=t.formatParse||(t.formatParse={}))},function(e,t,n){"use strict";var r,i=n(38),o=n(5);!function(e){function t(e){return e.channels().reduce(function(t,n){var r=e.scale(n);return e.field(n)&&r?(t[e.field(n)]=r.type===i.ScaleType.LOG,t):t},{})}function n(e){var t=e.child().component.data;if(!t.source){var n=t.nonPositiveFilter;return delete t.nonPositiveFilter,n}return{}}function r(e){var t={};return e.children().forEach(function(n){var r=n.component.data;
e.compatibleSource(n)&&!o.differ(r.nonPositiveFilter,t)&&(o.extend(t,r.nonPositiveFilter),delete r.nonPositiveFilter)}),t}function a(e){return o.keys(e.nonPositiveFilter).filter(function(t){return e.nonPositiveFilter[t]}).map(function(e){return{type:"filter",test:"datum."+e+" > 0"}})}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=a}(r=t.nonPositiveFilter||(t.nonPositiveFilter={}))},function(e,t,n){"use strict";var r,i=n(33),o=n(5),a=n(191),s=n(189),u=n(188),l=n(190),c=n(192);!function(e){function t(e){var t=e.data();if(t){var n={name:e.dataName(i.SOURCE)};if(t.values&&t.values.length>0)n.values=e.data().values,n.format={type:"json"};else if(t.url){n.url=t.url;var r=/(?:\.([^.]+))?$/.exec(n.url)[1];o.contains(["json","csv","tsv"],r)||(r="json"),n.format={type:e.data().formatType||r}}return n}return e.parent()?void 0:{name:e.dataName(i.SOURCE)}}function n(e){var n=t(e);return e.child().component.data.source||e.child().renameData(e.child().dataName(i.SOURCE),e.dataName(i.SOURCE)),n}function r(e){var n=t(e);return e.children().forEach(function(t){var n=t.component.data;if(e.compatibleSource(t)){var r=!n.filter&&!n.formatParse&&!n.nullFilter;r?(t.renameData(t.dataName(i.SOURCE),e.dataName(i.SOURCE)),delete n.source):n.source={name:t.dataName(i.SOURCE),source:e.dataName(i.SOURCE)}}}),n}function f(e,t){if(t.source){var n=t.source;return t.formatParse&&(t.source.format=t.source.format||{},t.source.format.parse=t.formatParse),n.transform=[].concat(a.nullFilter.assemble(t),l.formula.assemble(t),s.filter.assemble(t),u.bin.assemble(t),c.timeUnit.assemble(t)),n}return null}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=f}(r=t.source||(t.source={}))},function(e,t,n){"use strict";var r,i=n(33),o=n(13);!function(e){function t(e){var t=e.stack();if(t){var n=t.groupbyChannel,r=t.fieldChannel;return{name:e.dataName(i.STACKED_SCALE),source:e.dataName(i.SUMMARY),transform:[{type:"aggregate",groupby:[e.field(n)],summarize:[{ops:["sum"],field:e.field(r)}]}]}}return null}function n(e){var t=e.child(),n=t.component.data;if(!n.source&&n.stackScale){var r=n.stackScale,a=e.dataName(i.STACKED_SCALE);return t.renameData(r.name,a),r.name=a,r.source=e.dataName(i.SUMMARY),r.transform[0].groupby=e.reduce(function(e,t){return e.push(o.field(t)),e},r.transform[0].groupby),delete n.stackScale,r}return null}function r(e){return null}function a(e){return e.stackScale}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=a}(r=t.stackScale||(t.stackScale={}))},function(e,t,n){"use strict";var r,i=n(63),o=n(33),a=n(13),s=n(5);!function(e){function t(e,t){return t.bin?(e[a.field(t,{binSuffix:"_start"})]=!0,e[a.field(t,{binSuffix:"_mid"})]=!0,e[a.field(t,{binSuffix:"_end"})]=!0,e[a.field(t,{binSuffix:"_range"})]=!0):e[a.field(t)]=!0,e}function n(e){var n={},r={};return e.forEach(function(e,o){e.aggregate?e.aggregate===i.AggregateOp.COUNT?(r["*"]=r["*"]||{},r["*"].count=!0):(r[e.field]=r[e.field]||{},r[e.field][e.aggregate]=!0):t(n,e)}),[{name:e.dataName(o.SUMMARY),dimensions:n,measures:r}]}function r(e){var n=e.child().component.data;if(!n.source&&n.summary){var r=n.summary.map(function(n){n.dimensions=e.reduce(t,n.dimensions);var r=n.name.substr(e.child().name("").length);return e.child().renameData(n.name,r),n.name=r,n});return delete n.summary,r}return[]}function u(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=!0:e[n]={op:!0})}}function l(e){var t={};return e.children().forEach(function(n){var r=n.component.data;!r.source&&r.summary&&r.summary.forEach(function(i){var a=s.hash(i.dimensions);a in t?u(t[a].measures,i.measures):(i.name=e.dataName(o.SUMMARY)+"_"+s.keys(t).length,t[a]=i),n.renameData(n.dataName(o.SUMMARY),t[a].name),delete r.summary})}),s.vals(t)}function c(e,t){return e.summary?e.summary.reduce(function(e,n){var r=n.dimensions,i=n.measures,a=s.keys(r),u=s.reduce(i,function(e,t,n){return e[n]=s.keys(t),e},{});return s.keys(i).length>0&&e.push({name:n.name,source:t.dataName(o.SOURCE),transform:[{type:"aggregate",groupby:a,summarize:u}]}),e},[]):[]}e.parseUnit=n,e.parseFacet=r,e.parseLayer=l,e.assemble=c}(r=t.summary||(t.summary={}))},function(e,t,n){"use strict";var r,i=n(5),o=n(78);!function(e){function t(e){return e.reduce(function(e,t,n){if(t.timeUnit){var r=o.rawDomain(t.timeUnit,n);r&&(e[t.timeUnit]=!0)}return e},{})}function n(e){return i.extend(t(e),e.child().component.data.timeUnitDomain)}function r(e){return i.extend(t(e),e.children().forEach(function(e){return e.component.data.timeUnitDomain}))}function a(e){return i.keys(e.timeUnitDomain).reduce(function(e,t){var n=t,r=o.rawDomain(n,null);return r&&e.push({name:n,values:r,transform:[{type:"formula",field:"date",expr:o.parseExpression(n,"datum.data",!0)}]}),e},[])}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=a}(r=t.timeUnitDomain||(t.timeUnitDomain={}))},function(e,t,n){"use strict";function r(e){var t=e.child(),n=y.extend({},t.config().cell,t.config().facet.cell);return y.extend({x:e.has(f.COLUMN)?{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN),offset:e.scale(f.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2},y:e.has(f.ROW)?{scale:e.scaleName(f.ROW),field:e.field(f.ROW),offset:e.scale(f.ROW).padding/2}:{value:e.config().facet.scale.padding/2},width:{field:{parent:e.child().sizeName("width")}},height:{field:{parent:e.child().sizeName("height")}}},t.assembleParentGroupProperties(n))}function i(e,t){var n=null,r=e.child();return r.has(t)&&r.axis(t)&&(n=t===f.X?o(e):a(e),r.axis(t)&&_.gridShow(r,t)?r.component.axis[t]=_.parseInnerAxis(t,r):delete r.component.axis[t]),n}function o(e){var t=e.has(f.COLUMN);return y.extend({name:e.name("x-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(f.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:e.child().sizeName("width")}},height:{field:{group:"height"}},x:t?{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN),offset:e.scale(f.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[_.parseAxis(f.X,e.child())]})}function a(e){var t=e.has(f.ROW);return y.extend({name:e.name("y-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(f.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:e.child().sizeName("height")}},y:t?{scale:e.scaleName(f.ROW),field:e.field(f.ROW),offset:e.scale(f.ROW).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[_.parseAxis(f.Y,e.child())]})}function s(e){var t=e.config().facet.grid,n={name:e.name("row-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(f.ROW)]}]},properties:{update:{y:{scale:e.scaleName(f.ROW),field:e.field(f.ROW)},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}function u(e){var t=e.config().facet.grid,n={name:e.name("column-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(f.COLUMN)]}]},properties:{update:{x:{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN)},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}var l=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},c=n(120),f=n(8),p=n(49),d=n(33),h=n(28),m=n(13),g=n(38),v=n(17),y=n(5),_=n(187),b=n(15),x=n(121),E=n(122),w=n(123),S=n(124),k=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._config=this._initConfig(t.config,n),o=this._child=b.buildModel(t.spec,this,this.name("child")),a=this._facet=this._initFacet(t.facet);this._scale=this._initScale(a,i,o),this._axis=this._initAxis(a,i,o)}return l(t,e),t.prototype._initConfig=function(e,t){return y.mergeDeep(y.duplicate(p.defaultConfig),e,t?t.config():{})},t.prototype._initFacet=function(e){e=y.duplicate(e);var t=this;return h.channelMappingForEach(this.channels(),e,function(e,n){m.isDimension(e)||t.addWarning(n+" encoding should be ordinal."),e.type&&(e.type=v.getFullName(e.type))}),e},t.prototype._initScale=function(e,t,n){return[f.ROW,f.COLUMN].reduce(function(r,i){if(e[i]){var o=e[i].scale||{};r[i]=y.extend({type:g.ScaleType.ORDINAL,round:t.facet.scale.round,padding:i===f.ROW&&n.has(f.Y)||i===f.COLUMN&&n.has(f.X)?t.facet.scale.padding:0},o)}return r},{})},t.prototype._initAxis=function(e,t,n){return[f.ROW,f.COLUMN].reduce(function(r,i){if(e[i]){var o=e[i].axis;if(o!==!1){var a=r[i]=y.extend({},t.facet.axis,o===!0?{}:o||{});if(i===f.ROW){var s=n.axis(f.Y);s&&s.orient!==c.AxisOrient.RIGHT&&!a.orient&&(a.orient=c.AxisOrient.RIGHT),n.has(f.X)&&!a.labelAngle&&(a.labelAngle=a.orient===c.AxisOrient.RIGHT?90:270)}}}return r},{})},t.prototype.facet=function(){return this._facet},t.prototype.has=function(e){return!!this._facet[e]},t.prototype.child=function(){return this._child},t.prototype.hasSummary=function(){for(var e=this.component.data.summary,t=0;t<e.length;t++)if(y.keys(e[t].measures).length>0)return!0;return!1},t.prototype.dataTable=function(){return(this.hasSummary()?d.SUMMARY:d.SOURCE)+""},t.prototype.fieldDef=function(e){return this.facet()[e]},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this.child().parseData(),this.component.data=x.parseFacetData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.child().parseLayoutData(),this.component.layout=E.parseFacetLayout(this)},t.prototype.parseScale=function(){var e=this.child(),t=this;e.parseScale();var n=this.component.scale=S.parseScaleComponent(this);y.keys(e.component.scale).forEach(function(r){n[r]=e.component.scale[r],y.vals(n[r]).forEach(function(n){var r=n.name.substr(e.name("").length),i=t.scaleName(r);e.renameScale(n.name,i),n.name=i}),delete e.component.scale[r]})},t.prototype.parseMark=function(){this.child().parseMark(),this.component.mark=y.extend({name:this.name("cell"),type:"group",from:y.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(f.ROW)?[this.field(f.ROW)]:[],this.has(f.COLUMN)?[this.field(f.COLUMN)]:[])}]}),properties:{update:r(this)}},this.child().assembleGroup())},t.prototype.parseAxis=function(){this.child().parseAxis(),this.component.axis=_.parseAxisComponent(this,[f.ROW,f.COLUMN])},t.prototype.parseAxisGroup=function(){var e=i(this,f.X),t=i(this,f.Y);this.component.axisGroup=y.extend(e?{x:e}:{},t?{y:t}:{})},t.prototype.parseGridGroup=function(){var e=this.child();this.component.gridGroup=y.extend(!e.has(f.X)&&this.has(f.COLUMN)?{column:u(this)}:{},!e.has(f.Y)&&this.has(f.ROW)?{row:s(this)}:{})},t.prototype.parseLegend=function(){this.child().parseLegend(),this.component.legend=this._child.component.legend,this._child.component.legend={}},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return x.assembleData(this,e),this._child.assembleData(e)},t.prototype.assembleLayout=function(e){return this._child.assembleLayout(e),E.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return[].concat(y.vals(this.component.axisGroup),y.flatten(y.vals(this.component.gridGroup)),this.component.mark)},t.prototype.channels=function(){return[f.ROW,f.COLUMN]},t.prototype.mapping=function(){return this.facet()},t.prototype.isFacet=function(){return!0},t}(w.Model);t.FacetModel=k},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(5),o=n(49),a=n(121),s=n(122),u=n(123),l=n(15),c=n(353),f=function(e){function t(t,n,r){var i=this;e.call(this,t,n,r),this._config=this._initConfig(t.config,n),this._children=t.layers.map(function(e,t){return l.buildModel(e,i,i.name("layer_"+t))})}return r(t,e),t.prototype._initConfig=function(e,t){return i.mergeDeep(i.duplicate(o.defaultConfig),e,t?t.config():{})},t.prototype.has=function(e){return!1},t.prototype.children=function(){return this._children},t.prototype.isOrdinalScale=function(e){return this._children[0].isOrdinalScale(e)},t.prototype.dataTable=function(){return this._children[0].dataTable()},t.prototype.fieldDef=function(e){return null},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this._children.forEach(function(e){e.parseData()}),this.component.data=a.parseLayerData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this._children.forEach(function(e,t){e.parseLayoutData()}),this.component.layout=s.parseLayerLayout(this)},t.prototype.parseScale=function(){var e=this,t=this.component.scale={};this._children.forEach(function(n){n.parseScale(),i.keys(n.component.scale).forEach(function(r){var o=n.component.scale[r];if(o){var a=t[r];if(a&&a.main){var s=a.main.domain,u=o.main.domain;if(i.isArray(s))i.isArray(o.main.domain)?a.main.domain=s.concat(u):e.addWarning("custom domain scale cannot be unioned with default field-based domain");else{var l=c.isUnionedDomain(s)?s.fields:[s];i.isArray(u)&&e.addWarning("custom domain scale cannot be unioned with default field-based domain");var f=c.isDataRefDomain(u)?l.concat([u]):c.isUnionedDomain(u)?l.concat(u.fields):l;f=i.unique(f,i.hash),f.length>1?a.main.domain={fields:f}:a.main.domain=f[0]}a.colorLegend=a.colorLegend?a.colorLegend:o.colorLegend,a.binColorLegend=a.binColorLegend?a.binColorLegend:o.binColorLegend}else t[r]=o;i.vals(o).forEach(function(t){var r=t.name.substr(n.name("").length),i=e.scaleName(r);n.renameScale(t.name,i),t.name=i}),delete o[r]}})})},t.prototype.parseMark=function(){this._children.forEach(function(e){e.parseMark()})},t.prototype.parseAxis=function(){var e=this.component.axis={};this._children.forEach(function(t){t.parseAxis(),i.keys(t.component.axis).forEach(function(n){e[n]||(e[n]=t.component.axis[n])})})},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){var e=this.component.legend={};this._children.forEach(function(t){t.parseLegend(),i.keys(t.component.legend).forEach(function(n){e[n]||(e[n]=t.component.legend[n])})})},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return a.assembleData(this,e),this._children.forEach(function(t){t.assembleData(e)}),e},t.prototype.assembleLayout=function(e){return this._children.forEach(function(t){t.assembleLayout(e)}),s.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return i.flatten(this._children.map(function(e){return e.assembleMarks()}))},t.prototype.channels=function(){return[]},t.prototype.mapping=function(){return null},t.prototype.isLayer=function(){return!0},t.prototype.compatibleSource=function(e){var t=this.data().url,n=e.component.data,r=!n.source||t&&t===n.source.url;return r},t}(u.Model);t.LayerModel=f},function(e,t,n){"use strict";function r(e){return[f.COLOR,f.SIZE,f.SHAPE].reduce(function(t,n){return e.legend(n)&&(t[n]=o(e,n)),t},{})}function i(e,t){switch(t){case f.COLOR:var n=e.fieldDef(f.COLOR),r=e.scaleName(c(n)?v.COLOR_LEGEND:f.COLOR);return e.config().mark.filled?{fill:r}:{stroke:r};case f.SIZE:return{size:e.scaleName(f.SIZE)};case f.SHAPE:return{shape:e.scaleName(f.SHAPE)}}return null}function o(e,t){var n=e.fieldDef(t),r=e.legend(t),o=i(e,t);o.title=u(r,n),o.offset=a(r,n),m.extend(o,l(r,e,t)),["orient","values"].forEach(function(e){var t=r[e];void 0!==t&&(o[e]=t)});var s="boolean"!=typeof r&&r.properties||{};return["title","symbols","legend","labels"].forEach(function(r){var i=y[r]?y[r](n,s[r],e,t):s[r];void 0!==i&&m.keys(i).length>0&&(o.properties=o.properties||{},o.properties[r]=i)}),o}function a(e,t){return void 0!==e.offset?e.offset:0}function s(e,t){var n=e.orient;return n?n:"vertical"}function u(e,t){return"boolean"!=typeof e&&e.title?e.title:p.title(t)}function l(e,t,n){var r=t.fieldDef(n);return r.bin?{}:g.formatMixins(t,n,"boolean"!=typeof e?e.format:void 0)}function c(e){return e.type===h.ORDINAL||e.bin||e.timeUnit}var f=n(8),p=n(13),d=n(29),h=n(17),m=n(5),g=n(15),v=n(124);t.parseLegendComponent=r,t.parseLegend=o,t.offset=a,t.orient=s,t.title=u,t.formatMixins=l,t.useColorLegendScale=c;var y;!function(e){function t(e,t,n,r){var i={},o=n.mark(),a=n.legend(r);switch(o){case d.BAR:case d.TICK:case d.TEXT:i.shape={value:"square"};break;case d.CIRCLE:case d.SQUARE:i.shape={value:o};break;case d.POINT:case d.LINE:case d.AREA:}var s=n.config().mark.filled,u=r===f.COLOR?m.without(g.FILL_STROKE_CONFIG,[s?"fill":"stroke","strokeDash","strokeDashOffset"]):m.without(g.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);u=m.without(u,["strokeDash","strokeDashOffset"]),g.applyMarkConfig(i,n,u),s&&(i.strokeWidth={value:0});var l;return n.has(f.COLOR)&&r===f.COLOR?c(e)&&(l={scale:n.scaleName(f.COLOR),field:"data"}):n.fieldDef(f.COLOR).value&&(l={value:n.fieldDef(f.COLOR).value}),void 0!==l?s?i.fill=l:i.stroke=l:r!==f.COLOR&&(i[s?"fill":"stroke"]=i[s?"fill":"stroke"]||{value:n.config().mark.color}),void 0!==a.symbolColor&&(i.fill={value:a.symbolColor}),void 0!==a.symbolShape&&(i.shape={value:a.symbolShape}),void 0!==a.symbolSize&&(i.size={value:a.symbolSize}),void 0!==a.symbolStrokeWidth&&(i.strokeWidth={value:a.symbolStrokeWidth}),i=m.extend(i,t||{}),m.keys(i).length>0?i:void 0}function n(e,t,n,r){var i=n.legend(r),o={};return r===f.COLOR&&(e.type===h.ORDINAL?t=m.extend({text:{scale:n.scaleName(v.COLOR_LEGEND),field:"data"}},t||{}):e.bin?t=m.extend({text:{scale:n.scaleName(v.COLOR_LEGEND_LABEL),field:"data"}},t||{}):e.timeUnit&&(t=m.extend({text:{template:"{{ datum.data | time:'"+g.timeFormat(n,r)+"'}}"}},t||{}))),void 0!==i.labelAlign&&(o.align={value:i.labelAlign}),void 0!==i.labelColor&&(o.stroke={value:i.labelColor}),void 0!==i.labelFont&&(o.font={value:i.labelFont}),void 0!==i.labelFontSize&&(o.fontSize={value:i.labelFontSize}),void 0!==i.labelBaseline&&(o.baseline={value:i.labelBaseline}),o=m.extend(o,t||{}),m.keys(o).length>0?o:void 0}function r(e,t,n,r){var i=n.legend(r),o={};return void 0!==i.titleColor&&(o.stroke={value:i.titleColor}),void 0!==i.titleFont&&(o.font={value:i.titleFont}),void 0!==i.titleFontSize&&(o.fontSize={value:i.titleFontSize}),void 0!==i.titleFontWeight&&(o.fontWeight={value:i.titleFontWeight}),o=m.extend(o,t||{}),m.keys(o).length>0?o:void 0}e.symbols=t,e.labels=n,e.title=r}(y=t.properties||(t.properties={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(13),a=n(15);!function(e){function t(){return"area"}function n(e){var t={},n=e.config().mark.orient;void 0!==n&&(t.orient={value:n});var r=e.stack(),s=e.encoding().x;r&&i.X===r.fieldChannel?t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"_start"})}:o.isMeasure(s)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:o.isDimension(s)&&(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})}),"horizontal"===n&&(r&&i.X===r.fieldChannel?t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"_end"})}:t.x2={scale:e.scaleName(i.X),value:0});var u=e.encoding().y;return r&&i.Y===r.fieldChannel?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"_start"})}:o.isMeasure(u)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:o.isDimension(u)&&(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})}),"horizontal"!==n&&(r&&i.Y===r.fieldChannel?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"_end"})}:t.y2={scale:e.scaleName(i.Y),value:0}),a.applyColorAndOpacity(t,e),a.applyMarkConfig(t,e,["interpolate","tension"]),t}function r(e){}e.markType=t,e.properties=n,e.labels=r}(r=t.area||(t.area={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(13),a=n(15);!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,s=e.stack(),u=e.encoding().x;s&&i.X===s.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"_start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"_end"})}):o.isMeasure(u)?"horizontal"===n?(t.x={scale:e.scaleName(i.X),field:e.field(i.X)},t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&"horizontal"!==n?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&"horizontal"!==n?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var l=e.encoding().y;return s&&i.Y===s.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"_start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"_end"})}):o.isMeasure(l)?"horizontal"!==n?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&"horizontal"===n?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&"horizontal"===n?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),a.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function s(e){}e.markType=t,e.properties=n,e.labels=s}(r=t.bar||(t.bar={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(15);!function(e){function t(){return"line"}function n(e){var t={};e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})}:t.x={value:0},e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})}:t.y={field:{group:"height"}},o.applyColorAndOpacity(t,e),o.applyMarkConfig(t,e,["interpolate","tension"]);var n=r(e);return n&&(t.strokeWidth={value:n}),t}function r(e){var t=e.fieldDef(i.SIZE);return t&&void 0!==t.value?t.value:e.config().mark.lineSize}function a(e){}e.markType=t,e.properties=n,e.labels=a}(r=t.line||(t.line={}))},function(e,t,n){"use strict";function r(e){return p.contains([c.LINE,c.AREA],e.mark())?i(e):o(e)}function i(e){var t=e.mark(),n=e.parent()&&e.parent().isFacet(),r={data:e.dataTable()},i=u(e),o=[{name:e.name("marks"),type:x[t].markType(),from:p.extend(n||i.length>0?{}:r,{transform:[{type:"sort",by:s(e)}]}),properties:{update:x[t].properties(e)}}];if(i.length>0){var d={type:"facet",groupby:i},h=t===c.AREA&&e.stack()?[f.imputeTransform(e),f.stackTransform(e),d]:[].concat(d,e.has(l.ORDER)?[{type:"sort",by:a(e)}]:[]);return[{name:e.name("pathgroup"),type:"group",from:p.extend(n?{}:r,{transform:h}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:o}]}return o}function o(e){var t=e.mark(),n=e.parent()&&e.parent().isFacet(),r={data:e.dataTable()},i=[];if(t===c.TEXT&&e.has(l.COLOR)&&e.config().mark.applyColorToBackground&&!e.has(l.X)&&!e.has(l.Y)&&i.push(p.extend({name:e.name("background"),type:"rect"},n?{}:{from:r},{properties:{update:v.text.background(e)}})),i.push(p.extend({name:e.name("marks"),type:x[t].markType()},!n||e.stack()||e.has(l.ORDER)?{from:p.extend(n?{}:r,e.stack()?{transform:[f.stackTransform(e)]}:e.has(l.ORDER)?{transform:[{type:"sort",by:a(e)}]}:{})}:{},{properties:{update:x[t].properties(e)}})),e.has(l.LABEL)&&x[t].labels){var o=x[t].labels(e);void 0!==o&&i.push(p.extend({name:e.name("label"),type:"text"},n?{}:{from:r},{properties:{update:o}}))}return i}function a(e){if(e.has(l.ORDER)){var t=e.encoding().order;return t instanceof Array?t.map(b.sortField):b.sortField(t)}return null}function s(e){if(e.mark()===c.LINE&&e.has(l.PATH)){var t=e.encoding().path;return t instanceof Array?t.map(b.sortField):b.sortField(t)}return"-"+e.field("horizontal"===e.config().mark.orient?l.Y:l.X)}function u(e){return[l.COLOR,l.DETAIL,l.OPACITY,l.SHAPE].reduce(function(t,n){return e.has(n)&&!e.fieldDef(n).aggregate&&t.push(e.field(n)),t},[])}var l=n(8),c=n(29),f=n(193),p=n(5),d=n(340),h=n(341),m=n(342),g=n(344),v=n(346),y=n(347),_=n(345),b=n(15),x={area:d.area,bar:h.bar,line:m.line,point:g.point,text:v.text,tick:y.tick,rule:_.rule,circle:g.circle,square:g.square};t.parseMark=r},function(e,t,n){"use strict";var r,i=n(8),o=n(15);!function(e){function t(){return"symbol"}function n(e,t){var n={};return e.has(i.X)?n.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})}:n.x={value:e.config().scale.bandSize/2},e.has(i.Y)?n.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})}:n.y={value:e.config().scale.bandSize/2},e.has(i.SIZE)?n.size={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:n.size={value:r(e)},t?n.shape={value:t}:e.has(i.SHAPE)?n.shape={scale:e.scaleName(i.SHAPE),field:e.field(i.SHAPE)}:e.fieldDef(i.SHAPE).value?n.shape={value:e.fieldDef(i.SHAPE).value}:e.config().mark.shape&&(n.shape={value:e.config().mark.shape}),o.applyColorAndOpacity(n,e),n}function r(e){var t=e.fieldDef(i.SIZE);return t&&void 0!==t.value?t.value:e.config().mark.size}function a(e){}e.markType=t,e.properties=n,e.labels=a}(r=t.point||(t.point={}));var a;!function(e){function t(){return"symbol"}function n(e){return r.properties(e,"circle")}function i(e){}e.markType=t,e.properties=n,e.labels=i}(a=t.circle||(t.circle={}));var s;!function(e){function t(){return"symbol"}function n(e){return r.properties(e,"square")}function i(e){}e.markType=t,e.properties=n,e.labels=i}(s=t.square||(t.square={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(15);!function(e){function t(){return"rule"}function n(e){var t={};return e.has(i.X)&&(t.x=r(e,i.X),t.y={value:0},t.y2={field:{group:"height"}}),e.has(i.Y)&&(t.y=r(e,i.Y),t.x={value:0},t.x2={field:{group:"width"}}),o.applyColorAndOpacity(t,e),e.has(i.SIZE)?t.strokeWidth={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:t.strokeWidth={value:a(e)},t}function r(e,t){return{scale:e.scaleName(t),field:e.field(t,{binSuffix:"_mid"})}}function a(e){var t=e.fieldDef(i.SIZE);return t&&void 0!==t.value?t.value:e.config().mark.ruleSize}function s(e){}e.markType=t,e.properties=n,e.labels=s}(r=t.rule||(t.rule={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(15),a=n(5),s=n(17);!function(e){function t(){return"text"}function n(e){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:e.scaleName(i.COLOR),field:e.field(i.COLOR,e.fieldDef(i.COLOR).type===s.ORDINAL?{prefn:"rank_"}:{})}}}function r(e){var t={};o.applyMarkConfig(t,e,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var n=e.fieldDef(i.TEXT);if(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})}:e.has(i.TEXT)&&e.fieldDef(i.TEXT).type===s.QUANTITATIVE?t.x={field:{group:"width"},offset:-5}:t.x={value:e.config().scale.textBandWidth/2},e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})}:t.y={value:e.config().scale.bandSize/2},e.has(i.SIZE)?t.fontSize={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:t.fontSize={value:u(e)},!e.config().mark.applyColorToBackground||e.has(i.X)||e.has(i.Y))o.applyColorAndOpacity(t,e);else{t.fill={value:"black"};var r=e.config().mark.opacity;r&&(t.opacity={value:r})}if(e.has(i.TEXT))if(a.contains([s.QUANTITATIVE,s.TEMPORAL],e.fieldDef(i.TEXT).type)){var l=e.config().mark.format;a.extend(t,o.formatMixins(e,i.TEXT,l))}else t.text={field:e.field(i.TEXT)};else n.value&&(t.text={value:n.value});return t}function u(e){var t=e.fieldDef(i.SIZE);return t&&void 0!==t.value?t.value:e.config().mark.fontSize}e.markType=t,e.background=n,e.properties=r}(r=t.text||(t.text={}))},function(e,t,n){"use strict";var r,i=n(8),o=n(15);!function(e){function t(){return"rect"}function n(e){var t={};return e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"_mid"})}:t.xc={value:e.config().scale.bandSize/2},e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"_mid"})}:t.yc={value:e.config().scale.bandSize/2},"horizontal"===e.config().mark.orient?(t.width=e.has(i.SIZE)?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)},t.height={value:e.config().mark.tickThickness}):(t.width={value:e.config().mark.tickThickness},t.height=e.has(i.SIZE)?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),o.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().scale,o=e.config().mark;if(o.tickSize)return o.tickSize;var a=e.has(t)?e.scale(t).bandSize:r.bandSize;return a/1.5}function a(e){}e.markType=t,e.properties=n,e.labels=a}(r=t.tick||(t.tick={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(63),o=n(8),a=n(49),s=n(33),u=n(28),l=n(13),c=n(29),f=n(38),p=n(17),d=n(5),h=n(187),m=n(15),g=n(329),v=n(121),y=n(339),_=n(122),b=n(123),x=n(343),E=n(124),w=n(193),S=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._mark=t.mark,o=this._encoding=this._initEncoding(i,t.encoding||{}),a=this._config=this._initConfig(t.config,n,i,o),s=this._scale=this._initScale(i,o,a);this._axis=this._initAxis(o,a),this._legend=this._initLegend(o,a),this._stack=w.compileStackProperties(i,o,s,a)}return r(t,e),t.prototype._initEncoding=function(e,t){return t=d.duplicate(t),u.forEach(t,function(t,n){return o.supportMark(n,e)?(t.type&&(t.type=p.getFullName(t.type)),void(n!==o.PATH&&n!==o.ORDER||t.aggregate||t.type!==p.QUANTITATIVE||(t.aggregate=i.AggregateOp.MIN))):(console.warn(n,"dropped as it is incompatible with",e),void delete t.field)}),t},t.prototype._initConfig=function(e,t,n,r){var i=d.mergeDeep(d.duplicate(a.defaultConfig),t?t.config():{},e);return i.mark=g.initMarkConfig(n,r,i),i},t.prototype._initScale=function(e,t,n){return o.UNIT_SCALE_CHANNELS.reduce(function(r,i){if(u.has(t,i)){var a=t[i].scale||{},s=t[i],l=E.scaleType(a,s,i,e);r[i]=d.extend({type:l,round:n.scale.round,padding:n.scale.padding,useRawDomain:n.scale.useRawDomain,bandSize:i===o.X&&l===f.ScaleType.ORDINAL&&e===c.TEXT?n.scale.textBandWidth:n.scale.bandSize},a)}return r},{})},t.prototype._initAxis=function(e,t){return[o.X,o.Y].reduce(function(n,r){if(u.has(e,r)){var i=e[r].axis;i!==!1&&(n[r]=d.extend({},t.axis,i===!0?{}:i||{}))}return n},{})},t.prototype._initLegend=function(e,t){return o.NONSPATIAL_SCALE_CHANNELS.reduce(function(n,r){if(u.has(e,r)){var i=e[r].legend;i!==!1&&(n[r]=d.extend({},t.legend,i===!0?{}:i||{}))}return n},{})},t.prototype.parseData=function(){this.component.data=v.parseUnitData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.component.layout=_.parseUnitLayout(this)},t.prototype.parseScale=function(){this.component.scale=E.parseScaleComponent(this)},t.prototype.parseMark=function(){
this.component.mark=x.parseMark(this)},t.prototype.parseAxis=function(){this.component.axis=h.parseAxisComponent(this,[o.X,o.Y])},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){this.component.legend=y.parseLegendComponent(this)},t.prototype.assembleData=function(e){return v.assembleData(this,e)},t.prototype.assembleLayout=function(e){return _.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return this.component.mark},t.prototype.assembleParentGroupProperties=function(e){return m.applyConfig({},e,m.FILL_STROKE_CONFIG.concat(["clip"]))},t.prototype.channels=function(){return o.UNIT_CHANNELS},t.prototype.mapping=function(){return this.encoding()},t.prototype.stack=function(){return this._stack},t.prototype.toSpec=function(e,t){var n,r=d.duplicate(this._encoding);return n={mark:this._mark,encoding:r},e||(n.config=d.duplicate(this._config)),t||(n.data=d.duplicate(this._data)),n},t.prototype.mark=function(){return this._mark},t.prototype.has=function(e){return u.has(this._encoding,e)},t.prototype.encoding=function(){return this._encoding},t.prototype.fieldDef=function(e){return this._encoding[e]||{}},t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=d.extend({binSuffix:this.scale(e).type===f.ScaleType.ORDINAL?"_range":"_start"},t)),l.field(n,t)},t.prototype.dataTable=function(){return this.dataName(u.isAggregate(this._encoding)?s.SUMMARY:s.SOURCE)},t.prototype.isUnit=function(){return!0},t}(b.Model);t.UnitModel=S},function(e,t){"use strict";t.defaultLegendConfig={orient:void 0,shortTimeLabels:!1}},function(e,t,n){"use strict";function r(e){return"mark"+t.ASSIGN+e.mark+t.DELIM+o(e.encoding)}function i(e,n,r){var i=e.split(t.DELIM),o=i.shift().split(t.ASSIGN)[1].trim(),s=a(i.join(t.DELIM)),u={mark:h.Mark[o],encoding:s};return void 0!==n&&(u.data=n),void 0!==r&&(u.config=r),u}function o(e){return d.map(e,function(e,n){return n+t.ASSIGN+s(e)}).join(t.DELIM)}function a(e){return e.split(t.DELIM).reduce(function(e,n){var r=n.split(t.ASSIGN),i=r[0].trim(),o=r[1];return e[i]=l(o),e},{})}function s(e){return(e.aggregate?e.aggregate+t.FUNC:"")+(e.timeUnit?e.timeUnit+t.FUNC:"")+(e.bin?"bin"+t.FUNC:"")+(e.field||"")+t.TYPE+p.SHORT_TYPE[e.type]}function u(e,n){return void 0===n&&(n=t.DELIM),e.map(s).join(n)}function l(e){for(var n=e.split(t.TYPE),r={field:n[0].trim(),type:p.TYPE_FROM_SHORT_TYPE[n[1].trim()]},i=0;i<c.AGGREGATE_OPS.length;i++){var o=c.AGGREGATE_OPS[i];if(0===r.field.indexOf(o+"_")){r.field=r.field.substr(o.toString().length+1),o===c.AggregateOp.COUNT&&0===r.field.length&&(r.field="*"),r.aggregate=o;break}}for(var i=0;i<f.TIMEUNITS.length;i++){var a=f.TIMEUNITS[i];if(r.field&&0===r.field.indexOf(a+"_")){r.field=r.field.substr(r.field.length+1),r.timeUnit=a;break}}return r.field&&0===r.field.indexOf("bin_")&&(r.field=r.field.substr(4),r.bin=!0),r}var c=n(63),f=n(50),p=n(17),d=n(28),h=n(29);t.DELIM="|",t.ASSIGN="=",t.TYPE=",",t.FUNC="_",t.shorten=r,t.parse=i,t.shortenEncoding=o,t.parseEncoding=a,t.shortenFieldDef=s,t.shortenFieldDefs=u,t.parseFieldDef=l},function(e,t){"use strict";!function(e){e[e.ASCENDING="ascending"]="ASCENDING",e[e.DESCENDING="descending"]="DESCENDING",e[e.NONE="none"]="NONE"}(t.SortOrder||(t.SortOrder={}));t.SortOrder},function(e,t,n){"use strict";function r(e,n,r){void 0===n&&(n=t.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=t.DEFAULT_SUPPORTED_CHANNEL_TYPE);var i=e.mark,a=e.encoding,s=n[i],u=r[i];for(var l in s)if(!(s[l]in a))return'Missing encoding channel "'+s[l]+'" for mark "'+i+'"';for(var c in a)if(!u[c])return'Encoding channel "'+c+'" is not supported by mark type "'+i+'"';return i!==o.BAR||a.x||a.y?null:"Missing both x and y for bar"}var i=n(5),o=n(29);t.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},t.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toMap(["row","column","x","y","size","color","detail"]),line:i.toMap(["row","column","x","y","color","detail"]),area:i.toMap(["row","column","x","y","color","detail"]),tick:i.toMap(["row","column","x","y","color","detail"]),circle:i.toMap(["row","column","x","y","color","size","detail"]),square:i.toMap(["row","column","x","y","color","size","detail"]),point:i.toMap(["row","column","x","y","color","size","detail","shape"]),text:i.toMap(["row","column","size","color","text"])},t.getEncodingMappingError=r},function(e,t,n){"use strict";function r(e){return o.isArray(e)?!1:"fields"in e}function i(e){return o.isArray(e)?!1:"data"in e}var o=n(5);t.isUnionedDomain=r,t.isDataRefDomain=i},function(e,t){function n(e,t,n,r,o,s,u,l,c){var f=a.call(arguments);if(i[f])return i[f];var p=u*(Math.PI/180),d=Math.sin(p),h=Math.cos(p);n=Math.abs(n),r=Math.abs(r);var m=h*(l-e)*.5+d*(c-t)*.5,g=h*(c-t)*.5-d*(l-e)*.5,v=m*m/(n*n)+g*g/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);var y=h/n,_=d/n,b=-d/r,x=h/r,E=y*l+_*c,w=b*l+x*c,S=y*e+_*t,k=b*e+x*t,M=(S-E)*(S-E)+(k-w)*(k-w),T=1/M-.25;0>T&&(T=0);var A=Math.sqrt(T);s==o&&(A=-A);var C=.5*(E+S)-A*(k-w),O=.5*(w+k)+A*(S-E),N=Math.atan2(w-O,E-C),I=Math.atan2(k-O,S-C),L=I-N;0>L&&1===s?L+=2*Math.PI:L>0&&0===s&&(L-=2*Math.PI);for(var D=Math.ceil(Math.abs(L/(.5*Math.PI+.001))),P=[],R=0;D>R;++R){var U=N+R*L/D,j=N+(R+1)*L/D;P[R]=[C,O,U,j,n,r,d,h]}return i[f]=P}function r(e){var t=a.call(e);if(o[t])return o[t];var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],l=e[5],c=e[6],f=e[7],p=f*u,d=-c*l,h=c*u,m=f*l,g=Math.cos(i),v=Math.sin(i),y=Math.cos(s),_=Math.sin(s),b=.5*(s-i),x=Math.sin(.5*b),E=8/3*x*x/Math.sin(b),w=n+g-E*v,S=r+v+E*g,k=n+y,M=r+_,T=k+E*_,A=M-E*y;return o[t]=[p*w+d*S,h*w+m*S,p*T+d*A,h*T+m*A,p*k+d*M,h*k+m*M]}var i={},o={},a=[].join;e.exports={segments:n,bezier:r,cache:{segments:i,bezier:o}}},function(e,t,n){function r(){s.call(this),this._down=null,this._touch=null,this._first=!0}function i(e,t,n){return function(r){var i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):(this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function o(e){return function(t){this.fire(e,t),this._active=null}}var a=n(64),s=n(195),u=n(196),l=s.prototype,c=r.prototype=Object.create(l);c.constructor=r,c.initialize=function(e,t,n){var r=this._canvas=a.find(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){c[e]?c[e].call(i,t):i.fire(e,t)})})}return l.initialize.call(this,e,t,n)},c.canvas=function(){return this._canvas},c.context=function(){return this._canvas.getContext("2d")},c.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],c.DOMMouseScroll=function(e){this.fire("mousewheel",e)},c.mousemove=i("mousemove","mouseover","mouseout"),c.dragover=i("dragover","dragenter","dragleave"),c.mouseout=o("mouseout"),c.dragleave=o("dragleave"),c.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},c.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},c.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},c.touchmove=function(e){this.fire("touchmove",e,!0)},c.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},c.fire=function(e,t,n){var r,i,o=n?this._touch:this._active,a=this._handlers[e];if(a)for(t.vegaType=e,r=0,i=a.length;i>r;++r)a[r].handler.call(this._obj,t,o)},c.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},c.off=function(e,t){var n,r=this.eventName(e),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===e&&(t&&i[n].handler!==t||i.splice(n,1));return this}},c.pickEvent=function(e){var t,n,r=this._canvas.getBoundingClientRect(),i=this._padding;return this.pick(this._scene,t=e.clientX-r.left,n=e.clientY-r.top,t-i.left,n-i.top)},c.pick=function(e,t,n,r,i){var o=this.context(),a=u[e.marktype];return a.pick.call(this,o,e,t,n,r,i)},e.exports=r},function(e,t,n){function r(e){c.call(this),this._loader=new u(e)}function i(e,t){if(!t)return null;var n,r,i,a,u,l=new s;for(n=0,r=t.length;r>n;++n)i=t[n],a=i.mark,u=a.group,i=f[a.marktype].nested?a:i,l.union(o(i.bounds,u)),i["bounds:prev"]&&l.union(o(i["bounds:prev"],u));return l.round(),e.beginPath(),e.rect(l.x1,l.y1,l.width(),l.height()),e.clip(),l}function o(e,t){if(null==t)return e;for(var n=e.clone();null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}var a=n(64),s=n(81),u=n(127),l=n(129),c=n(126),f=n(196);r.RETINA=!0;var p=c.prototype,d=r.prototype=Object.create(p);d.constructor=r,d.initialize=function(e,t,n,r){return this._canvas=l.instance(t,n),e&&(a.clear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),p.initialize.call(this,e,t,n,r)},d.resize=function(e,t,n){return p.resize.call(this,e,t,n),l.resize(this._canvas,this._width,this._height,this._padding,r.RETINA),this},d.canvas=function(){return this._canvas},d.context=function(){return this._canvas?this._canvas.getContext("2d"):null},d.pendingImages=function(){return this._loader.pending()},d.render=function(e,t){var n,r=this.context(),o=this._padding,a=this._width+o.left+o.right,s=this._height+o.top+o.bottom;return this._scene=e,r.save(),n=i(r,t),this.clear(-o.left,-o.top,a,s),this.draw(r,e,n),r.restore(),this._scene=null,this},d.draw=function(e,t,n){var r=f[t.marktype];r.draw.call(this,e,t,n)},d.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))},d.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(n)})},d.renderAsync=function(e){var t=this;t._async_id&&clearTimeout(t._async_id),t._async_id=setTimeout(function(){t.render(e),delete t._async_id},10)},e.exports=r},function(e,t,n){e.exports={Handler:n(355),Renderer:n(356)}},function(e,t,n){function r(e,t){var n=t.x||0,r=t.y||0,i=t.innerRadius||0,a=t.outerRadius||0,s=(t.startAngle||0)-o,u=(t.endAngle||0)-o;e.beginPath(),0===i?e.moveTo(n,r):e.arc(n,r,i,s,u,0),e.arc(n,r,a,u,s,1),e.closePath()}var i=n(30),o=Math.PI/2;e.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=a(u(t)));s(e,r)}function i(e,t,n,r,i,o){var a=t.items,s=t.bounds;return!a||!a.length||s&&!s.contains(i,o)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),l(e,a,n,r)?a[0]:null)}var o=n(30),a=n(79),s=n(80),u=n(51).path.area,l=o.testPath(r);e.exports={draw:o.drawOne(r),pick:i,nested:!0}},function(e,t,n){function r(e,t,n){if(t.items&&t.items.length){var r,i,s,u,l,c,f,p,d,h,m,g,v,y=t.items,_=this;for(h=0,m=y.length;m>h;++h){for(r=y[h],s=r.axisItems||a,i=r.items||a,u=r.legendItems||a,l=r.x||0,c=r.y||0,f=r.width||0,p=r.height||0,(r.stroke||r.fill)&&(d=null==r.opacity?1:r.opacity,d>0&&(r.fill&&o.fill(e,r,d)&&e.fillRect(l,c,f,p),r.stroke&&o.stroke(e,r,d)&&e.strokeRect(l,c,f,p))),e.save(),e.translate(l,c),r.clip&&(e.beginPath(),e.rect(0,0,f,p),e.clip()),n&&n.translate(-l,-c),g=0,v=s.length;v>g;++g)"back"===s[g].layer&&_.draw(e,s[g],n);for(g=0,v=i.length;v>g;++g)_.draw(e,i[g],n);for(g=0,v=s.length;v>g;++g)"back"!==s[g].layer&&_.draw(e,s[g],n);for(g=0,v=u.length;v>g;++g)_.draw(e,u[g],n);n&&n.translate(l,c),e.restore()}}}function i(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o))return null;var s,u,l,c,f,p,d,h,m,g,v,y=t.items||a;for(m=y.length;--m>=0;)if(u=y[m],v=u.bounds,!v||v.contains(i,o)){for(l=u.axisItems||a,c=u.items||a,f=u.legendItems||a,d=u.x||0,h=u.y||0,e.save(),e.translate(d,h),d=i-d,h=o-h,g=f.length;--g>=0;)if(s=f[g],s.interactive!==!1&&(p=this.pick(s,n,r,d,h)))return e.restore(),p;for(g=l.length;--g>=0;)if(s=l[g],s.interactive!==!1&&"back"!==s.layer&&(p=this.pick(s,n,r,d,h)))return e.restore(),p;for(g=c.length;--g>=0;)if(s=c[g],s.interactive!==!1&&(p=this.pick(s,n,r,d,h)))return e.restore(),p;for(g=l.length;--g>=0;)if(s=l[g],s.interative!==!1&&"back"===s.layer&&(p=this.pick(s,n,r,d,h)))return e.restore(),p;if(e.restore(),t.interactive!==!1&&(u.fill||u.stroke)&&d>=0&&d<=u.width&&h>=0&&h<=u.height)return u}return null}var o=n(30),a=[];e.exports={draw:r,pick:i}},function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i=this,o=t.items,a=0,s=o.length;s>a;++a)if(r=o[a],!n||n.intersects(r.bounds)){r.image&&r.image.url===r.url||(r.image=i.loadImage(r.url),r.image.url=r.url);var u,l=r.x||0,c=r.y||0,f=r.width||r.image&&r.image.width||0,p=r.height||r.image&&r.image.height||0;l-="center"===r.align?f/2:"right"===r.align?f:0,c-="middle"===r.baseline?p/2:"bottom"===r.baseline?p:0,r.image.loaded&&(e.globalAlpha=null!=(u=r.opacity)?u:1,e.drawImage(r.image,l,c,f,p))}}var i=n(30);e.exports={draw:r,pick:i.pick()}},function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=a(u(t)));s(e,r)}function i(e,t,n,r,i,o){var a=t.items,s=t.bounds;return!a||!a.length||s&&!s.contains(i,o)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),l(e,a,n,r)?a[0]:null)}var o=n(30),a=n(79),s=n(80),u=n(51).path.line,l=o.testPath(r,!1);e.exports={draw:o.drawOne(r),pick:i,nested:!0}},function(e,t,n){function r(e,t){if(null==t.path)return!0;var n=t.pathCache||(t.pathCache=o(t.path));a(e,n,t.x,t.y)}var i=n(30),o=n(79),a=n(80);e.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,o,a,s,u,l,c=t.items,f=0,p=c.length;p>f;++f)r=c[f],n&&!n.intersects(r.bounds)||(o=null==r.opacity?1:r.opacity,0!==o&&(a=r.x||0,s=r.y||0,u=r.width||0,l=r.height||0,r.fill&&i.fill(e,r,o)&&e.fillRect(a,s,u,l),r.stroke&&i.stroke(e,r,o)&&e.strokeRect(a,s,u,l)))}var i=n(30);e.exports={draw:r,pick:i.pick()}},function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,o,s,u,l,c=t.items,f=0,p=c.length;p>f;++f)r=c[f],n&&!n.intersects(r.bounds)||(i=null==r.opacity?1:r.opacity,0!==i&&(o=r.x||0,s=r.y||0,u=null!=r.x2?r.x2:o,l=null!=r.y2?r.y2:s,r.stroke&&a.stroke(e,r,i)&&(e.beginPath(),e.moveTo(o,s),e.lineTo(u,l),e.stroke())))}function i(e,t){var n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,o=null!=t.y2?t.y2:r,a=t.strokeWidth,s=t.strokeCap;e.lineWidth=null!=a?a:1,e.lineCap=null!=s?s:"butt",e.beginPath(),e.moveTo(n,r),e.lineTo(i,o)}function o(e,t,n,r){return e.isPointInStroke?(i(e,t),e.isPointInStroke(n,r)):!1}var a=n(30);e.exports={draw:r,pick:a.pick(o)}},function(e,t,n){function r(e,t){var n,r,i,s,u=null!=t.size?t.size:100,l=t.x,c=t.y;if(e.beginPath(),null==t.shape||"circle"===t.shape)return n=Math.sqrt(u/Math.PI),e.arc(l,c,n,0,2*Math.PI,0),void e.closePath();switch(t.shape){case"cross":n=Math.sqrt(u/5)/2,r=3*n,e.moveTo(l-r,c-n),e.lineTo(l-n,c-n),e.lineTo(l-n,c-r),e.lineTo(l+n,c-r),e.lineTo(l+n,c-n),e.lineTo(l+r,c-n),e.lineTo(l+r,c+n),e.lineTo(l+n,c+n),e.lineTo(l+n,c+r),e.lineTo(l-n,c+r),e.lineTo(l-n,c+n),e.lineTo(l-r,c+n);break;case"diamond":s=Math.sqrt(u/(2*a)),i=s*a,e.moveTo(l,c-s),e.lineTo(l+i,c),e.lineTo(l,c+s),e.lineTo(l-i,c);break;case"square":r=Math.sqrt(u),n=r/2,e.rect(l-n,c-n,r,r);break;case"triangle-down":i=Math.sqrt(u/o),s=i*o/2,e.moveTo(l,c+s),e.lineTo(l+i,c-s),e.lineTo(l-i,c-s);break;case"triangle-up":i=Math.sqrt(u/o),s=i*o/2,e.moveTo(l,c-s),e.lineTo(l+i,c+s),e.lineTo(l-i,c+s)}e.closePath()}var i=n(30),o=Math.sqrt(3),a=Math.tan(30*Math.PI/180);e.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,o,a,l,c,f,p=t.items,d=0,h=p.length;h>d;++d)r=p[d],n&&!n.intersects(r.bounds)||(f=s.value(r.text),f&&(i=null==r.opacity?1:r.opacity,0!==i&&(e.font=s.font(r),e.textAlign=r.align||"left",o=r.x||0,a=r.y||0,(l=r.radius)&&(c=(r.theta||0)-Math.PI/2,o+=l*Math.cos(c),a+=l*Math.sin(c)),r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Math.PI/180),o=a=0),o+=r.dx||0,a+=(r.dy||0)+s.offset(r),r.fill&&u.fill(e,r,i)&&e.fillText(f,o,a),r.stroke&&u.stroke(e,r,i)&&e.strokeText(f,o,a),r.angle&&e.restore())))}function i(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=a(t,l,!0),u=-t.angle*Math.PI/180,c=Math.cos(u),f=Math.sin(u),p=t.x,d=t.y,h=c*i-f*o+(p-p*c+d*f),m=f*i+c*o+(d-p*f-d*c);return s.contains(h,m)}var o=n(81),a=n(128).text,s=n(65),u=n(30),l=new o;e.exports={draw:r,pick:u.pick(i)}},function(e,t,n){e.exports={canvas:n(357),svg:n(372)}},function(e,t,n){function r(){o.call(this)}var i=n(64),o=n(195),a=o.prototype,s=r.prototype=Object.create(a);s.constructor=r,s.initialize=function(e,t,n){return this._svg=i.find(e,"svg"),a.initialize.call(this,e,t,n)},s.svg=function(){return this._svg},s.listener=function(e){var t=this;return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}},s.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,o={type:e,handler:t,listener:this.listener(t)};return(i[n]||(i[n]=[])).push(o),r.addEventListener(n,o.listener),this},s.off=function(e,t){var n,r=this.eventName(e),i=this._svg,o=this._handlers[r];if(o){for(n=o.length;--n>=0;)(o[n].type===e&&!t||o[n].handler===t)&&(i.removeEventListener(r,o[n].listener),o.splice(n,1));return this}},e.exports=r},function(e,t,n){function r(e){f.call(this),this._loader=new c(e),this._dirtyID=0}function i(e,t,n){var r,i,o;for(e=d.child(e,n,"linearGradient",m),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;i>r;++r)o=d.child(e,r,"stop",m),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);d.clear(e,r)}function o(e,t,n){var r;e=d.child(e,n,"clipPath",m),e.setAttribute("id",t.id),r=d.child(e,0,"rect",m),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function a(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function s(e,t,n,r,i){var o=d.child(e,r,t.tag,m,null,i);if(o.__data__=n,o.__values__={fill:"default"},"g"===t.tag){var a=d.child(o,0,"rect",m,"background");a.__data__=n}return n._svg=o}function u(e,t,n){t!==b[e]&&(null!=t?n?_.setAttributeNS(n,e,t):_.setAttribute(e,t):n?_.removeAttributeNS(n,e):_.removeAttribute(e),b[e]=t)}function l(){return"undefined"!=typeof window?window.location.href:""}var c=n(127),f=n(126),p=n(65),d=n(64),h=n(51),m=h.metadata.xmlns,g=n(197),v=f.prototype,y=r.prototype=Object.create(v);y.constructor=r,y.initialize=function(e,t,n,r){return e&&(this._svg=d.child(e,0,"svg",m,"marks"),d.clear(e,1),this._root=d.child(this._svg,0,"g",m),d.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),v.initialize.call(this,e,t,n,r)},y.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),v.background.apply(this,arguments)},y.resize=function(e,t,n){if(v.resize.call(this,e,t,n),this._svg){var r=this._width,i=this._height,o=this._padding;this._svg.setAttribute("width",r+o.left+o.right),this._svg.setAttribute("height",i+o.top+o.bottom),this._root.setAttribute("transform","translate("+o.left+","+o.top+")")}return this},y.svg=function(){if(!this._svg)return null;var e={"class":"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in h.metadata)e[t]=h.metadata[t];return d.openTag("svg",e)+this._svg.innerHTML+d.closeTag("svg")},y.imageURL=function(e){return this._loader.imageURL(e)},y.render=function(e,t){return this._dirtyCheck(t)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e,-1),d.clear(this._root,1)),this.updateDefs(),this},y.draw=function(e,t,n){this.drawMark(e,t,n,g[t.marktype])},y.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,a=0;for(e in n.gradient)r||(r=n.el=d.child(t,0,"defs",m)),i(r,n.gradient[e],a++);for(e in n.clipping)r||(r=n.el=d.child(t,0,"defs",m)),o(r,n.clipping[e],a++);r&&(0===a?(t.removeChild(r),n.el=null):d.clear(r,a))},y._resetDefs=function(){var e=this._defs;e.clip_id=1,e.gradient={},e.clipping={}},y.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID},y._dirtyCheck=function(e){if(this._dirtyAll=!0,!e)return!0;var t,n,r,i,o,s,u,l=++this._dirtyID;for(o=0,s=e.length;s>o;++o)t=e[o],n=t.mark,n.marktype!==r&&(r=n.marktype,i=g[r]),"exit"!==t.status?(t=i.nest?n.items[0]:t,t._update!==l&&(t._svg?this._update(i,t._svg,t):(this._dirtyAll=!1,a(t,l)),t._update=l)):t._svg&&(i.nest&&t.mark.items.length?(this._update(i,t._svg,t.mark.items[0]),u=t.mark.items[0],u._svg=t._svg,u._update=l):d.remove(t._svg),t._svg=null);return!this._dirtyAll},y.drawMark=function(e,t,n,r){if(this.isDirty(t)){var i,o,a,u,l,c,f=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],p=t.interactive===!1?"none":null,h="g"===r.tag,g=d.cssClass(t);for(i=d.child(e,n+1,"g",m,g),i.setAttribute("class",g),t._svg=i,!h&&p&&i.style.setProperty("pointer-events",p),o=0,a=f.length;a>o;++o)this.isDirty(l=f[o])&&(c=!(this._dirtyAll||l._svg),u=s(i,r,l,o,c),this._update(r,u,l),h&&(c&&(this._dirtyAll=!0),this._recurse(u,l),c&&(this._dirtyAll=!1)));return d.clear(i,o),i}},y._recurse=function(e,t){var n,r,i=t.items||[],o=t.legendItems||[],a=t.axisItems||[],s=0;for(n=0,r=a.length;r>n;++n)"back"===a[n].layer&&this.drawMark(e,a[n],s++,g.group);for(n=0,r=i.length;r>n;++n)this.draw(e,i[n],s++);for(n=0,r=a.length;r>n;++n)"back"!==a[n].layer&&this.drawMark(e,a[n],s++,g.group);for(n=0,r=o.length;r>n;++n)this.drawMark(e,o[n],s++,g.group);d.clear(e,1+s)};var _=null,b=null,x={group:function(e,t,n){_=t.childNodes[0],b=t.__values__,e.background(u,n,this);var r=n.mark.interactive===!1?"none":null;r!==b.events&&(_.style.setProperty("pointer-events",r),b.events=r)},text:function(e,t,n){var r=p.value(n.text);r!==b.text&&(t.textContent=r,b.text=r),r=p.font(n),r!==b.font&&(t.style.setProperty("font",r),b.font=r)}};y._update=function(e,t,n){_=t,b=t.__values__,e.attr(u,n,this);var r=x[e.type];r&&r(e,t,n),this.style(_,n)},y.style=function(e,t){if(null!=t){var n,r,i,o,a;for(n=0,r=h.styleProperties.length;r>n;++n)i=h.styleProperties[n],a=t[i],a!==b[i]&&(o=h.styles[i],null==a?"fill"===o?e.style.setProperty(o,"none"):e.style.removeProperty(o):(a.id&&(this._defs.gradient[a.id]=a,a="url("+l()+"#"+a.id+")"),e.style.setProperty(o,a+"")),b[i]=a)}},e.exports=r},function(e,t,n){function r(e){s.call(this),this._loader=new u(e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}function i(e,t,n,r){v[r||e]=t}function o(e,t,n,r){if(null==e)return"";var i,o,a,s,u,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+c.font(e)+";"),i=0,o=l.styleProperties.length;o>i;++i)a=l.styleProperties[i],s=l.styles[a],u=e[a],null==u?"fill"===s&&(f+=(f.length?" ":"")+"fill: none;"):(u.id&&(r.gradient[u.id]=u,u="url(#"+u.id+")"),f+=(f.length?" ":"")+s+": "+u+";");return f?'style="'+f+'"':null}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var s=n(126),u=n(127),l=n(51),c=n(65),f=n(64),p=f.openTag,d=f.closeTag,h=n(197),m=s.prototype,g=r.prototype=Object.create(m);g.constructor=r,g.resize=function(e,t,n){m.resize.call(this,e,t,n);var r=this._padding,i=this._text,o={"class":"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var a in l.metadata)o[a]=l.metadata[a];return i.head=p("svg",o),i.root=p("g",{transform:"translate("+r.left+","+r.top+")"}),i.foot=d("g")+d("svg"),this},g.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},g.render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},g.reset=function(){return this._defs.clip_id=0,this},g.buildDefs=function(){var e,t,n,r,i=this._defs,o="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,o+=p("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)o+=p("stop",{offset:r[e].offset,"stop-color":r[e].color})+d("stop");o+=d("linearGradient")}for(t in i.clipping)n=i.clipping[t],o+=p("clipPath",{id:t}),o+=p("rect",{x:0,y:0,width:n.width,height:n.height})+d("rect"),o+=d("clipPath");return o.length>0?p("defs")+o+d("defs"):""},g.imageURL=function(e){return this._loader.imageURL(e)};var v;g.attributes=function(e,t){return v={},e(i,t,this),v},g.mark=function(e){var t,n,r,i=h[e.marktype],s=i.tag,u=i.attr,l=i.nest||!1,m=l?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],g=this._defs,v="";for("g"!==s&&e.interactive===!1&&(t='style="pointer-events: none;"'),v+=p("g",{"class":f.cssClass(e)},t),n=0;n<m.length;++n)r=m[n],t="g"!==s?o(r,e,s,g):null,v+=p(s,this.attributes(u,r),t),"text"===s?v+=a(c.value(r.text)):"g"===s&&(v+=p("rect",this.attributes(i.background,r),o(r,e,"bgrect",g))+d("rect"),v+=this.markGroup(r)),v+=d(s);return v+d("g")},g.markGroup=function(e){var t,n,r="",i=e.axisItems||[],o=e.items||[],a=e.legendItems||[];for(t=0,n=i.length;n>t;++t)"back"===i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=o.length;n>t;++t)r+=this.mark(o[t]);for(t=0,n=i.length;n>t;++t)"back"!==i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=a.length;n>t;++t)r+=this.mark(a[t]);return r},e.exports=r},function(e,t,n){e.exports={Handler:n(369),Renderer:n(370),string:{Renderer:n(371)}}},function(e,t){e.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){return arguments.length?(e=t,this):e},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n),e.add(r,i)},bezierCurveTo:function(t,n,r,i,o,a){e.add(t,n),e.add(r,i),e.add(o,a)}}}},function(e,t){function n(e){this.id="gradient_"+r++,this.type=e||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}var r=0,i=n.prototype;i.stop=function(e,t){return this.stops.push({offset:e,color:t}),this},e.exports=n},function(e,t){function n(e){this.mark=e}var r=n.prototype;r.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&null!=t[e]},r.cousin=function(e,t){if(0===e)return this;e=e||-1;var n=this.mark,r=n.group,i=null==t?n.items.indexOf(this):t,o=r.items.indexOf(n)+e;return r.items[o].items[i]},r.sibling=function(e){if(0===e)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]},r.remove=function(){var e=this,t=e.mark.items,n=t.indexOf(e);return n>=0&&(n===t.length-1?t.pop():t.splice(n,1)),e},r.touch=function(){this.pathCache&&(this.pathCache=null)},e.exports=n},function(e,t,n){function r(e,t,n){s.call(this,e,t,n),this._type="canvas",this._renderers={canvas:o,svg:a}}var i=n(34).render,o=i.canvas,a=i.svg.string,s=n(199),u=r.prototype=new s;u.renderer=function(e){return e&&(this._type=e),s.prototype.renderer.apply(this,arguments)},u.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},u.canvasAsync=function(e){function t(){0===n.pendingImages()?(r.render(),e(r.canvas())):setTimeout(t,10)}var n=this._renderer,r=this;return"canvas"!==this._type?null:void(n.pendingImages()>0?t():e(this.canvas()))},u.svg=function(){return"svg"===this._type?this._renderer.svg():null},u.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();return this._viewport&&(e=this._viewport[0]-(r?r.left+r.right:0),t=this._viewport[1]-(r?r.top+r.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n),this},e.exports=r},function(e,t,n){function r(e){this._defs={},this._predicates={},this._scene=null,this._groups=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(e),this.expr=p(this),u.init.call(this)}function i(e){var t=this,n={};return o.isArray(e)?(e.forEach(function(e){n[e]=t._predicates[e]}),n):this._predicates[e]}var o=n(1),a=n(4),s=a.ChangeSet,u=a.Graph.prototype,l=a.Node,c=n(207),f=n(209),p=n(131),d=n(130),h=r.prototype=Object.create(u);h.constructor=r,h.defs=function(e){return arguments.length?(this._defs=e,this):this._defs},h.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(d);for(var t in e){var n=e[t],r=this._config[t];o.isObject(n)&&o.isObject(r)?this._config[t]=o.extend({},r,n):this._config[t]=n}return this},h.width=function(e){return this._defs&&(this._defs.width=e),this._defs&&this._defs.marks&&(this._defs.marks.width=e),this._scene&&(this._scene.items[0].width=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.height=function(e){return this._defs&&(this._defs.height=e),this._defs&&this._defs.marks&&(this._defs.marks.height=e),this._scene&&(this._scene.items[0].height=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.node=function(){return this._node||(this._node=new l(this))},h.data=function(){var e=u.data.apply(this,arguments);return arguments.length>1&&this.node().addListener(e.pipeline()[0]),e},h.predicate=function(e,t){return 1===arguments.length?i.call(this,e):this._predicates[e]=t},h.predicates=function(){return this._predicates},h.scene=function(e){if(!arguments.length)return this._scene;this._builder&&(this.node().removeListener(this._builder),this._builder._groupBuilder.disconnect());var t=this,n=this._builder=new l(this);return n.evaluate=function(r){if(n._groupBuilder)return r;var i=n._groupBuilder=new c(t,t._defs.marks,t._scene={}),o=i.pipeline();return t._groups={},this.addListener(i.connect()),o[o.length-1].addListener(e),r},this.addListener(n),this},h.group=function(e,t){var n=this._groups;return 1===arguments.length?n[e]:(n[e]=t,this)},h.reset=function(){return this._scene&&this._reset.axes&&(f(this._scene,function(e){e.axes&&e.axes.forEach(function(e){e.reset()})}),this._reset.axes=!1),this._scene&&this._reset.legends&&(f(this._scene,function(e){e.legends&&e.legends.forEach(function(e){e.reset()})}),this._reset.legends=!1),this},h.addListener=function(e){this.node().addListener(e)},h.removeListener=function(e){this.node().removeListener(e)},h.fire=function(e){e||(e=s.create()),this.propagate(e,this.node())},e.exports=r},function(e,t,n){function r(e,t,n){var r=e.schema;r&&(r.refs&&i.extend(n.refs,r.refs),r.defs&&i.extend(n.defs,r.defs))}var i=n(1),o=n(132),a=n(208),s=n(130);e.exports=function(e){var t=null;return e=e||{},e.url?t=i.json(i.extend({url:e.url},s.load)):(t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},i.keys(o).forEach(function(n){r(o[n],e,t)}),r(a,e,t)),e.properties&&i.keys(e.properties).forEach(function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}}),e.propertySets&&i.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}}),t}},function(e,t,n){function r(e){return null==e?null:i.rgb(e)+""}var i=n(12);e.exports=r,r.schema={defs:{background:{type:"string"}}}},function(e,t,n){function r(e,t,n,r){return{type:"group",width:n,height:r,properties:i(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return o(e,t)})}}function i(e,t){var n,r,i,o,u,l=t.config().scene,c={};for(n=0,r=i=s.length;r>n;++n)o=s[n],void 0!==(u=e[o])?c[o]=u.signal?u:{value:u}:l[o]?c[o]={value:l[o]}:--i;return i?{update:a(t,"group",c)}:{}}var o=n(82),a=n(83),s=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];e.exports=r,r.schema={defs:{container:{type:"object",properties:{scene:{type:"object",properties:{fill:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},fillOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stroke:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},strokeOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},strokeDashOffset:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}},scales:{type:"array",items:{$ref:"#/defs/scale"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/groupMark"},{$ref:"#/defs/visualMark"}]}}}},groupMark:{allOf:[{
properties:{type:{"enum":["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/container"}]},visualMark:{allOf:[{not:{properties:{type:{"enum":["group"]}}}},{$ref:"#/defs/mark"}]}}}},function(e,t,n){function r(e){return null==e?"auto":i.isObject(e)?e:i.isNumber(e)?{top:e,left:e,right:e,bottom:e}:"strict"===e?e:"auto"}var i=n(1);e.exports=r,r.schema={defs:{padding:{oneOf:[{"enum":["strict","auto"]},{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:!1}]}}}},function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){var n=f[t.type](e,t),r=Function("args","db","signals","predicates",n.code);r.root=function(){return e.scene().items[0]},r.nullScale=p,r.isFunction=c.isFunction,r.signals=n.signals,r.data=n.data,e.predicate(t.name,r)}),t}function i(e,t){var n=c.field(e),r="signals["+n.map(c.str).join("][")+"]";return t[n[0]]=1,r}function o(e,t){function n(e){s[e]=1}function r(e){u[e]=1}var o=[],a=[],s={},u={};return c.array(t).forEach(function(t,u){var l="o"+u,f="";if(void 0!==t.value)f=c.str(t.value);else if(t.arg)f="args["+c.str(t.arg)+"]";else if(t.signal)f=i(t.signal,s);else if(t.predicate){var p=t.predicate,d=p&&(p.name||p),h=e.predicate(d),m="predicates["+c.str(d)+"]";h.signals.forEach(n),h.data.forEach(r),c.isObject(p)&&c.keys(p).forEach(function(e){if("name"!==e){var t=p[e];f+="args["+c.str(e)+"] = ",t.signal?f+=i(t.signal,s):t.arg&&(f+="args["+c.str(t.arg)+"]"),f+=", "}}),f+=m+".call("+m+", args, db, signals, predicates)"}o.push(l),a.push(l+"=("+f+")")}),{code:"var "+o.join(", ")+";\n"+a.join(";\n")+";\n",signals:c.keys(s),data:c.keys(u)}}function a(e,t){var n=o(e,t.operands);return"="===t.type&&(t.type="=="),n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function s(e,t){for(var n=o(e,t.operands),r=[],i=0,a=t.operands.length;r.push("o"+i++)<a;);return"and"===t.type?t.type="&&":"or"===t.type&&(t.type="||"),{code:n.code+"return "+r.join(t.type)+";",signals:n.signals,data:n.data}}function u(e,t){var n=[t.item],r="";t.range&&n.push.apply(n,t.range),t.scale&&(r=l(t.scale,n));var i=o(e,n);if(r=i.code+r+"\n  var ordSet = null;\n",t.data){var a=c.field(t.field).map(c.str);r+="var where = function(d) { return d["+a.join("][")+"] == o0 };\n",r+="return db["+c.str(t.data)+"].filter(where).length > 0;"}else t.range&&(t.scale&&(r+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),r+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;");return{code:r,signals:i.signals,data:i.data.concat(t.data?[t.data]:[])}}function l(e,t){var n="var scale = ",r=t.length;return c.isString(e)?(t.push({value:e}),n+="this.root().scale(o"+r+")"):e.arg?(t.push(e),n+="o"+r):e.name&&(t.push(c.isString(e.name)?{value:e.name}:e.name),n+="(this.isFunction(o"+r+") ? o"+r+" : ",e.scope?(t.push(e.scope),n+="((o"+(r+1)+".scale || this.root().scale)(o"+r+") || this.nullScale)"):n+="this.root().scale(o"+r+")",n+=")"),e.invert===!0&&(n+=".invert"),n+";\n"}var c=n(1),f={"=":a,"==":a,"!=":a,">":a,">=":a,"<":a,"<=":a,and:s,"&&":s,or:s,"||":s,"in":u},p=function(){return 0};p.invert=p,e.exports=r,r.schema={refs:{operand:{type:"object",oneOf:[{properties:{value:{}},required:["value"]},{properties:{arg:{type:"string"}},required:["arg"]},{$ref:"#/refs/signal"},{properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}},required:["predicate"]}]}},defs:{predicate:{type:"object",oneOf:[{properties:{name:{type:"string"},type:{"enum":["==","!=",">","<",">=","<="]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2,maxItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{"enum":["and","&&","or","||"]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{"enum":["in"]},item:{$ref:"#/refs/operand"}},oneOf:[{properties:{range:{type:"array",items:{$ref:"#/refs/operand"},minItems:2},scale:{$ref:"#/refs/scopedScale"}},required:["range"]},{properties:{data:{type:"string"},field:{type:"string"}},required:["data","field"]}],required:["name","type","item"]}]}}}},function(e,t,n){function r(e){function t(e){try{e=i.duplicate(e);var t=n(132),o=e.width||500,a=e.height||500,s=t.padding(e.padding);p.signal("width",o),p.signal("height",a),p.signal("padding",s),r(e),p.defs({width:o,height:a,padding:s,viewport:e.viewport||null,background:t.background(e.background),signals:t.signals(p,e.signals),predicates:t.predicates(p,e.predicates),marks:t.marks(p,e,o,a),data:t.data(p,e.data,u)})}catch(l){u(l)}}function r(e){var t,n=e.signals||(e.signals=[]);n.some(function(e){return"cursor"===e.name?(t=e,!0):!1}),t||n.push(t={name:"cursor",streams:[]}),t.init=t.init||{},t.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function u(e){var t;e?o.error(e):t=d(p.buildIndexes()),f&&(f.length>1?f(e,t):e||f(t),f=null)}var l=arguments.length,c=2,f=arguments[l-1],p=new a,d=s.factory;if(l>c&&i.isFunction(arguments[l-c])&&(d=arguments[l-c],++c),l>c&&i.isObject(arguments[l-c])&&p.config(arguments[l-c]),i.isObject(e))t(e);else if(i.isString(e)){var h=i.extend({url:e},p.config().load);i.json(h,function(e,n){e?u("SPECIFICATION LOAD FAILED: "+e):t(n)})}else u("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}var i=n(1),o=n(2),a=n(377),s=n(199);e.exports=r,r.schema={defs:{spec:{title:"Vega visualization specification",type:"object",allOf:[{$ref:"#/defs/container"},{properties:{width:{type:"number"},height:{type:"number"},viewport:{type:"array",items:{type:"number"},maxItems:2},background:{$ref:"#/defs/background"},padding:{$ref:"#/defs/padding"},signals:{type:"array",items:{$ref:"#/defs/signal"}},predicates:{type:"array",items:{$ref:"#/defs/predicate"}},data:{type:"array",items:{$ref:"#/defs/data"}}}}]}}}},function(e,t,n){function r(e,t){this.duration=e||500,this.ease=t&&o.ease(t)||o.ease("cubic-in-out"),this.updates={next:null}}function i(e){for(var t,n,r,i,o,s,l=this.updates,c=l,f=c.next,p=this.duration,d=!0;null!=f;c=f,f=c.next)if(t=f.item,n=t.delay||0,r=(e-n)/p,0>r)d=!1;else{for(r>1&&(r=1),i=f.ease(r),o=0,s=f.length;s>o;++o)t[f[o].property]=f[o](i);t.touch(),a.item(t),1===r?(f.remove&&(t.status=u.EXIT,t.remove()),c.next=f.next,f=c):d=!1}return this.callback(),d}var o=n(12),a=n(34).bound,s=n(4).Tuple,u=n(84).STATUS,l=r.prototype,c={text:1,url:1};l.interpolate=function(e,t){var n,r,i,a,l=null;for(n in t)r=e[n],i=t[n],r!==i&&(c[n]||void 0===r?s.set(e,n,i):"number"!=typeof r||isFinite(r)?(a=o.interpolate(r,i),a.property=n,(l||(l=[])).push(a)):s.set(e,n,i));return null===l&&e.status===u.EXIT&&(l=[]),null!=l&&(l.item=e,l.ease=e.mark.ease||this.ease,l.next=this.updates.next,this.updates.next=l),this},l.start=function(e){for(var t=this,n=t.updates,r=n.next;null!=r;n=r,r=n.next)r.item.status===u.EXIT&&(r.item.status=u.UPDATE,r.remove=!0);t.callback=e,o.timer(function(e){return i.call(t,e)})},e.exports=r},function(e,t,n){function r(e){function t(){C.type=null}function n(e){return{data:e}}function r(e){var t=U||(S.ticks?S.ticks(F):S.domain()),r=i(S,t,q).map(n);return t=t.map(function(t){return t=n(t),t.label=e(t.data),t}),[t,r]}function o(e){var t=e.orient,n=e.marks[5].properties.update,r=n.encode,i=k.titleOffsetAutoMin,o=k.titleOffsetAutoMax,a=k.titleOffsetAutoMargin;n.encode=function(e,n,s,u,l,c){var f=r.call(r,e,n,s,u,l,c),p="bottom"===t||"top"===t?"y":"x";if(null!=W[p])return f;b.clear().union(n.items[3].bounds).union(n.items[4].bounds);var d=s?{}:e,h="left"===t||"right"===t?"width":"height",m="top"===t||"left"===t?-1:1,g=~~(b[h]()+e.fontSize/2+a);return v.set(d,p,m*Math.min(Math.max(i,g),o)),s&&s.interpolate(e,d),!0}}function w(t){var n,r,i;t.type===x?(n={scale:t.scaleName,offset:.5+t.rangeBand()/2},r=n):(n={scale:t.scaleName,offset:.5},r={scale:t.scaleName+":prev",offset:.5}),i=a(t),g.extend(G.gridLines,p(k)),g.extend(G.majorTicks,p(k)),g.extend(G.minorTicks,p(k)),g.extend(G.tickLabels,d(k)),g.extend(G.domain,m(k)),g.extend(G.title,h(k)),G.gridLines.properties.enter.stroke={value:k.gridColor},G.gridLines.properties.enter.strokeOpacity={value:k.gridOpacity},u(M,G.gridLines,r,n,1/0,T),u(M,G.majorTicks,r,n,L),u(M,G.minorTicks,r,n,D),s(M,G.tickLabels,r,n,L,R),c(M,G.domain,i,P),l(M,G.title,i,+A||-1),g.extend(G.gridLines.properties.update,B),g.extend(G.majorTicks.properties.update,H),g.extend(G.minorTicks.properties.update,V),g.extend(G.tickLabels.properties.update,Y),g.extend(G.domain.properties.update,$),g.extend(G.title.properties.update,W);var o=[G.gridLines,G.majorTicks,G.minorTicks,G.tickLabels,G.domain,G.title];g.extend(C,{type:"group",interactive:!1,properties:{enter:{encode:f,scales:[t.scaleName],signals:[],data:[]},update:{encode:f,scales:[t.scaleName],signals:[],data:[]}}}),C.marks=o.map(function(t){return y(e,t)})}var S,k=e.config().axis,M=k.orient,T=0,A=k.titleOffset,C={},O="front",N=!1,I=null,L=k.tickSize,D=k.tickSize,P=k.tickSize,R=k.padding,U=null,j=null,z=null,q=0,F=k.ticks,B={},Y={},H={},V={},W={},$={},G={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},X={};return X.def=function(){C.type||w(S);var e=_.getTickFormat(S,F,z,j),t=r(e),i=I?[I].map(n):[];return C.marks[0].from=function(){return N?t[0]:[]},C.marks[1].from=function(){return t[0]},C.marks[2].from=function(){return t[1]},C.marks[3].from=C.marks[1].from,C.marks[4].from=function(){return[1]},C.marks[5].from=function(){return i},C.offset=T,C.orient=M,C.layer=O,"auto"===A&&o(C),C},X.scale=function(e){return arguments.length?(S!==e&&(S=e,t()),X):S},X.orient=function(e){return arguments.length?(M!==e&&(M=e in E?e+"":k.orient,t()),X):M},X.title=function(e){return arguments.length?(I!==e&&(I=e,t()),X):I},X.tickCount=function(e){return arguments.length?(F=e,X):F},X.tickValues=function(e){return arguments.length?(U=e,X):U},X.tickFormat=function(e){return arguments.length?(j!==e&&(j=e,t()),X):j},X.tickFormatType=function(e){return arguments.length?(z!==e&&(z=e,t()),X):z},X.tickSize=function(e,n){if(!arguments.length)return L;var r=arguments.length-1,i=+e,o=r>1?+n:L,a=r>0?+arguments[r]:L;return L===i&&D===o&&P===a||t(),L=i,D=o,P=a,X},X.tickSubdivide=function(e){return arguments.length?(q=+e,X):q},X.offset=function(e){return arguments.length?(T=g.isObject(e)?e:+e,X):T},X.tickPadding=function(e){return arguments.length?(R!==+e&&(R=+e,t()),X):R},X.titleOffset=function(e){return arguments.length?(A!==e&&(A=e,t()),X):A},X.layer=function(e){return arguments.length?(O!==e&&(O=e,t()),X):O},X.grid=function(e){return arguments.length?(N!==e&&(N=e,t()),X):N},X.gridLineProperties=function(e){return arguments.length?(B!==e&&(B=e),X):B},X.majorTickProperties=function(e){return arguments.length?(H!==e&&(H=e),X):H},X.minorTickProperties=function(e){return arguments.length?(V!==e&&(V=e),X):V},X.tickLabelProperties=function(e){return arguments.length?(Y!==e&&(Y=e),X):Y},X.titleProperties=function(e){return arguments.length?(W!==e&&(W=e),X):W},X.domainProperties=function(e){return arguments.length?($!==e&&($=e),X):$},X.reset=function(){return t(),X},X}function i(e,t,n){var r=[];if(n&&t.length>1){for(var i,a,s=o(e.domain()),u=-1,l=t.length,c=(t[1]-t[0])/++n;++u<l;)for(i=n;--i>0;)(a=+t[u]-i*c)>=s[0]&&r.push(a);for(--u,i=0;++i<n&&(a=+t[u]+i*c)<s[1];)r.push(a)}return r}function o(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function a(e){return e.rangeExtent?e.rangeExtent():o(e.range())}function s(e,t,n,r,i,o){i=Math.max(i,0)+o,"left"!==e&&"top"!==e||(i*=-1),"top"===e||"bottom"===e?(g.extend(t.properties.enter,{x:n,y:{value:i}}),g.extend(t.properties.update,{x:r,y:{value:i},align:{value:"center"},baseline:{value:S[e]}})):(g.extend(t.properties.enter,{x:{value:i},y:n}),g.extend(t.properties.update,{x:{value:i},y:r,align:{value:w[e]},baseline:{value:"middle"}}))}function u(e,t,n,r,i,o){var a="left"===e||"top"===e?-1:1;i=i===1/0?"top"===e||"bottom"===e?{field:{group:"height",level:2},mult:-a,offset:o*-a}:{field:{group:"width",level:2},mult:-a,offset:o*-a}:{value:a*i,offset:o},"top"===e||"bottom"===e?(g.extend(t.properties.enter,{x:n,y:{value:0},y2:i}),g.extend(t.properties.update,{x:r,y:{value:0},y2:i}),g.extend(t.properties.exit,{x:r})):(g.extend(t.properties.enter,{x:{value:0},x2:i,y:n}),g.extend(t.properties.update,{x:{value:0},x2:i,y:r}),g.extend(t.properties.exit,{y:r}))}function l(e,t,n,r){var i=t.properties.update,o=~~((n[0]+n[1])/2),a="top"===e||"left"===e?-1:1;"bottom"===e||"top"===e?(i.x={value:o},i.angle={value:0},r>=0&&(i.y={value:a*r})):(i.y={value:o},i.angle={value:"left"===e?-90:90},r>=0&&(i.x={value:a*r}))}function c(e,t,n,r){var i;"top"!==e&&"left"!==e||(r=-1*r),i="bottom"===e||"top"===e?"M"+n[0]+","+r+"V0H"+n[1]+"V"+r:"M"+r+","+n[0]+"H0V"+n[1]+"H"+r,t.properties.update.path={value:i}}function f(e,t,n){var r=n?{}:e,i=e.mark.def.offset,o=e.mark.def.orient,a=t.width,s=t.height;if(g.isArray(i)){var u=i[0],l=i[1];switch(o){case"left":v.set(r,"x",-u),v.set(r,"y",l);break;case"right":v.set(r,"x",a+u),v.set(r,"y",l);break;case"bottom":v.set(r,"x",u),v.set(r,"y",s+l);break;case"top":v.set(r,"x",u),v.set(r,"y",-l);break;default:v.set(r,"x",u),v.set(r,"y",l)}}else switch(g.isObject(i)&&(i=-t.scale(i.scale)(i.value)),o){case"left":v.set(r,"x",-i),v.set(r,"y",0);break;case"right":v.set(r,"x",a+i),v.set(r,"y",0);break;case"bottom":v.set(r,"x",0),v.set(r,"y",s+i);break;case"top":v.set(r,"x",0),v.set(r,"y",-i);break;default:v.set(r,"x",0),v.set(r,"y",0)}return n&&n.interpolate(e,r),!0}function p(e){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function d(e){return{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:e.tickLabelColor},font:{value:e.tickLabelFont},fontSize:{value:e.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function h(e){return{type:"text",interactive:!0,properties:{enter:{font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},fill:{value:e.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function m(e){return{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axisColor},strokeWidth:{value:e.axisWidth}},update:{}}}}var g=n(1),v=n(4).Tuple,y=n(82),_=n(135),b=new(n(34).Bounds),x="ordinal",E={top:1,right:1,bottom:1,left:1},w={bottom:"center",top:"center",left:"right",right:"left"},S={bottom:"top",top:"bottom",left:"middle",right:"middle"};e.exports=r},function(e,t,n){function r(e){function t(){Y.type=null}function n(e,t){return{data:e,index:t}}function r(e){return"ordinal"===e||"quantize"===e||"quantile"===e||"threshold"===e}function y(e){var t,r,i,o=_(E,w,S,k),a=(null==T?e.ticks?e.ticks.apply(e,P):e.domain():T).map(n),s=g.getTickFormat(e,a.length,C,A),u=5,l=f.range(a.length);E?(r=a.map(function(e){return Math.sqrt(E(e.data))}),i=f.max(r),r=r.reduce(function(e,t,n,r){return n>0&&(e[n]=e[n-1]+r[n-1]/2+u),e[n]+=t/2,e},[0]).map(Math.round)):(i=Math.round(Math.sqrt(N.symbolSize)),r=M||(t=q.fontSize)&&t.value+u||N.labelFontSize+u,r=l.map(function(e,t){return Math.round(i/2+t*r)}));var c,d=D;O&&(c=z.fontSize,d+=5+(c&&c.value||N.titleFontSize));for(var h=0,m=r.length;m>h;++h)r[h]+=d;o.scales=o.scales||[{}],p.extend(o.scales[0],{name:"legend",type:"ordinal",points:!0,domain:l,range:r});var v=(O?[O]:[]).map(n);return a.forEach(function(e){e.label=s(e.data),e.offset=i}),o.marks[0].from=function(){return v},o.marks[1].from=function(){return a},o.marks[2].from=o.marks[1].from,o}function _(t,n,r,l){var c=p.extend(F.titles,a(N)),f=p.extend(F.symbols,s(N)),d=p.extend(F.labels,u(N));return o(f,t,n,r,l),p.extend(c.properties.update,z),p.extend(f.properties.update,U),p.extend(d.properties.update,q),c.properties.enter.x.value+=D,c.properties.enter.y.value+=D,d.properties.enter.x.offset+=D+1,f.properties.enter.x.offset=D+1,d.properties.update.x.offset+=D+1,f.properties.update.x.offset=D+1,p.extend(Y,{type:"group",interactive:!1,properties:{enter:h(e,"group",R),legendPosition:{encode:i,signals:[],scales:[],data:[],fields:[]}}}),Y.marks=[c,f,d].map(function(t){return m(e,t)}),Y}function b(e){var t=x(e),r=e.domain(),i=(null==T?r:T).map(n),o=j.width&&j.width.value||N.gradientWidth,a=g.getTickFormat(e,i.length,C,A);t.scales=t.scales||[{}];var s=p.extend(t.scales[0],{name:"legend",type:e.type,round:!0,zero:!1,domain:[r[0],r[r.length-1]],range:[D,o+D]});"pow"===e.type&&(s.exponent=e.exponent());var u=(O?[O]:[]).map(n);return i.forEach(function(e,t){e.label=a(e.data),e.align=t==i.length-1?"right":0===t?"left":"center"}),t.marks[0].from=function(){return u},t.marks[1].from=function(){return[1]},t.marks[2].from=function(){return i},t}function x(t){var n=p.extend(F.titles,a(N)),r=p.extend(F.gradient,l(N)),o=p.extend(F.labels,c(N)),s=new d,u=t.domain(),f=u[0],g=u[u.length-1],v=t.copy().domain([f,g]).range([0,1]),y="linear"!==t.type&&t.ticks?t.ticks.call(t,15):u;f!==y[0]&&y.unshift(f),g!==y[y.length-1]&&y.push(g);for(var _=0,b=y.length;b>_;++_)s.stop(v(y[_]),t(y[_]));r.properties.enter.fill={value:s},p.extend(n.properties.update,z),p.extend(r.properties.update,j),p.extend(o.properties.update,q);var x=r.properties,E=j.height,w=E&&E.value||x.enter.height.value;if(o.properties.enter.y.value=w,o.properties.update.y.value=w,O){var S=n.properties,k=z.fontSize,M=4+(k&&k.value||S.enter.fontSize.value);r.properties.enter.y.value+=M,o.properties.enter.y.value+=M,r.properties.update.y.value+=M,o.properties.update.y.value+=M}return n.properties.enter.x.value+=D,n.properties.enter.y.value+=D,r.properties.enter.x.value+=D,r.properties.enter.y.value+=D,o.properties.enter.y.value+=D,r.properties.update.x.value+=D,r.properties.update.y.value+=D,o.properties.update.y.value+=D,p.extend(Y,{type:"group",interactive:!1,properties:{enter:h(e,"group",R),legendPosition:{encode:i,signals:[],scales:[],data:[],fields:[]}}}),Y.marks=[n,r,o].map(function(t){return m(e,t)}),Y}var E=null,w=null,S=null,k=null,M=null,T=null,A=null,C=null,O=null,N=e.config().legend,I=N.orient,L=N.offset,D=N.padding,P=[5],R={},U={},j={},z={},q={},F={titles:{},symbols:{},labels:{},gradient:{}},B={},Y={};return B.def=function(){var e=E||w||S||k;return Y.type||(Y=e!==S&&e!==k||r(e.type)?y(e):b(e)),Y.orient=I,Y.offset=L,Y.padding=D,Y.margin=N.margin,Y},B.size=function(e){return arguments.length?(E!==e&&(E=e,t()),B):E},B.shape=function(e){return arguments.length?(w!==e&&(w=e,t()),B):w},B.fill=function(e){return arguments.length?(S!==e&&(S=e,t()),B):S},B.stroke=function(e){return arguments.length?(k!==e&&(k=e,t()),B):k},B.title=function(e){return arguments.length?(O!==e&&(O=e,t()),B):O},B.format=function(e){return arguments.length?(A!==e&&(A=e,t()),B):A},B.formatType=function(e){return arguments.length?(C!==e&&(C=e,t()),B):C},B.spacing=function(e){return arguments.length?(M!==+e&&(M=+e,t()),B):M},B.orient=function(e){return arguments.length?(I=e in v?e+"":N.orient,B):I},B.offset=function(e){return arguments.length?(L=+e,B):L},B.values=function(e){return arguments.length?(T=e,B):T},B.legendProperties=function(e){return arguments.length?(R=e,B):R},B.symbolProperties=function(e){return arguments.length?(U=e,B):U},B.gradientProperties=function(e){return arguments.length?(j=e,B):j},B.labelProperties=function(e){return arguments.length?(q=e,B):q},B.titleProperties=function(e){return arguments.length?(z=e,B):z},B.reset=function(){return t(),B},B}function i(e,t,n,r,i,o){var a,s=n?{}:e,u=e.mark.def,l=u.offset,c=u.orient,f=2*u.padding,p="left"===c?0:t.width,d=~~e.bounds.width()+(e.width?0:f),h=~~e.bounds.height()+(e.height?0:f),m=t._legendPositions||(t._legendPositions={right:.5,left:.5});s.x=.5,s.width=d,s.y=m[c],m[c]+=(s.height=h)+u.margin;var g=t.axes,y=t.axisItems,_=v[c];for(a=0;a<g.length;++a)g[a].orient()===c&&(p=Math.max(p,Math.abs(y[a].bounds[_])));"left"===c?s.x-=p+l+d:s.x+=p+l,n&&n.interpolate(e,s);var b=e.mark.def.properties.enter.encode;return b.call(b,e,t,n,r,i,o),!0}function o(e,t,n,r,i){var o=e.properties.enter,a=e.properties.update;t&&(o.size=a.size={scale:t.scaleName,field:"data"}),n&&(o.shape=a.shape={scale:n.scaleName,field:"data"}),r&&(o.fill=a.fill={scale:r.scaleName,field:"data"}),i&&(o.stroke=a.stroke={scale:i.scaleName,field:"data"})}function a(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function s(e){return{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:e.symbolShape},size:{value:e.symbolSize},stroke:{value:e.symbolColor},strokeWidth:{value:e.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function u(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{value:e.labelAlign},baseline:{value:e.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function l(e){return{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:e.gradientWidth},height:{value:e.gradientHeight},stroke:{value:e.gradientStrokeColor},strokeWidth:{value:e.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function c(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}var f=n(12),p=n(1),d=n(34).Gradient,h=n(83),m=n(82),g=n(135),v={left:"x1",right:"x2"};e.exports=r},function(e,t,n){function r(e){return u.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value","default":10},maxbins:{type:"value","default":20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>","default":[5,2]}}),this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"},this.mutates(!0)}var i=n(1),o=n(4).Tuple,a=n(2),s=n(9),u=n(22),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.extent=function(e){var t,n=[this.param("min"),this.param("max")];return null!=n[0]&&null!=n[1]||(t=i.extent(e,this.param("field").accessor),null==n[0]&&(n[0]=t[0]),null==n[1]&&(n[1]=t[1])),n},l.batchTransform=function(e,t){function n(e){var t=f(e);t=null==t?null:d.start+h*~~((t-d.start)/h),o.set(e,s.start,t),o.set(e,s.end,t+h),o.set(e,s.mid,t+h/2)}a.debug(e,["binning"]);var r=this.extent(t),s=this._output,u=this.param("step"),l=this.param("steps"),c=this.param("minstep"),f=this.param("field").accessor,p={min:r[0],max:r[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};u&&(p.step=u),l&&(p.steps=l),c&&(p.minstep=c);var d=i.bins(p),h=d.step;return e.add.forEach(n),e.mod.forEach(n),e.rem.forEach(n),e.fields[s.start]=1,e.fields[s.end]=1,e.fields[s.mid]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Bin transform",description:"Bins values into quantitative bins (e.g., for a histogram).",type:"object",properties:{type:{"enum":["bin"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The name of the field to bin values from."},min:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The minimum bin value to consider."},max:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum bin value to consider."},base:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The number base to use for automatic bin determination.","default":10},maxbins:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum number of allowable bins.","default":20},step:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"An exact step size to use between bins. If provided, options such as maxbins will be ignored."},steps:{description:"An array of allowable step sizes to choose from.",oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},minstep:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"A minimum allowable step size (particularly useful for integer values)."},div:{description:"An array of scale factors indicating allowable subdivisions.",oneOf:[{type:"array",items:{type:"number"},"default":[5,2]},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string","default":"bin_start"},end:{type:"string","default":"bin_end"},mid:{type:"string","default":"bin_mid"}},additionalProperties:!1}},additionalProperties:!1,required:["type","field"]}},function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field","default":"data"},pattern:{type:"value","default":"[\\w']+"},"case":{type:"value","default":"lower"},stopwords:{type:"value","default":""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var i=n(4),o=i.Tuple,a=n(2),s=n(9),u=r.prototype=Object.create(s.prototype);u.constructor=r,u.transform=function(e,t){function n(e){return o.prev_init(e),i(e)}function r(e){return i(o.prev(e))}a.debug(e,["countpattern"]);var i=this.param("field").accessor,s=this.param("pattern"),u=this.param("stopwords"),l=!1;return this._stop!==u&&(this._stop=u,this._stop_re=new RegExp("^"+u+"$","i"),t=!0),this._pattern!==s&&(this._pattern=s,this._match=new RegExp(this._pattern,"g"),t=!0),t&&(this._counts={}),this._add(e.add,n),t||this._rem(e.rem,r),(t||(l=e.fields[i.field]))&&(l&&this._rem(e.mod,r),this._add(e.mod,n)),this._changeset(e)},u._changeset=function(e){var t,n,r,a=this._counts,s=this._tuples||(this._tuples={}),u=i.ChangeSet.create(e),l=this._output;for(t in a)n=s[t],r=a[t]||0,!n&&r?(s[t]=n=o.ingest({}),n[l.text]=t,n[l.count]=r,u.add.push(n)):0===r?(n&&u.rem.push(n),delete a[t],delete s[t]):n[l.count]!==r&&(o.set(n,l.count,r),u.mod.push(n));return u},u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(this._match)},u._add=function(e,t){var n,r,i,o,a=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(o=n[r])||(a[o]=1+(a[o]||0))},u._rem=function(e,t){var n,r,i,o,a=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(o=n[r])||(a[o]-=1)},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"CountPattern transform",type:"object",properties:{type:{"enum":["countpattern"]},field:{description:"The field containing the text to analyze.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"data"},pattern:{description:"A regexp pattern for matching words in text.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"[\\w']+"},"case":{description:"Text case transformation to apply.",oneOf:[{"enum":["lower","upper","none"]},{$ref:"#/refs/signal"}],"default":"lower"},stopwords:{description:"A regexp pattern for matching stopwords to omit.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":""},output:{type:"object",description:"Rename the output data fields",properties:{text:{type:"string","default":"text"},count:{type:"string","default":"count"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return g.prototype.init.call(this,e),m.addParameters(this,{"with":{type:"data"},diagonal:{type:"value","default":"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastWith=null,this._cids={},this._cache={},this.router(!0).produces(!0)}function i(e,t){var n=this._cache,r=n[e._id]||(n[e._id]={c:[],f:!1});r.c.push(t)}function o(e,t,n){return e?t._id+"_"+n._id:n._id+"_"+t._id}function a(e,t,n,r,a,s,u){for(var l,c,f=this._output,p=this._cache,h=this._cids,m=e.add,g=!1,v=0,y=n.length,_={};y>v;++v)l=n[v],c=o(t,u,l),h[c]||(u._id!==l._id||r)&&(d.set(_,f.left,t?u:l),d.set(_,f.right,t?l:u),!a||a(_)?(m.push(_=d.ingest(_)),i.call(this,u,_),u._id!==l._id&&i.call(this,l,_),s[_._id]=1,h[c]=!0,_={}):(p[l._id]&&(p[l._id].f=!0),g=!0));p[u._id]&&(p[u._id].f=g)}function s(e,t,n,r,i,s,u,l){var c,f,p,d,h,m=this._output,g=this._cache,v=this._cids,y=g[l._id],_=y&&y.c,b=!y||y.f,x=e.mod,E=e.rem;if(_)for(c=_.length-1;c>=0;--c)if(f=_[c],d=l===f[m.left],p=d?f[m.right]:f[m.left],h=o(d,l,p),g[p._id])if(!i||i(f)){if(s[f._id])continue;x.push(f),s[f._id]=1}else u[f._id]||E.push.apply(E,_.splice(c,1)),u[f._id]=1,v[h]=!1,y.f=!0;else v[h]=!1,_.splice(c,1);i&&b&&a.call(this,e,t,n,r,i,s,l)}function u(e,t,n,r){var i,a,s,u,l,c=this._output,f=this._cache[r._id],p=this._cids,d=e.rem;if(f){for(i=0,a=f.c.length;a>i;++i)s=f.c[i],l=r===s[c.left],u=l?s[c.right]:s[c.left],p[o(l,r,u)]=!1,n[s._id]||(d.push(s),n[s._id]=1);this._cache[r._id]=null}}function l(e,t){var n,r,i,o,a,s,u=this._cache,l=c.keys(u),f=e.rem;for(n=0,r=l.length;r>n;++n)for(a=u[l[n]],i=0,o=a.c.length;o>i;++i)s=a.c[i],t[s._id]||(f.push(s),t[s._id]=1);this._cache={},this._cids={},this._lastWith=null}var c=n(1),f=n(4),p=f.ChangeSet,d=f.Tuple,h=n(2),m=n(9),g=n(22),v=r.prototype=Object.create(g.prototype);v.constructor=r,v.batchTransform=function(e,t,n){h.debug(e,["crossing"]);var r=this.param("with"),i=this.param("diagonal"),o=this._output,c=this.param("filter")||null,f=!r.name,d=f?e:r.source.last(),m=f?t:r.source.values(),g=p.create(e),v={},y={};return n?(l.call(this,g,y),t.forEach(a.bind(this,g,!0,m,i,c,v)),this._lastWith=d.stamp):(e.rem.forEach(u.bind(this,g,!0,y)),e.add.forEach(a.bind(this,g,!0,m,i,c,v)),d.stamp>this._lastWith&&(d.rem.forEach(u.bind(this,g,!1,y)),d.add.forEach(a.bind(this,g,!1,t,i,c,v)),d.mod.forEach(s.bind(this,g,!1,t,i,c,v,y)),this._lastWith=d.stamp),e.mod.forEach(s.bind(this,g,!0,m,i,c,v,y))),g.fields[o.left]=1,g.fields[o.right]=1,g},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Cross transform",description:"Compute the cross-product of two data sets.",type:"object",properties:{type:{"enum":["cross"]},"with":{type:"string",description:"The name of the secondary data set to cross with the primary data. If unspecified, the primary data is crossed with itself."},diagonal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],description:'If false, items along the "diagonal" of the cross-product (those elements with the same index in their respective array) will not be included in the output.',"default":!0},filter:{type:"string",description:"A string containing an expression (in JavaScript syntax) to filter the resulting data elements."},output:{type:"object",description:"Rename the output data fields",properties:{left:{type:"string","default":"a"},right:{type:"string","default":"b"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return i.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var e=n(133),t=this._transform;return t._pipeline.map(function(n){return e(t._graph,n);
})}}}),this._pipeline=[],o.call(this,e)}var i=n(9),o=n(86),a=r.prototype=Object.create(o.prototype);a.constructor=r,a.aggr=function(){return o.prototype.aggr.call(this).facet(this)},a.transform=function(e,t){var n=o.prototype.transform.call(this,e,t);return e.add.length&&this.listeners()[0].rerank(),n},e.exports=r;var s=n(1);r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Facet transform",description:'A special aggregate transform that organizes a data set into groups or "facets".',type:"object",properties:s.extend({},o.schema.properties,{type:{"enum":["facet"]},transform:{$ref:"#/defs/transform"}}),additionalProperties:!1,required:["type"]}},function(e,t,n){function r(){a.call(this),this._facet=null,this._facetID=++f}function i(e){c.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}var o=n(1),a=o.Aggregator,s=a.prototype,u=n(4),l=u.Tuple,c=n(2),f=0,p=r.prototype=Object.create(s);p.constructor=r,p.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},p._ingest=function(e){return l.ingest(e,null)},p._assign=l.set,p._newcell=function(e,t){var n=s._newcell.call(this,e,t),r=this._facet;if(r){var o=r._graph,a=n.tuple,u=r.param("transform");n.ds=o.data(a._facetID,u,a),n.disconnect=i,r.addListener(u[0])}return n},p._newtuple=function(e,t){var n=s._newtuple.call(this,e);return this._facet&&(l.set(n,"key",t),l.set(n,"_facetID",this._facetID+"_"+t)),n},p.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return s.clear.call(this)},p._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},p._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},p._on_mod=function(e,t,n,r){this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},p._on_drop=function(e){this._facet&&e.disconnect(this._facet)},p._on_keep=function(e){this._facet&&u.ChangeSet.copy(this._input,e.ds._input)},e.exports=r},function(e,t,n){function r(e){return a.prototype.init.call(this,e),a.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var i=n(4),o=n(2),a=n(9),s=r.prototype=Object.create(a.prototype);s.constructor=r,s.transform=function(e){o.debug(e,["filtering"]);var t=i.ChangeSet.create(e),n=this._skip,r=this.param("test");return e.rem.forEach(function(e){1!==n[e._id]?t.rem.push(e):n[e._id]=0}),e.add.forEach(function(e){r(e)?t.add.push(e):n[e._id]=1}),e.mod.forEach(function(e){var i=r(e),o=1===n[e._id];i&&o?(n[e._id]=0,t.add.push(e)):i&&!o?t.mod.push(e):!i&&o||(t.rem.push(e),n[e._id]=1)}),t},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Filter transform",description:"Filters elements from a data set to remove unwanted items.",type:"object",properties:{type:{"enum":["filter"]},test:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the filter predicate."}},additionalProperties:!1,required:["type","test"]}},function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var i=n(4),o=i.Tuple,a=n(2),s=n(9),u=r.prototype=Object.create(s.prototype);u.constructor=r,u._reset=function(e,t){for(var n in this._cache)t.rem.push.apply(t.rem,this._cache[n]);this._cache={}},u._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?o.rederive(e,r[t]):r[t]=o.derive(e)},u._fn=function(e,t,n){var r,i,a,s,u,l;for(r=0,a=e.length;a>r;++r)for(u=e[r],i=0,s=t.field.length;s>i;++i)l=this._tuple(u,i,s),o.set(l,this._output.key,t.field[i]),o.set(l,this._output.value,t.accessor[i](u)),n.push(l)},u.transform=function(e,t){a.debug(e,["folding"]);var n=this,r=this.param("fields"),o=i.ChangeSet.create(e);return t&&this._reset(e,o),this._fn(e.add,r,o.add),this._fn(e.mod,r,t?o.add:o.mod),e.rem.forEach(function(e){o.rem.push.apply(o.rem,n._cache[e._id]),n._cache[e._id]=null}),(e.add.length||e.rem.length||r.field.some(function(t){return!!e.fields[t]}))&&(o.fields[this._output.key]=1,o.fields[this._output.value]=1),o},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Fold transform",description:'Collapse ("fold") one or more data properties into two properties.',type:"object",properties:{type:{"enum":["fold"]},fields:{oneOf:[{type:"array",description:"An array of field references indicating the data properties to fold.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},minItems:1,uniqueItems:!0},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{key:{type:"string","default":"key"},value:{type:"string","default":"value"}},additionalProperties:!1}},additionalProperties:!1,required:["type","fields"]}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=i.layout.force(),l.addParameters(this,{size:{type:"array<value>","default":n(52).size},bound:{type:"value","default":!0},links:{type:"data"},linkStrength:{type:"value","default":1},linkDistance:{type:"value","default":20},charge:{type:"value","default":-30},chargeDistance:{type:"value","default":1/0},friction:{type:"value","default":.9},theta:{type:"value","default":.8},gravity:{type:"value","default":.1},alpha:{type:"value","default":.1},iterations:{type:"value","default":500},interactive:{type:"value","default":this._interactive},active:{type:"value","default":this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i=n(12),o=n(4),a=o.Tuple,s=o.ChangeSet,u=n(2),l=n(9),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.transform=function(e,t){u.debug(e,["force"]),t-=e.signals.active?1:0;var n=this.param("interactive"),r=this.param("links").source,i=r.last(),o=this.param("active"),s=this._output,l=this._layout,c=this._nodes,f=this._links;if(i.stamp<e.stamp&&(i=null),this.configure(e,i,n,t),!n){for(var p=this.param("iterations"),d=0;p>d;++d)l.tick();l.stop()}return this.update(o),(t||o!==this._prev&&o&&o.update)&&l.alpha(this.param("alpha")),o!==this._prev&&(this._prev=o),e.rem.length&&l.nodes(this._nodes=a.idFilter(c,e.rem)),i&&i.rem.length&&l.links(this._links=a.idFilter(f,i.rem)),e.fields[s.x]=1,e.fields[s.y]=1,e},c.configure=function(e,t,n,r){var i=this._layout,o=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if((o||r)&&i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),o){this._setup=!1,this._interactive=n;var a,u,l=this,c=this._graph,f=this._nodes,p=this._links;for(a=e.add,u=0;u<a.length;++u)f.push({tuple:a[u]});if(t)for(a=t.add,u=0;u<a.length;++u)p.push({tuple:a[u],source:f[a[u].source],target:f[a[u].target]});var d=n?function(){c.propagate(s.create(null,!0),l)}:null;i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(f).links(p).on("tick",d).start().alpha(this.param("alpha"))}},c.update=function(e){var t,n,r,i,o,s,u=this._output,l=this.param("bound"),c=this.param("fixed"),f=this.param("size"),p=this._nodes,d={};if(c&&c.source)for(c=c.source.values(),n=0,r=c.length;r>n;++n)d[c[n].id]=1;for(n=0;n<p.length;++n)r=p[n],i=r.tuple,t=i._id,e&&e.id===t?(r.fixed=1,e.update&&(r.x=r.px=e.x,r.y=r.py=e.y)):r.fixed=d[t]||0,o=l?Math.max(0,Math.min(r.x,f[0])):r.x,s=l?Math.max(0,Math.min(r.y,f[1])):r.y,a.set(i,u.x,o),a.set(i,u.y,s)},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Force transform",description:"Performs force-directed layout for network data.",type:"object",properties:{type:{"enum":["force"]},size:{description:"The dimensions [width, height] of this force layout.",oneOf:[{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],"default":[500,500]},links:{type:"string",description:"The name of the link (edge) data set."},linkDistance:{description:"Determines the length of edges, in pixels.",oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],"default":20},linkStrength:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"Determines the tension of edges (the spring constant).","default":1},charge:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"The strength of the charge each node exerts.","default":-30},chargeDistance:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum distance over which charge forces are applied.","default":1/0},iterations:{description:"The number of iterations to run the force directed layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":500},friction:{description:"The strength of the friction force used to stabilize the layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":.9},theta:{description:"The theta parameter for the Barnes-Hut algorithm, which is used to compute charge forces between nodes.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":.8},gravity:{description:"The strength of the pseudo-gravity force that pulls nodes towards the center of the layout area.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":.1},alpha:{description:'A "temperature" parameter that determines how much node positions are adjusted at each step.',oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":.1},interactive:{description:"Enables an interactive force-directed layout.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],"default":!1},active:{description:"A signal representing the active node.",$ref:"#/refs/signal"},fixed:{description:"The name of a datasource containing the IDs of nodes with fixed positions.",type:"string"},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string","default":"layout_x"},y:{type:"string","default":"layout_y"}},additionalProperties:!1}},additionalProperties:!1,required:["type","links"]}},function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var i=n(4),o=i.Tuple,a=n(2),s=n(9),u=r.prototype=Object.create(s.prototype);u.constructor=r,u.transform=function(e){function t(e){o.set(e,n,r(e))}a.debug(e,["formulating"]);var n=this.param("field"),r=this.param("expr");return e.add.forEach(t),this.reevaluate(e)&&e.mod.forEach(t),e.fields[n]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Formula transform",description:"Extends data elements with new values according to a calculation formula.",type:"object",properties:{type:{"enum":["formula"]},field:{type:"string",description:"The property name in which to store the computed formula value."},expr:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the formula."}},required:["type","field","expr"]}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),l.addParameters(this,u.Parameters),l.addParameters(this,{field:{type:"field","default":null}}),this._output={path:"layout_path"},this.mutates(!0)}var i=n(12),o=n(1),a=n(4).Tuple,s=n(2),u=n(210),l=n(9),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.transform=function(e){function t(e){a.set(e,n.path,c(r(e)))}s.debug(e,["geopath"]);var n=this._output,r=this.param("field").accessor||o.identity,l=u.d3Projection.call(this),c=i.geo.path().projection(l);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"GeoPath transform",description:"Creates paths for geographic regions, such as countries, states and counties.",type:"object",properties:o.extend({type:{"enum":["geopath"]},field:{description:"The data field containing GeoJSON Feature data.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string","default":"layout_path"}},additionalProperties:!1}},u.baseSchema),required:["type"],additionalProperties:!1}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{sort:{type:"array<field>","default":null},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"value","default":null},mode:{type:"value","default":"tidy"},size:{type:"array<value>","default":n(52).size},nodesize:{type:"array<value>","default":null},orient:{type:"value","default":"cartesian"}}),this._mode=null,this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i=n(12),o=n(1),a=n(4).Tuple,s=n(2),u=n(9),l=n(22),c="partition",f={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}},p=r.prototype=Object.create(l.prototype);p.constructor=r,p.batchTransform=function(e,t){s.debug(e,["hierarchy layout"]);var n=this._layout,r=this._output,u=this.param("mode"),l=this.param("sort"),p=this.param("nodesize"),d=this.param("parent").accessor,h=t.filter(function(e){return null===d(e)})[0];return u!==this._mode&&(this._mode=u,"tidy"===u&&(u="tree"),n=this._layout=i.layout[u]()),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.depth]=1,u===c?(e.fields[r.width]=1,e.fields[r.height]=1,n.value(this.param("field").accessor)):n.separation(f[this.param("orient")]),p.length&&u!==c?n.nodeSize(p):n.size(this.param("size")),n.sort(l.field.length?o.comparator(l.field):null).children(this.param("children").accessor).nodes(h),t.forEach(function(e){a.set(e,r.x,e.x),a.set(e,r.y,e.y),a.set(e,r.depth,e.depth),u===c&&(a.set(e,r.width,e.dx),a.set(e,r.height,e.dy))}),e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Hierarchy transform",type:"object",properties:{type:{"enum":["hierarchy"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"parent"},field:{description:"The value for the area of each leaf-level node for partition layouts.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The layout algorithm mode to use.",oneOf:[{"enum":["tidy","cluster","partition"]},{$ref:"#/refs/signal"}],"default":"tidy"},orient:{description:"The layout orientation to use.",oneOf:[{"enum":["cartesian","radial"]},{$ref:"#/refs/signal"}],"default":"cartesian"},size:{description:"The dimensions of the tree layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],"default":[500,500]},nodesize:{description:"Sets a fixed x,y size for each node (overrides the size parameter)",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],"default":null},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string","default":"layout_x"},y:{type:"string","default":"layout_y"},width:{type:"string","default":"layout_width"},height:{type:"string","default":"layout_height"},depth:{type:"string","default":"layout_depth"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return c.prototype.init.call(this,e),l.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value","default":"value"},value:{type:"value","default":0}}),this.router(!0).produces(!0)}function i(e,t,n,r){var i,o={_imputed:!0};for(i=0;i<t.length;++i)o[e[i]]=t[i];for(i=0;i<r.length;++i)o[n[i]]=r[i];return u.ingest(o)}function o(e,t,n){var r,i,o,s,u,l,c,f,p=[],d=function(e){return e(o)},h=function(e){return o=e,n.map(d)};for(l=p.domain=a.unique(e,h),f=l.length,c=l.reduce(function(e,t,n){return e[t]={value:t,index:n},e},{}),r={},i=0;i<e.length;++i)o=e[i],s=null==t?[]:t.map(d),u=r[s]||(p.push(r[s]=Array(f)),r[s].values=s,r[s]),u[c[h(o)].index]=o;return p}var a=n(1),s=n(2),u=n(4).Tuple,l=n(9),c=n(22),f=r.prototype=Object.create(c.prototype);f.constructor=r,f.batchTransform=function(e,t){function n(e){return null==e?null:y(e)}s.debug(e,["imputing"]);var r,u,l,c,f,p,d=this.param("groupby"),h=this.param("orderby"),m=this.param("method"),g=this.param("value"),v=this.param("field"),y=v.accessor,_=v.field,b=this._imputed||[],x=[],E=o(t,d.accessor,h.accessor),w=E.domain;for(l=0,f=E.length;f>l;++l)for(r=E[l],"value"!==m&&(g=a[m](r,n)),u=0,c=r.length;c>u;++u)null==r[u]&&(p=i(d.field,r.values,h.field,w[u]),p[_]=g,x.push(p));for(u=0,c=x.length;c>u;++u)e.add.push(x[u]);for(u=0,c=b.length;c>u;++u)e.rem.push(b[u]);return this._imputed=x,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Impute transform",description:"Performs imputation of missing values.",type:"object",properties:{type:{"enum":["impute"]},method:{description:"The imputation method to use.",oneOf:[{"enum":["value","mean","median","min","max"]},{$ref:"#/refs/signal"}],"default":"value"},value:{description:"The value to use for missing data if the method is 'value'.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"},{type:"null"},{$ref:"#/refs/signal"}],"default":0},field:{description:"The data field to impute.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},groupby:{description:"A list of fields to group the data into series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},orderby:{description:"A list of fields to determine ordering within series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","groupby","orderby","field"]}},function(e,t,n){function r(e){return h.prototype.init.call(this,e),h.addParameters(this,{sourceX:{type:"field","default":"_source.layout_x"},sourceY:{type:"field","default":"_source.layout_y"},targetX:{type:"field","default":"_target.layout_x"},targetY:{type:"field","default":"_target.layout_y"},tension:{type:"value","default":.2},shape:{type:"value","default":"line"}}),this._output={path:"layout_path"},this.mutates(!0)}function i(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function o(e,t,n,r,i){var o=n-e,a=r-t,s=i*(o+a),u=i*(a-o);return"M"+e+","+t+"C"+(e+s)+","+(t+u)+" "+(n+u)+","+(r-s)+" "+n+","+r}function a(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function s(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function u(e,t,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?e>=n:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s}function l(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function c(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function f(e,t,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}var p=n(4).Tuple,d=n(2),h=n(9),m=r.prototype=Object.create(h.prototype);m.constructor=r;var g={line:i,curve:o,cornerX:a,cornerY:s,cornerR:u,diagonalX:l,diagonalY:c,diagonalR:f};m.transform=function(e){function t(e){var t=r(i(e),o(e),a(e),s(e),u);p.set(e,n.path,t)}d.debug(e,["linkpath"]);var n=this._output,r=g[this.param("shape")]||g.line,i=this.param("sourceX").accessor,o=this.param("sourceY").accessor,a=this.param("targetX").accessor,s=this.param("targetY").accessor,u=this.param("tension");return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"LinkPath transform",description:"Computes a path definition for connecting nodes within a node-link network or tree diagram.",type:"object",properties:{type:{"enum":["linkpath"]},sourceX:{description:"The data field that references the source x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"_source"},sourceY:{description:"The data field that references the source y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"_source"},targetX:{description:"The data field that references the target x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"_target"},targetY:{description:"The data field that references the target y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"_target"},tension:{description:'A tension parameter for the "tightness" of "curve"-shaped links.',oneOf:[{type:"number",minimum:0,maximum:1},{$ref:"#/refs/signal"}],"default":.2},shape:{description:"The path shape to use",oneOf:[{"enum":["line","curve","cornerX","cornerY","cornerR","diagonalX","diagonalY","diagonalR"]},{$ref:"#/refs/signal"}],"default":"line"},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string","default":"layout_path"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return a.prototype.init.call(this,e),a.addParameters(this,{on:{type:"data"},onKey:{type:"field","default":null},as:{type:"array<value>"},keys:{type:"array<field>","default":["data"]},"default":{type:"value"}}),this.mutates(!0)}var i=n(4).Tuple,o=n(2),a=n(9),s=r.prototype=Object.create(a.prototype);s.constructor=r,s.transform=function(e,t){function n(e){for(var t=0;t<d.length;++t){var n=g[d[t](e)]||m;i.set(e,h[t],n)}}o.debug(e,["lookup"]);var r,a,s=this.param("on"),u=s.source.last(),l=s.source.values(),c=this.param("onKey"),f=c.field,p=this.param("keys"),d=p.accessor,h=this.param("as"),m=this.param("default"),g=this._lut;if(null==g||this._on!==f||f&&u.fields[f]||u.add.length||u.rem.length){if(f)for(c=c.accessor,g={},r=0;r<l.length;++r)g[c(a=l[r])]=a;else g=l;this._lut=g,this._on=f,t=!0}e.add.forEach(n);var v=p.field.some(function(t){return e.fields[t]});return(v||t)&&(e.mod.forEach(n),e.rem.forEach(n)),h.forEach(function(t){e.fields[t]=1}),e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Lookup transform",description:"Extends a data set by looking up values in another data set.",type:"object",properties:{type:{"enum":["lookup"]},on:{type:"string",description:"The name of the secondary data set on which to lookup values."},onKey:{description:"The key field to lookup, or null for index-based lookup.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},keys:{description:"One or more fields in the primary data set to match against the secondary data set.",type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"The names of the fields in which to store looked-up values.",items:{type:"string"}},"default":{description:"The default value to use if a lookup match fails."}},required:["type","on","as","keys"],additionalProperties:!1}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{field:{type:"field","default":null},startAngle:{type:"value","default":0},endAngle:{type:"value","default":2*Math.PI},sort:{type:"value","default":!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(){return 1}var o=n(1),a=n(4).Tuple,s=n(2),u=n(9),l=n(22),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["pie"]);var n,r,u,l=this._output,c=this.param("field").accessor||i,f=this.param("startAngle"),p=this.param("endAngle"),d=this.param("sort"),h=t.map(c),m=f,g=(p-f)/o.sum(h),v=o.range(t.length);for(d&&v.sort(function(e,t){return h[e]-h[t]}),n=0;n<v.length;++n)r=t[v[n]],u=h[v[n]],a.set(r,l.start,m),a.set(r,l.mid,m+.5*u*g),a.set(r,l.end,m+=u*g);return e.fields[l.start]=1,e.fields[l.end]=1,e.fields[l.mid]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Pie transform",description:"Computes a pie chart layout.",type:"object",properties:{type:{"enum":["pie"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The data values to encode as angular spans. If this property is omitted, all pie slices will have equal spans."},startAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],"default":0},endAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],"default":2*Math.PI},sort:{description:" If true, will sort the data prior to computing angles.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],"default":!1},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string","default":"layout_start"},end:{type:"string","default":"layout_end"},mid:{type:"string","default":"layout_mid"}}}},required:["type"]}},function(e,t,n){function r(e){return s.prototype.init.call(this,e),a.addParameters(this,{field:{type:"field","default":null},normalize:{type:"value","default":!1}}),this._output={rank:"rank"},this.mutates(!0)}var i=n(4).Tuple,o=n(2),a=n(9),s=n(22),u=r.prototype=Object.create(s.prototype);u.constructor=r,u.batchTransform=function(e,t){o.debug(e,["rank"]);var n,r,a,s,u=this._output.rank,l=this.param("normalize"),c=this.param("field").accessor,f={},p=t.length;if(c)for(n=0,r=0;p>n;++n)a=t[n],f[s=c(a)]=f[s]||(f[s]=++r);for(n=0;p>n&&(a=t[n]);++n)c&&(s=c(a))?i.set(a,u,l?f[s]/r:f[s]):i.set(a,u,l?(n+1)/p:n+1);return e.fields[u]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Rank transform",description:"Computes ascending rank scores for data tuples.",type:"object",properties:{type:{"enum":["rank"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"A key field to used to rank tuples. If undefined, tuples will be ranked in their observed order."},normalize:{description:"If true, values of the output field will lie in the range [0, 1].",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],"default":!1},output:{type:"object",description:"Rename the output data fields",properties:{rank:{type:"string","default":"rank"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){a.prototype.init.call(this,e),a.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var i=n(1),o=n(2),a=n(9),s=r.prototype=Object.create(a.prototype);s.constructor=r,s.transform=function(e){return o.debug(e,["sorting"]),(e.add.length||e.mod.length||e.rem.length)&&(e.sort=i.comparator(this.param("by").field)),e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Sort transform",description:"Sorts the values of a data set.",type:"object",properties:{type:{"enum":["sort"]},by:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"A list of fields to use as sort criteria."}},required:["type","by"]}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value","default":"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(e,t,n,r){var i,o,a,s,u,l,c,f=[],p=function(e){return e(a)};if(null==t)f.push(e.slice());else for(i={},o=0;o<e.length;++o)a=e[o],s=t.map(p),u=i[s]||(f.push(i[s]=[]),i[s]),u.push(a);for(s=0,c=0;s<f.length;++s){for(u=f[s],o=0,l=0;o<u.length;++o)l+=r(u[o]);u.sum=l,l>c&&(c=l),null!=n&&u.sort(n)}return f.max=c,f}var o=n(1),a=n(4).Tuple,s=n(2),u=n(9),l=n(22),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["stacking"]);for(var n=this.param("groupby").accessor,r=o.comparator(this.param("sortby").field),u=this.param("field").accessor,l=this.param("offset"),c=this._output,f=i(t,n,r,u),p=0,d=f.max;p<f.length;++p){var h,m,g,v=f[p],y=v.sum,_="center"===l?(d-y)/2:0,b="normalize"===l?1/y:1,x=_,E=0;for(h=0;h<v.length;++h)m=v[h],g=x,E+=u(m),x=b*E+_,a.set(m,c.start,g),a.set(m,c.end,x),a.set(m,c.mid,.5*(g+x))}return e.fields[c.start]=1,e.fields[c.end]=1,e.fields[c.mid]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Stack transform",description:"Computes layout values for stacked graphs, as in stacked bar charts or stream graphs.",type:"object",properties:{type:{"enum":["stack"]},groupby:{description:"A list of fields to split the data into groups (stacks).",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},sortby:{description:"A list of fields to determine the sort order of stacks.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},field:{description:"The data field that determines the thickness/height of stacks.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},offset:{description:"The baseline offset",oneOf:[{"enum":["zero","center","normalize"]},{$ref:"#/refs/signal"}],"default":"zero"},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string","default":"layout_start"},end:{type:"string","default":"layout_end"},mid:{type:"string","default":"layout_mid"}},additionalProperties:!1}},additionalProperties:!1,required:["type","groupby","field"]}},function(e,t,n){function r(e){return u.prototype.init.call(this,e),s.addParameters(this,{groupby:{type:"array<field>"}}),this._output={children:"children",parent:"parent"},this.router(!0).produces(!0)}var i=n(1),o=n(4).Tuple,a=n(2),s=n(9),u=n(22),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.batchTransform=function(e,t){function n(e,t,r){var i=p[e].execute(r);t[l]=i,i.forEach(function(r){r[c]=t,h.push(o.ingest(r)),e+1<u.length?n(e+1,r,r[l]):r[l].forEach(function(e){e[c]=r})})}a.debug(e,["treeifying"]);var r,s,u=this.param("groupby").field,l=this._output.children,c=this._output.parent,f=[{name:"*",ops:["values"],as:[l]}],p=u.map(function(e){return i.groupby(e).summarize(f)}),d=this._internal||[],h=[],m=o.ingest({});for(m[c]=null,h.push(m),n(0,m,t),r=0,s=h.length;s>r;++r)e.add.push(h[r]);for(r=0,s=d.length;s>r;++r)e.rem.push(d[r]);return this._internal=h,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treeify transform",type:"object",properties:{type:{"enum":["treeify"]},groupby:{description:"An ordered list of fields by which to group tuples into a tree.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{children:{type:"string","default":"children"},parent:{type:"string","default":"parent"}},additionalProperties:!1}},additionalProperties:!1,required:["type","groupby"]}},function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{sort:{type:"array<field>","default":["-value"]},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"field","default":"value"},size:{type:"array<value>","default":n(52).size},round:{type:"value","default":!0},sticky:{type:"value","default":!1},ratio:{type:"value","default":c},padding:{type:"value","default":null},mode:{type:"value","default":"squarify"}}),this._layout=i.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i=n(12),o=n(1),a=n(4).Tuple,s=n(2),u=n(9),l=n(22),c=.5*(1+Math.sqrt(5)),f=r.prototype=Object.create(l.prototype);f.constructor=r,
f.batchTransform=function(e,t){s.debug(e,["treemap"]);var n=this._layout,r=this._output,i=this.param("sticky"),u=this.param("parent").accessor,l=t.filter(function(e){return null===u(e)})[0];return n.sticky()!==i&&n.sticky(i),n.sort(o.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(l),t.forEach(function(e){a.set(e,r.x,e.x),a.set(e,r.y,e.y),a.set(e,r.width,e.dx),a.set(e,r.height,e.dy),a.set(e,r.depth,e.depth)}),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.width]=1,e.fields[r.height]=1,e.fields[r.depth]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treemap transform",type:"object",properties:{type:{"enum":["treemap"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],"default":["-value"]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],"default":"parent"},field:{description:"The values to use to determine the area of each leaf-level treemap cell.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The treemap layout algorithm to use.",oneOf:[{"enum":["squarify","slice","dice","slice-dice"]},{$ref:"#/refs/signal"}],"default":"squarify"},size:{description:"The dimensions of the treemap layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],"default":[500,500]},round:{description:"If true, treemap cell dimensions will be rounded to integer pixels.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],"default":!0},sticky:{description:"If true, repeated runs of the treemap will use cached partition boundaries.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],"default":!1},ratio:{description:"The target aspect ratio for the layout to optimize.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],"default":c},padding:{oneOf:[{type:"number"},{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:4,maxItems:4},{$ref:"#/refs/signal"}],description:"he padding (in pixels) to provide around internal nodes in the treemap."},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string","default":"layout_x"},y:{type:"string","default":"layout_y"},width:{type:"string","default":"layout_width"},height:{type:"string","default":"layout_height"},depth:{type:"string","default":"layout_depth"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return u.prototype.init.call(this,e),s.addParameters(this,{clipExtent:{type:"array<value>","default":n(52).extent},x:{type:"field","default":"layout_x"},y:{type:"field","default":"layout_y"}}),this._layout=i.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var i=n(12),o=n(48),a=n(2),s=n(9),u=n(22),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.batchTransform=function(e,t){a.debug(e,["voronoi"]);for(var n=this._output.path,r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t),i=0;i<t.length;++i)o.set(t[i],n,"M"+r[i].join("L")+"Z");return e.fields[n]=1,e},e.exports=r,r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Voronoi transform",type:"object",properties:{type:{"enum":["voronoi"]},clipExtent:{description:"The min and max points at which to clip the voronoi diagram.",oneOf:[{type:"array",items:{oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],"default":[[-1e5,-1e5],[1e5,1e5]]},x:{description:"The input x coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},y:{description:"The input y coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string","default":"layout_path"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e){return d.prototype.init.call(this,e),p.addParameters(this,{size:{type:"array<value>","default":n(52).size},text:{type:"field","default":"data"},rotate:{type:"field|value","default":0},font:{type:"field|value","default":{value:"sans-serif"}},fontSize:{type:"field|value","default":14},fontStyle:{type:"field|value","default":{value:"normal"}},fontWeight:{type:"field|value","default":{value:"normal"}},fontScale:{type:"array<value>","default":[10,50]},padding:{type:"value","default":1},spiral:{type:"value","default":"archimedean"}}),this._layout=u().canvas(l.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}function i(e){return e&&e.accessor||e}function o(e){var t=Object.create(e);return t._tuple=e,t}var a=n(1),s=n(12),u=n(232),l=n(34).canvas,c=n(48),f=n(2),p=n(9),d=n(22),h=r.prototype=Object.create(d.prototype);h.constructor=r,h.batchTransform=function(e,t){f.debug(e,["wordcloud"]);var n,r,u=this._layout,l=this._output,p=this.param("fontSize"),d=p.accessor&&this.param("fontScale");p=p.accessor||s.functor(p),d.length&&(r=s.scale.sqrt().domain(a.extent(t,n=p)).range(d),p=function(e){return r(n(e))}),u.size(this.param("size")).text(i(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(i(this.param("rotate"))).font(i(this.param("font"))).fontStyle(i(this.param("fontStyle"))).fontWeight(i(this.param("fontWeight"))).fontSize(p).words(t.map(o)).on("end",function(e){var t,n,r,i,o=u.size(),a=o[0]>>1,s=o[1]>>1;for(r=0,i=e.length;i>r;++r)t=e[r],n=t._tuple,c.set(n,l.x,t.x+a),c.set(n,l.y,t.y+s),c.set(n,l.font,t.font),c.set(n,l.fontSize,t.size),c.set(n,l.fontStyle,t.style),c.set(n,l.fontWeight,t.weight),c.set(n,l.rotate,t.rotate)}).start();for(var h in l)e.fields[l[h]]=1;return e},e.exports=r;var m=n(134);r.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Wordcloud transform",type:"object",properties:{type:{"enum":["wordcloud"]},size:{description:"The dimensions of the wordcloud layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],"default":[900,500]},font:{description:"The font face to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],"default":"sans-serif"},fontStyle:{description:"The font style to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],"default":"normal"},fontWeight:{description:"The font weight to use for a word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],"default":"normal"},fontSize:{description:"The font size to use for a word.",oneOf:[{type:"number"},m.schema,{type:"string"},{$ref:"#/refs/signal"}],"default":14},fontScale:{description:"The minimum and maximum scaled font sizes, or null to prevent scaling.",oneOf:[{type:"null"},{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}],"default":[10,50]},rotate:{description:"The field or number to set the roration angle (in degrees).",oneOf:[{type:"number"},{type:"string"},m.schema,{$ref:"#/refs/signal"}],"default":0},text:{description:"The field containing the text to use for each word.",oneOf:[{type:"string"},m.schema,{$ref:"#/refs/signal"}],"default":"data"},spiral:{description:"The type of spiral used for positioning words, either 'archimedean' or 'rectangular'.",oneOf:[{"enum":["archimedean","rectangular"]},m.schema,{$ref:"#/refs/signal"}],"default":"archimedean"},padding:{description:"The padding around each word.",oneOf:[{type:"number"},m.schema,{$ref:"#/refs/signal"}],"default":1},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string","default":"layout_x"},y:{type:"string","default":"layout_y"},font:{type:"string","default":"layout_font"},fontSize:{type:"string","default":"layout_fontSize"},fontStyle:{type:"string","default":"layout_fontStyle"},fontWeight:{type:"string","default":"layout_fontWeight"},rotate:{type:"string","default":"layout_rotate"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},function(e,t,n){function r(e,t,n,r){var o=n||i(e);return a(e,t,o,r)}function i(e){switch(e.type){case u:return u;case l:return l;case f:return c;default:return p}}function o(e,t,n,r){function i(e){return(t[0]<0?-Math.log(e>0?0:-e):Math.log(0>e?0:e))/Math.log(s)}function o(e){return t[0]<0?-Math.pow(s,-e):Math.pow(s,e)}if(null==n)return r;var a,s=e.base(),u=Math.min(s,e.ticks().length/n),l=t[0]>0?(a=1e-12,Math.ceil):(a=-1e-12,Math.floor);return function(e){return o(l(i(e)+a))/e>=u?r(e):""}}function a(e,t,n,r){var i,a=s.format,c="log"===e.type;switch(n){case p:return i=e.domain(),c?o(e,i,t,a.auto.number(r||null)):a.auto.linear(i,t,r||null);case u:return(r?a:a.auto).time(r);case l:return(r?a:a.auto).utc(r);default:return String}}var s=n(1),u="time",l="utc",c="string",f="ordinal",p="number";e.exports={getTickFormat:r}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){return function(t,n){var i=a(n(),"marks."+e).toJS();i.marks&&i.marks.length&&i.marks.forEach(function(e){t(r(e))}),t({type:o,markId:i._id,markType:i.type})}}var i=n(21),o=i.MARK_DELETE,a=n(19).getIn;e.exports=r},function(e,t,n){"use strict";function r(){return function(e,t){var n=t(),r=i(n,"scene.id"),a=i(n,"marks."+r+".marks").toJS();a.forEach(function(t){e(o(t))})}}var i=n(19).getIn,o=n(414);e.exports=r},function(e,t,n){"use strict";function r(e){return{type:a.SET_ACTIVE_STEP,step:e}}function i(e){return{type:a.SET_ACTIVE_WALKTHROUGH,key:e}}function o(e,t){return{type:a.SET_WALKTHROUGH,name:e,data:t}}var a=n(21);e.exports={setWalkthrough:o,setActiveStep:r,setActiveWalkthrough:i}},function(e,t,n){"use strict";var r=n(89),i=n(455),o=n(11),a=n(36).Provider,s=n(54);e.exports=r.render(o.createElement(a,{store:s},o.createElement(i,null)),d3.select("#sidebars").node()),window.ui=e.exports},function(e,t){e.exports=["linear","step-before","step-after","basis","basis-open","cardinal","cardinal-open","monotone"]},function(e,t,n){"use strict";function r(e){return o.call(this),this.name=e,this._source=new a(e,this._id),this._aggregates=[],this}var i=n(27),o=n(91),a=n(225);i(r,o),r.prototype.parent=null,r.prototype["export"]=function(e){return[this._source["export"](e)].concat(this._aggregates.map(function(t){return t["export"](e)}))},e.exports=r},function(e,t,n){"use strict";function r(e){u.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(18),s=a.lookup,u=n(92),l=n(44),c=["scales","axes","legends","marks"],f={rect:n(421),symbol:n(228),text:n(229),scales:n(216),legends:n(224),axes:n(224),line:n(227),area:n(226)};f.group=r,o(r,u),r.defaultProperties=function(e){return i.extend({type:"group",properties:u.mergeProperties(u.defaultProperties(),{update:{x:{value:0},y:{value:0},width:{signal:l("vis_width")},height:{signal:l("vis_height")},fill:{value:"transparent"}}}),scales:[],legends:[],axes:[],marks:[]},e)},r.prototype["export"]=function(e){var t=this,n=u.prototype["export"].call(this,e),r=function(t){return s(t)["export"](e)};return c.forEach(function(e){n[e]=t[e].map(r)}),n},r.prototype.manipulators=function(){var e=this,t=u.prototype.manipulators.call(this),n=t[0],r=function(e){return s(e).manipulators()},o=function(e,t){return i.isArray(t)?e.push.apply(e,t):e.push(t),e};return c.forEach(function(t){n[t]=e[t].map(r).reduce(o,[])}),t},e.exports=r},function(e,t,n){"use strict";function r(e){s.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(42),s=n(92),u=n(139),l=n(141),c=n(88),f=a.DELTA,p=f+".x",d=f+".y";o(r,s),r.defaultProperties=function(e){return i.extend({type:"rect",properties:s.mergeProperties(s.defaultProperties(),{update:{x2:{value:60},y2:{value:60},xc:{value:60,_disabled:!0},yc:{value:60,_disabled:!0},width:{value:30,_disabled:!0},height:{value:30,_disabled:!0}}})},e)},r.getHandleStreams=function(e){var t=u.bind(null,e,"handles"),n=c(e,"x"),r=c(e,"xc"),i=c(e,"x2"),o=c(e,"y"),a=c(e,"yc"),s=c(e,"y2"),h=c(e,"width"),m=c(e,"height"),g={};return g[n]=[{type:f,expr:l(t()+"||"+t("left"),n+"+"+p,n)}],g[r]=[{type:f,expr:l(t()+"||"+t("left"),r+"+"+p,r)}],g[i]=[{type:f,expr:l(t()+"||"+t("right"),i+"+"+p,i)}],g[o]=[{type:f,expr:l(t()+"||"+t("top"),o+"+"+d,o)}],g[a]=[{type:f,expr:l(t()+"||"+t("top"),a+"+"+d,a)}],g[s]=[{type:f,expr:l(t()+"||"+t("bottom"),s+"+"+d,s)}],g[h]=[{type:f,expr:l(t("left"),h+"-"+p,h)},{type:f,expr:l(t("right"),h+"+"+p,h)}],g[m]=[{type:f,expr:l(t("top"),m+"-"+d,m)},{type:f,expr:l(t("bottom"),m+"+"+d,m)}],g},e.exports=r},function(e,t,n){"use strict";function r(e){a.call(this,e||r.defaultProperties())}var i=n(1),o=n(27),a=n(420),s=n(426);o(r,a),r.prototype.parent=null,r.defaultProperties=function(e){return i.extend({scales:[],legends:[],axes:[],marks:[],type:"scene",properties:{update:{}},width:610,height:610,padding:"auto",background:"white"},e)},r.prototype["export"]=function(e){var t=a.prototype["export"].call(this,e);return t.width=t.width.signal?s(t.width.signal):t.width,t.height=t.height.signal?s(t.height.signal):t.height,delete t.type,delete t.from,delete t.properties,t},r.prototype.manipulators=function(){return a.prototype.manipulators.call(this)[0]},e.exports=r},function(e,t,n){"use strict";function r(e){if(l.channel.CHANNELS.indexOf(e)>=0)return e;switch(e){case"x+":case"x2":case"width":return"x";case"y+":case"y2":case"height":return"y";case"fill":return"color";default:return e}}function i(e){var t,n=e._name,r=e._aggregate,i=e._bin,o={type:e._type};return r?(t=E.agg.exec(n),o.aggregate=t[1]):i&&(t=E.bin.exec(n),o.bin=!0),o.field=t?t[2]:n,o}function o(e,t,n){return e=s.duplicate(e["export"]()),n&&(e.data.values=n.output()),e.config.cell={width:b,height:x},"fill"===t&&(e.config.mark={filled:!0}),{rule:e,spec:l.compile(e).spec}}function a(e){e.bindProp=function(e,t,n){var a=this._rule,s=this._from&&p(this._from),u=p(t),l=this.properties.update,f=r(e);if(u instanceof c)return l[e].scale=t,this;if(s&&d(s)!==d(d(u)))throw Error("Mark's backing pipeline differs from field's.");if(n)return l[e].field=t,this;a.encoding[f]=i(u),s=s||d(u);var h=o.call(this,a,e,s);return g.call(this,h,s),v.call(this,h),y.call(this,h,e,f),_.call(this,h,e,f),this}}var s=n(1),u=n(90),l=n(219),c=n(216),f=n(18),p=f.lookup,d=n(53).getParent,h=u.transforms.aggregate.VALID_OPS,m=n(485),g=n(486),v=n(489),y=n(488),_=n(487),b=500,x=200,E={agg:new RegExp("^("+h.join("|")+")_(.*?)$"),bin:new RegExp("^(bin)_(.*?)(_start|_mid|_end)$")};e.exports=a,a.VLSingle=m,a.data=g,a.scales=v,a.marks=y,a.guides=_,a.CELLW=b,a.CELLH=x},function(e,t,n){"use strict";var r=n(1),i=n(44),o={},a=i("selected"),s=i("mode"),u=i("anchor"),l=i("delta"),c="cursor",f=i("cell"),p=i("mouse");o[a]={name:a,init:{mark:{}},streams:[{type:"mousedown[eventItem().mark && eventItem().mark.name &&eventItem().mark.name !== "+r.str(f)+"]",expr:"eventItem()"},{type:"mousedown[!eventItem().mark]",expr:"{mark: {}}"}],_idx:0},o[s]={name:s,init:"handles",_idx:1},o[l]={name:l,init:0,streams:[{type:"[mousedown, window:mouseup] > window:mousemove",expr:"{x: eventX() - lyra_anchor.x, y: eventY() - lyra_anchor.y}"}],_idx:2},o[u]={name:u,init:0,streams:[{type:"mousedown",expr:"{x: eventX(), y: eventY(), target: eventItem()}"},{type:"[mousedown, window:mouseup] > window:mousemove",expr:"{x: eventX(), y: eventY(), target: lyra_anchor.target}"}],_idx:3},o[f]={name:f,init:{},streams:[{type:"@"+f+":dragover",expr:"eventItem()"},{type:"@"+f+":dragleave",expr:"{}"}],_idx:4},o[p]={name:p,init:{},streams:[{type:"mousemove, dragover",expr:"{x: eventX(), y: eventY()}"}],_idx:5},o[c]={name:c,streams:[{type:"mousedown",expr:"eventItem() && eventItem().cursor || 'default'"},{type:"mouseup",expr:"'default'"}]},e.exports={signals:o,names:[a,s,u,l,f,p,c],signalNames:{SELECTED:a,MODE:s,ANCHOR:u,DELTA:l,CURSOR:c,CELL:f,MOUSE:p}}},function(e,t,n){"use strict";function r(e){return a.call(this,e)}var i=n(1),o=n(27),a=n(138),s=n(93),u=n(140),l=s.CONST,c=l.PADDING,f=l.STROKE_PADDING,p=l.ARROWHEAD;o(r,a),r.prototype.handles=function(e){var t=s.coords(e.bounds,"handle");return i.vals(t).filter(function(e){return"midCenter"!==e.key})},r.prototype.connectors=function(e){return i.vals(s.coords(e.bounds,"connector"))},r.prototype.channels=function(e){var t=e.bounds,n=s.coords(t),r=n.topLeft,i=n.topRight,o=n.bottomRight,a=t.width(),l=t.height();return[].concat([{x:r.x,y:r.y-f},{x:i.x,y:i.y-f},{x:i.x+a,y:i.y-f},{x:i.x+a-p,y:i.y-2*f},{x:i.x+a-p,y:i.y},{x:i.x+a,y:i.y-f+.1}].map(u("x+","arrow"))).concat([{x:i.x+c,y:i.y},{x:o.x+c,y:o.y},{x:o.x+c,y:o.y+l},{x:o.x+2*c,y:o.y+l-p},{x:o.x,y:o.y+l-p},{x:o.x+c,y:o.y+l+.1}].map(u("y+","arrow")))},r.prototype.altchannels=function(e){var t=e.bounds,n=e.mark.group.bounds,r=s.coords(t),i=r.topLeft,o=r.topCenter,a=r.topRight,l=r.midLeft,p=r.midRight,d=r.bottomLeft,h=r.bottomCenter,m=r.bottomRight;return[].concat([{x:n.x1,y:i.y},{x:i.x-c,y:i.y}].map(u("x","span"))).concat([{x:n.x1,y:m.y+f},{x:d.x,y:m.y+f},{x:m.x,y:m.y+f}].map(u("x2","span"))).concat([{x:i.x,y:n.y1},{x:i.x,y:i.y-f}].map(u("y","span"))).concat([{x:m.x+f,y:n.y1},{x:m.x+f,y:a.y},{x:m.x+f,y:m.y}].map(u("y2","span"))).concat([l,p].map(u("width","span"))).concat([o,h].map(u("height","span")))},e.exports=r},function(e,t,n){"use strict";var r=n(54),i=n(19).getIn;e.exports=function(e){return i(r.getState(),"signals."+e+".init")}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t,n){return r(e+"_"+t+"_"+n)}},function(e,t,n){function r(e,t,n){for(var r=-1,i=a(t),o=i.length;++r<o;){var s=i[r],u=e[s],l=n(u,t[s],s,e,t);(l===l?l===u:u!==u)&&(void 0!==u||s in e)||(e[s]=l)}return e}var i=n(523),o=n(526),a=n(429),s=o(function(e,t,n){return n?r(e,t,n):i(e,t)});e.exports=s},function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&a(y(e))}function o(e,t){return e="number"==typeof e||d.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&t>e}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function s(e){for(var t=l(e),n=t.length,r=n&&e.length,i=!!r&&a(r)&&(p(e)||f(e)),s=-1,u=[];++s<n;){var c=t[s];(i&&o(c,r)||m.call(e,c))&&u.push(c)}return u}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(p(e)||f(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,s=Array(t),l=t>0;++r<t;)s[r]=r+"";for(var c in e)l&&o(c,t)||"constructor"==c&&(i||!m.call(e,c))||s.push(c);return s}var c=n(527),f=n(530),p=n(531),d=/^\d+$/,h=Object.prototype,m=h.hasOwnProperty,g=c(Object,"keys"),v=9007199254740991,y=r("length"),_=g?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):u(e)?g(e):[]}:s;e.exports=_},function(e,t){/*!
	 * Adapted from jQuery UI core
	 *
	 * http://jqueryui.com
	 *
	 * Copyright 2014 jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/category/ui-core/
	 */
function n(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&i(e)}function r(e){return e.offsetWidth<=0&&e.offsetHeight<=0||"none"===e.style.display}function i(e){for(;e&&e!==document.body;){if(r(e))return!1;e=e.parentNode}return!0}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&n(e,!r)}function a(e){return[].slice.call(e.querySelectorAll("*"),0).filter(function(e){return o(e)})}e.exports=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(11);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";e.exports=n(549)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e&&"@@redux/INIT"===e.type?"initialState argument passed to createStore":"previous state received by the reducer"},e.exports=t["default"]},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};var r=function(){var e=t[t.length-1],n=t.slice(0,-1);return{v:function(){return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}}();return"object"==typeof r?r.v:void 0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){function r(){v===g&&(v=g.slice())}function o(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),v.push(e),function(){if(t){t=!1,r();var n=v.indexOf(e);v.splice(n,1)}}}function c(e){if(!(0,a["default"])(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=h(m,e)}finally{y=!1}for(var t=g=v,n=0;n<t.length;n++)t[n]();return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,c({type:l.INIT})}function p(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[u["default"]]=function(){return this},e}var d;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,m=t,g=[],v=g,y=!1;return c({type:l.INIT}),d={dispatch:c,subscribe:s,getState:o,replaceReducer:f},d[u["default"]]=p,d}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=i;var o=n(265),a=r(o),s=n(584),u=r(s),l=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var i=n(436),o=r(i),a=n(559),s=r(a),u=n(558),l=r(u),c=n(557),f=r(c),p=n(435),d=r(p),h=n(438);r(h);t.createStore=o["default"],t.combineReducers=s["default"],t.bindActionCreators=l["default"],t.applyMiddleware=f["default"],t.compose=d["default"]},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t){/*! http://mths.be/startswith v0.2.0 by @mathias */
String.prototype.startsWith||!function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(r){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var r=n.length,i=String(e),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var u=Math.min(Math.max(s,0),r);if(o+u>r)return!1;for(var l=-1;++l<o;)if(n.charCodeAt(u+l)!=i.charCodeAt(l))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(e){if(!Array.prototype.find){var t=function(e){var t=Object(this),n=t.length<0?0:t.length>>>0;if(0!==n){if("function"!=typeof e||"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError("Array#find: predicate must be a function");for(var r,i=arguments[1],o=0;n>o;o++)if(r=t[o],e.call(i,r,o,t))return r}};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:t,configurable:!0,enumerable:!1,writable:!0})}catch(n){}Array.prototype.find||(Array.prototype.find=t)}}(this)},function(e,t,n){"use strict";var r=n(21).CREATE_PIPELINE;e.exports=function(e){return{type:r,id:e}}},function(e,t,n){"use strict";var r=n(21).CREATE_SCENE,i=n(137);e.exports=function(e){var t=n(422),o=e||{};o._id=i.global();var a=t.defaultProperties(o);return{type:r,id:a._id,name:"Scene",props:a}}},function(e,t,n){"use strict";var r=n(21).PIPELINE_SELECT;e.exports=function(e){return{type:r,id:e}}},function(e,t,n){"use strict";var r=n(21).SIGNAL_INIT,i=n(44);e.exports=function(e,t){return{type:r,signal:i(e),value:t}}},function(e,t,n){"use strict";var r=n(21).SIGNAL_SET_STREAMS,i=n(44);e.exports=function(e,t){return{type:r,signal:i(e),value:t}}},function(e,t,n){"use strict";var r=n(21).SIGNAL_UNSET,i=n(44);e.exports=function(e){return{type:r,signal:i(e)}}},function(e,t,n){"use strict";var r=n(21).TOGGLE_LAYERS;e.exports=function(e){return{type:r,layerIds:e}}},function(e,t,n){"use strict";var r=n(21).UPDATE_PIPELINE_DATASET;e.exports=function(e,t){return{type:r,pipelineId:e,datasetId:t}}},function(e,t,n){"use strict";var r=n(21).VEGA_INVALIDATE;e.exports=function(e){return{type:r,value:!!e}}},function(e,t,n){"use strict";var r=n(21).VEGA_PARSE;e.exports=function(e){return{type:r,value:!!e}}},function(e,t,n){"use strict";var r=n(11),i=n(266),o=n(472),a=n(480),s=r.createClass({displayName:"Footer",getInitialState:function(){return{modalIsOpen:!1}},openModal:function(){this.setState({modalIsOpen:!0})},closeModal:function(){this.setState({modalIsOpen:!1})},classNames:"site-footer",render:function(){return r.createElement("footer",{className:this.classNames},r.createElement("ul",null,r.createElement("li",{onClick:this.openModal},"About"),r.createElement("li",null,r.createElement("a",{href:"https://github.com/vega/lyra"},"Github")),r.createElement("li",null,r.createElement(a,null)),r.createElement("li",null,r.createElement(o,null))),r.createElement(i,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal},r.createElement("div",{className:"wrapper"},r.createElement("span",{className:"closeModal",onClick:this.closeModal},"close"),r.createElement("h2",null,"About the team... "),r.createElement("div",null,"I am a modal"))))}});e.exports=s},function(e,t,n){"use strict";function r(e,t){var n=l(e,"inspector.selected");return{id:n,name:l(e,"marks."+n+".name")}}var i=n(11),o=n(36).connect,a=n(92),s=(n(87),n(18)),u=s.lookup,l=n(19).getIn,c=n(53),f=(c.findInItemTree,i.createClass({displayName:"Inspector",propTypes:{id:i.PropTypes.number,name:i.PropTypes.string},uppercase:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},render:function(){var e=this.props,t=e.id?u(e.id):{},n=t?u(t.from):"",r=t&&t.type?this.uppercase(t.type):"",o=f[r],s=t instanceof a,l=s?i.createElement("div",{className:"property-group property"},i.createElement("h3",{className:"label-long"},"Pipeline"),i.createElement("div",{className:"control"},n&&n.name||"None")):null,c=o?i.createElement("div",{className:"inner"},l,i.createElement(o,{primitive:t})):null;return i.createElement("div",{className:"sidebar",id:"inspector"},i.createElement("h2",null,e.name||"Properties"),c)}}));f.Line=n(463),f.Rect=n(464),f.Symbol=n(466),f.Text=n(467),f.Area=n(460),e.exports=o(r)(f)},function(e,t,n){"use strict";var r=n(11),i=n(471),o=n(43),a=n(41),s=r.createClass({displayName:"PipelineSidebar",render:function(){return r.createElement("div",{className:"sidebar",id:"pipeline-sidebar"},r.createElement("h2",null,"Data Pipelines",r.createElement("span",{className:"new",onClick:null},r.createElement(a,{glyph:o.plus})," New")),r.createElement(i,null))}});e.exports=s},function(e,t,n){"use strict";function r(e){return{arbitraryPropToTriggerUpdate:a(e,"vega.invalid"),showWalkthrough:a(e,"walkthrough.activeWalkthrough"),hintsOn:a(e,"hints.on"),hintsDisplay:a(e,"hints.display")}}var i=n(11),o=n(36).connect,a=n(19).getIn,s=n(433),u=n(453),l=n(457),c=n(454),f=n(456),p=n(481),d=n(452),h=n(458),m=(n(18),i.createClass({displayName:"Sidebars",propTypes:{hintsOn:i.PropTypes.bool,hintsDisplay:i.PropTypes.object,arbitraryPropToTriggerUpdate:i.PropTypes.bool,showWalkthrough:i.PropTypes.string},render:function(){var e=this.props.showWalkthrough?i.createElement(p,null):"",t=!this.props.showWalkthrough&&this.props.hintsOn&&this.props.hintsDisplay?i.createElement(h,null):"";return i.createElement("div",null,i.createElement("div",{className:"sidebar-container"},i.createElement(l,null),i.createElement(u,{ref:"inspector"}),i.createElement(c,null)),i.createElement(f,null),t,e,i.createElement(d,null),i.createElement(s,{effect:"solid"}))}}));e.exports=o(r)(m)},function(e,t,n){"use strict";var r=n(11),i=n(473),o=n(475),a=n(474),s=n(43),u=n(41),l=r.createClass({displayName:"Toolbar",render:function(){return r.createElement("div",{className:"toolbar"},r.createElement("div",{className:"toolbar-menu"},r.createElement("input",{type:"checkbox",id:"nav-trigger",className:"nav-trigger"}),r.createElement("label",{htmlFor:"nav-trigger"},r.createElement(u,{glyph:s.hamburger})),r.createElement("div",{className:"menu"},r.createElement(i,null),r.createElement(o,null),r.createElement(a,null))))}});e.exports=l},function(e,t,n){"use strict";var r=n(11),i=(n(36).connect,n(478)),o=n(477),a=n(18),s=r.createClass({displayName:"VisualSidebar",render:function(){var e=a.scale();return r.createElement("div",{className:"sidebar",id:"visual-sidebar"},r.createElement(o,{ref:"layerList"}),r.createElement(i,{ref:"scaleList",scales:e}))}});e.exports=s},function(e,t,n){"use strict";function r(e,t){return{displayHint:s(e,"hints.display")}}function i(e,t){return{dispatchAction:function(){var t=this.props.displayHint.action,n=void 0!==this.props.displayHint.action_props?this.props.displayHint.action_props:"";e(t(n)),e(u.clearHints())},clearHints:function(){e(u.clearHints())}}}var o=n(11),a=n(36).connect,s=n(19).getIn,u=n(221),l=n(43),c=n(41),f=o.createClass({displayName:"Hints",propTypes:{displayHint:o.PropTypes.object,dispatchAction:o.PropTypes.func,clearHints:o.PropTypes.func},classNames:"hints",render:function(){var e=this.props.displayHint,t=e.action?o.createElement("a",{className:"action button button-secondary",onClick:this.props.dispatchAction.bind(this,"")},e.action_text):"",n=e.template,r=n?o.createElement(n,null):o.createElement("div",null,o.createElement("h4",{className:"hint-header"},e.title),o.createElement("p",null,e.text));return e.templates?o.createElement(n,null):o.createElement("div",{className:this.classNames},r,t,o.createElement("span",{className:"close-hint",onClick:this.props.clearHints.bind(null,"")},o.createElement(c,{glyph:l.close})))}});e.exports=a(r,i)(f)},function(e,t,n){"use strict";function r(e,t){return{selectedId:s(e,"inspector.selected")}}function i(e,t){return{updateProperty:function(t,n,r){var i=u(t);i&&(i[n]=r),e(l(t,n,r))}}}var o=n(11),a=n(36).connect,s=n(19).getIn,u=n(18).lookup,l=n(213).updateMarkProperty,c=o.createClass({displayName:"SymbolHint",propTypes:{selectedId:o.PropTypes.number,updateProperty:o.PropTypes.func},render:function(){return o.createElement("div",null,o.createElement("p",null,"I have a special template!!!"))}});e.exports=a(r,i)(c)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(11),o=n(87),a=n(461),s=n(226),u=i.createClass({displayName:"AreaInspector",render:function(){var e=this.props,t=e.primitive;return i.createElement("div",null,i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Orientation"),i.createElement(o,{name:"orient",label:"Orient",primitive:t,type:"select",opts:s.ORIENT,canDrop:!0})),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"X Position"),i.createElement(a,r({type:"x"},e))),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Y Position"),i.createElement(a,r({type:"y"},e))),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Fill"),i.createElement(o,{name:"fill",label:"Color",type:"color",canDrop:!0,primitive:t}),i.createElement(o,{name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",primitive:t,canDrop:!0})),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Stroke"),i.createElement(o,{name:"stroke",label:"Color",type:"color",primitive:t,canDrop:!0}),i.createElement(o,{name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",canDrop:!0,primitive:t})),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Line Strength"),i.createElement(o,{name:"interpolate",label:"Interpolate",type:"select",opts:s.INTERPOLATE,canDrop:!0,primitive:t}),i.createElement(o,{name:"tension",label:"Tension",type:"number",canDrop:!0,primitive:t})))}});e.exports=u},function(e,t,n){"use strict";var r=n(1),i=n(11),o=n(87),a=n(215),s={x:{start:{name:"x",label:"Left"},center:{name:"xc",label:"Center"},span:{name:"width",label:"Width"},end:{name:"x2",label:"Right"}},y:{start:{name:"y",label:"Top"},center:{name:"yc",label:"Middle"},span:{name:"height",label:"Height"},end:{name:"y2",label:"Bottom"}}},u=i.createClass({displayName:"AreaProperty",getInitialState:function(){return this.extents()},componentWillReceiveProps:function(){this.setState(this.extents())},extents:function(){var e,t,n=this.props,i=n.type,o=n.primitive,a=o.properties.update,u=r.vals(s[i]);return u.forEach(function(n){var r=n.name,i=a[r];i._disabled||(e?e!==r&&(t=r):e=r)}),{start:e,end:t}},handleChange:function(e){var t=this.props,n=this.state,r=t.type,i=t.primitive,o=i.properties.update,a=e.target,u=a.name,l=a.value,c=s[r],f=c.center.name,p=c.span.name,d=n[u];o[d]._disabled=!0,o[l]._disabled=!1,n[u]=l,l===f&&n.end!==p&&(o[n.end]._disabled=!0,o[p]._disabled=!1,n.end=p),this.requestVegaReparse()},render:function(){var e=this.state,t=this.props,n=t.primitive,r=n.properties.update,a=e.start,s=e.end;return i.createElement("div",null,i.createElement(o,{name:a,type:"number",primitive:n,canDrop:!0,disabled:r[a].band||r[a].group},i.createElement("div",{className:"label"},"Start")),i.createElement(o,{name:s,type:"number",primitive:n,canDrop:!0,disabled:r[s].band||r[s].group},i.createElement("div",{className:"label"},"End")))}});e.exports=a(u)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),o=n(11),a=n(87),s=n(465),u=n(215),l={x:{start:{name:"x",label:"Left"},center:{name:"xc",label:"Center"},span:{name:"width",label:"Width"},end:{name:"x2",label:"Right"}},y:{start:{name:"y",label:"Top"},center:{name:"yc",label:"Middle"},span:{name:"height",label:"Height"},end:{name:"y2",label:"Bottom"}}},c=o.createClass({displayName:"ExtentProperty",getInitialState:function(){return this.extents()},componentWillReceiveProps:function(){this.setState(this.extents())},extents:function(){var e,t,n=this.props,r=n.type,o=n.primitive,a=o.properties.update,s=i.vals(l[r]);return s.forEach(function(n){var r=n.name,i=a[r];i._disabled||(e?e!==r&&(t=r):e=r)}),{start:e,end:t}},handleChange:function(e){var t=this.props,n=this.state,r=t.type,i=t.primitive,o=i.properties.update,a=e.target,s=a.name,u=a.value,c=l[r],f=c.center.name,p=c.span.name,d=n[s];o[d]._disabled=!0,o[u]._disabled=!1,n[s]=u,u===f&&n.end!==p&&(o[n.end]._disabled=!0,o[p]._disabled=!1,n.end=p),this.requestVegaReparse()},render:function(){var e=this.state,t=this.props,n=t.type,u=t.primitive,c=u.properties.update,f=l[n],p=f.center.name,d=f.span.label,h=i.vals(f),m=e.start,g=e.end;return o.createElement("div",null,o.createElement(a,{name:m,type:"number",primitive:u,canDrop:!0,firstChild:!0,disabled:c[m].band||c[m].group},o.createElement("div",{className:"label-long label"},o.createElement("select",{name:"start",value:m,onChange:this.handleChange},h.filter(function(e){return e.name!==g}).map(function(e){return o.createElement("option",{key:e.name,value:e.name},e.label)}))),o.createElement(s,r({className:"extra",name:m},t))),o.createElement(a,{name:g,type:"number",primitive:u,canDrop:!0,firstChild:!0,disabled:c[g].band||c[g].group},o.createElement("br",null),o.createElement("div",{className:"label-long label"},m===p?o.createElement("label",{htmlFor:"end"},d):o.createElement("select",{name:"end",value:g,onChange:this.handleChange},h.filter(function(e){return e.name!==m&&e.name!==p}).map(function(e){return o.createElement("option",{key:e.name,value:e.name},e.label)}))),o.createElement(s,r({className:"extra",name:g},t))))}});e.exports=u(c)},function(e,t,n){"use strict";var r=n(11),i=n(87),o=n(227),a=r.createClass({displayName:"LineInspector",render:function(){var e=this.props.primitive;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Position"),r.createElement(i,{name:"x",label:"X",type:"number",primitive:e,canDrop:!0}),r.createElement(i,{name:"y",label:"Y",type:"number",primitive:e,canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Stroke"),r.createElement(i,{name:"stroke",label:"Color",type:"color",primitive:e,canDrop:!0}),r.createElement(i,{name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",primitive:e,canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Line Strength"),r.createElement(i,{name:"interpolate",label:"Interpolate",type:"select",opts:o.INTERPOLATE,primitive:e,canDrop:!0}),r.createElement(i,{name:"tension",label:"Tension",type:"number",primitive:e,canDrop:!0})))}});e.exports=a},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(11),o=n(87),a=n(462),s=i.createClass({displayName:"RectInspector",render:function(){var e=this.props,t=e.primitive;return i.createElement("div",null,i.createElement("div",{className:"property-group"},i.createElement("h3",null,"X Position"),i.createElement(a,r({type:"x"},e))),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Y Position"),i.createElement(a,r({type:"y"},e))),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Fill"),i.createElement(o,{name:"fill",label:"Color",primitive:t,type:"color",canDrop:!0}),i.createElement(o,{name:"fillOpacity",label:"Opacity",primitive:t,type:"range",canDrop:!0,min:"0",max:"1",step:"0.05"})),i.createElement("div",{className:"property-group"},i.createElement("h3",null,"Stroke"),i.createElement(o,{name:"stroke",label:"Color",primitive:t,type:"color",canDrop:!0}),i.createElement(o,{name:"strokeWidth",label:"Width",primitive:t,type:"range",canDrop:!0,min:"0",max:"10",step:"0.25"})))}});e.exports=s},function(e,t,n){"use strict";var r=n(11),i=n(88),o=n(18),a=o.lookup,s=n(215),u=r.createClass({displayName:"SpatialPreset",propTypes:{primitive:r.PropTypes.object},handleChange:function(e){var t=this.props,n=t.primitive,r=e.target,o=r.name,s=n.properties.update,u=s[o],l=u.scale&&a(u.scale),c=o.indexOf("x")>=0?"width":"height";e.target.checked?s[o]="width"===o||"height"===o?{scale:l,band:!0}:{group:c}:s[o]={signal:i(n,o)},this.requestVegaReparse()},render:function(){var e=this.props,t=e.name,n=this.props.primitive,i=n.properties.update,o=i[t],s=o.scale&&a(o.scale),u=t.indexOf("x")>=0?"width":"height";return o.field?null:"width"===t||"height"===t?s&&"ordinal"===s.type&&!s.points?r.createElement("label",null,r.createElement("input",{type:"checkbox",name:t,checked:o.band,onChange:this.handleChange})," Automatic"):null:r.createElement("label",null,r.createElement("input",{type:"checkbox",name:t,checked:o.group,onChange:this.handleChange})," Set to group ",u)}});e.exports=s(u)},function(e,t,n){"use strict";var r=n(11),i=n(87),o=n(228),a=r.createClass({displayName:"SymbolInspector",render:function(){var e=this.props,t=e.primitive;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Position"),r.createElement(i,{name:"x",label:"X",primitive:t,type:"number",canDrop:!0}),r.createElement(i,{name:"y",label:"Y",primitive:t,type:"number",canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Geometry"),r.createElement(i,{name:"size",label:"Size",primitive:t,type:"number",canDrop:!0}),r.createElement(i,{name:"shape",label:"Shape",primitive:t,type:"select",opts:o.SHAPES,canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Fill"),r.createElement(i,{name:"fill",label:"Color",type:"color",primitive:t,canDrop:!0}),r.createElement(i,{name:"fillOpacity",label:"Opacity",primitive:t,type:"range",min:"0",max:"1",step:"0.05",canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Stroke"),r.createElement(i,{name:"stroke",label:"Color",type:"color",primitive:t,canDrop:!0}),r.createElement(i,{name:"strokeWidth",label:"Width",primitive:t,type:"range",min:"0",max:"10",step:"0.25",canDrop:!0})))}});e.exports=a},function(e,t,n){"use strict";var r=n(11),i=n(87),o=n(229),a=r.createClass({displayName:"TextInspector",render:function(){var e=this.props,t=e.primitive;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement(i,{name:"text",type:"text",primitive:t,canDrop:!0},r.createElement("h3",{className:"label"},"Text"))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Font"),r.createElement(i,{name:"font",label:"Face",type:"select",opts:o.fonts,primitive:t,canDrop:!0}),r.createElement(i,{name:"fontSize",label:"Size",type:"number",primitive:t,canDrop:!0}),r.createElement(i,{name:"fontWeight",label:"Weight",primitive:t,type:"select",opts:o.fontWeights,canDrop:!0}),r.createElement(i,{name:"fontStyle",label:"Style",primitive:t,type:"select",opts:o.fontStyles,canDrop:!0}),r.createElement(i,{name:"fill",label:"Color",type:"color",primitive:t,canDrop:!0}),r.createElement(i,{name:"fillOpacity",label:"Opacity",type:"range",primitive:t,canDrop:!0,min:"0",max:"1",step:"0.05"})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Position"),r.createElement(i,{name:"x",label:"X",type:"number",primitive:t,canDrop:!0}),r.createElement(i,{name:"y",label:"Y",type:"number",primitive:t,canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Offset"),r.createElement(i,{name:"dx",label:"X",type:"number",primitive:t,canDrop:!0}),r.createElement(i,{name:"dy",label:"Y",type:"number",primitive:t,canDrop:!0})),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Align"),r.createElement(i,{name:"align",label:"Horizontal",primitive:t,type:"select",opts:o.alignments,canDrop:!0}),r.createElement(i,{name:"baseline",label:"Vertical",primitive:t,type:"select",opts:o.baselines,canDrop:!0}),r.createElement(i,{name:"angle",label:"Rotation",type:"number",primitive:t,canDrop:!0})))}});e.exports=a},function(e,t,n){"use strict";var r=n(42),i=n(54),o=n(19).getIn,a=n(222),s=n(18);e.exports={getInitialState:function(){var e=i.getState(),t=this.props,n=t.signal&&o(e,"signals."+t.signal+".init");return{value:t.signal?n:t.value}},componentWillMount:function(){this.onSignal()},componentWillUnmount:function(){this.offSignal()},componentWillReceiveProps:function(e){var t=this.props;t.signal&&this.offSignal(t.signal),e.signal&&this.onSignal(e.signal),(e.signal||e.value!==t.value)&&this.setState({value:e.signal?r.get(e.signal):e.value})},onSignal:function(e){e=e||this.props.signal,e&&s.onSignal(e,this.signal)},offSignal:function(e){e=e||this.props.signal,e&&s.offSignal(e,this.signal)},signal:function(e,t){var n=this.props.signal;n&&i.dispatch(a(n,t)),this.setState({value:t})},handleChange:function(e){this.setValue(e.target.value)},setValue:function(e){var t=this.props,n=t.signal,i=t.type;"number"!==i&&"range"!==i||(e=+e),n?(r.set(n,e,!1),s.update()):this.setState({value:e})}}},function(e,t,n){"use strict";var r=n(12),i=n(1),o=n(11),a=n(89),s=n(18),u=s.lookup,l=n(215),c=n(42),f=n(43),p=n(41),d=o.createClass({displayName:"DataTable",propTypes:{dataset:o.PropTypes.object,"dataset.schema":o.PropTypes.object},getInitialState:function(){return{limit:20,page:0,fullField:null,fullValue:null}},componentDidMount:function(){var e=this._el=r.select(a.findDOMNode(this));this._table=e.select(".datatable"),this._fullField=e.select(".full.field"),this._fullValue=e.select(".full.value")},prevPage:function(){var e=this._table.node();this.setState({page:--this.state.page}),e.scrollLeft=0},nextPage:function(){var e=this._table.node();this.setState({page:++this.state.page}),e.scrollLeft=0},showFullField:function(e){var t=e.target,n=t.textContent,r=this.props.dataset.schema();this.hideFull(e),this.setState({fullField:r[n],selectedField:r[n]}),this._fullField.style("display","block").style("top",t.offsetTop)},showFullValue:function(e){var t=r.select(e.target),n=t.node(),i=n.parentNode.firstChild,o=i.getBoundingClientRect(),a=this._table.node(),s=i.offsetLeft+o.width;this.hideFull(e),this.setState({fullValue:t.text()}),this._fullValue.classed("odd",t.classed("odd")).classed("even",t.classed("even")).style("display","block").style("left",n.offsetLeft-a.scrollLeft+s).style("top",i.offsetTop)},hideFull:function(e){this.setState({fullField:null,fullValue:null}),this._fullField.style("display","none"),this._fullValue.style("display","none")},handleDragStart:function(e){e.dataTransfer.setData("text/plain",e.target.id),e.dataTransfer.effectAllowed="link",c.set(c.MODE,"channels"),s.update()},handleDragOver:function(e){return e.preventDefault&&e.preventDefault(),!1},handleDragEnd:function(e){var t,n=c.get(c.SELECTED),r=c.get(c.CELL),i=this.state.selectedField,o=n._id&&r._id;try{o&&(t=u(n.mark.def.lyra_id),t.bindProp(r.key,i._id))}catch(a){console.warn("Unable to bind primitive"),console.warn(a)}c.set(c.MODE,"handles"),c.set(c.CELL,{}),o?this.requestVegaReparse():s.update()},handleDrop:function(e){return e.preventDefault&&e.preventDefault(),!1},render:function(){var e=this.state,t=this.props,n=e.page,r=e.limit,a=n*r,s=a+r,u=t.dataset,l=u.schema(),c=u.output(),d=c.slice(a,s),h=i.keys(l),m=c.length,g=i.format.auto.number(),v=e.fullField,y=e.fullValue,_=n>0?o.createElement(p,{glyph:f.prev,width:"10",height:"10",onClick:this.prevPage}):null,b=m/r>n+1?o.createElement(p,{glyph:f.next,width:"10",height:"10",onClick:this.nextPage}):null;return v=v?o.createElement("span",null,o.createElement(p,{glyph:f[v._type],width:"10",height:"10"})," ",v._name):null,o.createElement("div",null,o.createElement("div",{className:"datatable",onMouseLeave:this.hideFull,onScroll:this.hideFull},o.createElement("table",null,o.createElement("tbody",null,h.map(function(e){return o.createElement("tr",{key:e},o.createElement("td",{className:"field "+t.className,onMouseOver:this.showFullField},e),d.map(function(t,n){return o.createElement("td",{key:e+n,className:n%2?"even":"odd",onMouseOver:this.showFullValue},t[e])},this))},this))),o.createElement("div",{className:"full field "+t.className,draggable:!0,onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragEnd:this.handleDragEnd,onDrop:this.handleDrop},v),o.createElement("div",{className:"full value"},y)),o.createElement("div",{className:"paging"},o.createElement("span",null,g(a+1),"–",g(s>m?m:s)," of ",g(m)),o.createElement("span",{className:"pager"},_," ",b)))}});e.exports=l(d)},function(e,t,n){"use strict";function r(e,t){var n=t.id;return{isSelected:c(e,"inspector.pipelines.selected")===n,pipeline:c(e,"pipelines."+n)}}function i(e){return{selectPipeline:function(t){e(l(t))}}}var o=n(11),a=n(36).connect,s=n(223),u=n(469),l=n(444),c=n(19).getIn,f=n(43),p=n(41),d=n(45),h=o.createClass({displayName:"PipelineInspector",propTypes:{isSelected:o.PropTypes.bool,selectPipeline:o.PropTypes.func,pipeline:o.PropTypes.instanceOf(d.Map)},render:function(){function e(e){n.name=e}var t=this.props,n=t.pipeline,r=o.createElement("span",null);return t.isSelected&&(r=o.createElement("div",{className:"inner"},o.createElement("p",{className:"source"},o.createElement(p,{glyph:f.database,width:"11",height:"11"})," ",n.get("_name")),o.createElement(u,{dataset:primitives[n.get("source")],className:"source"}))),o.createElement("div",{className:"pipeline"+(t.isSelected?" selected":"")},o.createElement(s,{className:"header",value:n.get("_name"),save:e,onClick:t.selectPipeline.bind(null,n.get("_id"))}),r)}});e.exports=a(r,i)(h)},function(e,t,n){"use strict";function r(e){return{pipelines:u(e,"pipelines")}}var i=n(11),o=n(45),a=n(1),s=n(36).connect,u=n(19).getIn,l=n(470),c=i.createClass({displayName:"PipelineList",propTypes:{pipelines:i.PropTypes.instanceOf(o.Map)},render:function(){var e=a.vals(this.props.pipelines.toJS());return i.createElement("div",{id:"pipeline-list"},e.map(function(e){var t=e._id;return i.createElement(l,{key:t,id:t})}))}});e.exports=s(r)(c)},function(e,t,n){"use strict";function r(e){return{hintsOn:u(e,"hints.on")}}function i(e,t){return{toggleHints:function(){e(l(!this.props.selected))}}}var o=n(11),a=n(36).connect,s=n(266),u=n(19).getIn,l=n(221).on,c=n(43),f=n(41),p=o.createClass({displayName:"Settings",propTypes:{hintsOn:o.PropTypes.bool,toggleHints:o.PropTypes.func},getInitialState:function(){return{modalIsOpen:!1}},openModal:function(){this.setState({modalIsOpen:!0})},closeModal:function(){this.setState({modalIsOpen:!1})},render:function(){return o.createElement("div",null,o.createElement("a",{onClick:this.openModal},"Settings"),o.createElement(s,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal},o.createElement("div",{className:"wrapper settings"},o.createElement("span",{className:"closeModal",onClick:this.closeModal},o.createElement(f,{glyph:c.close})),o.createElement("h2",{className:"hed"},"Settings"),o.createElement("label",{className:"label-inline"},"Hints: "),o.createElement("div",{className:"onoffswitch inline"},o.createElement("input",{type:"checkbox",name:"onoffswitch",className:"onoffswitch-checkbox",id:"myonoffswitch",defaultChecked:this.props.hintsOn,onChange:this.props.toggleHints.bind(this,"")}),o.createElement("label",{className:"onoffswitch-label",htmlFor:"myonoffswitch"},o.createElement("span",{className:"onoffswitch-inner"}),o.createElement("span",{className:"onoffswitch-switch"}))))))}});e.exports=a(r,i)(p)},function(e,t,n){"use strict";function r(e){return{selectedId:u(e,"inspector.selected"),sceneId:u(e,"scene.id")}}function i(e){return{addMark:function(t,n){var r=c.getDefaults(t,{_parent:n});e(p(r))},selectMark:function(t){e(f(t))}}}var o=n(11),a=n(36).connect,s=n(54),u=n(19).getIn,l=n(230).getClosestGroupId,c=n(217),f=n(214),p=n(213).addMark,d=n(43),h=n(41),m=["rect","symbol","text","line","area"],g=o.createClass({displayName:"AddMarksTool",propTypes:{selectedId:o.PropTypes.number,sceneId:o.PropTypes.number,addMark:o.PropTypes.func,selectMark:o.PropTypes.func},classNames:"new-marks",render:function(){var e=l(s.getState(),this.props.selectedId);return o.createElement("ul",null,m.map(function(t,n){return o.createElement("li",{key:t,onClick:this.props.addMark.bind(null,t,e)},o.createElement(h,{glyph:d[t]})," ",t)},this))}});e.exports=a(r,i)(g)},function(e,t,n){"use strict";var r=n(11),i=n(12),o=n(90),a=(n(36).connect,n(18)),s=n(43),u=n(41),l={png:"canvas",svg:"svg"},c={json:"application/json",html:"text/html"},f=r.createClass({displayName:"Export",toImageURL:function(e){var t=this,n=a["export"]();o.parse.spec(n,function(n){var r=n({renderer:l[e]}).update();t.download(r.toImageURL(e),e)})},toJSONURL:function(){var e=JSON.stringify(a["export"](),null,2);return this.toBlob(e,"json")},toHTMLURL:function(){var e=JSON.stringify(a["export"](),null,2),t=s.scaffold.replace("INJECT_SPEC",e);return this.toBlob(t,"html")},toBlob:function(e,t){var n=new Blob([e],{type:c[t]}),r=window.URL.createObjectURL(n);return this.download(r,t)},download:function(e,t){var n=i.select(document.createElement("a")).attr("href",e).attr("target","_blank").attr("download","lyra."+t).node(),r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},render:function(){return r.createElement("ul",{className:this.classNames},r.createElement("li",null,r.createElement(u,{glyph:s["export"]})," Export",r.createElement("ul",null,r.createElement("li",{onClick:this.toImageURL.bind(null,"png")},"As PNG"),r.createElement("li",{onClick:this.toImageURL.bind(null,"svg")},"As SVG"),r.createElement("li",{onClick:this.toJSONURL},"As JSON"),r.createElement("li",{onClick:this.toHTMLURL},"As HTML"))))}});e.exports=f},function(e,t,n){"use strict";var r=n(11),i=n(43),o=n(41),a=r.createClass({displayName:"UndoRedo",render:function(){return r.createElement("ul",null,r.createElement("li",null,r.createElement(o,{glyph:i.undo,className:"undo",width:"12",height:"12"})),r.createElement("li",null,r.createElement(o,{glyph:i.redo,className:"redo",width:"12",height:"12"})))}});e.exports=a},function(e,t,n){"use strict";function r(e){return{selectedId:d(e,"inspector.selected"),expandedLayers:d(e,"inspector.expandedLayers")}}function i(e,t){return{select:function(t){var n=f.getParentGroupIds(c(t));e(h(t)),e(v(n))},deleteMark:function(n){t.selectedId===n&&e(h(null)),e(m(n))},updateProperty:function(t,n,r){var i=c(t);i&&(i[n]=r),e(g(t,n,r))},toggle:function(t){e(y([t]))}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(11),s=n(36).connect,u=n(433),l=n(223),c=n(18).lookup,f=n(53),p=n(19).get,d=n(19).getIn,h=n(214),m=n(414),g=n(213).updateMarkProperty,v=n(220),y=n(448),_=n(41),b=n(43),x=a.createClass({displayName:"Group",propTypes:{id:a.PropTypes.number,level:a.PropTypes.number,selectedId:a.PropTypes.number,expandedLayers:a.PropTypes.object,select:a.PropTypes.func,deleteMark:a.PropTypes.func,updateProperty:a.PropTypes.func,toggle:a.PropTypes.func},componentWillUnmount:function(){u.hide()},icon:function(e,t){var n=t?"-open":"-closed",r=e+("group"===e?n:""),i=b[r],o="group"===e?this.props.toggle.bind(null,this.props.id):null,s=a.createElement(_,{glyph:i,onClick:o});return s},deleteUpdate:function(e){u.hide(),this.props.deleteMark(e),this.props.select(null)},render:function(){var e=this.props,t=+e.level,n=e.selectedId,r=e.id,i=c(r),s=i.type,u=p(e.expandedLayers,r),f=u&&i.marks?a.createElement("ul",{className:"group"},a.createElement("li",{className:"header"},"Guides ",a.createElement(_,{glyph:b.plus,width:"10",height:"10"})),a.createElement("li",{className:"header"},"Marks ",a.createElement(_,{
glyph:b.plus,width:"10",height:"10"})),i.marks.map(function(r){var i=c(r),s=i.type,f=i.name,p=this.icon(s,u);return"group"===s?a.createElement(x,o({key:r},e,{id:r,level:t+1})):a.createElement("li",{key:r},a.createElement("div",{className:"name"+(n===r?" selected":""),onClick:this.props.select.bind(null,r)},p,a.createElement(l,{value:f,save:e.updateProperty.bind(null,r,"name"),onClick:e.select.bind(null,r)}),a.createElement(_,{glyph:b.trash,className:"delete",onClick:this.deleteUpdate.bind(null,r),"data-tip":"Delete "+f,"data-place":"right"})))},this)):null,d=this.icon(s,u),h=i.name;return a.createElement("li",{className:u?"expanded":"contracted"},a.createElement("div",{className:"name"+(n===r?" selected":""),onClick:e.select.bind(null,r)},d,a.createElement(l,{value:h,save:this.props.updateProperty.bind(null,r,"name"),onClick:e.select.bind(null,r)}),a.createElement(_,{glyph:b.trash,className:"delete",onClick:this.props.deleteMark.bind(null,r),"data-html":!0,"data-tip":"Delete "+h+" and <br> everything inside it","data-place":"right"})),f)}});e.exports=s(r,i)(x)},function(e,t,n){"use strict";function r(e){var t,n=c(e,"inspector.selected"),r=c(e,"scene.id");return t=n?f(e,n):r,{selectedId:n,sceneId:r,containerId:t,marks:c(e,"marks."+r+".marks")}}function i(e){return{addMark:function(t,n){var r=p(t,{_parent:n});e(d(r))},selectMark:function(t){var n=l.getParentGroupIds(u(t));e(h(t)),e(g(n))},clearScene:function(t){e(h(null)),e(m())}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(11),s=n(36).connect,u=n(18).lookup,l=n(53),c=n(19).getIn,f=n(230).getClosestGroupId,p=n(217).getDefaults,d=n(213).addMark,h=n(214),m=n(415),g=n(220),v=n(476),y=n(43),_=n(41),b=a.createClass({displayName:"LayerList",propTypes:{selectedId:a.PropTypes.number,sceneId:a.PropTypes.number,containerId:a.PropTypes.number,marks:a.PropTypes.object,addMark:a.PropTypes.func,selectMark:a.PropTypes.func,clearScene:a.PropTypes.func},render:function(){var e=this.props,t=e.selectedId,n=e.sceneId,r=(e.containerId,e.marks?e.marks.toJS():[]);return a.createElement("div",{id:"layer-list",className:"expandingMenu"},a.createElement("h2",null,"Groups",a.createElement("span",{className:"new",onClick:this.props.addMark.bind(null,"group",n)},a.createElement(_,{glyph:y.plus})," New")),a.createElement("ul",null,a.createElement("li",{id:"scene"},a.createElement("div",{className:"edit name"+(t===n?" selected":""),onClick:this.props.selectMark.bind(null,n)},"Edit Scene",a.createElement(_,{glyph:y.erase,className:"delete",onClick:this.props.clearScene,"data-html":!0,"data-tip":"Clear scene.","data-place":"right"})))),a.createElement("ul",null,r.map(function(t){return a.createElement(v,o({key:t},e,{id:t,level:0}))},this)))}});e.exports=s(r,i)(b)},function(e,t,n){"use strict";function r(e,t){return{selectedId:e.get("selectedMark")}}var i=n(11),o=n(36).connect,a=n(223),s=(n(43),n(41),i.createClass({displayName:"ScaleList",propTypes:{select:i.PropTypes.func,selectedId:i.PropTypes.number,scales:i.PropTypes.array},render:function(){var e=this.props,t=e.selectedId;return i.createElement("div",{id:"scale-list",className:"expandingMenu"},i.createElement("h2",null,"Scales"),i.createElement("ul",null,e.scales.map(function(e){function n(t){e.name=t}var r=e._id;return i.createElement("li",{key:r,className:t===r?"selected":""},i.createElement("div",{className:"scale name"},i.createElement(a,{value:e.name,save:n})))},this)))}}));e.exports=o(r)(s)},function(e,t,n){"use strict";var r=n(11),i=r.createClass({displayName:"Errors",classNames:"error",render:function(){var e=this.props;return r.createElement("div",{className:"error"},r.createElement("p",null,e.message),r.createElement("ul",null,e.errors.map(function(e,t){return r.createElement("li",{key:t},e)})))}});e.exports=i},function(e,t,n){"use strict";function r(e){return{walkthroughs:u(e,"walkthrough.data")}}function i(e,t){return{select:function(t){e(l.setActiveWalkthrough(t))}}}var o=n(11),a=n(36).connect,s=n(266),u=n(19).getIn,l=n(416),c=n(43),f=n(41),p=o.createClass({displayName:"WalkthroughMenu",propTypes:{walkthroughs:o.PropTypes.object,select:o.PropTypes.func},getInitialState:function(){return{modalIsOpen:!1}},selectWalkthrough:function(e){this.props.select(e),this.closeModal()},openModal:function(){this.setState({modalIsOpen:!0})},closeModal:function(){this.setState({modalIsOpen:!1})},getWalkthroughDetails:function(){var e=this.props.walkthroughs.toJS(),t=[];for(var n in e)e[n].key=n,t.push(e[n]);return t},classNames:"hints walkthroughMenu ",render:function(){return o.createElement("div",null,o.createElement("a",{onClick:this.openModal},"Walkthroughs"),o.createElement(s,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal},o.createElement("div",{className:"wrapper walkthrough-menu"},o.createElement("span",{className:"closeModal",onClick:this.closeModal},o.createElement(f,{glyph:c.close})),o.createElement("h2",{className:"hed"},"Select a walkthrough"),o.createElement("p",null,"Learn to use lyra with step by step guides. You can quit them at any time to explore on your own."),o.createElement("ul",null,this.getWalkthroughDetails().map(function(e,t){var n=e.image?o.createElement("img",{src:e.image}):null;return o.createElement("li",{key:t,onClick:this.selectWalkthrough.bind(this,e.key)},n,o.createElement("span",null,e.title))},this)))))}});e.exports=a(r,i)(p)},function(e,t,n){"use strict";function r(e,t){var n=s(e,"walkthrough.activeWalkthrough"),r=s(e,"walkthrough.activeStep"),i=s(e,"walkthrough.data."+n+".steps");return{currentStepId:r,steps:i,marks:s(e,"marks")}}function i(e,t){return{deselectWalkthrough:function(){e(l.setActiveWalkthrough(null)),e(l.setActiveStep(1))},goToNext:function(){this.steps.size>this.currentStepId&&e(l.setActiveStep(this.currentStepId+1))}}}var o=n(11),a=n(36).connect,s=n(19).getIn,u=n(510).validate,l=n(416),c=n(18)["export"],f=n(479),p=n(43),d=n(41),h=o.createClass({displayName:"Step",propTypes:{currentStepId:o.PropTypes.number,steps:o.PropTypes.object,marks:o.PropTypes.object,goToNext:o.PropTypes.func,deselectWalkthrough:o.PropTypes.func},getInitialState:function(){return{error:!1,errorMap:null,errorMessage:null}},getNextStep:function(){var e=this.props.steps.toJS(),t=this.props.currentStepId;return e.find(function(n){return e.length>t?n.id===t+1:null})},getCurrentStep:function(){var e=this.props.steps.toJS(),t=this.props.currentStepId;return e.find(function(e){return e.id===t})},next:function(){var e=this.validateStep();e.success_status?(this.setState({error:!1}),this.props.goToNext()):(this.setState({errorMessage:e.message}),this.setState({errorMap:e.errors}),this.setState({error:!0}))},forceContinue:function(){this.setState({error:!1}),this.props.goToNext()},quitWalkthrough:function(){this.props.deselectWalkthrough()},validateStep:function(){var e=c(),t=this.getNextStep().lyra_state;return u(e,t)},classNames:"hints",nextButton:function(){var e=this.props,t=e.steps.size>e.currentStepId;return this.state.error&&t?o.createElement("div",{className:"next"},o.createElement("span",{className:"button",onClick:this.next},"NEXT"),o.createElement("br",null),o.createElement("span",{onClick:this.forceContinue},"Continue without validation")):t?o.createElement("span",{className:"next"},o.createElement("span",{className:"button",onClick:this.next},"NEXT")):""},render:function(){var e=this.props,t=this.getCurrentStep(),n=e.currentStepId,r=t.image?o.createElement("img",{src:t.image,alt:t.alt_text}):"",i=this.nextButton(),a=this.props.steps.toJS(),s=this.state.errorMap,u=this.state.errorMessage,l=this.state.error?o.createElement(f,{message:u,errors:s}):"";return o.createElement("div",{className:this.classNames},r,o.createElement("div",{className:"details"},o.createElement("h3",{className:"hint-header"},t.title),o.createElement("p",null,t.text),i,o.createElement("span",{className:"close-hint",onClick:this.quitWalkthrough},o.createElement(d,{glyph:p.close}))),o.createElement("ul",{className:"step-dots"},a.map(function(e,t){var r=e.id===n?"selected":"";return o.createElement("li",{key:t,className:r})})),l)}});e.exports=a(r,i)(h)},function(e,t,n){"use strict";var r={MARK_ADD:{rect:{title:"I see you have added a RECT...",text:"Maybe you'd like to clear the whole canvas",action_text:"DO IT. CLEAR IT OUT.",action:n(415)},line:{title:"I see you have added a LINE...",text:"Drop data on it to create a graph."},symbol:{template:n(459)}}};e.exports=r},function(e,t,n){"use strict";var r={CREATE_SCENE:{title:"Hi, I'm helpy the helper hints box",text:"You can turn me on and off. You can manage this in the settings link in the footer.",action_text:"DISABLE HINTS",action:n(221).on,action_props:!1}};e.exports=r},function(e,t,n){"use strict";function r(e,t,n){return this._name=e,this._ptype=t,this._type=l[t],this._aggregate=null,this._bin=null,this.$=i.$(e),n&&(this._parent=n),s.call(this)}var i=n(1),o=n(219),a=n(27),s=n(91),u=n(53).getParent,l=o.data.types;a(r,s),r.prototype.profile=function(e){return void 0!==e?(this._profile=e,this):this._profile?this._profile:(u(this).summary(),this._profile)},e.exports=r},function(e,t,n){"use strict";function r(e){return this.mark=a[e],this.data={},this.encoding={},this.config={},this._map={data:{},scales:{},axes:{},legends:{}},o.call(this)}var i=n(27),o=n(91),a={rect:"bar",symbol:"point",text:"text",line:"line",area:"area"};i(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=this._rule._map.data;n.source=t._id}n(53).getParent;e.exports=r},function(e,t,n){"use strict";function r(e,t){var n,r=this._rule._map.scales,i=p(this).axes,o=t.find(function(t){return r[t.scale]===e._id}),l=0;i.forEach(function(t){t=h(t),t.type===o.type&&++l,t.scale===e._id&&(n=t)}),!n&&2>l&&(n=new s(m.AXIS,o.type,e._id),n.title=o.title,n.layer=o.layer,n.grid=o.grid,n.orient=o.orient||n.orient,1===l&&(n.orient=v[n.orient]),a.extend(n.properties,o.properties),u.dispatch(c(n,this._parent)))}function i(e,t,n){var r=this._rule._map.scales,i=p(this).legends,o=t.find(function(t){return r[t[n]]===e._id}),a=i.find(function(t){return h(t)[n]===e._id});a||(a=new s(m.LEGEND,n,e._id),a.title=o.title,u.dispatch(f(a,this._parent)))}function o(e,t,n){var o=g[n];if(o){var a=e.spec.marks[0],s=u.getState(),c=l(s,this._id,t,n),f=c&&h(c);f&&(o===m.AXIS?r.call(this,f,a.axes):i.call(this,f,a.legends,t))}}var a=n(1),s=n(224),u=n(54),l=n(230).getGuideScale,c=n(136).addAxisToGroup,f=n(136).addLegendToGroup,p=n(53).getParent,d=n(18),h=d.lookup,m=s.TYPES,g={x:m.AXIS,y:m.AXIS,color:m.LEGEND,size:m.LEGEND,shape:m.LEGEND},v={left:"right",right:"left",top:"bottom",bottom:"top"};e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){var i=t[e],o={};"undefined"!=typeof i.scale&&(o.scale=n.scales[i.scale]),"undefined"!=typeof i.field&&(i.field.group?o.group=i.field.group:o.field=r.schema()[i.field]._id),"undefined"!=typeof i.value&&(o.signal=s(this,e),u.dispatch(l(o.signal,i.value))),"undefined"!=typeof i.band&&(o.band=i.band),"undefined"!=typeof i.offset&&(o.offset=i.offset),u.dispatch(c(this._id,e,o))}function i(e,t,n,i,o){var a=t+"2",s=t+"c",l=d[t];return e!==t+"+"?(n[e]=n[e]||n[t]||n[s],r.call(this,e,n,i,o)):void(n[a]?(r.call(this,t,n,i,o),r.call(this,a,n,i,o),u.dispatch(f(this._id,l))):(n[t]=n[s],r.call(this,t,n,i,o),n[l]={scale:n[t].scale,band:!0,offset:-1},r.call(this,l,n,i,o),u.dispatch(f(this._id,a))))}function o(e,t,n){var o,a=this._rule._map,s=e.spec.marks[0].marks[0],u=s.properties.update;s.from&&s.from.data&&(this.dataset(a.data[s.from.data]),o=p(this.from)),"rect"!==this.type||"x"!==n&&"y"!==n?r.call(this,t,u,a,o):i.call(this,t,n,u,a,o)}var a=n(18),s=n(88),u=n(54),l=n(222),c=n(136).setProperty,f=n(136).disableProperty,p=a.lookup,d={x:"width",y:"height"};e.exports=o},function(e,t,n){"use strict";function r(e,t){return"ordinal"===e&&"rect"!==t}function i(e,t){var n=r(e.type,this.type);return t.type===e.type&&!!t.points===n&&u.equal(t._domain,e._domain)&&t.range===e.range}function o(e){var t=r(e.type,this.type),o=f.scale(),a=o.find(i.bind(this,e));a||(a=f.scale(new l(e.name,e.type,void 0,e.range)),a._domain=e._domain,a.points=t,t&&(a.padding=e.padding)),a.nice=e.nice,a.round=e.round,this._rule._map.scales[e.name]=a._id;var s=n(417);s.forceUpdate(),d.dispatch(h(a,this._parent))}function a(e){if(!e)return null;var t,n=this._rule._map.data,r=e.domain,i=e.rangeMin||e.rangeMax;return u.isArray(r)||(t=p(n[r.data]),e._domain=[t.schema()[r.field]._id]),"x"===e.name||i===c.CELLW||u.equal(i,m)?e.range="width":("y"===e.name||i===c.CELLH||u.equal(i,g))&&(e.range="height"),delete e.rangeMin,delete e.rangeMax,delete e.bandSize,e}function s(e){for(var t,n,r,s=this._rule._map.scales,l=u.keys(e.rule.encoding),c=e.spec.marks[0].scales,f=l.length,d=function(e){return e.name===t},h=0;f>h;++h)t=l[h],r=p(s[t]),n=a.call(this,c.find(d)),n&&(r&&i.call(this,n,r)||o.call(this,n))}var u=n(1),l=n(216),c=n(423),f=n(18),p=f.lookup,d=n(54),h=n(136).addScaleToGroup,m={data:"layout",field:"cellWidth"},g={data:"layout",field:"cellHeight"};e.exports=s},function(e,t,n){"use strict";function r(e,t){if("undefined"==typeof e)return i.fromJS({display:null,on:!0});if(t.type===o.HINTS_CLEAR)return e.set("display",null);if(t.type===o.HINTS_ON)return e.set("on",t.on);if(t.type===o.CREATE_SCENE){var r=n(483);return e.set("display",r.CREATE_SCENE)}if(t.type===o.MARK_ADD){var a=n(482),s=t.props.type;if(a.MARK_ADD[s])return e.set("display",a.MARK_ADD[s])}return e}var i=n(45),o=n(21);e.exports=r},function(e,t,n){"use strict";var r=n(552).combineReducers;e.exports=r({scene:n(495),vega:n(497),inspector:n(492),marks:n(493),signals:n(496),walkthrough:n(498),hints:n(490),pipelines:n(494)})},function(e,t,n){"use strict";function r(e,t){return t.reduce(function(e,t){return u(e,"expandedLayers."+t,!0)},e)}function i(e,t){if("undefined"==typeof e)return o.fromJS({pipelines:{selected:null},selected:null,expandedLayers:{}});if(t.type===a.MARK_ADD)return u(u(e.set("selected",t.id),"expandedLayers."+t.id,!0),"expandedLayers."+t.props._parent,!0);if(t.type===a.SELECT_MARK){var i=n(18).lookup,c=l.getParentGroupIds(i(t.markId));return r(e.set("selected",t.markId),c)}return t.type===a.EXPAND_LAYERS?r(e,t.layerIds):t.type===a.REMOVE_LAYERS?t.layerIds.reduce(function(e,t){return e["delete"](t)},e):t.type===a.TOGGLE_LAYERS?t.layerIds.reduce(function(e,t){var n="expandedLayers."+t;return u(e,n,!s(e,n))},e):t.type===a.PIPELINE_SELECT?u(e,"pipelines.selected",t.id):e}var o=n(45),a=n(21),s=n(19).getIn,u=n(19).setIn,l=n(53);e.exports=i},function(e,t,n){"use strict";function r(e,t,n){var r=e&&e.update;return r?E({},e,{update:Object.keys(r).reduce(function(e,r){return"undefined"==typeof e[r].value?e:(e[r]=E({signal:h(t,n,r)},e[r]._disabled?{_disabled:!0}:{}),e)},E({},r))}):e}function i(e){return Object.keys(e.props).reduce(function(t,n){return"properties"===n?y(t,n,f.fromJS(r(e.props[n],e.props.type,e.id))):y(t,n,f.fromJS(e.props[n]))},f.Map({_id:e.id,name:e.name}))}function o(e,t){if("undefined"==typeof t.childId)return e;var n=g(e,t.childId);if(!n)return e;var r=n.get("_parent");if(null==r&&!t.parentId)return e;var i=g(e,r),o=t.parentId?g(e,t.parentId):t.parentId;return null===o?x(_(e,t.childId+"._parent",null),r+".marks",t.childId):i&&o?b(x(_(e,t.childId+"._parent",t.parentId),r+".marks",t.childId),t.parentId+".marks",t.childId):b(_(e,t.childId+"._parent",t.parentId),t.parentId+".marks",t.childId)}function a(e,t,n){var r=t.oldGroupId+"."+n,i=t.groupId+"."+n;return t.oldGroupId?b(x(e,r,t.id),i,t.id):b(e,i,t.id)}function s(e,t,n,r){var i=t+".properties.update."+n;return _(e,i,f.fromJS(r))}function u(e,t,n){var r=t+".properties.update."+n;return _(e,r+"._disabled",!0)}function l(e,t,n){var r=v(e,t+".type");return s(e,t,n,{signal:h(r,t,n)})}function c(e,t){return"undefined"==typeof e?new f.Map:t.type===p.MARK_ADD?o(y(e,t.id,i(t)),{type:p.MARK_SET_PARENT,parentId:t.props?t.props._parent:null,childId:t.id}):t.type===p.CREATE_SCENE?y(e,t.id,i(E({},t,{props:E({},t.props,{width:{signal:d("vis_width")},height:{signal:d("vis_height")}})}))):t.type===p.MARK_DELETE?o(e,{childId:t.markId,parentId:null}).set(""+t.markId,null):t.type===p.MARK_SET_PARENT?o(e,t):t.type===p.MARK_UPDATE_PROPERTY?_(e,t.id+"."+t.property,t.value):t.type===p.RULES_ADD_SCALE_TO_GROUP?b(e,t.groupId+".scales",t.id):t.type===p.RULES_ADD_AXIS_TO_GROUP?a(e,t,"axes"):t.type===p.RULES_ADD_LEGEND_TO_GROUP?a(e,t,"legends"):t.type===p.RULES_SET_PROPERTY?s(e,t.id,t.property,t.value):t.type===p.RULES_DISABLE_PROPERTY?u(e,t.id,t.property):t.type===p.RULES_RESET_PROPERTY?l(e,t.id,t.property):e}var f=n(45),p=n(21),d=n(44),h=n(427),m=n(19),g=m.get,v=m.getIn,y=m.set,_=m.setIn,b=m.ensureValuePresent,x=m.ensureValueAbsent,E=n(218);e.exports=c},function(e,t,n){"use strict";function r(e,t){if("undefined"==typeof e)return i.Map();e.get("pipelines");if(t.type===o.CREATE_PIPELINE){var n=a.type("pipeline");return u(e,n,i.fromJS({_name:t.id,_id:n,source:null}))}return t.type===o.UPDATE_PIPELINE_DATASET?l(e,t.pipelineId+".source",t.datasetId):e}var i=n(45),o=n(21),a=n(137),s=n(19),u=(s.get,s.getIn,s.set),l=s.setIn;s.ensureValuePresent,s.ensureValueAbsent,n(218);e.exports=r},function(e,t,n){"use strict";function r(e,t){return"undefined"==typeof e?i.Map():t.type===o.CREATE_SCENE?e.set("id",t.id):e}var i=n(45),o=n(21);e.exports=r},function(e,t,n){"use strict";function r(e,t){return e.set(t.signal,u.Map({name:t.signal,init:t.value,_idx:e.size}))}function i(e,t){return p(e,t.signal+".streams",t.value)}function o(e,t){var n=t.props.properties&&t.props.properties.update;return n?Object.keys(n).reduce(function(e,o){if("undefined"==typeof n[o].value)return e;var a=f(t.props.type,t.id,o),s=r(e,{signal:a,value:n[o].value});return t.streams[a]?i(s,{signal:a,value:t.streams[a]}):s},e):e}function a(e,t){var n=new RegExp("^"+l(t.markType+"_"+t.markId));return e.filter(function(e,t){return!n.test(t)})}function s(e,t){return"undefined"==typeof e?u.Map():t.type===c.MARK_ADD?o(e,t):t.type===c.CREATE_SCENE?r(r(e,{signal:l("vis_width"),value:t.props.width}),{signal:l("vis_height"),value:t.props.height}):t.type===c.SIGNAL_INIT?r(e,t):t.type===c.SIGNAL_SET?p(e,t.signal+".init",t.value):t.type===c.SIGNAL_SET_STREAMS?i(e,t):t.type===c.SIGNAL_UNSET?e["delete"](t.signal):t.type===c.MARK_DELETE?a(e,t):e}var u=n(45),l=n(44),c=n(21),f=n(427),p=n(19).setIn;e.exports=s},function(e,t,n){"use strict";function r(e,t){if("undefined"==typeof e)return i.Map({invalid:!1,isParsing:!1});if(t.type===o.VEGA_INVALIDATE)return e.set("invalid",t.value);var n=[o.CREATE_SCENE,o.SIGNAL_INIT,o.MARK_ADD,o.MARK_DELETE,o.RULES_ADD_SCALE_TO_GROUP,o.RULES_ADD_LEGEND_TO_GROUP,o.RULES_ADD_AXIS_TO_GROUP,o.RULES_SET_PROPERTY,o.RULES_DISABLE_PROPERTY,o.RULES_RESET_PROPERTY];return n.indexOf(t.type)>=0?e.set("invalid",!0):t.type===o.VEGA_PARSE?e.merge({isParsing:t.value,invalid:!1}):e}var i=n(45),o=n(21);e.exports=r},function(e,t,n){"use strict";function r(e,t){return"undefined"==typeof e?i.fromJS({data:n(511),activeStep:1,activeWalkthrough:null}):t.type===a.SET_ACTIVE_STEP?e.set("activeStep",t.step):t.type===a.SET_ACTIVE_WALKTHROUGH?e.set("activeWalkthrough",t.key):t.type===a.SET_WALKTHROUGH?e.set(t.key,o({},e.get(t.key),t.data)):e}var i=n(45),o=n(218),a=n(21);e.exports=r},function(e,t,n){"use strict";var r=n(556)["default"],i=n(437),o=i.createStore,a=i.applyMiddleware,s=n(491);e.exports=function(e){return o(s,e,a(r))}},function(e,t,n){"use strict";var r=n(45);e.exports=r.Map({marks:r.Map(),scene:r.Map(),signals:r.Map(n(424).signals)})},function(e,t,n){"use strict";function r(e,t){l(e.getState(),"marks").forEach(function(e,n){t.syncMark(n,e?e.toJS():e)})}function i(e,t){var n=l(e.getState(),"vega.invalid");if(n){if(r(e,t),!t.Scene)return!0;t.view&&(t.view.destroy(),t.view=null),e.dispatch(c(!0)),t.parse().then(function(){e.dispatch(c(!1))})}return n}function o(e,t){if(e){var n=t.signal(s.SELECTED),r=n.mark.def,i=r&&r.lyra_id;if(e._id!==i){var o=[e._id].concat(u.getParentGroupIds(e)),a=u.findInItemTree(t.model().scene().items[0],o);null!==a&&(t.signal(s.SELECTED,a),t.update())}}}function a(e,t){return function(){var n=i(e,t),r=e.getState(),a=l(r,"vega.isParsing");if(!n&&!a&&t.view&&t.view.signal&&"function"==typeof t.view.signal&&t.view.model){var s=l(r,"inspector.selected");s&&o(t.lookup(s),t.view)}}}var s=n(42),u=n(53),l=n(19).getIn,c=n(451);e.exports={createStoreListener:a,_recreateVegaIfNecessary:i,_updateSelectedMarkInVega:o}},function(e,t,n){"use strict";function r(e){return f.prototype.init.call(this,e),this._cellID=null,this._cache=[],this._start=l.ingest({}),this._end=l.ingest({}),this._mouse={x:-1,y:-1},this.router(!0).produces(!0).dependency(c.SIGNALS,[p.CELL,p.MOUSE])}var i=n(1),o=n(27),a=n(90),s=a.dataflow,u=s.ChangeSet,l=s.Tuple,c=s.Dependencies,f=a.Transform,p=n(42);o(r,f),r.prototype.transform=function(e){var t=this._graph,n=t.signal(p.CELL).value(),r=t.signal(p.MOUSE).value(),o=this._mouse,a=this._cellID,s=this._cache,c=this._start,f=this._end,d=u.create(e);if(s.length&&a!==n._id&&(d.rem=s.splice(0)),!n._id)return d;var h=n.cousin(-1).mark.items,m={x:0,y:0},g=h[0].mark.group;if(!s.length||o.x===r.x&&o.y===r.y){if(!s.length){for(s.push(i.extend(c,r));g;g=g.mark&&g.mark.group)m.x+=g.x||0,m.y+=g.y||0;i.isValid(h[0].datum.x)?s.push.apply(s,h.map(function(e){var t=e.datum;return t.x+=m.x,t.y+=m.y,t})):s.push.apply(s,h.reduce(function(e,t){var n=t.bounds||t.mark.bounds;return e.concat([{x:n.x1,y:n.y1},{x:n.x2,y:n.y1},{x:n.x1,y:n.y2},{x:n.x2,y:n.y2}].map(l.ingest))},[])),s.push(i.extend(f,r)),d.add=s,this._cellID=n._id}}else d.mod.push(i.extend(c,r)),d.mod.push(i.extend(f,r));return this._mouse=r,d},e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(90),o=n(44),a=e.exports={},s=o("manipulators_");a[s+"rect"]=n(425),a[s+"group"]=n(425),a[s+"symbol"]=n(506),a[s+"line"]=n(505),a[s+"text"]=n(507),a[s+"area"]=n(504),a[o("bubble_cursor")]=n(502),r.extend(i.transforms,a)},function(e,t,n){"use strict";function r(e){return o.call(this,e)}var i=n(27),o=n(138),a=n(93),s=n(140),u=a.CONST,l=u.PADDING,c=u.STROKE_PADDING;i(r,o),r.prototype.handles=function(e){var t=e.mark.bounds,n=a.coords(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},r.prototype.connectors=function(e){var t=e.mark.bounds,n=a.coords(t,"connector");return[n.midCenter]},r.prototype.channels=function(e){var t=e.mark.bounds,n=e.mark.group.bounds,r=a.coords(t),i=r.midCenter;return[].concat([{x:n.x1,y:i.y},{x:i.x-l,y:i.y}].map(s("x","span"))).concat([{x:i.x,y:n.y1},{x:i.x,y:i.y-c}].map(s("y","span")))},r.prototype.altchannels=r.prototype.channels,e.exports=r},function(e,t,n){"use strict";function r(e){return o.call(this,e)}var i=n(27),o=n(138),a=n(93),s=n(140),u=a.CONST,l=u.PADDING,c=u.STROKE_PADDING;i(r,o),r.prototype.handles=function(e){var t=e.mark.bounds,n=a.coords(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},r.prototype.connectors=function(e){var t=e.mark.bounds,n=a.coords(t,"connector");return[n.midCenter]},r.prototype.channels=function(e){var t=e.mark.bounds,n=e.mark.group.bounds,r=a.coords(t),i=r.midCenter;return[].concat([{x:n.x1,y:i.y},{x:i.x-l,y:i.y}].map(s("x","span"))).concat([{x:i.x,y:n.y1},{x:i.x,y:i.y-c}].map(s("y","span")))},r.prototype.altchannels=r.prototype.channels,e.exports=r},function(e,t,n){"use strict";function r(e){return o.call(this,e)}var i=n(27),o=n(138),a=n(93),s=n(140),u=a.CONST,l=u.PADDING,c=u.STROKE_PADDING;i(r,o),r.prototype.handles=function(e){var t=a.coords(e.bounds,"handle");return[t.topLeft,t.topRight,t.bottomLeft,t.bottomRight]},r.prototype.connectors=function(e){var t=a.coords(e.bounds,"connector");return[t.midCenter]},r.prototype.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,r=a.coords(t),i=r.midCenter;return[].concat([{x:n.x1,y:i.y},{x:i.x-l,y:i.y}].map(s("x","span"))).concat([{x:i.x,y:n.y1},{x:i.x,y:i.y-c}].map(s("y","span")))},r.prototype.altchannels=r.prototype.channels,e.exports=r},function(e,t,n){"use strict";function r(e){return o.call(this,e)}var i=n(27),o=n(138),a=n(93),s=n(140),u=a.CONST,l=u.PADDING,c=u.STROKE_PADDING;i(r,o),r.prototype.handles=function(e){var t=a.coords(e.bounds,"handle");return[t.topLeft,t.bottomRight]},r.prototype.connectors=function(e){var t=a.coords(e.bounds,"connector");return[t.midCenter]},r.prototype.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,r=a.coords(t),i=r.midCenter;return[].concat([{x:n.x1,y:i.y},{x:i.x-l,y:i.y}].map(s("x","arrow"))).concat([{x:i.x,y:n.y1},{x:i.x,y:i.y-c}].map(s("y","arrow")))},r.prototype.altchannels=r.prototype.channels,e.exports=r},function(e,t,n){"use strict";function r(e){return e+"_"+i.type(e)}var i=n(137);e.exports=r},function(e,t){"use strict";function n(){}function r(e){this.cancelled=!1,this.promise=new Promise(e.bind(this))}n.prototype["catch"]=n.prototype.then=function(){return new n},r.prototype.cancel=function(){this.cancelled=!0},r.prototype.then=function(e,t){if(this.cancelled)return new n;var r=this;return this.promise.then(function(t){return r.cancelled?new n:e(t)})["catch"](t)},r.prototype["catch"]=function(e){return this.promise["catch"](e)},e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=c[t].split("."),r=e,i=0;i<n.length;i++)r=r?r[n[i]]:r;return r}function i(e,t,n){return t.filter(function(t){return t[n]===e})}function o(e,t,n){var r=n||1,o=i(e,t,"type");return o.length>=r}function a(e,t,n){var i=r(e,n),o=r(t,n);return l(o,i)}function s(e,t,n){var i=!1;if(r(e,n)){for(var o=0;o<t.length;o++)if(a(e,t[o],n)){i=!0;break}}else i=!0;return i}function u(e,t){var n=!0,a=[],u=e.marks;if(u)for(var l=0;l<t.marks.length;l++){var c=t.marks[l].type,f=i(c,t.marks,"type").length;if(!o(c,u,f)){n=!1,a.push("No "+c.toUpperCase()+" mark found");break}var p=r(t.marks[l],"marks");p&&!s(t.marks[l],u,"marks")&&(n=!1,a.push("Missing a "+c.toUpperCase()+" element with properties: "+JSON.stringify(p)))}return e.scales,e.axes,{success_status:n,errors:a}}var l=n(532),c={marks:"properties.update",guides:"property",scales:""};e.exports={validate:u}},function(e,t,n){"use strict";e.exports={example:n(522),barChart:n(521)}},function(e,t,n){var r,i;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var a in r)o.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],i=function(){return n}.apply(t,r),!(void 0!==i&&(e.exports=i)))}()},function(e,t){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function r(e){if(!(this instanceof r))return new r(e);e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}e.exports=function(e){return new r(e)},r.prototype.add=function(e){var t=this.el;if(t){if(""===t.className)return t.className=e;var r=t.className.split(" ");return n(r,e)>-1?r:(r.push(e),t.className=r.join(" "),r)}},r.prototype.remove=function(e){var t=this.el;if(t&&""!==t.className){var r=t.className.split(" "),i=n(r,e);return i>-1&&r.splice(i,1),t.className=r.join(" "),r}},r.prototype.has=function(e){var t=this.el;if(t){var r=t.className.split(" ");return n(r,e)>-1}},r.prototype.toggle=function(e){var t=this.el;t&&(this.has(e)?this.remove(e):this.add(e))}},function(e,t,n){var r;(function(e,i,o){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function u(e){K=e}function l(e){ee=e}function c(){return function(){e.nextTick(m)}}function f(){return function(){X(m)}}function p(){var e=0,t=new re(m),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=m,function(){e.port2.postMessage(0)}}function h(){return function(){setTimeout(m,1)}}function m(){for(var e=0;Q>e;e+=2){var t=ae[e],n=ae[e+1];t(n),ae[e]=void 0,ae[e+1]=void 0}Q=0}function g(){try{var e=n(587);return X=e.runOnLoop||e.runOnContext,f()}catch(t){return h()}}function v(e,t){var n=this,r=new this.constructor(_);void 0===r[le]&&j(r);var i=n._state;if(i){var o=arguments[i-1];ee(function(){P(i,r,o,n._result)})}else N(n,r,e,t);return r}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(_);return T(n,e),n}function _(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function E(e){try{return e.then}catch(t){return de.error=t,de}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function S(e,t,n){ee(function(e){var r=!1,i=w(n,t,function(n){r||(r=!0,t!==n?T(e,n):C(e,n))},function(t){r||(r=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,O(e,i))},e)}function k(e,t){t._state===fe?C(e,t._result):t._state===pe?O(e,t._result):N(t,void 0,function(t){T(e,t)},function(t){O(e,t)})}function M(e,t,n){t.constructor===e.constructor&&n===se&&constructor.resolve===ue?k(e,t):n===de?O(e,de.error):void 0===n?C(e,t):s(n)?S(e,t,n):C(e,t)}function T(e,t){e===t?O(e,b()):a(t)?M(e,t,E(t)):C(e,t)}function A(e){e._onerror&&e._onerror(e._result),I(e)}function C(e,t){e._state===ce&&(e._result=t,e._state=fe,0!==e._subscribers.length&&ee(I,e))}function O(e,t){e._state===ce&&(e._state=pe,e._result=t,ee(A,e))}function N(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+fe]=n,i[o+pe]=r,0===o&&e._state&&ee(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?P(n,r,i,o):i(o);e._subscribers.length=0}}function L(){this.error=null}function D(e,t){try{return e(t)}catch(n){return he.error=n,he}}function P(e,t,n,r){var i,o,a,u,l=s(n);if(l){if(i=D(n,r),i===he?(u=!0,o=i.error,i=null):a=!0,t===i)return void O(t,x())}else i=r,a=!0;t._state!==ce||(l&&a?T(t,i):u?O(t,o):e===fe?C(t,i):e===pe&&O(t,i))}function R(e,t){try{t(function(t){T(e,t)},function(t){O(e,t)})}catch(n){O(e,n)}}function U(){return me++}function j(e){e[le]=me++,e._state=void 0,e._result=void 0,e._subscribers=[]}function z(e){return new be(this,e).promise}function q(e){var t=this;return new t(Z(e)?function(n,r){for(var i=e.length,o=0;i>o;o++)t.resolve(e[o]).then(n,r)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(_);return O(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[le]=U(),this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&B(),this instanceof H?R(this,e):Y())}function V(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[le]||j(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):O(this.promise,W())}function W(){return new Error("Array Methods must be provided an Array")}function $(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=_e)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var X,K,J,Z=G,Q=0,ee=function(e,t){ae[Q]=e,ae[Q+1]=t,Q+=2,2===Q&&(K?K(m):J())},te="undefined"!=typeof window?window:void 0,ne=te||{},re=ne.MutationObserver||ne.WebKitMutationObserver,ie="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),oe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ae=new Array(1e3);J=ie?c():re?p():oe?d():void 0===te?g():h();var se=v,ue=y,le=Math.random().toString(36).substring(16),ce=void 0,fe=1,pe=2,de=new L,he=new L,me=0,ge=z,ve=q,ye=F,_e=H;H.all=ge,H.race=ve,H.resolve=ue,H.reject=ye,H._setScheduler=u,H._setAsap=l,H._asap=ee,H.prototype={constructor:H,then:se,"catch":function(e){return this.then(null,e)}};var be=V;V.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ce&&e>n;n++)this._eachEntry(t[n],n)},V.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===ue){var i=E(e);if(i===se&&e._state!==ce)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===_e){var o=new n(_);M(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(r(e),t)},V.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ce&&(this._remaining--,e===pe?O(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},V.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){n._settledAt(fe,t,e)},function(e){n._settledAt(pe,t,e)})};var xe=$,Ee={Promise:_e,polyfill:xe};n(586).amd?(r=function(){return Ee}.call(t,n,t,o),!(void 0!==r&&(o.exports=r))):"undefined"!=typeof o&&o.exports?o.exports=Ee:"undefined"!=typeof this&&(this.ES6Promise=Ee),xe()}).call(this)}).call(t,n(538),function(){return this}(),n(440)(e))},function(e,t,n){(function(t){"use strict";e.exports=function(){function e(e){return"function"==typeof e}var r=void 0;r=void 0!==t?t:void 0!==window&&window.document?window:self;var i=function(){if(!r.hasOwnProperty("Promise"))return!1;var t=r.Promise;return t.hasOwnProperty("resolve")&&t.hasOwnProperty("reject")&&t.hasOwnProperty("all")&&t.hasOwnProperty("race")?function(){var t=void 0,n=new r.Promise(function(e){t=e});return n?e(t):!1}():!1}();return i?r.Promise:n(514).Promise}()}).call(t,function(){return this}())},function(e,t,n){"use strict";e.exports=function(){function e(e,t,n){this.resolve=e,this.reject=t,this.custom=n}function t(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t.shift(),i=t.shift(),o=void 0;if(t=t.length>1?t:t[0],"function"==typeof r.custom)o=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return r.custom.apply(o,t)},o.resolve=r.resolve,o.reject=r.reject,o.call(null,i,t);else{if(i)return r.reject(i);r.resolve(t)}}var r=n(515);return function(n,i){return function(){for(var o=arguments.length,a=Array(o),s=0;o>s;s++)a[s]=arguments[s];var u=this;return new r(function(r,o){var s=new e(r,o,i);a.push(t.bind(null,s)),n.apply(u,a)})}}}()},function(e,t,n){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Based on code that is Copyright 2013-2015, Facebook, Inc.
	  All rights reserved.
	*/
!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}()},function(e,t){},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){if("string"!=typeof t)for(var i=Object.getOwnPropertyNames(t),o=0;o<i.length;++o)if(!n[i[o]]&&!r[i[o]])try{e[i[o]]=t[i[o]]}catch(a){}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t){e.exports={title:"Cool times",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a SYMBOL",text:"Click on the SYMBOL button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change symbol shape",text:"Select the SYMBOL and change it's SHAPE to CROSS",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 3: Change color and add RECT",text:"Select the SYMBOL mark and then change it's stroke color to #ffffff, then add a RECT mark and change it's fill to #000000",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"},stroke:{value:"#ffffff"}}}},{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]}}]}},function(e,t){e.exports={title:"Example Walkthrough",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a RECT",text:"Click on the RECT button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change Color",text:"Select the RECT mark and then change it's color to #000000 in the property inspector",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 2: Change color",text:"Select the RECT mark and then change it's stroke color to #ffffff",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"},stroke:{value:"#ffffff"}}}}]}}]}},function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=n(524),o=n(429);e.exports=r},function(e,t){function n(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function r(e){return e}e.exports=n},function(e,t,n){function r(e){return a(function(t,n){var r=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,l=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&o(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++r<a;){var c=n[r];c&&e(t,c,s)}return t})}var i=n(525),o=n(528),a=n(534);e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function i(e){return o(e)&&p.call(e)==s}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:i(e)?d.test(c.call(e)):n(e)&&u.test(e)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,f=l.hasOwnProperty,p=l.toString,d=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&a(c(e))}function i(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?l:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!s(n))return!1;var o=typeof t;if("number"==o?r(n)&&i(t,n.length):"string"==o&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=/^\d+$/,l=9007199254740991,c=n("length");e.exports=o},function(e,t,n){(function(e,n){function r(e){return e&&e.Object===Object?e:null}var i={"function":!0,object:!0},o=i[typeof t]&&t&&!t.nodeType?t:void 0,a=i[typeof e]&&e&&!e.nodeType?e:void 0,s=r(o&&a&&"object"==typeof n&&n),u=r(i[typeof self]&&self),l=r(i[typeof window]&&window),c=r(i[typeof this]&&this),f=s||l!==(c&&c.window)&&l||u||c||Function("return this")();e.exports=f}).call(t,n(440)(e),function(){return this}())},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return o(e)&&m.call(e,"callee")&&(!v.call(e,"callee")||g.call(e)==f)}function i(e){return null!=e&&s(y(e))&&!a(e)}function o(e){return l(e)&&i(e)}function a(e){var t=u(e)?g.call(e):"";return t==p||t==d}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var c=9007199254740991,f="[object Arguments]",p="[object Function]",d="[object GeneratorFunction]",h=Object.prototype,m=h.hasOwnProperty,g=h.toString,v=h.propertyIsEnumerable,y=n("length");e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function o(e){return a(e)&&h.call(e)==l}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:o(e)?m.test(p.call(e)):n(e)&&c.test(e)}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,d=f.hasOwnProperty,h=f.toString,m=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=r(Array,"isArray"),v=9007199254740991,y=g||function(e){return n(e)&&i(e.length)&&h.call(e)==u};e.exports=y},function(e,t,n){function r(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function i(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function o(e,t){return r(t,function(t){return[t,e[t]]})}function a(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function s(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function l(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function c(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(){this.__data__=at?at(null):{}}function p(e){return this.has(e)&&delete this.__data__[e]}function d(e){var t=this.__data__;if(at){var n=t[e];return n===fe?void 0:n}return Ge.call(t,e)?t[e]:void 0}function h(e){var t=this.__data__;return at?void 0!==t[e]:Ge.call(t,e)}function m(e,t){var n=this.__data__;return n[e]=at&&void 0===t?fe:t,this}function g(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function v(){this.__data__=[]}function y(e){var t=this.__data__,n=U(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():Qe.call(t,n,1),!0}function _(e){var t=this.__data__,n=U(t,e);return 0>n?void 0:t[n][1]}function b(e){return U(this.__data__,e)>-1}function x(e,t){var n=this.__data__,r=U(n,e);return 0>r?n.push([e,t]):n[r][1]=t,this}function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(){this.__data__={hash:new c,map:new(nt||g),string:new c}}function S(e){return W(this,e)["delete"](e)}function k(e){return W(this,e).get(e)}function M(e){return W(this,e).has(e)}function T(e,t){return W(this,e).set(e,t),this}function A(e){var t=-1,n=e?e.length:0;for(this.__data__=new E;++t<n;)this.add(e[t])}function C(e){return this.__data__.set(e,fe),this}function O(e){return this.__data__.has(e)}function N(e){this.__data__=new g(e)}function I(){this.__data__=new g}function L(e){return this.__data__["delete"](e)}function D(e){return this.__data__.get(e)}function P(e){return this.__data__.has(e)}function R(e,t){var n=this.__data__;return n instanceof g&&n.__data__.length==ce&&(n=this.__data__=new E(n.__data__)),n.set(e,t),this}function U(e,t){for(var n=e.length;n--;)if(ee(e[n][0],t))return n;return-1}function j(e,t){return Ge.call(e,t)||"object"==typeof e&&t in e&&null===X(e)}function z(e,t,n,r,i){return e===t?!0:null==e||null==t||!re(e)&&!ie(t)?e!==e&&t!==t:q(e,t,z,n,r,i)}function q(e,t,n,r,i,o){var s=ht(e),u=ht(t),l=ge,c=ge;s||(l=K(e),l=l==me?Se:l),u||(c=K(t),c=c==me?Se:c);var f=l==Se&&!a(e),p=c==Se&&!a(t),d=l==c;if(d&&!f)return o||(o=new N),s||se(e)?Y(e,t,n,r,i,o):H(e,t,l,n,r,i,o);if(!(i&de)){var h=f&&Ge.call(e,"__wrapped__"),m=p&&Ge.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,v=m?t.value():t;return o||(o=new N),n(g,v,r,i,o)}}return d?(o||(o=new N),V(e,t,n,r,i,o)):!1}function F(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new N;if(r)var p=r(l,c,u,e,t,f);if(!(void 0===p?z(c,l,r,pe|de,f):p))return!1}}return!0}function B(e){return function(t){var n=K(t);return n==Ee?s(t):n==Te?l(t):o(t,e(t))}}function Y(e,t,n,r,o,a){var s=o&de,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e);if(c)return c==t;var f=-1,p=!0,d=o&pe?new A:void 0;for(a.set(e,t);++f<u;){var h=e[f],m=t[f];if(r)var g=s?r(m,h,f,t,e,a):r(h,m,f,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!i(t,function(e,t){return d.has(t)||h!==e&&!n(h,e,r,o,a)?void 0:d.add(t)})){p=!1;break}}else if(h!==m&&!n(h,m,r,o,a)){p=!1;break}}return a["delete"](e),p}function H(e,t,n,r,i,o,a){switch(n){case Ie:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ne:return!(e.byteLength!=t.byteLength||!r(new Ze(e),new Ze(t)));case ve:case ye:return+e==+t;case _e:return e.name==t.name&&e.message==t.message;case we:return e!=+e?t!=+t:e==+t;case Me:case Ae:return e==t+"";case Ee:var l=s;case Te:var c=o&de;if(l||(l=u),e.size!=t.size&&!c)return!1;var f=a.get(e);return f?f==t:(o|=pe,a.set(e,t),Y(l(e),l(t),r,i,o,a));case Ce:if(dt)return dt.call(e)==dt.call(t)}return!1}function V(e,t,n,r,i,o){var a=i&de,s=ue(e),u=s.length,l=ue(t),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var p=s[f];if(!(a?p in t:j(t,p)))return!1}var d=o.get(e);if(d)return d==t;var h=!0;o.set(e,t);for(var m=a;++f<u;){p=s[f];var g=e[p],v=t[p];if(r)var y=a?r(v,g,p,t,e,o):r(g,v,p,e,t,o);if(!(void 0===y?g===v||n(g,v,r,i,o):y)){h=!1;break}m||(m="constructor"==p)}if(h&&!m){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(h=!1)}return o["delete"](e),h}function W(e,t){var n=e.__data__;return J(t)?n["string"==typeof t?"string":"hash"]:n.map}function $(e){for(var t=mt(e),n=t.length;n--;)t[n][2]=Z(t[n][1]);return t}function G(e,t){var n=e[t];return ae(n)?n:void 0}function X(e){return et(Object(e))}function K(e){return Xe.call(e)}function J(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Z(e){return e===e&&!re(e)}function Q(e){if(null!=e){try{return $e.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ee(e,t){return e===t||e!==e&&t!==t}function te(e){var t=re(e)?Xe.call(e):"";return t==be||t==xe}function ne(e){return"number"==typeof e&&e>-1&&e%1==0&&he>=e}function re(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ie(e){return!!e&&"object"==typeof e}function oe(e,t){return e===t||F(e,t,$(t))}function ae(e){if(!re(e))return!1;var t=te(e)||a(e)?Ke:Ye;return t.test(Q(e))}function se(e){return ie(e)&&ne(e.length)&&!!He[Xe.call(e)]}var ue=n(533),le=n(529),ce=200,fe="__lodash_hash_undefined__",pe=1,de=2,he=9007199254740991,me="[object Arguments]",ge="[object Array]",ve="[object Boolean]",ye="[object Date]",_e="[object Error]",be="[object Function]",xe="[object GeneratorFunction]",Ee="[object Map]",we="[object Number]",Se="[object Object]",ke="[object Promise]",Me="[object RegExp]",Te="[object Set]",Ae="[object String]",Ce="[object Symbol]",Oe="[object WeakMap]",Ne="[object ArrayBuffer]",Ie="[object DataView]",Le="[object Float32Array]",De="[object Float64Array]",Pe="[object Int8Array]",Re="[object Int16Array]",Ue="[object Int32Array]",je="[object Uint8Array]",ze="[object Uint8ClampedArray]",qe="[object Uint16Array]",Fe="[object Uint32Array]",Be=/[\\^$.*+?()[\]{}|]/g,Ye=/^\[object .+?Constructor\]$/,He={};He[Le]=He[De]=He[Pe]=He[Re]=He[Ue]=He[je]=He[ze]=He[qe]=He[Fe]=!0,He[me]=He[ge]=He[Ne]=He[ve]=He[Ie]=He[ye]=He[_e]=He[be]=He[Ee]=He[we]=He[Se]=He[Me]=He[Te]=He[Ae]=He[Oe]=!1;var Ve=Array.prototype,We=Object.prototype,$e=Function.prototype.toString,Ge=We.hasOwnProperty,Xe=We.toString,Ke=RegExp("^"+$e.call(Ge).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=le.Symbol,Ze=le.Uint8Array,Qe=Ve.splice,et=Object.getPrototypeOf,tt=G(le,"DataView"),nt=G(le,"Map"),rt=G(le,"Promise"),it=G(le,"Set"),ot=G(le,"WeakMap"),at=G(Object,"create"),st=Q(tt),ut=Q(nt),lt=Q(rt),ct=Q(it),ft=Q(ot),pt=Je?Je.prototype:void 0,dt=pt?pt.valueOf:void 0;c.prototype.clear=f,c.prototype["delete"]=p,c.prototype.get=d,c.prototype.has=h,c.prototype.set=m,g.prototype.clear=v,g.prototype["delete"]=y,g.prototype.get=_,g.prototype.has=b,g.prototype.set=x,E.prototype.clear=w,E.prototype["delete"]=S,E.prototype.get=k,E.prototype.has=M,E.prototype.set=T,A.prototype.add=A.prototype.push=C,A.prototype.has=O,N.prototype.clear=I,N.prototype["delete"]=L,N.prototype.get=D,N.prototype.has=P,N.prototype.set=R,(tt&&K(new tt(new ArrayBuffer(1)))!=Ie||nt&&K(new nt)!=Ee||rt&&K(rt.resolve())!=ke||it&&K(new it)!=Te||ot&&K(new ot)!=Oe)&&(K=function(e){var t=Xe.call(e),n=t==Se?e.constructor:void 0,r=n?Q(n):void 0;if(r)switch(r){case st:return Ie;case ut:return Ee;case lt:return ke;case ct:return Te;case ft:return Oe}return t});var ht=Array.isArray,mt=B(ue);e.exports=oe},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function r(e,t){return M.call(e,t)||"object"==typeof e&&t in e&&null===a(e)}function i(e){return O(Object(e))}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e){return C(Object(e))}function s(e){var t=e?e.length:void 0;return h(t)&&(I(e)||v(e)||c(e))?n(t,String):null}function u(e,t){return t=null==t?_:t,!!t&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&t>e}function l(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||k;return e===n}function c(e){return p(e)&&M.call(e,"callee")&&(!A.call(e,"callee")||T.call(e)==b)}function f(e){return null!=e&&h(N(e))&&!d(e)}function p(e){return g(e)&&f(e)}function d(e){var t=m(e)?T.call(e):"";return t==x||t==E}function h(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return!!e&&"object"==typeof e}function v(e){return"string"==typeof e||!I(e)&&g(e)&&T.call(e)==w}function y(e){var t=l(e);if(!t&&!f(e))return i(e);var n=s(e),o=!!n,a=n||[],c=a.length;for(var p in e)!r(e,p)||o&&("length"==p||u(p,c))||t&&"constructor"==p||a.push(p);return a}var _=9007199254740991,b="[object Arguments]",x="[object Function]",E="[object GeneratorFunction]",w="[object String]",S=/^(?:0|[1-9]\d*)$/,k=Object.prototype,M=k.hasOwnProperty,T=k.toString,A=k.propertyIsEnumerable,C=Object.getPrototypeOf,O=Object.keys,N=o("length"),I=Array.isArray;e.exports=y},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(r);return t=i(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,o=i(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var r="Expected a function",i=Math.max;e.exports=n},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t){function n(){l&&a&&(l=!1,a.length?u=a.concat(u):c=-1,u.length&&r())}function r(){if(!l){var e=setTimeout(n);l=!0;for(var t=u.length;t;){for(a=u,u=[];++c<t;)a&&a[c].run();c=-1,t=u.length}a=null,l=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var a,s=e.exports={},u=[],l=!1,c=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),1!==u.length||l||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t){e.exports='<html>\n  <head>\n    <title>Vega Scaffold</title>\n    <script src="https://vega.github.io/vega-editor/vendor/d3.min.js"></script>\n    <script src="https://vega.github.io/vega/vega.min.js"></script>\n  </head>\n  <body>\n    <div id="vis"></div>\n  </body>\n  <script type="text/javascript">\n  // parse a spec and create a visualization view\n  function parse(spec) {\n    vg.parse.spec(spec, function(error, chart) {\n      chart({el:"#vis"}).update();\n    });\n  }\n  parse(INJECT_SPEC);\n  </script>\n</html>'},function(e,t,n){var r=n(11),i=n(89),o=n(517),a=r.createFactory(n(541)),s=n(542),u=n(513),l=n(89).unstable_renderSubtreeIntoContainer,c=n(428),f=o.canUseDOM?window.HTMLElement:{},p=o.canUseDOM?document.body:{appendChild:function(){}},d=r.createClass({displayName:"Modal",statics:{setAppElement:function(e){p=s.setElement(e)},injectCSS:function(){}},propTypes:{isOpen:r.PropTypes.bool.isRequired,style:r.PropTypes.shape({content:r.PropTypes.object,overlay:r.PropTypes.object}),appElement:r.PropTypes.instanceOf(f),onAfterOpen:r.PropTypes.func,onRequestClose:r.PropTypes.func,closeTimeoutMS:r.PropTypes.number,ariaHideApp:r.PropTypes.bool,shouldCloseOnOverlayClick:r.PropTypes.bool},getDefaultProps:function(){return{isOpen:!1,ariaHideApp:!0,closeTimeoutMS:0,shouldCloseOnOverlayClick:!0}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className="ReactModalPortal",document.body.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function(e){this.renderPortal(e)},componentWillUnmount:function(){i.unmountComponentAtNode(this.node),document.body.removeChild(this.node),u(document.body).remove("ReactModal__Body--open")},renderPortal:function(e){e.isOpen?u(document.body).add("ReactModal__Body--open"):u(document.body).remove("ReactModal__Body--open"),e.ariaHideApp&&s.toggle(e.isOpen,e.appElement),this.portal=l(this,a(c({},e,{defaultStyles:d.defaultStyles})),this.node)},render:function(){return r.DOM.noscript()}});d.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},e.exports=d},function(e,t,n){var r=n(11),i=r.DOM.div,o=n(543),a=n(544),s=n(428),u={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}};e.exports=r.createClass({displayName:"ModalPortal",getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(e){this.focusAfterRender=e},open:function(){o.setupScopedFocus(this.node),o.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen()}.bind(this))},close:function(){this.ownerHandlesClose()&&(this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout())},focusContent:function(){this.refs.content.focus()},closeWithTimeout:function(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function(){this.setState({afterOpen:!1,beforeClose:!1},this.afterClose)},afterClose:function(){o.returnFocus(),o.teardownScopedFocus()},handleKeyDown:function(e){9==e.keyCode&&a(this.refs.content,e),27==e.keyCode&&(e.preventDefault(),this.requestClose(e))},handleOverlayClick:function(e){for(var t=e.target;t;){if(t===this.refs.content)return;t=t.parentNode}this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent())},requestClose:function(e){this.ownerHandlesClose()&&this.props.onRequestClose(e)},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.props.isOpen&&!this.state.beforeClose},buildClassName:function(e,t){var n=u[e].base;return this.state.afterOpen&&(n+=" "+u[e].afterOpen),this.state.beforeClose&&(n+=" "+u[e].beforeClose),t?n+" "+t:n},render:function(){var e=this.props.className?{}:this.props.defaultStyles.content,t=this.props.overlayClassName?{}:this.props.defaultStyles.overlay;return this.shouldBeClosed()?i():i({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:s({},t,this.props.style.overlay||{}),onClick:this.handleOverlayClick},i({ref:"content",style:s({},e,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onKeyDown:this.handleKeyDown},this.props.children))}})},function(e,t){function n(e){if("string"==typeof e){var t=document.querySelectorAll(e);e="length"in t?t[0]:t}return u=e||u}function r(e){a(e),(e||u).setAttribute("aria-hidden","true")}function i(e){a(e),(e||u).removeAttribute("aria-hidden")}function o(e,t){e?r(t):i(t)}function a(e){if(!e&&!u)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function s(){u=document.body}var u="undefined"!=typeof document?document.body:null;t.toggle=o,t.setElement=n,t.show=i,t.hide=r,t.resetForTesting=s},function(e,t,n){function r(e){u=!0}function i(e){if(u){if(u=!1,!a)return;setTimeout(function(){if(!a.contains(document.activeElement)){var e=o(a)[0]||a;e.focus()}},0)}}var o=n(430),a=null,s=null,u=!1;t.markForFocusLater=function(){s=document.activeElement},t.returnFocus=function(){try{s.focus()}catch(e){console.warn("You tried to return focus to "+s+" but it is not in the DOM anymore")}s=null},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",i,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",i))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",i)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",i))}},function(e,t,n){var r=n(430);e.exports=function(e,t){var n=r(e);if(!n.length)return void t.preventDefault();var i=n[t.shiftKey?0:n.length-1],o=i===document.activeElement||e===document.activeElement;if(o){t.preventDefault();var a=n[t.shiftKey?n.length-1:0];a.focus()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t["default"]=void 0;var s=n(11),u=n(431),l=r(u),c=n(432),f=(r(c),function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return s.Children.only(e)},t}(s.Component));t["default"]=f,f.propTypes={store:l["default"].isRequired,children:s.PropTypes.element.isRequired},f.childContextTypes={store:l["default"].isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function u(e,t){try{return e.apply(t)}catch(n){return T.value=n,T}}function l(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],l=Boolean(e),p=e||S,h=void 0;h="function"==typeof t?t:t?(0,v["default"])(t):k;var g=n||M,y=r.pure,_=void 0===y?!0:y,b=r.withRef,E=void 0===b?!1:b,C=_&&g!==M,O=A++;return function(e){function t(e,t,n){var r=g(e,t,n);return r}var n="Connect("+s(e)+")",r=function(r){function s(e,t){i(this,s);var a=o(this,r.call(this,e,t));a.version=O,a.store=e.store||t.store,(0,w["default"])(a.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var u=a.store.getState();return a.state={storeState:u},a.clearCache(),a}return a(s,r),s.prototype.shouldComponentUpdate=function(){return!_||this.haveOwnPropsChanged||this.hasStoreStateChanged},s.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},s.prototype.configureFinalMapState=function(e,t){var n=p(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:p,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},s.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},s.prototype.configureFinalMapDispatch=function(e,t){var n=h(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:h,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},s.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,m["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},s.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,m["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},s.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&C&&(0,m["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},s.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},s.prototype.trySubscribe=function(){l&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},s.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},s.prototype.componentDidMount=function(){this.trySubscribe()},s.prototype.componentWillReceiveProps=function(e){_&&(0,m["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},s.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},s.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},s.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!_||t!==e){if(_&&!this.doStatePropsDependOnOwnProps){var n=u(this.updateStatePropsIfNeeded,this);if(!n)return;n===T&&(this.statePropsPrecalculationError=T.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},s.prototype.getWrappedInstance=function(){return(0,w["default"])(E,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},s.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,
this.statePropsPrecalculationError=null,i)throw i;var a=!0,s=!0;_&&o&&(a=n||t&&this.doStatePropsDependOnOwnProps,s=t&&this.doDispatchPropsDependOnOwnProps);var u=!1,l=!1;r?u=!0:a&&(u=this.updateStatePropsIfNeeded()),s&&(l=this.updateDispatchPropsIfNeeded());var p=!0;return p=u||l||t?this.updateMergedPropsIfNeeded():!1,!p&&o?o:(E?this.renderedElement=(0,f.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,f.createElement)(e,this.mergedProps),this.renderedElement)},s}(f.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:d["default"]},r.propTypes={store:d["default"]},(0,x["default"])(r,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t["default"]=l;var f=n(11),p=n(431),d=r(p),h=n(547),m=r(h),g=n(548),v=r(g),y=n(432),_=(r(y),n(265)),b=(r(_),n(519)),x=r(b),E=n(520),w=r(E),S=function(e){return{}},k=function(e){return{dispatch:e}},M=function(e,t,n){return c({},n,e,t)},T={value:null},A=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,i.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=r;var i=n(437)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(11),l=r(u),c=n(89),f=r(c),p=n(512),d=r(p),h=n(550),m=r(h),g=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n._bind("showTooltip","updateTooltip","hideTooltip","checkStatus","onWindowResize","bindClickListener","globalHide","globalRebuild"),n.mount=!0,n.state={show:!1,border:!1,multilineCount:0,placeholder:"",x:"NONE",y:"NONE",place:"",type:"",effect:"",multiline:!1,offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null},n.delayShowLoop=null,n}return a(t,e),s(t,[{key:"globalHide",value:function(){this.mount&&this.hideTooltip()}},{key:"globalRebuild",value:function(){this.mount&&(this.unbindListener(),this.bindListener())}}],[{key:"hide",value:function(){if("function"==typeof window.Event)window.dispatchEvent(new window.Event("__react_tooltip_hide_event"));else{var e=document.createEvent("Event");e.initEvent("__react_tooltip_hide_event",!1,!0),window.dispatchEvent(e)}}},{key:"rebuild",value:function(){if("function"==typeof window.Event)window.dispatchEvent(new window.Event("__react_tooltip_rebuild_event"));else{var e=document.createEvent("Event");e.initEvent("__react_tooltip_rebuild_event",!1,!0),window.dispatchEvent(e)}}}]),s(t,[{key:"_bind",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];n.forEach(function(t){return e[t]=e[t].bind(e)})}},{key:"componentDidMount",value:function(){this.bindListener(),this.setStyleHeader(),window.removeEventListener("__react_tooltip_hide_event",this.globalHide),window.addEventListener("__react_tooltip_hide_event",this.globalHide,!1),window.removeEventListener("__react_tooltip_rebuild_event",this.globalRebuild),window.addEventListener("__react_tooltip_rebuild_event",this.globalRebuild,!1),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1)}},{key:"componentWillUpdate",value:function(){this.unbindListener()}},{key:"componentDidUpdate",value:function(){this.updatePosition(),this.bindListener()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.delayShowLoop),this.unbindListener(),this.removeScrollListener(),this.mount=!1,window.removeEventListener("__react_tooltip_hide_event",this.globalHide),window.removeEventListener("__react_tooltip_rebuild_event",this.globalRebuild),window.removeEventListener("resize",this.onWindowResize)}},{key:"bindListener",value:function(){for(var e=this.getTargetArray(),t=void 0,n=0;n<e.length;n++)null===e[n].getAttribute("currentItem")&&e[n].setAttribute("currentItem","false"),t=this.state.event||e[n].getAttribute("data-event"),t?(e[n].removeEventListener(t,this.checkStatus),e[n].addEventListener(t,this.checkStatus,!1)):(e[n].removeEventListener("mouseenter",this.showTooltip),e[n].addEventListener("mouseenter",this.showTooltip,!1),"float"===this.state.effect&&(e[n].removeEventListener("mousemove",this.updateTooltip),e[n].addEventListener("mousemove",this.updateTooltip,!1)),e[n].removeEventListener("mouseleave",this.hideTooltip),e[n].addEventListener("mouseleave",this.hideTooltip,!1))}},{key:"unbindListener",value:function(){for(var e=document.querySelectorAll("[data-tip]"),t=void 0,n=0;n<e.length;n++)t=this.state.event||e[n].getAttribute("data-event"),t?e[n].removeEventListener(t,this.checkStatus):(e[n].removeEventListener("mouseenter",this.showTooltip),e[n].removeEventListener("mousemove",this.updateTooltip),e[n].removeEventListener("mouseleave",this.hideTooltip))}},{key:"getTargetArray",value:function(){var e=this.props.id,t=void 0;return t=void 0===e?document.querySelectorAll("[data-tip]:not([data-for])"):document.querySelectorAll('[data-tip][data-for="'+e+'"]')}},{key:"onWindowResize",value:function(){if(this.mount)for(var e=this.getTargetArray(),t=0;t<e.length;t++)if("true"===e[t].getAttribute("currentItem")){var n=this.getPosition(e[t]),r=n.x,i=n.y;f["default"].findDOMNode(this).style.left=r+"px",f["default"].findDOMNode(this).style.top=i+"px"}}},{key:"checkStatus",value:function(e){"bubble"===this.props.eventPropagationMode&&e.stopPropagation(),this.state.show&&"true"===e.currentTarget.getAttribute("currentItem")?this.hideTooltip(e):(e.currentTarget.setAttribute("currentItem","true"),window.removeEventListener("click",this.bindClickListener),window.addEventListener("click",this.bindClickListener,"capture"===this.props.eventPropagationMode),this.showTooltip(e),this.setUntargetItems(e.currentTarget))}},{key:"setUntargetItems",value:function(e){for(var t=this.getTargetArray(),n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")}},{key:"bindClickListener",value:function(){this.globalHide(),window.removeEventListener("click",this.bindClickListener)}},{key:"showTooltip",value:function(e){var t=e.currentTarget.getAttribute("data-tip"),n=/<br\s*\/?>/,r=e.currentTarget.getAttribute("data-multiline")?e.currentTarget.getAttribute("data-multiline"):this.props.multiline?this.props.multiline:!1,i=void 0,o=0;i=r&&"false"!==r&&n.test(t)?t.split(n).map(function(e,t){return o+=1,l["default"].createElement("span",{key:t,className:"multi-line"},e)}):t;var a=e.currentTarget.getAttribute("data-class")?e.currentTarget.getAttribute("data-class"):"";a=this.props["class"]?this.props["class"]+" "+a:a,this.setState({placeholder:i,multilineCount:o,place:e.currentTarget.getAttribute("data-place")?e.currentTarget.getAttribute("data-place"):this.props.place?this.props.place:"top",type:e.currentTarget.getAttribute("data-type")?e.currentTarget.getAttribute("data-type"):this.props.type?this.props.type:"dark",effect:e.currentTarget.getAttribute("data-effect")?e.currentTarget.getAttribute("data-effect"):this.props.effect?this.props.effect:"float",offset:e.currentTarget.getAttribute("data-offset")?e.currentTarget.getAttribute("data-offset"):this.props.offset?this.props.offset:{},html:e.currentTarget.getAttribute("data-html")?e.currentTarget.getAttribute("data-html"):this.props.html?this.props.html:!1,delayShow:e.currentTarget.getAttribute("data-delay-show")?e.currentTarget.getAttribute("data-delay-show"):this.props.delayShow?this.props.delayShow:0,delayHide:e.currentTarget.getAttribute("data-delay-hide")?e.currentTarget.getAttribute("data-delay-hide"):this.props.delayHide?this.props.delayHide:0,border:e.currentTarget.getAttribute("data-border")?"true"===e.currentTarget.getAttribute("data-border"):this.props.border?this.props.border:!1,extraClass:a,multiline:r}),this.addScrollListener(),this.updateTooltip(e)}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,r=n.delayShow,i=n.show,o=i?0:parseInt(r,10),a=e.currentTarget;clearTimeout(this.delayShowLoop),this.delayShowLoop=setTimeout(function(){if(t.trim(t.state.placeholder).length>0)if("float"===t.state.effect)t.setState({show:!0,x:e.clientX,y:e.clientY});else if("solid"===t.state.effect){var n=t.getPosition(a),r=n.x,i=n.y;t.setState({show:!0,x:r,y:i})}},o)}},{key:"hideTooltip",value:function(){var e=this,t=this.state.delayHide;clearTimeout(this.delayShowLoop),setTimeout(function(){e.setState({show:!1}),e.removeScrollListener()},parseInt(t,10))}},{key:"addScrollListener",value:function(){window.addEventListener("scroll",this.hideTooltip)}},{key:"removeScrollListener",value:function(){window.removeEventListener("scroll",this.hideTooltip)}},{key:"getPosition",value:function(e){var t=this,n=this.state.place,r=f["default"].findDOMNode(this),i=e.getBoundingClientRect(),o=i.top,a=i.left,s=r.clientWidth,u=r.clientHeight,l=e.clientWidth,c=e.clientHeight,p=window.innerWidth,d=window.innerHeight,h=void 0,m=void 0,g=o-u-8,v=o+c+8,y=a-s-6,_=a+l+6,b=function(){return 0>g-10},x=function(){return o+c+u+25>d},E=function(){return 0>y-10},w=function(){return a+l+s+25>p},S=function(){return b(g)&&!x()?(t.setState({place:"bottom"}),v):g},k=function(){return x()&&!b()?(t.setState({place:"top"}),g):v},M=function(){return E()&&!w()?(t.setState({place:"right"}),_):y},T=function(){return w()&&!E()?(t.setState({place:"left"}),y):_};return"top"===n?(h=a-s/2+l/2,m=S()):"bottom"===n?(h=a-s/2+l/2,m=k()):"left"===n?(h=M(),m=o+c/2-u/2):"right"===n&&(h=T(),m=o+c/2-u/2),{x:h,y:m}}},{key:"updatePosition",value:function(){var e=f["default"].findDOMNode(this),t=e.clientWidth,n=e.clientHeight,r=this.state,i=r.effect,o=r.place,a=r.offset,s={},u=["top","bottom","left","right"];u.forEach(function(e){s[e]={x:0,y:0}}),"float"===i&&(s.top={x:-(t/2),y:-n},s.bottom={x:-(t/2),y:15},s.left={x:-(t+15),y:-(n/2)},s.right={x:10,y:-(n/2)});var l=0,c=0;"[object String]"===Object.prototype.toString.apply(a)&&(a=JSON.parse(a.toString().replace(/\'/g,'"')));for(var p in a)"top"===p?c-=parseInt(a[p],10):"bottom"===p?c+=parseInt(a[p],10):"left"===p?l-=parseInt(a[p],10):"right"===p&&(l+=parseInt(a[p],10));var d=this.state.x,h=this.state.y,m=window.innerWidth,g=window.innerHeight,v=function(e){var t="solid"===i?0:e?s[e].x:0;return d+t+l},y=function(e){var t="solid"===i?0:e?s[e].y:0;return h+t+c},_=function(e){var t=v(e);return 0>t&&d+s.right.x+l<=m},b=function(e){var n=v(e);return n+t>m&&d+s.left.x+l>=0},x=function(e){var t=y(e);return 0>t&&h+s.bottom.y+c+n<g},E=function(e){var t=y(e);return t+n>=g&&h+s.top.y+c>=0},w=function(e){return x(e)||b(e)||E(e)||_(e)};if(_(o)){if(!w("right"))return void this.setState({place:"right"})}else if(b(o)){if(!w("left"))return void this.setState({place:"left"})}else if(x(o)){if(!w("bottom"))return void this.setState({place:"bottom"})}else if(E(o)&&!w("top"))return void this.setState({place:"top"});e.style.left=v(o)+"px",e.style.top=y(o)+"px"}},{key:"setStyleHeader",value:function(){if(!document.getElementsByTagName("head")[0].querySelector('style[id="react-tooltip"]')){var e=document.createElement("style");e.id="react-tooltip",e.innerHTML=m["default"],document.getElementsByTagName("head")[0].appendChild(e)}}},{key:"render",value:function(){var e=this.state,t=e.placeholder,n=e.extraClass,r=e.html,i=(0,d["default"])("__react_component_tooltip",{show:this.state.show},{border:this.state.border},{"place-top":"top"===this.state.place},{"place-bottom":"bottom"===this.state.place},{"place-left":"left"===this.state.place},{"place-right":"right"===this.state.place},{"type-dark":"dark"===this.state.type},{"type-success":"success"===this.state.type},{"type-warning":"warning"===this.state.type},{"type-error":"error"===this.state.type},{"type-info":"info"===this.state.type},{"type-light":"light"===this.state.type});if(r)return l["default"].createElement("div",{className:i+" "+n,"data-id":"tooltip",dangerouslySetInnerHTML:{__html:t}});var o=this.props.children?this.props.children:t;return l["default"].createElement("div",{className:i+" "+n,"data-id":"tooltip"},o)}},{key:"trim",value:function(e){if("[object String]"!==Object.prototype.toString.call(e))return e;for(var t=e.split(""),n=0,r=0,i=0;i<e.length&&" "===e[i];i++)n++;for(var i=e.length-1;i>=0&&" "===e[i];i--)r++;return t.splice(0,n),t.splice(-r,r),t.join("")}}]),t}(u.Component);g.propTypes={children:u.PropTypes.any,place:u.PropTypes.string,type:u.PropTypes.string,effect:u.PropTypes.string,offset:u.PropTypes.object,multiline:u.PropTypes.bool,border:u.PropTypes.bool,"class":u.PropTypes.string,id:u.PropTypes.string,html:u.PropTypes.bool,delayHide:u.PropTypes.number,delayShow:u.PropTypes.number,event:u.PropTypes.any,watchWindow:u.PropTypes.bool,eventPropagationMode:u.PropTypes.oneOf(["bubble","capture"])},g.defaultProps={eventPropagationMode:"bubble"},e.exports=g},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]='.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out , margin-top 0.3s ease-out, margin-left 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top:6px solid #222}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom:6px solid #222}.__react_component_tooltip.type-dark.place-left:after{border-left:6px solid #222}.__react_component_tooltip.type-dark.place-right:after{border-right:6px solid #222}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top:6px solid #8DC572}.__react_component_tooltip.type-success.place-bottom:after{border-bottom:6px solid #8DC572}.__react_component_tooltip.type-success.place-left:after{border-left:6px solid #8DC572}.__react_component_tooltip.type-success.place-right:after{border-right:6px solid #8DC572}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top:6px solid #F0AD4E}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom:6px solid #F0AD4E}.__react_component_tooltip.type-warning.place-left:after{border-left:6px solid #F0AD4E}.__react_component_tooltip.type-warning.place-right:after{border-right:6px solid #F0AD4E}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top:6px solid #BE6464}.__react_component_tooltip.type-error.place-bottom:after{border-bottom:6px solid #BE6464}.__react_component_tooltip.type-error.place-left:after{border-left:6px solid #BE6464}.__react_component_tooltip.type-error.place-right:after{border-right:6px solid #BE6464}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top:6px solid #337AB7}.__react_component_tooltip.type-info.place-bottom:after{border-bottom:6px solid #337AB7}.__react_component_tooltip.type-info.place-left:after{border-left:6px solid #337AB7}.__react_component_tooltip.type-info.place-right:after{border-right:6px solid #337AB7}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top:6px solid #fff}.__react_component_tooltip.type-light.place-bottom:after{border-bottom:6px solid #fff}.__react_component_tooltip.type-light.place-left:after{border-left:6px solid #fff}.__react_component_tooltip.type-light.place-right:after{border-right:6px solid #fff}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}'},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(554),o=n(45),a=r(o);t["default"]=function(e){var t=void 0;return t=Object.keys(e),function(n,r){void 0===n&&(n=a["default"].Map());return n.withMutations(function(n){t.forEach(function(t){var o=void 0,a=void 0,s=void 0;s=e[t],o=n.get(t),a=s(o,r),(0,i.validateNextState)(a,t,r),n.set(t,a)})})}},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.combineReducers=void 0;var i=n(551),o=r(i);t.combineReducers=o["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),o=r(i),a=n(434),s=r(a);t["default"]=function(e,t,n){var r=Object.keys(t);if(!r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var i=(0,s["default"])(n);if(!o["default"].Iterable.isIterable(e))return"The "+i+' is of unexpected type. Expected argument to be an instance of Immutable.Iterable with the following properties: "'+r.join('", "')+'".';var a=e.keySeq().toArray().filter(function(e){return!t.hasOwnProperty(e)});return a.length>0?"Unexpected "+(1===a.length?"property":"properties")+' "'+a.join('", "')+'" found in '+i+'. Expected to find one of the known reducer property names instead: "'+r.join('", "')+'". Unexpected properties will be ignored.':null},e.exports=t["default"]},function(e,t,n){"use strict";"create index";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateNextState=t.getUnexpectedInvocationParameterMessage=t.getStateName=void 0;var i=n(434),o=r(i),a=n(553),s=r(a),u=n(555),l=r(u);t.getStateName=o["default"],t.getUnexpectedInvocationParameterMessage=s["default"],t.validateNextState=l["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){if("undefined"==typeof e)throw new Error('Reducer "'+t+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.');return null},e.exports=t["default"]},function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var a=e(n,r,i),u=a.dispatch,l=[],c={getState:a.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=s["default"].apply(void 0,l)(a.dispatch),o({},a,{dispatch:u})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=i;var a=n(435),s=r(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),i={},o=0;o<r.length;o++){var a=r[o],s=e[a];"function"==typeof s&&(i[a]=n(s,t))}return i}t.__esModule=!0,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var s,u=Object.keys(n);try{o(n)}catch(l){s=l}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var r=!1,o={},a=0;a<u.length;a++){var l=u[a],c=n[l],f=e[l],p=c(f,t);if("undefined"==typeof p){var d=i(l,t);throw new Error(d)}o[l]=p,r=r||p!==f}return r?o:e}}t.__esModule=!0,t["default"]=a;var s=n(436),u=n(265),l=(r(u),n(438));r(l)},function(e,t){!function(t){function n(){var e=this;s.forEach(function(t){e[t]={name:a,version:[],versionString:a}})}function r(e,t,n){o[t].forEach(function(r){var o=r[0],s=r[1],u=n.match(o);u&&(e[t].name=s,u[2]?(e[t].versionString=u[2],e[t].version=[]):u[1]?(e[t].versionString=u[1].replace(/_/g,"."),e[t].version=i(u[1])):(e[t].versionString=a,e[t].version=[]))})}function i(e){return e.split(/[\._]/).map(function(e){return parseInt(e)})}var o={browser:[[/msie ([\.\_\d]+)/,"ie"],[/trident\/.*?rv:([\.\_\d]+)/,"ie"],[/firefox\/([\.\_\d]+)/,"firefox"],[/chrome\/([\.\_\d]+)/,"chrome"],[/version\/([\.\_\d]+).*?safari/,"safari"],[/mobile safari ([\.\_\d]+)/,"safari"],[/android.*?version\/([\.\_\d]+).*?safari/,"com.android.browser"],[/crios\/([\.\_\d]+).*?safari/,"chrome"],[/opera/,"opera"],[/opera\/([\.\_\d]+)/,"opera"],[/opera ([\.\_\d]+)/,"opera"],[/opera mini.*?version\/([\.\_\d]+)/,"opera.mini"],[/opios\/([a-z\.\_\d]+)/,"opera"],[/blackberry/,"blackberry"],[/blackberry.*?version\/([\.\_\d]+)/,"blackberry"],[/bb\d+.*?version\/([\.\_\d]+)/,"blackberry"],[/rim.*?version\/([\.\_\d]+)/,"blackberry"],[/iceweasel\/([\.\_\d]+)/,"iceweasel"],[/edge\/([\.\d]+)/,"edge"]],os:[[/linux ()([a-z\.\_\d]+)/,"linux"],[/mac os x/,"macos"],[/mac os x.*?([\.\_\d]+)/,"macos"],[/os ([\.\_\d]+) like mac os/,"ios"],[/openbsd ()([a-z\.\_\d]+)/,"openbsd"],[/android/,"android"],[/android ([a-z\.\_\d]+);/,"android"],[/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/,"firefoxos"],[/windows\s*(?:nt)?\s*([\.\_\d]+)/,"windows"],[/windows phone.*?([\.\_\d]+)/,"windows.phone"],[/windows mobile/,"windows.mobile"],[/blackberry/,"blackberryos"],[/bb\d+/,"blackberryos"],[/rim.*?os\s*([\.\_\d]+)/,"blackberryos"]],device:[[/ipad/,"ipad"],[/iphone/,"iphone"],[/lumia/,"lumia"],[/htc/,"htc"],[/nexus/,"nexus"],[/galaxy nexus/,"galaxy.nexus"],[/nokia/,"nokia"],[/ gt\-/,"galaxy"],[/ sm\-/,"galaxy"],[/xbox/,"xbox"],[/(?:bb\d+)|(?:blackberry)|(?: rim )/,"blackberry"]]},a="Unknown",s=Object.keys(o);n.prototype.sniff=function(e){var t=this,n=(e||navigator.userAgent||"").toLowerCase();s.forEach(function(e){r(t,e,n)})},"undefined"!=typeof e&&e.exports?e.exports=n:(t.Sniffr=new n,t.Sniffr.sniff(navigator.userAgent))}(this)},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="close" ><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></symbol>';e.exports=r.add(i,"close")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="database" ><path d="M896 768q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zm0 768q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zm0-384q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zm0-1152q208 0 385 34.5t280 93.5 103 128v128q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-128q0-69 103-128t280-93.5 385-34.5z"/></symbol>';e.exports=r.add(i,"database")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 24 24" id="erase" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.2,3.5L8,8.7l7.2,7.2l5.2-5.2c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6C15.1,2.8,13.9,2.8,13.2,3.5z"/><path fill="none" stroke="#000000" stroke-width="2" stroke-linejoin="round" stroke-miterlimit="10" d="M11.3,20l9.2-9.2  c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6c-0.7-0.7-1.9-0.7-2.6,0l-9.7,9.7c-0.7,0.7-0.7,1.9,0,2.6L7.7,20l0,0H22"/></symbol>';e.exports=r.add(i,"erase")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 16 20" id="export" xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"><switch><foreignObject requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" x="0" y="0" width="1" height="1"/><g i:extraneous="self"><g i:layer="yes" i:dimmedPercent="50" i:rgbTrio="#4F008000FFFF"><path i:knockout="Off" d="M9,0v2h3L7,7l2,2l5-5v3h2V0H9z M14,14H2V2h4V0H0v16h16v-6h-2V14z"/></g></g></switch> <!-- <text x="0" y="31" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Tahsin Tahil</text><text x="0" y="36" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --> </symbol>';e.exports=r.add(i,"export")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="hamburger" ><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"/></symbol>';e.exports=r.add(i,"hamburger")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 111 122.5" id="mark-area" ><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 86.0322264L29.5264445 51.6235581 45.3423478 59.340291 61.8834325 28.2855206 80.0690932 39.7393663 100 10 100 86.0322266 10 86.0322264ZM10 86.0322264"/></g> <!-- <text x="0" y="113" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Pham Thi Dieu Linh</text><text x="0" y="118" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --> </symbol>';
e.exports=r.add(i,"mark-area")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 100 125" id="mark-group-closed" xmlns:xlink="http://www.w3.org/1999/xlink"><g><polygon points="14.019,14.02 85.981,50.004 14.019,85.98"/></g></symbol>';e.exports=r.add(i,"mark-group-closed")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 100 125" id="mark-group-open" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="rotate(90 50 50)"><polygon points="14.019,14.02 85.981,50.004 14.019,85.98"/></g></symbol>';e.exports=r.add(i,"mark-group-open")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 100 100" id="mark-line" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon stroke-width="2" points="8.744,100 0,97.362 17.2,35.373 60.077,52.269 91.799,0 99.607,4.739 63.892,63.589 23.08,47.506"/></symbol>';e.exports=r.add(i,"mark-line")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 14 17.5" id="mark-rect" xmlns:xlink="http://www.w3.org/1999/xlink"><path fill-rule="evenodd" clip-rule="evenodd" d="M10,6v7c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V6c0-0.55-0.45-1-1-1h-2  C10.45,5,10,5.45,10,6z M5,1v12c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V1c0-0.55-0.45-1-1-1H6C5.45,0,5,0.45,5,1z M0,9v4  c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V9c0-0.55-0.45-1-1-1H1C0.45,8,0,8.45,0,9z"/> <!-- <text x="0" y="29" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Dilon Choudhury</text><text x="0" y="34" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --> </symbol>';e.exports=r.add(i,"mark-rect")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 100 125" id="mark-symbol" xmlns:svg="http://www.w3.org/2000/svg"><title>Bars plot</title><g transform="translate(0,-952.36217)"><circle cx="39.75" cy="1028.3622" r="25" fill-opacity="1" stroke="none"/><circle cx="57.5" cy="982.86218" r="18" fill-opacity="1" stroke="none"/></g> <!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Gonzalo Bravo</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --> </symbol>';e.exports=r.add(i,"mark-symbol")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 24 30" id="mark-text" ><path fill-rule="evenodd" clip-rule="evenodd" d="M7.905 3.068c-1.076 0-1.903 0.364-2.47 1.091 -0.571 0.729-0.858 1.787-0.858 3.18v0.083H1.686V0h20.629v7.422h-2.863V7.339c0-1.383-0.288-2.438-0.861-3.17 -0.577-0.734-1.408-1.101-2.495-1.101h-0.852v16.47c0 0.75 0.098 1.224 0.298 1.407 0.198 0.186 0.647 0.278 1.338 0.278h1.637V24H5.629v-2.776h1.52c0.658 0 1.089-0.076 1.296-0.233 0.211-0.158 0.313-0.644 0.313-1.452V3.068H7.905z"/> <!-- <text x="0" y="39" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Plainicon</text><text x="0" y="44" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --> </symbol>';e.exports=r.add(i,"mark-text")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="next" ><path d="M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z"/></symbol>';e.exports=r.add(i,"next")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="plus" ><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></symbol>';e.exports=r.add(i,"plus")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="prev" ><path d="M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"/></symbol>';e.exports=r.add(i,"prev")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="redo" ><path d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0 225-52t179-147q7-10 23-12 14 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109 132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298 164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14 39 17 39 59z"/></symbol>';e.exports=r.add(i,"redo")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="trash" ><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"/></symbol>';e.exports=r.add(i,"trash")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="type-nominal" ><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"/></symbol>';e.exports=r.add(i,"type-nominal")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="type-ordinal" ><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"/></symbol>';e.exports=r.add(i,"type-ordinal")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="type-quantitative" ><path d="M991 1024l64-256h-254l-64 256h254zm768-504l-56 224q-7 24-31 24h-327l-64 256h311q15 0 25 12 10 14 6 28l-56 224q-5 24-31 24h-327l-81 328q-7 24-31 24h-224q-16 0-26-12-9-12-6-28l78-312h-254l-81 328q-7 24-31 24h-225q-15 0-25-12-9-12-6-28l78-312h-311q-15 0-25-12-9-12-6-28l56-224q7-24 31-24h327l64-256h-311q-15 0-25-12-10-14-6-28l56-224q5-24 31-24h327l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h254l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h311q15 0 25 12 9 12 6 28z"/></symbol>';e.exports=r.add(i,"type-quantitative")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="type-temporal" ><path d="M192 1664h288v-288h-288v288zm352 0h320v-288h-320v288zm-352-352h288v-320h-288v320zm352 0h320v-320h-320v320zm-352-384h288v-288h-288v288zm736 736h320v-288h-320v288zm-384-736h320v-288h-320v288zm768 736h288v-288h-288v288zm-384-352h320v-320h-320v320zm-352-864v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm736 864h288v-320h-288v320zm-384-384h320v-288h-320v288zm384 0h288v-288h-288v288zm32-480v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm384-64v1280q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1280q0-52 38-90t90-38h128v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h384v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h128q52 0 90 38t38 90z"/></symbol>';e.exports=r.add(i,"type-temporal")},function(e,t,n){var r=n(25),i='<symbol viewBox="0 0 1792 1792" id="undo" ><path d="M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"/></symbol>';e.exports=r.add(i,"undo")},function(e,t,n){function r(e){return Array.prototype.slice.call(e,0)}function i(e){return e.replace(/\(|\)/g,"\\$&")}function o(e,t,n){var o=e.querySelectorAll(l);o&&r(o).forEach(function(e){e.attributes&&r(e.attributes).forEach(function(r){var o=r.localName.toLowerCase();if(-1!==u.indexOf(o)){var a=c.exec(e.getAttribute(o));if(a&&0===a[1].indexOf(t)){var s=i(n+a[1].split(t)[1]);e.setAttribute(o,"url("+s+")")}}})})}function a(){var e=document.getElementsByTagName("base")[0],t=window.location.href.split("#")[0],n=e&&e.href;this.urlPrefix=n&&n!==t?t+p:p;var i=new s;i.sniff(),this.browser=i.browser,this.content=[],"ie"!==this.browser.name&&n&&window.addEventListener("spriteLoaderLocationUpdated",function(e){var t=this.urlPrefix,n=e.detail.newUrl.split(p)[0]+p;if(o(this.svg,t,n),this.urlPrefix=n,"firefox"===this.browser.name||"edge"===this.browser.name||"chrome"===this.browser.name&&this.browser.version[0]>=49){var i=r(document.querySelectorAll("use[*|href]"));i.forEach(function(e){var r=e.getAttribute(d);r&&0===r.indexOf(t)&&e.setAttributeNS(h,d,n+r.split(p)[1])})}}.bind(this))}var s=n(560),u=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke"],l="["+u.join("],[")+"]",c=/^url\((.*)\)$/,f=function(e){for(var t=e.querySelector("defs"),n=e.querySelectorAll("symbol linearGradient, symbol radialGradient, symbol pattern"),r=0,i=n.length;i>r;r++)t.appendChild(n[r])},p="#",d="xlink:href",h="http://www.w3.org/1999/xlink",m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="'+h+'"',g="</svg>",v="{content}";a.styles=["position:absolute","width:0","height:0","visibility:hidden"],a.spriteTemplate=m+' style="'+a.styles.join(";")+'"><defs>'+v+"</defs>"+g,a.symbolTemplate=m+">"+v+g,a.prototype.content=null,a.prototype.add=function(e,t){return this.svg&&this.appendSymbol(e),this.content.push(e),p+t},a.prototype.wrapSVG=function(e,t){var n=t.replace(v,e),r=(new DOMParser).parseFromString(n,"image/svg+xml").documentElement;return"ie"!==this.browser.name&&this.urlPrefix&&o(r,p,this.urlPrefix),r},a.prototype.appendSymbol=function(e){var t=this.wrapSVG(e,a.symbolTemplate).childNodes[0];this.svg.querySelector("defs").appendChild(t),"firefox"===this.browser.name&&f(this.svg)},a.prototype.toString=function(){var e=document.createElement("div");return e.appendChild(this.render()),e.innerHTML},a.prototype.render=function(e,t){e=e||null,t="boolean"==typeof t?t:!0;var n=this.wrapSVG(this.content.join(""),a.spriteTemplate);return"firefox"===this.browser.name&&f(n),e&&(t&&e.childNodes[0]?e.insertBefore(n,e.childNodes[0]):e.appendChild(n)),this.svg=n,n},e.exports=a},function(e,t,n){(function(t){"use strict";e.exports=n(585)(t||window||this)}).call(t,function(){return this}())},function(e,t){"use strict";e.exports=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){}]);
//# sourceMappingURL=lyra.js.map