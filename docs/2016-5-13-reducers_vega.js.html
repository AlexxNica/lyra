---

layout: post
title: "reducers/vega.js"
author: Admin
categories:

---


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint new-cap:0 */
'use strict';

var Immutable = require('immutable');

var actions = require('../constants/actions');

/**
 * This reducer handles whether to recreate the view from the lyra model.
 * @param {boolean} state - The existing model reparse value from the store
 * @param {Object} action - The dispatched action indicating how to modify
 * the reparse flag within the store.
 * @returns {boolean} The new state of the reparse flag
 */
function vegaInvalidateReducer(state, action) {
  if (typeof state === 'undefined') {
    return Immutable.Map({
      invalid: false,
      isParsing: false,
    });
  }

  if (action.type === actions.VEGA_INVALIDATE) {
    return state.set('invalid', action.value);
  }

  // All of these actions implicitly invalidate the view
  var invalidatingActions = [
    actions.CREATE_SCENE,
    actions.SIGNAL_INIT,
    actions.MARK_ADD,
    actions.MARK_DELETE,
    actions.RULES_ADD_SCALE_TO_GROUP,
    actions.RULES_ADD_LEGEND_TO_GROUP,
    actions.RULES_ADD_AXIS_TO_GROUP,
    actions.RULES_SET_PROPERTY,
    actions.RULES_DISABLE_PROPERTY,
    actions.RULES_RESET_PROPERTY
  ];
  if (invalidatingActions.indexOf(action.type) >= 0) {
    return state.set('invalid', true);
  }

  if (action.type === actions.VEGA_PARSE) {
    return state.merge({
      isParsing: action.value,
      // Toggle this back to false now that the parse is in progress (or done)
      invalid: false
    });
  }

  return state;
}

module.exports = vegaInvalidateReducer;
</code></pre>
        </article>
    </section>




<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu May 12 2016 11:01:08 GMT-0700 (PDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>



